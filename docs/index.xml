<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>SDTTTTT</title><link>https://sdttttt.github.io/</link><description>Recent content on SDTTTTT</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Thu, 10 Jun 2021 15:38:03 +0800</lastBuildDate><atom:link href="https://sdttttt.github.io/index.xml" rel="self" type="application/rss+xml"/><item><title>New PC</title><link>https://sdttttt.github.io/blog/about-mbp/</link><pubDate>Thu, 10 Jun 2021 15:38:03 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/about-mbp/</guid><description>
&lt;p>æœ€è¿‘å…¥æ‰‹äº†ä¸€å°äºŒæ‰‹çš„ 16 æ¬¾ MBP. é…ç½®æ˜¯ i7-6700|16G|è§†ç½‘è†œå±å¹•|512G ä»·æ ¼æ˜¯ 7000&lt;/p>
&lt;p>è´­ä¹°çš„æ—¶å€™æ˜¯å‘¨å››ï¼Œç¬¬äºŒå‘¨çš„æ˜ŸæœŸä¸€åˆ°çš„ã€‚
æ€»ç»“æ¥è¯´è¿™å°æœºå™¨çš„æƒ…å†µæ¯”æˆ‘æƒ³å¾—è¦å¥½ï¼Œå¤–å£³ä¸Šæœ‰ä¸€äº›ä½¿ç”¨ç—•è¿¹ï¼Œè¿™æŒºæ­£å¸¸ï¼Œæœºå™¨å±å¹•å’Œé”®ç›˜éƒ½æ˜¯å®Œå¥½çš„ï¼Œç¡¬ä»¶ä¹Ÿæ²¡æœ‰ç¼ºé™·ï¼Œé©±åŠ¨éƒ½å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚&lt;/p>
&lt;p>è¿˜æœ‰å……ç”µå¾ªç¯åªæœ‰ 1 æ¬¡ï¼Œä¹Ÿå°±æ˜¯åŸºæœ¬æ˜¯ 99 æ–°çš„æœºå™¨ã€‚
çœŸtmæ˜¯æ¡åˆ°å®äº†ã€‚&lt;/p>
&lt;p>è™½ç„¶è¿™ç©æ„æ˜¯16å¹´çš„æœºå™¨ï¼Œä¸è¿‡ä½¿ç”¨X OS 10.15.7ç‰ˆæœ¬è¿˜æ˜¯å¾ˆæµç•…çš„ã€‚æœ€æ–°çš„Big Surå°±ä¸å‡çº§äº†ï¼Œæ„Ÿè§‰ä¼šè¢«è´Ÿä¼˜åŒ–ã€‚&lt;/p>
&lt;p>å”¯ä¸€æ¯”è¾ƒæœ‰é—æ†¾çš„å°±æ˜¯MBPå‘çƒ­éƒ½æ˜¯è¿™ä¹ˆä¸¥é‡çš„ä¹ˆã€‚æ‰“å¼€ç½‘é¡µçœ‹ä¸€ä¼šè§†é¢‘ï¼Œé”®ç›˜é¢çš„é¢å¤´å°±å¼€å§‹å‘çƒ«ï¼Œæ‘¸ä¸Šå»æ„Ÿè§‰æœ‰60åº¦äº†ã€‚&lt;/p>
&lt;p>è¿™ä¸ªæ•£çƒ­çœŸçš„å¤§ä¸ˆå¤«ï¼Ÿ&lt;/p>
&lt;p>æœ€åè¯´è¯´æ„Ÿæƒ³å§ï¼Œå¤´ä¸€æ¬¡ç”¨è‹¹æœçš„äº§å“ï¼Œæ•´ä¸ªç¬”è®°æœ¬æ— è®ºæ˜¯ç¡¬ä»¶è¿˜æ˜¯è½¯ä»¶çš„è®¾è®¡åªèƒ½ç”¨ä¸€ä¸ªè¯æ¥å½¢å®¹ï¼š æ€§æ„Ÿã€‚&lt;/p></description></item><item><title>å®</title><link>https://sdttttt.github.io/blog/hong/</link><pubDate>Fri, 23 Apr 2021 16:18:21 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/hong/</guid><description>
&lt;p>å‰å‡ å¤©åœ¨Bä¹ä¸Šçœ‹åˆ°ä¸€ä¸ªé—®é¢˜&amp;hellip;ã€Šjavaæœ‰æ²¡æœ‰å®ï¼Ÿã€‹&lt;/p>
&lt;p>è¿™&amp;hellip;æˆ‘æƒ³äº†åŠå¤©ï¼Œè¿™ç§è¯­æ³•è§„åˆ™é—®é¢˜åŸºæœ¬ç™¾åº¦å°±èƒ½æ‰¾åˆ°ï¼Œè¿™&amp;hellip;&lt;/p>
&lt;p>javaä½œä¸ºè§£é‡Šå‹è¯­è¨€å®è‚¯å®šæ˜¯æ²¡æœ‰çš„&amp;hellip;è¿™é‡Œç¨å¾®è¯´ä¸€ä¸‹å®è¿™ä¸ªä¸œè¥¿çš„ä½œç”¨å§ã€‚&lt;/p>
&lt;p>C/C++ç­‰ç¼–è¯‘å‹è¯­è¨€ä¸€èˆ¬ä¸ºäº†è·¨å¹³å°ç¼–è¯‘çš„æ–¹ä¾¿æ€§ï¼Œè‚¯å®šä¼šåœ¨ä¸€äº›æ— æ³•è·¨å¹³å°çš„ä»£ç ä¸­ç¼–å†™å®ï¼Œå®ä¼šåœ¨ç¼–è¯‘æœŸå±•å¼€ä¸ä¼šå½±å“ç¨‹åºåœ¨æ‰§è¡Œæ—¶çš„æ€§èƒ½ã€‚&lt;/p>
&lt;p>å®å…·ä½“ä¼šæ€ä¹ˆå±•å¼€å°±è¦çœ‹å±•å¼€çš„æ¡ä»¶äº†ï¼Œæ¯”å¦‚åªæœ‰ç±»UNIXæ‰èƒ½ç”¨çš„å®ï¼Œæˆ–è€…é…åˆç¯å¢ƒå˜é‡å±•å¼€çš„å®ã€‚è¿˜æœ‰ä¸€äº›èƒ½èŠ‚çœä»£ç çš„å®ã€‚&lt;/p>
&lt;blockquote>
&lt;p>Rustçš„å®éå¸¸å˜æ€ï¼Œä½ ç”šè‡³å¯ä»¥ç”¨Rustçš„å®è‡ªå®šä¹‰ä¸€é—¨ç¼–ç¨‹è¯­è¨€&amp;hellip;&lt;/p>
&lt;/blockquote>
&lt;p>è§£é‡Šå‹è¯­è¨€åŸºæœ¬ä¸Šå±è”½äº†ä¸åŒå¹³å°ä¹‹é—´çš„ç»†èŠ‚ï¼Œè€Œä¸”æ²¡æœ‰ç¼–è¯‘æœŸï¼Œä¹Ÿå°±ä¸éœ€è¦å®è¿™ç§ä¸œè¥¿äº†ã€‚&lt;/p></description></item><item><title>Free Software</title><link>https://sdttttt.github.io/blog/free-software/</link><pubDate>Fri, 16 Apr 2021 11:26:17 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/free-software/</guid><description>
&lt;p>æœ€è¿‘æŠŠæˆ‘æ‰€æœ‰åœ¨githubä¸Šè½¯ä»¶çš„è®¸å¯è¯æ¢æˆäº†&lt;code>The Unlicense&lt;/code>. ä¸ºå•¥å‘¢..
è¿™ä¸ªå°±ä¸å¾—ä¸è¯´ä¸€ä¸‹å…³äºç†æŸ¥å¾·Â·é©¬ä¿®Â·æ–¯æ‰˜æ›¼çš„ä¸€ä¸ªæ•…äº‹..&lt;/p>
&lt;p>ç†æŸ¥å¾·Â·é©¬ä¿®Â·æ–¯æ‰˜æ›¼å¯ä»¥è¯´æ˜¯GNUçš„é¢†è¢–. åˆ«å’Œæˆ‘è¯´ä½ ä¸çŸ¥é“GNUæ˜¯ä»€ä¹ˆ.. å¦‚æœä½ ä¸çŸ¥é“ä¹Ÿä¸ç”¨å»æŸ¥, ç­‰ä¼šä¼šè®²åˆ°..
ä¸Šä¸–çºª80å¹´ä»£, é»‘å®¢æ–‡åŒ–è¢«èµ„æœ¬ä¸»ä¹‰ä¾µèš€, è¯ç”Ÿäº†å¾ˆå¤šä¸“åˆ©è½¯ä»¶, åœ¨é»‘å®¢ç¤¾åŒºé‡Œæœ‰ç›¸å½“ä¸€éƒ¨åˆ†çš„äººéƒ½æµå¤±äº†, åº”è¯¥è¯´æ˜¯è¢«æŒ–èµ°äº†.&lt;/p>
&lt;blockquote>
&lt;p>è¿™ä¸ªé»‘å®¢çš„æ„æ€æ˜¯è®¡ç®—æœºæŠ€æœ¯ä¸“å®¶,ç‹‚çƒ­çˆ±å¥½è€….&lt;/p>
&lt;/blockquote>
&lt;p>æ–¯æ‰˜æ›¼ä¸ºäº†æŠ—è¡¡ä¸“åˆ©è½¯ä»¶, å°±åˆ›å»ºäº†GNUè®¡åˆ’. GNUåœ¨ç™¾ç§‘ä¸Šä¹Ÿèƒ½çœ‹åˆ°, æ˜¯ä¸€å¥—å…¼å®¹äºUNIXçš„æ“ä½œç³»ç»Ÿ.
å†…éƒ¨åŒ…å«äº†æ‰€æœ‰GNUçš„ä¸€ç³»åˆ—è‡ªç”±è½¯ä»¶.&lt;/p>
&lt;p>è¿™é‡Œå°±ä¸å¾—ä¸æGPLè¿™ä¸ªåè®®äº†, è¿™ä¸ªåè®®å¯ä»¥è¯´æ˜¯ä¸€ä¸ªè‡ªç”±è½¯ä»¶çš„æç«¯. ç”¨ç®€å•çš„è¯æ¥è¯´å°±æ˜¯ &lt;strong>å¼ºåˆ¶å¼€æº&lt;/strong>, ç”¨äº†GPLåè®®è½¯ä»¶çš„æºä»£ç , ä½ åç»­å‘å¸ƒä¹Ÿå¿…é¡»æ˜¯å¼€æºçš„, å°±æ˜¯ä¸€ç§å¼ºåˆ¶çš„åˆ†äº«ç²¾ç¥.&lt;/p>
&lt;p>æˆ‘ä¹‹å‰ä½¿ç”¨çš„æ˜¯MITåè®®, å®ƒæ²¡æœ‰ä»¥ä¸Šçš„é™åˆ¶, ä½ å¯ä»¥é€‰æ‹©é—­æº. ä½†æ˜¯éœ€è¦ä¿æŒåŸä½œè€…ç‰ˆæƒ.&lt;/p>
&lt;p>äº‹å®ä¸Š.. æˆ‘æ ¹æœ¬ä¸éœ€è¦ç‰ˆæƒè¿™ä¸ªä¸œè¥¿, åªè¦ç”¨æˆ‘çš„ä»£ç ,å‡ºäº†äº‹åˆ«æŠŠè´£ä»»æ¨ç»™æˆ‘å°±è¡Œ. æ‰€ä»¥æˆ‘æœ€åé€‰æ‹©äº† &lt;code>The Unlicense&lt;/code>è¿™ä¸ªåè®®, è¿™ä¸ªåè®®åªæœ‰ä¸€æ¡å…è´£.å…¶ä»–å®Œå…¨ä¸ç®¡, æœ‰ç‚¹çˆ½.&lt;/p></description></item><item><title>About Rust</title><link>https://sdttttt.github.io/blog/about-rust/</link><pubDate>Fri, 09 Apr 2021 17:09:19 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/about-rust/</guid><description>
&lt;p>Rustè¿™ä¸ªè¯­è¨€æ˜¯æˆ‘å¤§æ¦‚å»å¹´å¹´ä¸­å­¦çš„, è™½ç„¶ä¸€åªåœ¨ç”¨, éƒ½æ²¡è¯„ä»·è¿™ä¸ªè¯­è¨€, è¿™æ¬¡æœ‰ç‚¹ç©ºå¯ä»¥ç¨å¾®è¯´ä¸€ä¸‹..&lt;/p>
&lt;p>æœ‰äº›äººè§‰å¾—Rustå¾ˆéš¾, ç¡®å®, æˆ‘ä¸åé©³, ä½†æ˜¯ä¹Ÿå°±èµ·æ­¥æ¯”è¾ƒéš¾.&lt;/p>
&lt;p>ç¼–ç¨‹èŒƒå¼æ¯”èµ·C++/JAVAå…¥é—¨å°±å¤šå‡ºä¸€å¤§æˆª, ä¸€å¤§å †æ¦‚å¿µå¾€è„‘å­é‡ŒçŒ, æ‰€æœ‰æƒ, æ™ºèƒ½æŒ‡é’ˆç­‰ä¹‹ç±»çš„. è¿˜æœ‰ä¸€å †èŠ±é‡Œèƒ¡å“¨çš„è¯­æ³•.&lt;/p>
&lt;p>ä½†æ˜¯ä¹ æƒ¯ä¹‹å, åŸºæœ¬å°±èƒ½ä½“ä¼šåˆ°å†™Rustçš„å¿«ä¹äº†, æœ‰ä¸€ä¸ªéå¸¸ä¸¥å‰çš„ç¼–è¯‘å™¨~~(æŠ–Mé”¤çŸ³)~~, èƒ½æä¾›éå¸¸å‹å–„çš„ç¼–è¯‘é”™è¯¯å’ŒTUIæç¤º, è¿˜æœ‰ä¸€æ•´å¥—,
å¥½ç”¨åˆ°çˆ†ç‚¸çš„å·¥å…·é“¾, ä½†æ˜¯æµ‹è¯•è¦†ç›–è¿˜ä¸å¤ªè¡Œ.&lt;/p>
&lt;p>ç”±äºæ˜¯ç³»ç»Ÿçº§è¯­è¨€, æ€§èƒ½è‡³å°‘è‚¯å®šæ¯”Javaè¿™ç§è§£é‡Šæ€§å¼º, æ‰€ä»¥åŸºæœ¬ä¸æ€•ä½ æŠŠæ€§èƒ½å†™çš„ç¨€çƒ‚.
å†…å­˜æ³„æ¼ä¸å­˜åœ¨çš„, ç¼–è¯‘å™¨ä¼šé­ç­–ä½ . æ”¯æŒå¹³å°ä¹Ÿå¾ˆå¤š, ä¸æ€•ä½ æåµŒå…¥å¼, å†™æ³•å¾ˆç½—å—¦? äº‹å®ä¸ŠRusté‡Œæœ‰å¾ˆå¤šçš„è¯­æ³•ç³–, åŸºæœ¬ä¸ä¼šå†™çš„å¾ˆå¤š.&lt;/p></description></item><item><title>Go Unsafe</title><link>https://sdttttt.github.io/blog/go-unsafe/</link><pubDate>Thu, 08 Apr 2021 17:26:07 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/go-unsafe/</guid><description>
&lt;p>çœ‹äº†ä¸€äº›å…³äºunsafeåŒ…çš„æ–‡ç« ,é•¿è¯çŸ­è¯´:&lt;/p>
&lt;p>unsafe.Pointerå°±æ˜¯ä¸€ä¸ªçº¯æŒ‡é’ˆ, å®ƒå¾ˆèªæ˜, å¦‚æœå¯¹è±¡æ”¹å˜äº†åœ°å€å®ƒä¹Ÿä¼šè‡ªåŠ¨æ”¹å˜.å¹¶ä¸”ä¿æŒå¯¹å¯¹è±¡çš„å¼•ç”¨, è¿™æ ·å¯¹è±¡ä¸ä¼šè¢«å›æ”¶.&lt;/p>
&lt;p>uintptrå°±æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¤§çš„æ•´å‹, èƒ½å®¹ä¸‹ä»»ä½•æŒ‡é’ˆåœ°å€, ä½†æ˜¯è¿™ä¸ªä¸ä¼šè·Ÿéšå¯¹è±¡æ”¹å˜åœ°å€&amp;hellip;è€Œä¸”å¯¹è±¡è¿˜ä¼šè¢«å›æ”¶&amp;hellip;&lt;/p></description></item><item><title>Log 20</title><link>https://sdttttt.github.io/blog/log-20/</link><pubDate>Thu, 08 Apr 2021 14:22:05 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/log-20/</guid><description>
&lt;p>æœ€è¿‘å†™äº†ä¸€ä¸ªæ–°çš„æ•°æ®æ”¶é›†çš„æœåŠ¡å™¨è½¯ä»¶, æˆ‘å«ä»–Huck, ä¸ºå•¥å‘¢&amp;hellip;
æˆ‘å¾ˆå–œæ¬¢ä¸€éƒ¨å«ä¼ é¢‚ä¹‹ç‰©çš„ç•ª, å¯æƒœä¸ºç”·ä¸»é…éŸ³çš„å£°ä¼˜ä»¥åŠå»ä¸–äº†, å¯¼è‡´ç»­ä½œæ¢äº†å£°ä¼˜.&lt;/p>
&lt;p>å‰å‡ å¤©åˆšåˆšçœ‹åˆ°æ¢å£°ä¼˜çš„æ¶ˆæ¯å°±å¾ˆéš¾å—, æˆ‘è¿˜æŒºå–œæ¬¢ä¸ºå“ˆå…‹åŸ¹å…»çš„å¯å”, å¯æƒœé”•&amp;hellip; æ‰€ä»¥å–äº†è¿™ä¸ªåå­—çºªå¿µä¸€ä¸‹.&lt;/p>
&lt;hr>
&lt;p>æœ€è¿‘ä¹Ÿå¼€å§‹å¿™èµ·æ¥äº†, å¸Œæœ›ä¸‹ä¸ªæœˆå¥½ä¸€ç‚¹.&lt;/p></description></item><item><title>Log 19</title><link>https://sdttttt.github.io/blog/log-19/</link><pubDate>Fri, 26 Mar 2021 10:02:59 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/log-19/</guid><description/></item><item><title>Log 18</title><link>https://sdttttt.github.io/blog/log-18/</link><pubDate>Wed, 24 Mar 2021 16:33:21 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/log-18/</guid><description>
&lt;p>æœ€è¿‘æœ‰å¥½æ¶ˆæ¯å’Œåæ¶ˆæ¯ï¼š&lt;/p>
&lt;p>åæ¶ˆæ¯å°±æ˜¯å·¥ä½œåœ°ç‚¹æ”¹äº†ï¼Œç°åœ¨æ¯å¤©æ—©ä¸Šéƒ½è¦åš1å°æ—¶åœ°é“æ‰èƒ½åˆ°å…¬å¸ï¼Œå•Šå•Šå•Šï¼Œå¥½æƒ³æ¢æˆé‡Œå®¶é‡Œè¿‘ä¸€ç‚¹çš„åœ°æ–¹é”•&amp;hellip;è¿˜æœ‰å°±æ˜¯ä¸Šç­æ—¶é—´è¿˜tmææ—©äº†ï¼Œæˆ‘tm&amp;hellip;&lt;/p>
&lt;p>å¥½æ¶ˆæ¯å°±æ˜¯åŸæ¥å·¥ä½œçš„åœ°ç‚¹å¤ªæŒ¤äº†ï¼Œè¿™æ¬¡ç»ˆäºæœ‰äº†ç‹¬ç«‹çš„åŠå…¬æ¡Œï¼Œæœ‰ç‚¹çˆ½ï¼Œæœ€è¿‘ä¹Ÿå¼€å§‹å¯Œèµ·æ¥äº†ï¼Œè¯¥ç»™å®¶é‡Œçš„ç”µè„‘æ¢å¤–è®¾äº†ã€‚&lt;/p></description></item><item><title>Log 17</title><link>https://sdttttt.github.io/blog/log-17/</link><pubDate>Mon, 22 Mar 2021 11:16:33 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/log-17/</guid><description>
&lt;p>æœ€è¿‘å·¥ä½œè™½ç„¶å¿™ï¼Œä½†æ˜¯å¼ºæ‘¸è¿˜æ˜¯èƒ½æ‘¸å‡ºä¸€äº›æ—¶é—´æ¥ï¼ŒGRCåˆæœ‰äº†æ–°çš„éœ€æ±‚ï¼Œè¦å¢åŠ GPGçš„æäº¤ç­¾åã€‚&lt;/p>
&lt;p>ä¸€å¼€å§‹æˆ‘ä»¥ä¸ºå¾ˆç®€å•ï¼Œå› ä¸ºçœ‹èµ·æ¥æˆ‘åŸæœ¬ä½¿ç”¨çš„&lt;code>git2-rs&lt;/code>è¿™ä¸ªåº“æä¾›äº†ç­¾åçš„å®ç°ï¼Œæœ‰ä¸€ä¸ª&lt;code>commit_sign&lt;/code>æ–¹æ³•ã€‚&lt;/p>
&lt;p>å®é™…è¿™ä¸ªæ–¹æ³•é‡Œé¢æ²¡æœ‰å®ç°ç­¾åçš„ç”Ÿæˆï¼Œæ²¡åŠæ³•åªå¥½å»å¼€æºç¤¾åŒºé‡Œæ‰¾æ‰¾äº†ï¼Œissueé‡Œæœ‰æœ‰å¥½å¿ƒäººæä¾›äº†é“¾æ¥ï¼Œæˆ‘å¤§æ¦‚çœ‹äº†çœ‹ï¼Œ&lt;/p>
&lt;p>æœ€åæŠŠç›®å…‰è½¬å‘åˆ°äº†&lt;code>gpgme&lt;/code>è¿™ä¸ªåº“ä¸Šï¼Œä½†æ˜¯è¿™ä¸ªç©æ„æ˜¯ä¸€ä¸ªå¯¹FFIçš„åŒ…è£…åº“ï¼Œå¹¶ä¸æ˜¯åŸç”Ÿå®ç°ï¼Œç¼–è¯‘çš„æ—¶å€™éœ€è¦ä¾èµ–ä¸€äº›C/C++çš„é“¾æ¥åº“ã€‚æˆ‘ä½›äº†ã€‚&lt;/p>
&lt;p>è¿™å°±æ„å‘³è¿™åœ¨Windowsä¸Šçš„è¿è¡Œä¼šå‡ºç°éº»çƒ¦ã€‚åæ¥åˆæ‰¾äº†åˆ«çš„åº“ï¼Œä½†æ˜¯éƒ½å¾ˆåº•å±‚ï¼ŒAPIæ–‡æ¡£çœ‹çš„æˆ‘ä¸€è„¸æ„£é€¼ã€‚
è¿™ä¸ªé—®é¢˜ï¼Œè¿˜çœŸçš„å¾—æ‹–ä¸€æ®µæ—¶é—´ã€‚&lt;/p>
&lt;p>å¸Œæœ›æœ‰å¸¦ä½¬èƒ½æä¸€ä¸ªRuståŸç”Ÿåˆæ–¹ä¾¿çš„GPGç­¾ååº“. å¦‚æœå®åœ¨æ²¡æœ‰ï¼Œæˆ‘äº²è‡ªä¸Šä¹Ÿä¸æ˜¯ä¸è¡Œ&amp;hellip;emmmm (é€ƒ)&lt;/p></description></item><item><title>Log 16</title><link>https://sdttttt.github.io/blog/log-16/</link><pubDate>Tue, 16 Mar 2021 16:52:51 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/log-16/</guid><description>
&lt;p>ç»™Blogæ¢ä¸ªä¸€ä¸ªé…è‰², ä¹‹å‰çš„é…è‰²å¤ªåŸç”ŸHTML, ä¸‘çš„æˆ‘éƒ½æœ‰ç‚¹çœ‹ä¸ä¸‹å»äº†&amp;hellip;&lt;/p>
&lt;p>æ–°çš„ä¸»é¢˜æ˜¯themes.gohugo.ioä¸Šéšä¾¿æŒ‘çš„, çœ‹é¡ºçœ¼å°±ç”¨ä¸Šäº†. è®²çš„å°±æ˜¯çœ¼ç¼˜.Emm..&lt;/p>
&lt;p>å…¶å®æˆ‘è¿˜æ˜¯æ¯”è¾ƒå–œæ¬¢çº¯è‰²çš„ä¸»é¢˜. æœ‰&lt;code>MACOS&lt;/code>æ„Ÿè§‰çš„é‚£ç§emm..&lt;/p></description></item><item><title>Log 15</title><link>https://sdttttt.github.io/blog/log-15/</link><pubDate>Thu, 04 Mar 2021 16:58:54 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/log-15/</guid><description>
&lt;p>å¥½tmå¿™, ä½†æ˜¯åˆå¥½tmæ— èŠ.&lt;/p></description></item><item><title>Log 14</title><link>https://sdttttt.github.io/blog/log-14/</link><pubDate>Tue, 02 Mar 2021 10:36:48 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/log-14/</guid><description>
&lt;p>æœ€è¿‘ä¸æƒ³è®©æœåŠ¡å™¨å¤šä½™çš„èµ„æºåƒç°, å°±åœ¨æœåŠ¡å™¨ä¸Šåšäº†ç§, æä¾›ä¸€äº›ä¸‹è½½èµ„æºçš„é€Ÿåº¦.
ä¸è¿‡å¸¦å®½ç¡®å®æ˜¯å¤ªå°äº†, è¿™ä¸ªç©æ„æ€»å…±å°±1må¸¦å®½, å¦‚æœè¾¹åšç§æˆ‘å†è¾¹ç”¨RSSçš„è¯,
è¿™ä¸ªé€Ÿåº¦æˆ‘éƒ½æ€€ç–‘è¿™ç©æ„æ˜¯ä¸æ˜¯doneäº†?&lt;/p>
&lt;p>æ‰€ä»¥å¹³æ—¶ç™½å¤©åšç§çš„é€Ÿåº¦åªèƒ½é™åˆ¶å†&lt;code>100KB/s&lt;/code>ä»¥ä¸‹, ä¸å¦‚RSSçš„é€Ÿåº¦çœŸçš„å¤ªæ„Ÿäºº.
æ™šä¸Šçš„è¯, é¾Ÿé€Ÿæ¨¡å¼å°±ä¼šè§£é™¤, åšç§é€Ÿåº¦èƒ½æå‡å¤§æ¦‚3-4å€çš„æ ·å­.&lt;/p>
&lt;p>å¦‚æœæœ‰æœºä¼šè¿˜æ˜¯æƒ³ç™½å«–å¸¦å®½å¤§ä¸€ç‚¹çš„æœåŠ¡å™¨é”•.&lt;/p></description></item><item><title>RSS å¥½è€¶!</title><link>https://sdttttt.github.io/blog/new-rss/</link><pubDate>Sat, 20 Feb 2021 11:13:45 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/new-rss/</guid><description>
&lt;p>æœ€è¿‘è¿·ä¸Šäº†RSSè¿™ç§è·å–ä¿¡æ¯çš„æ–¹å¼, å¹³æ—¶è®¿é—®å¤šä¸ªç½‘ç«™æ¥è·å–ä¿¡æ¯çš„æ–¹å¼å®å±ä½æ•ˆç‡, è€Œä¸”å¤ªç¢äº†, ä¿ºè¿™ç§è€å¹´äººå°±ç»å¸¸å¿˜è®°.&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>RSS:&lt;/strong> ç®€æ˜“ä¿¡æ¯èšåˆï¼ˆä¹Ÿå«èšåˆå†…å®¹ï¼‰æ˜¯ä¸€ç§åŸºäºXMLæ ‡å‡†ï¼Œåœ¨äº’è”ç½‘ä¸Šè¢«å¹¿æ³›é‡‡ç”¨çš„å†…å®¹åŒ…è£…å’ŒæŠ•é€’åè®®ã€‚RSS(Really Simple Syndication)æ˜¯ä¸€ç§æè¿°å’ŒåŒæ­¥ç½‘ç«™å†…å®¹çš„æ ¼å¼ï¼Œæ˜¯ä½¿ç”¨æœ€å¹¿æ³›çš„XMLåº”ç”¨ã€‚RSSæ­å»ºäº†ä¿¡æ¯è¿…é€Ÿä¼ æ’­çš„ä¸€ä¸ªæŠ€æœ¯å¹³å°ï¼Œä½¿å¾—æ¯ä¸ªäººéƒ½æˆä¸ºæ½œåœ¨çš„ä¿¡æ¯æä¾›è€…ã€‚å‘å¸ƒä¸€ä¸ªRSSæ–‡ä»¶åï¼Œè¿™ä¸ªRSS Feedä¸­åŒ…å«çš„ä¿¡æ¯å°±èƒ½ç›´æ¥è¢«å…¶ä»–ç«™ç‚¹è°ƒç”¨ï¼Œè€Œä¸”ç”±äºè¿™äº›æ•°æ®éƒ½æ˜¯æ ‡å‡†çš„XMLæ ¼å¼ï¼Œæ‰€ä»¥ä¹Ÿèƒ½åœ¨å…¶ä»–çš„ç»ˆç«¯å’ŒæœåŠ¡ä¸­ä½¿ç”¨ï¼Œæ˜¯ä¸€ç§æè¿°å’ŒåŒæ­¥ç½‘ç«™å†…å®¹çš„æ ¼å¼ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>ç›®å‰ä½¿ç”¨RSSæœ‰ä¸€ä¸ªå¾ˆé˜´éœ¸çš„ä¸œè¥¿, å«åš&lt;code>RSSHub&lt;/code>, è¿™ä¸ªç©æ„èƒ½å¾ˆå¥½è§£å†³ä½ æ‰¾RSSè®¢é˜…çš„éº»çƒ¦.&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>RSSHub&lt;/strong> æ˜¯ä¸€ä¸ªå¼€æºã€ç®€å•æ˜“ç”¨ã€æ˜“äºæ‰©å±•çš„ RSS ç”Ÿæˆå™¨ï¼Œå¯ä»¥ç»™ä»»ä½•å¥‡å¥‡æ€ªæ€ªçš„å†…å®¹ç”Ÿæˆ RSS è®¢é˜…æºã€‚RSSHub å€ŸåŠ©äºå¼€æºç¤¾åŒºçš„åŠ›é‡å¿«é€Ÿå‘å±•ä¸­ï¼Œç›®å‰å·²é€‚é…æ•°ç™¾å®¶ç½‘ç«™çš„ä¸Šåƒé¡¹å†…å®¹.&lt;/p>
&lt;/blockquote>
&lt;p>ä¸è¿‡è¿™ç©æ„æ˜¯ä¸€ä¸ªæœåŠ¡å™¨è½¯ä»¶, éœ€è¦å•ç‹¬éƒ¨ç½²çš„. å®˜æ–¹æä¾›çš„demoæœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†çš„&lt;code>RSS Feed&lt;/code>éƒ½æ˜¯æ— æ•ˆçš„. è¿™ä¸¤å¤©æ­£å¥½è‡ªå»ºäº†ä¸€ä¸ª&lt;code>RSSHub&lt;/code>, åœ¨&lt;a href="http://118.25.6.84/">è¿™é‡Œ&lt;/a>.&lt;/p>
&lt;p>å¦‚æœæœ‰éœ€è¦å¯ä»¥ä½¿ç”¨è¿™ä¸ªåœ°å€æ¥ä»£æ›¿å®˜æ–¹æä¾›çš„demo. è‡³å°‘ä¸€å¹´å†…éƒ½ä¸ä¼šå¤±æ•ˆğŸ¶&lt;/p>
&lt;blockquote>
&lt;p>å°å£°BB: å®é™…ä¸Šæˆ‘çš„blogä¹Ÿæ˜¯æœ‰rssçš„, ä½ èƒ½æ‰¾åˆ°ä¹ˆ?&lt;/p>
&lt;/blockquote></description></item><item><title>è®°å½•ä¸€æ¬¡Gradleæ„å»ºçš„å›°éš¾</title><link>https://sdttttt.github.io/blog/gradle-build-for-idiotc4t/</link><pubDate>Fri, 05 Feb 2021 10:57:31 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/gradle-build-for-idiotc4t/</guid><description>
&lt;p>å—@idiotc4tæ‰€æ‰˜, æˆ‘æ‹¿åˆ°äº†ä¸€ä¸ªJavaé¡¹ç›®, ç›®çš„æ˜¯è¦æŠŠè¿™ç©æ„ç¼–è¯‘å‡ºæ¥, æœ€åˆæˆ‘è¿˜ä»¥ä¸ºå’Œä»¥å‰çš„Javaé¡¹ç›®ç±»ä¼¼,
åªè¦&lt;code>mvn build&lt;/code> å°±èƒ½ä¸€äº†ç™¾äº†, æ²¡æƒ³åˆ°è¿™æ¬¡æ‹¿åˆ°çš„æ˜¯ä¸€ä¸ªä½¿ç”¨gradleæ„å»ºçš„é¡¹ç›®.&lt;/p>
&lt;blockquote>
&lt;p>gradleçš„å‡ºç°æ¯”mavenæ™š, å®ƒä»¬éƒ½æ˜¯ç”¨æ¥æ„å»ºè¿è¡Œåœ¨JVMä¸Šçš„åº”ç”¨ä½¿ç”¨çš„, gradleå¯ä»¥ä½¿ç”¨ç¼–ç¨‹è¯­è¨€æ¥è‡ªå®šä¹‰ä½ çš„æ„å»ºæµç¨‹, ç±»ä¼¼Cçš„makefile(è¿™ä¸ªæ¯”å–»ä¸å¤ªå¥½å…¶å®), æˆ–è€…æ˜¯JavaScriptçš„gulp. gradleè§£å†³äº†mavençš„ä¸€äº›ç‰¹ç‚¹, æ¯”å¦‚xmlçš„é…ç½®ç¹ç, çœ‹ç€å°±å¤´å¤§, ä»¥åŠæ„å»ºæ­¥éª¤çš„çµæ´»æ§åˆ¶. æ€»ä¹‹å¾ˆç‰›é€¼å°±æ˜¯äº†, ä¹Ÿæ¯”è¾ƒéš¾ä¸Šæ‰‹.&lt;/p>
&lt;/blockquote>
&lt;p>ç”±äºæˆ‘ä»¥å‰ä½¿ç”¨è¿‡ä¸€æ®µæ—¶é—´çš„gradle, æ‰€ä»¥æˆ‘çŸ¥é“ç”¨gradleæ‰“jaråŒ…çš„å›°éš¾. (gradleè¿™ä¸ªå·¥å…·é€šå¸¸éƒ½æ˜¯ç»™Androidå¼€å‘è€…ç”¨çš„, é»˜è®¤æ²¡æœ‰æä¾›æ‰“æˆJaråŒ…çš„é€‰é¡¹, æ‰€ä»¥æ‰“å‡ºæ¥ä»€ä¹ˆåŒ…, å¾—çœ‹ç¼˜åˆ†.)&lt;/p>
&lt;p>å½“æˆ‘è¿è¡Œ&lt;code>gradle build&lt;/code>å, &lt;strong>å…‰é€Ÿ&lt;/strong>æ„å»ºå®Œæˆ, æˆ‘å®šç¥ä¸€çœ‹, æ²¡æœ‰å·¥ç¨‹æ–‡ä»¶ç›®å½•, å€’æ˜¯æœ‰ä¸€ä¸ªjaråŒ… ,è¿™ä¸ªjaråŒ…å°±14KB, å¥½å®¶ä¼™, è‚¯å®šæ²¡æ„å»ºæˆåŠŸ. (æ­£å¸¸çš„javaç¨‹åºç»å¯¹ä¸ä¼šè¿™ä¹ˆå°, ä¸€èˆ¬è‚¯å®šæ˜¯1MBä»¥ä¸Š) è¾“å…¥&lt;code>java -jar&lt;/code>ä¸€çœ‹, æœç„¶:&lt;/p>
&lt;pre>&lt;code>...jar: æ²¡æœ‰ä¸»æ¸…å•å±æ€§
&lt;/code>&lt;/pre>&lt;p>æ€»ä¹‹æˆ‘åœ¨ç½‘ä¸ŠæŸ¥äº†åŠå¤©éƒ½æ²¡å‘ç°è§£å†³æ–¹æ³•. æœ€åæŠŠç›®å…‰è½¬å‘ä»£ç , æœ€åå‘ç°åœ¨ä»£ç ä¸­éƒ½æ²¡æœ‰å£°æ˜åŒ…è·¯å¾„&amp;hellip;&lt;/p>
&lt;blockquote>
&lt;p>(å˜¶&amp;hellip;.è¿™å®åœ¨READMEé‡Œæ˜¯æ€ä¹ˆæ‰“åŒ…çš„???æˆ‘æ€€ç–‘æœ‰è¿™Bç•™äº†ä¸€æ‰‹)&lt;/p>
&lt;/blockquote>
&lt;p>æœ€åç”¨å®‡å®™ç¬¬ä¸€IDE(IDEA)é‡æ„äº†æ•´ä¸ªåŒ…çš„ä»£ç , è¡¥ä¸Šäº†åŒ…è·¯å¾„. å†æ¬¡å°è¯•&lt;code>gradle build&lt;/code>,ç»ˆäºçœ‹åˆ°äº†å·¥ç¨‹æ–‡ä»¶.&lt;/p>
&lt;p>æ€»ä¹‹, è¿˜å¥½è€å­æŠ€é«˜ä¸€ç­¹.&lt;/p>
&lt;p>å†™å®Œäº†, æ‘¸äº†.&lt;/p></description></item><item><title>èŠ‚æµä¸é˜²æŠ–</title><link>https://sdttttt.github.io/blog/js-1/</link><pubDate>Mon, 18 Jan 2021 16:49:35 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/js-1/</guid><description>
&lt;p>é—²æ¥æ— äº‹åœ¨ç½‘ä¸Šç¿»ä¸€äº›å…³äº Javascript çš„ä¸€äº›æåŸºæŠ€å·§ï¼Œå°±å‘ç°äº†èŠ‚æµä¸é˜²æŠ–è¿™ä¸¤ç§è®¾è®¡æ¨¡å¼ã€‚&lt;/p>
&lt;p>ä¸Šä¸ªæ˜ŸæœŸåœ¨ç¼–å†™æœç´¢æ¡†çš„æ—¶å€™å°±å·²ç»å†™è¿‡ç±»ä¼¼çš„ä»£ç  &lt;em>ï¼ˆæœç´¢æ¡†è¾“å…¥å…³é”®è¯ä¼šå®æ—¶å»æœåŠ¡å™¨ä¸Šæœç´¢ï¼Œè€ƒè™‘åˆ°æœåŠ¡å™¨å‹åŠ›å°±æŠŠä»£ç åŠ äº†é™åˆ¶ï¼Œæ¯ 500ms æœ€å¤šæœç´¢ä¸€æ¬¡ï¼Œå®é™…ä¸Šè¿™å°±æ˜¯ç±»ä¼¼é˜²æŠ–çš„è®¾è®¡ï¼Œåªæ˜¯æˆ‘è¿˜ä¸çŸ¥é“è¿™ä¸ªå«é˜²æŠ–&amp;hellip;ï¼‰&lt;/em>&lt;/p>
&lt;p>ä¸‹é¢æ˜¯æœç´¢æ¡†çš„é™åˆ¶ä»£ç ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="nx">watch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">searchText&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">newVal&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">clearTimeout&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">searchTimer&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">searchTimer&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">setTimeout&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="c1">//...éœ€è¦é™åˆ¶çš„é€»è¾‘
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="p">),&lt;/span>
&lt;span class="mi">500&lt;/span>
&lt;span class="p">);&lt;/span>
&lt;span class="p">});&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åŸç†éå¸¸ç®€å•ï¼Œé€šè¿‡å®šæ—¶å™¨å®ç°ï¼Œä¸€æ—¦ç°æœ‰çŠ¶æ€æ”¹å˜å°±è¯´æ˜æœ‰æ–°çš„è¾“å…¥ï¼Œç„¶åæ¸…é™¤è€çš„å®šæ—¶å™¨ï¼Œæ–°è®¾ç½®å®šæ—¶å™¨ã€‚&lt;/p>
&lt;hr>
&lt;p>ä»Šå¤©åœ¨ç½‘ä¸Šå†²æµªåˆå­¦åˆ°äº†ä¸€ç§æ–°çš„è®¾è®¡ï¼š&lt;strong>èŠ‚æµ&lt;/strong>&lt;/p>
&lt;p>ç›´æ¥çœ‹ä»£ç å§ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="nx">watch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">searchText&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">newVal&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">isStop&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">isStop&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nx">setTimeout&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">//...éœ€è¦é™åˆ¶çš„é€»è¾‘
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">isStop&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">),&lt;/span>
&lt;span class="mi">500&lt;/span>
&lt;span class="p">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>emmmï¼Œä¸€å¼€å§‹çœ‹äº†åŠå¤©ï¼Œå®é™…ä¸Šçœ‹æ‡‚ä¹‹åèŠ‚æµæ¯”é˜²æŠ–æ›´åŠ ç®€å• &lt;em>ï¼ˆå¥½å§ï¼Œçœ‹äº†å‡ éå…¶å®å‘ç°å·®ä¸å¤šï¼‰&lt;/em>&lt;/p>
&lt;p>åŸç†è¿˜æ˜¯ä¸€æ ·ç®€å•ï¼Œè®¡æ•°å™¨ç»“æŸå°†æ ‡å¿—ä½è®¾ç½®ä¸º falseï¼Œè¿™æ ·æ–°æ¥çš„è®¡æ—¶å™¨å°±èƒ½é€šè¿‡ï¼Œå¦‚æœæ²¡åˆ°é™åˆ¶æ—¶é—´å°±è¿›å…¥è¿™ä¸ªå‡½æ•°ä¼šè¢«æ ‡å¿—ä½æ‹¦ä½ï¼Œç›´æ¥è¿”å›ã€‚&lt;/p>
&lt;p>èŠ‚æµä¸»è¦ä½œç”¨å°±æ˜¯é™åˆ¶æ‰§è¡Œé¢‘ç‡ã€‚&lt;/p>
&lt;p>ç¡¬è¦è¯´é˜²æŠ–å’ŒèŠ‚æµçš„åŒºåˆ«ã€‚ã€‚ã€‚emmæˆ‘ä¹Ÿè¯´ä¸ä¸Šæ¥ï¼Œçœ‹åº”ç”¨åœºæ™¯å§ã€‚&lt;/p></description></item><item><title>Composition Api</title><link>https://sdttttt.github.io/blog/composition-api/</link><pubDate>Thu, 14 Jan 2021 10:29:36 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/composition-api/</guid><description>
&lt;p>æœ€è¿‘ä¸€ç›´åœ¨å†™ Vue, åœ¨å…¬å¸çš„é¡¹ç›®é‡Œä½¿ç”¨çš„æ˜¯&lt;code>Composition Api&lt;/code> + Vue2 çš„ç»„åˆ. &lt;em>(å› ä¸ºå…¬å¸é‡Œè€ƒè™‘åˆ°åŒäº‹çš„æŠ€èƒ½æ ‘, æ²¡æœ‰ç”¨vue3å’ŒTypescipt)&lt;/em>.&lt;/p>
&lt;p>CA æ˜¯ Vue3 è¿½åŠ çš„å…¨æ–° API. ç”¨åˆ° Vue2 é‡Œå¯èƒ½æœ‰ç‚¹æ€ªæ€ªçš„.&lt;/p>
&lt;p>ä¸è¿‡ CA æ˜¯ä»¥ Vue-Plugin çš„æ–¹å¼æä¾›çš„ API, æ‰€ä»¥ä½¿ç”¨èµ·æ¥éå¸¸æ–¹ä¾¿.
åŒæ—¶ä¹Ÿé¼“åŠ±æ›´å¤šäººä½¿ç”¨è¿™ä¸ªAPI.&lt;/p>
&lt;p>é¦–å…ˆæ˜¯å…³äºè¿™ä¸ªAPIçš„ä½¿ç”¨æ–¹å¼, ä»¥å‰çš„ä»£ç éœ€è¦å°†æ–¹æ³•å¸è½½methodåŒºå—ä¸­, æ¯ä¸ªå˜é‡å’Œæ–¹æ³•ä¹‹é—´çš„å…³ç³»å¾ˆæ¨¡ç³Šæš§æ˜§.&lt;br>
éœ€è¦å¼€å‘è€…è‡ªå·±å»æ‰¾å…³äºæ¯ä¸ªæ–¹æ³•å’Œå˜é‡ä¹‹é—´çš„å…³ç³», ç”¨CAä¹‹åå¯ä»¥å†™å‡ºç±»ä¼¼ReactHooké£æ ¼çš„ä»£ç .&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-typescript" data-lang="typescript">&lt;span class="c1">// OA (Option API åŸç‰ˆçš„APIæ˜¯è¿™æ ·ç§°å‘¼çš„)
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="p">{&lt;/span>
&lt;span class="nx">data&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">count&lt;/span>: &lt;span class="kt">1&lt;/span>
&lt;span class="p">},&lt;/span>
&lt;span class="nx">methods&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">sub&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">num&lt;/span>: &lt;span class="kt">number&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// ...
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="p">},&lt;/span>
&lt;span class="nx">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">num&lt;/span>: &lt;span class="kt">number&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// ...
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">// CA
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">count&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">ref&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">add&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">sub&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">useCount&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="nx">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">sub&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="kd">function&lt;/span> &lt;span class="nx">useCount&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">count&lt;/span>: &lt;span class="kt">Ref&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">number&lt;/span>&lt;span class="p">&amp;gt;)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kd">function&lt;/span> &lt;span class="nx">sub&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">num&lt;/span>: &lt;span class="kt">number&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// ...
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="p">},&lt;/span>
&lt;span class="kd">function&lt;/span> &lt;span class="nx">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">num&lt;/span>: &lt;span class="kt">number&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// ...
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">// å½“ç„¶ä½ ä¹Ÿå¯ä»¥åƒReactHooké‚£æ ·å†™ï¼Œ å®Œå…¨æ²¡æœ‰é—®é¢˜ï¼Œçœ‹ä½ çš„ä¸ªäººå£å‘³
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">count&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">add&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">sub&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">useCount&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nx">sub&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="kd">function&lt;/span> &lt;span class="nx">useCount&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">count&lt;/span>: &lt;span class="kt">number&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kr">const&lt;/span> &lt;span class="nx">count&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">ref&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">count&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="kd">function&lt;/span> &lt;span class="nx">sub&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">num&lt;/span>: &lt;span class="kt">number&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// ...
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="p">},&lt;/span>
&lt;span class="kd">function&lt;/span> &lt;span class="nx">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">num&lt;/span>: &lt;span class="kt">number&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// ...
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ç›®å‰å†™CAå¤§æ¦‚å°±æ˜¯è¿™æ ·ç¼–å†™çš„. æ ¹æ®ä¸€ä¸ªå“åº”æ•°æ®çš„å…³ç³»ç¼–å†™æ”¹å˜å®ƒçš„ä¸€ç³»åˆ—åŠ¨ä½œ.
è¿™æ ·é€»è¾‘æ‹†åˆ†çš„å¾ˆæ¸…æ¥š. æŸ¥çœ‹èµ·æ¥ä¹Ÿæ¯”è¾ƒæ–¹ä¾¿.&lt;/p>
&lt;hr>
&lt;p>ä¸è¿‡è¿™å¥—APIç›®å‰çš„ç¼ºç‚¹ä¹Ÿæ¯”è¾ƒæ˜æ˜¾, åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä»Vue2è¿‡æ¥çš„ç”¨æˆ·å¾ˆæ˜æ˜¾èƒ½æ„Ÿè§‰åˆ°,
åœ¨&lt;code>setup()&lt;/code>ç”±äºä¸èƒ½ä½¿ç”¨&lt;code>this&lt;/code>æ‰€ä»¥ä¼šæœ‰å¾ˆå¤šå¼€å‘ä¹ æƒ¯ä¸Šçš„éº»çƒ¦.&lt;/p>
&lt;p>&lt;strong>è¿™é‡Œè¯´ä¸ªå…³äºä½¿ç”¨thisä¸ŠæŒ‚è½½å¯¹è±¡çš„æ–¹æ³•.&lt;/strong> (ctxå‚æ•°ä¸è¯´äº†)&lt;/p>
&lt;ul>
&lt;li>
&lt;p>é¦–å…ˆå°±æ˜¯CAçš„åº“ä¸­æœ‰ä¸€ä¸ªå‡½æ•°,å«åš&lt;code>getCurrentInstall&lt;/code>. å¯ä»¥é€šè¿‡è¯¥å‡½æ•°è·å¾—å½“å‰ç»„ä»¶çš„å®ä¾‹. ä½¿ç”¨è¯¥å®ä¾‹ä¸Šä»£ç†çš„å¯¹è±¡å°±èƒ½æ§åˆ¶å„ç§&lt;code>this.$router&lt;/code>, &lt;code>this.$refs&lt;/code>æ–¹æ³•äº†.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç¬¬äºŒç§å¯ä»¥è®©ä½ ä½¿ç”¨&lt;code>this&lt;/code>, æŠŠåŠ¨ä½œå‡½æ•°æŒ‚è½½åˆ°æŸä¸ªè§†å›¾æŒ‰é’®ä¸Šçš„æ—¶å€™, åœ¨è¯¥åŠ¨ä½œå‡½æ•°é‡Œå°±å¯ä»¥ä½¿ç”¨&lt;code>this&lt;/code>å¯¹è±¡. ä¸Šé¢æœ‰æ­£å¸¸OAå¯ä»¥ä½¿ç”¨çš„æ‰€æœ‰&lt;code>this&lt;/code>ä¸ŠæŒ‚è½½çš„å¯¹è±¡.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>å¼€å‘é¡¹ç›®çš„æ—¶å€™è¿˜è¸©äº†å¾ˆå¤šå‘, ä¸è¿‡éƒ½æ˜¯ä¸€äº›æ™ºå•†é—®é¢˜&amp;hellip; æ¯”å¦‚JSçš„å¯¹è±¡ä¼ é€’ä¼ é€’çš„æ˜¯&lt;code>Reference&lt;/code>, åŸºæœ¬ç±»å‹æ˜¯&lt;code>Clone&lt;/code>. å› ä¸ºè¿™ä¸ªåŸå› æœ‰å‡ ä¸ªè§†å›¾ä¹‹é—´çš„æ•°æ®æ²¡æ³•å®æ—¶åŒæ­¥, å®³æˆ‘æµªè´¹äº†ä¸€ä¸ªä¸‹åˆ.&lt;/p>
&lt;h3 id="å…³äº-watcheffect">å…³äº watchEffect&lt;/h3>
&lt;p>è¿™ä¸ªå‡½æ•°çš„å®ç°å’ŒReact Hookä¸­çš„useEffectæœ‰å¼‚æ›²åŒå·¥ä¹‹å¦™,
ç›‘å¬å›è°ƒå‡½æ•°å†…ä¾èµ–çš„å“åº”å¼æ•°æ®çš„å˜åŒ–æ¥æ‰§è¡Œå›è°ƒå‡½æ•°.&lt;/p>
&lt;p>å¯¹,æ²¡é”™, å®ƒèƒ½ç›‘å¬å‡½æ•°å†…å˜åŒ–çš„å“åº”æ•°æ®å¹¶ä¸”è‡ªåŠ¨æ‰§è¡Œå›è°ƒå‡½æ•°! æ˜¯ä¸æ˜¯å¾ˆé­”æ³•!
è¿åå°„éƒ½åšä¸åˆ°ç›‘å¬å‡½æ•°å†…ä¾èµ–çš„å¤–éƒ¨å˜é‡.&lt;/p>
&lt;p>ä¸¾ä¸ªä¾‹å­:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="kr">const&lt;/span> &lt;span class="nx">count&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">ref&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nx">watchEffect&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">count&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">// å½“countæ•°æ®å‘é€å˜åŒ–çš„æ—¶å€™ä¼šæ‰§è¡ŒwatchEffectå†…çš„å›è°ƒå‡½æ•°
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿˜æœ‰ä¸€ä¸ªwatchå‡½æ•°ä¹Ÿå¯ä»¥åšåˆ°ç±»ä¼¼çš„æ“ä½œ, ä¸è¿‡éœ€è¦æ‰‹åŠ¨åœ¨ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šç›‘å¬çš„å“åº”å¼æ•°æ®.
watchçš„åŸç†å°±æ¯”è¾ƒå®¹æ˜“æ‡‚äº†. æŒ‡å®šäº†ä¾èµ–å°±å¯ä»¥é€šè¿‡æŒ‚é’©å­æ¥å®ç°ç›‘å¬å˜åŒ–æ‰§è¡Œå›è°ƒäº†.&lt;/p>
&lt;p>é—®é¢˜å°±åœ¨watchEffectæ˜¯æ€ä¹ˆåšåˆ°ä¸æŒ‡å®šä¾èµ–å°±èƒ½çŸ¥é“å›è°ƒå†…ä¾èµ–äº†å“ªä¸ªå“åº”å¼æ•°æ®?å¹¶ä¸”è‡ªåŠ¨æ‰§è¡Œçš„?&lt;/p>
&lt;p>è¿™ä¸ªé­”æ³•çš„åŸç†æˆ‘æƒ³ç ´å¤´ä¹Ÿæ²¡æœ‰æƒ³å‡ºæ¥. çœ‹äº†ä¸€äº›å…³äºå‰¯ä½œç”¨çš„æ–‡ç« ä¹‹åæ‰å¼€å§‹ç†è§£è¿™ä¸ªé­”æ³•çš„æœ¬è´¨.&lt;/p>
&lt;p>&lt;code>watch&lt;/code> å’Œ &lt;code>watchEffect&lt;/code> æœ‰ä¸€ä¸ªåŒºåˆ«å°±åœ¨äº, watchEffectåœ¨é¡µé¢æ¸²æŸ“åä¼šé¦–æ¬¡æ‰§è¡Œä¸€æ¬¡.
è¿™ä¸ªåŠ¨ä½œå°±æ˜¯é­”æ³•çš„ç§˜å¯†äº†, æ‰§è¡ŒåwatchEffectå°±èƒ½çœ‹åˆ°é‚£äº›å“åº”å¼æ•°æ•°æ®æ”¶åˆ°äº†å›è°ƒçš„å½±å“.(ä¸ä¸€å®šæ˜¯æ•°æ®çš„å˜åŒ–)&lt;/p></description></item><item><title>Log 13</title><link>https://sdttttt.github.io/blog/log-13/</link><pubDate>Mon, 21 Dec 2020 09:05:08 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/log-13/</guid><description>
&lt;p>ç²—ä¸”è°ˆä¸€ä¸‹å…³äºæ–°çš„ä¸»æœºçš„æƒ³æ³•.&lt;/p>
&lt;p>&lt;strong>i5 10400F&lt;/strong> è¿™å—Uä¸å¸¦æ ¸æ˜¾, è¿™å€’æ˜¯æ— æ‰€è°“, æ˜¯i5é‡Œç›®å‰ç¬¬ä¸€å—6core12threadçš„U. æ€§èƒ½æ¥è¿‘i7 8700. CPUå®é™…ä¸Šæ— æ‰€è°“.&lt;/p>
&lt;p>&lt;strong>24G RAM&lt;/strong> 24Gä¹Ÿæ˜¯æˆ‘æƒ³è¿‡ä¹‹åæ‰é€‰æ‹©çš„å†…å­˜å¤§å°, 32å«Œå¤§, 16å«Œå°, åªèƒ½è¿™æ ·äº†.&lt;/p>
&lt;p>&lt;strong>W240&lt;/strong> æ•£çƒ­æ˜¯ä¸€ä¸ªW240çš„æ°´å†·, åªæœ‰ä¸€ä¸ªé£æ‰‡. è™½ç„¶æ˜¯W240, ä½†æ„Ÿè§‰å¾ˆå¯èƒ½æ˜¯ä¸ªä¸ä¸­ä¸.&lt;/p>
&lt;p>&lt;strong>ASUS B460-K&lt;/strong> ä¸ä¸­ä¸ä¸»æ¿, ç”¨i5 10400Fè¿™Uè¿˜æ˜¯æ²¡æœ‰é—®é¢˜çš„. è¿™ä¸»æ¿è®¾è®¡ä¹Ÿæœ‰é—®é¢˜. SATAæ¥å£åœ¨æ˜¾å¡æ•£çƒ­å£çš„ä¸‹é¢å°±ç¦»è°±.&lt;/p>
&lt;p>&lt;strong>NVME M.2 250G&lt;/strong> å›ºæ€ç¡¬ç›˜, å°±è¿™æ ·å§, é€Ÿåº¦å€’æ˜¯æ— æ‰€è°“, å®¹é‡å°äº†ç‚¹, å¯¼è‡´æˆ‘åé¢åˆè¿½åŠ äº†ä¸€ä¸ª1Tçš„PMR.&lt;/p>
&lt;p>&lt;strong>ASUS TUF RX5600XT 6G EVO-GAMING&lt;/strong> å˜¶&amp;hellip;è¿™æ˜¾å¡å°±æ¯”è¾ƒå°´å°¬äº†. å…ˆè¯´å‚æ•°. é¢‘ç‡æ¯”å…¬ç‰ˆé«˜ä¸€ç‚¹. TUFæ˜¯ä¸ªä¸ç‰ˆ, ä¸‰é£æ‰‡, å…¶ä»–æ²¡æœ‰é—®é¢˜çš„. æ€§èƒ½åŸºæœ¬ä¸Šå’Œ2060å¹¶è‚©,ç”šè‡³æ›´é«˜.èƒ½è¶…åˆ°2060Sçš„æ°´å¹³. è¿™ç©æ„ä¸ºä»€ä¹ˆå°´å°¬å‘¢, å› ä¸ºè¿™å—å¡ç¨å¾®åŠ ä¸€ä¸¤ç™¾å°±èƒ½åˆ°5700, å±è‚¡åé¢åˆæ˜¯RX590. è¯´è¿™ç©æ„æ˜¯æ™ºå•†æ£€æµ‹å¡ä¹Ÿæ²¡ä»€ä¹ˆé—®é¢˜. æœ€åè¿™å—å¡æ‰“å…¨å¢ƒ2 å…¨é«˜ 2560*1080å±…ç„¶ä¸èƒ½ç¨³å®š60FPS??? å¤ªè’‚è’‚äº†&lt;/p>
&lt;p>å‘¨æœ«åŸºæœ¬ä¸Šå°±æ˜¯æ‰“æ¸¸æˆäº†. è¿˜æœ‰è¿½åŠ äº†ä¸ªç¡¬ç›˜. ç¡¬ç›˜çš„SATAçº¿ç©¿è¿‡æ˜¾å¡é£æ‰‡. çœ‹èµ·æ¥ååˆ†è¯¡å¼‚. è¿™ä¸ªSATAæ¥å£å°±ä¸èƒ½é•¿å¤–é¢ä¹ˆ???&lt;/p></description></item><item><title>Log 12</title><link>https://sdttttt.github.io/blog/log-12/</link><pubDate>Fri, 18 Dec 2020 12:22:28 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/log-12/</guid><description>
&lt;p>è¿™ä¸¤å¤©æœ‰ä¸ªæ¥å£æµ‹è¯•çš„å‰ç«¯é¡¹ç›®ç»ˆäºå¼€å§‹åŠ¨åœŸäº†ï¼Œæˆ‘è¿˜æ˜¯ä¸€å¦‚æ—¢å¾€çš„å†™å‰ç«¯å‘¢ã€‚è°è®©æˆ‘TMæ˜¯é«˜è´µçš„å…¨æ ˆå·¥ç¨‹å¸ˆï¼ˆç‹—å¤´&lt;/p>
&lt;p>æ–°çš„å°å¼ä¸»æœºä¹Ÿåˆ°äº†ï¼Œ é…ç½®æ’‘ä¸ª2å¹´ä¸æ˜¯ä»€ä¹ˆå¤§é—®é¢˜ã€‚
åŒä¼‘æ—¥æ€»ç®—å¯ä»¥ç•…çˆ½çš„æ‰“æ¸¸æˆäº†ï¼Œ
è¿˜æœ‰å¸Œæœ›æ˜å¤©çš„ç¡¬ç›˜å’ŒéŸ³å“èƒ½å¿«ç‚¹åˆ°ã€‚æ‰“æ¸¸æˆæ²¡æœ‰å£°éŸ³å¯æ˜¯å¤§å¿Œé”•ã€‚&lt;/p></description></item><item><title>Log 11</title><link>https://sdttttt.github.io/blog/log-11/</link><pubDate>Tue, 01 Dec 2020 10:04:34 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/log-11/</guid><description>
&lt;p>æ˜¨å¤©å‘å¸ƒäº†GRCçš„&lt;code>0.9.2&lt;/code>ç‰ˆæœ¬, è¿™ä¸ªç‰ˆæœ¬æ›´æ–°è¯´å®è¯æ¯”è¾ƒæ°´. è¿½åŠ çš„åŠŸèƒ½æœ‰å‚æ•°æŒ‡å®šé…ç½®æ–‡ä»¶.è¿˜æœ‰ä¸€äº›å°é—®é¢˜çš„ä¿®å¤, å°±æ²¡äº†emm&lt;/p>
&lt;p>ä¸‹æ¬¡GRCè¿½åŠ åŠŸèƒ½åº”è¯¥ä¼šåœ¨&lt;code>v1.0.0&lt;/code>, ç»ˆäºè¦åˆ°æ­£å¼ç‰ˆæœ¬äº†. å¦‚æœæœ‰äººæœ‰æ›´å¥½çš„æƒ³æ³•å¾—å’Œæˆ‘è¯´å•Šå•Šå•Š!!~~
æˆ‘éƒ½æƒ³ä¸å¥½åŠ ä»€ä¹ˆåŠŸèƒ½æ¯”è¾ƒå¥½.&lt;/p></description></item><item><title>Log 10</title><link>https://sdttttt.github.io/blog/log-10/</link><pubDate>Wed, 25 Nov 2020 11:25:47 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/log-10/</guid><description>
&lt;p>æ˜¨å¤©ä¸€å¤§æ—©å°±è·‘å»ä½™æ­, å»æ–°å›­åŒºé¢è¯•. çœŸçš„æŒºéº»çƒ¦çš„. å¸Œæœ›è¿™ç§äº‹è¶Šå°‘è¶Šå¥½.&lt;/p>
&lt;p>å®³å¾—æˆ‘æ˜¨å¤©éƒ½æ²¡æœ‰commit.&lt;/p></description></item><item><title>Sql Optimize</title><link>https://sdttttt.github.io/blog/sql-optimize/</link><pubDate>Thu, 19 Nov 2020 13:10:52 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/sql-optimize/</guid><description>
&lt;p>æœ¬æ–‡ä¸»è¦è®²å…³äº&lt;code>SELECT&lt;/code>è¯­å¥çš„ä¼˜åŒ–é—®é¢˜. ä¼šæ¶‰åŠåˆ°ä¸€äº›å…³äºè¡¨ç´¢å¼•çš„çŸ¥è¯†.&lt;/p>
&lt;h3 id="æ€§èƒ½">æ€§èƒ½&lt;/h3>
&lt;p>å¾ˆç®€å•, ä½ æ¯å»ºç«‹ä¸€ä¸ªç´¢å¼•, æ•°æ®åº“å°±ä¼šæ ¹æ®ç´¢å¼•ç±»å‹ï¼Œå¸®ä½ å»ºç«‹ä¸€ä¸ªç´¢å¼•æ•°æ®ç»“æ„ï¼ˆB+æ ‘éå¸¸å¸¸ç”¨ï¼‰.&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>NOTE:&lt;/strong>&lt;code>B+æ ‘&lt;/code>&lt;/p>
&lt;blockquote>
&lt;p>B+æ ‘å¯¹èŒƒå›´æŸ¥è¯¢å’Œç›´æ¥æŸ¥è¯¢éƒ½å¾ˆåœ¨è¡Œ. ç›´æ¥æŸ¥è¯¢çš„æ—¶é—´å¤æ‚åº¦å‡ä¸ºO(log), ä¹Ÿå°±æ˜¯ç”¨çš„äºŒåˆ†æ³•, å…·ä½“ä¸ºä»€ä¹ˆå°±å»çœ‹&lt;code>B+æ ‘&lt;/code>çš„æ•°æ®ç»“æ„, åœ¨çœ‹B+æ ‘ä¹‹å‰æœ€å¥½å…ˆçœ‹Bæ ‘, ä¸ç„¶ä¸œè¥¿å¤ªå¤šæ¶ˆåŒ–ä¸äº†.&lt;/p>
&lt;/blockquote>
&lt;/blockquote>
&lt;p>ä¸è¿‡æ¯æ¬¡æ’å…¥æ•°æ®å’Œåˆ é™¤æ•°æ®å°±éœ€è¦é‡æ„ç´¢å¼•æ ‘çš„ç»“æ„, æ»¥ç”¨ç´¢å¼•åè€Œä¼šé™ä½&lt;strong>å†™å…¥æ•ˆç‡&lt;/strong>.&lt;/p>
&lt;h3 id="è®¾è®¡">è®¾è®¡&lt;/h3>
&lt;p>ç´¢å¼•æœ‰å¥½å‡ ç§, æœ€å¸¸ç”¨çš„æœ‰:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>ä¸»é”®ç´¢å¼•&lt;/strong>: æ¯”å¦‚ç”¨æˆ·è¡¨çš„IDå­—æ®µ&lt;/li>
&lt;li>&lt;strong>å”¯ä¸€ç´¢å¼•&lt;/strong>: æ¯”å¦‚ä¸å¯é‡å¤çš„ç”¨æˆ·å&lt;/li>
&lt;li>&lt;strong>ç»„åˆç´¢å¼•&lt;/strong>: éœ€è¦ç»å¸¸è¢«ä¸€èµ·æŸ¥è¯¢çš„å­—æ®µ, æ¯”å¦‚ç”¨æˆ·å, å¯†ç &lt;/li>
&lt;li>&lt;strong>æ™®é€šç´¢å¼•&lt;/strong>: è¿™ä¸ªæ€ä¹ˆç”¨å°±ä»è€…è§ä»æ™ºè€…è§æ™ºäº†.&lt;/li>
&lt;/ul>
&lt;p>ç´¢å¼•ä¸€ç»åˆ›å»ºä¸èƒ½ä¿®æ”¹ï¼Œå¦‚æœè¦ä¿®æ”¹ç´¢å¼•ï¼Œåªèƒ½åˆ é™¤é‡å»º. å…·ä½“æ€ä¹ˆåˆ›å»ºå°±&lt;code>baidu&lt;/code>å§ã€‚&lt;/p>
&lt;p>å¦‚æœè¦æŸ¥çœ‹ä¸€å¼ è¡¨çš„ç´¢å¼•, å¦‚ä¸‹:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-SQL" data-lang="SQL">&lt;span class="n">mysql&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="k">SHOW&lt;/span> &lt;span class="k">INDEX&lt;/span> &lt;span class="k">FROM&lt;/span> &lt;span class="n">users&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="o">+&lt;/span>&lt;span class="c1">-------+------------+-----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="o">|&lt;/span> &lt;span class="k">Table&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">Non_unique&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">Key_name&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">Seq_in_index&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="k">Column_name&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="k">Collation&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="k">Cardinality&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">Sub_part&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">Packed&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="k">Null&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">Index_type&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="k">Comment&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">Index_comment&lt;/span> &lt;span class="o">|&lt;/span>
&lt;span class="o">+&lt;/span>&lt;span class="c1">-------+------------+-----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="o">|&lt;/span> &lt;span class="n">users&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="k">PRIMARY&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">A&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mi">9847&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="k">NULL&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="k">NULL&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">BTREE&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="o">|&lt;/span>
&lt;span class="o">|&lt;/span> &lt;span class="n">users&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">id_UNIQUE&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">A&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mi">9847&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="k">NULL&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="k">NULL&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">BTREE&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="o">|&lt;/span>
&lt;span class="o">|&lt;/span> &lt;span class="n">users&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">username&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">username&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">A&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mi">9847&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="k">NULL&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="k">NULL&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">BTREE&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="o">|&lt;/span>
&lt;span class="o">+&lt;/span>&lt;span class="c1">-------+------------+-----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="mi">3&lt;/span> &lt;span class="k">rows&lt;/span> &lt;span class="k">in&lt;/span> &lt;span class="k">set&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">00&lt;/span> &lt;span class="n">sec&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸é‡è¦çš„å°±ä¸è¯´äº†ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Non_unique&lt;/strong>: èƒ½ä¸èƒ½é‡å¤ï¼Œä¸èƒ½ä¸º0ï¼Œå¯ä»¥ä¸º1.&lt;/li>
&lt;li>&lt;strong>Seq_in_index&lt;/strong>: ç»„åˆç´¢å¼•çš„ä¸€ä¸ªä½ç½®ã€‚ç­‰ä¼šå°±çŸ¥é“ã€‚&lt;/li>
&lt;li>&lt;strong>Sub_part&lt;/strong>: å‰ç½®ç´¢å¼•é•¿åº¦ï¼Œä¸ä½¿ç”¨å‰ç½®ç´¢å¼•åˆ™ä¸ºNULLã€‚&lt;/li>
&lt;li>&lt;strong>Cardinality&lt;/strong>: åŸºæ•°ï¼Œæ˜¯å¦åšä¸ºç´¢å¼•çš„æœ€é‡è¦çš„å› ç´ ï¼ŒåŸºæ•°è¶Šå¤§è¯´æ˜é‡å¤æ€§è¶Šä½ï¼Œè¶Šæœ‰å¯èƒ½æŸ¥è¯¢æ—¶è§¦å‘ç´¢å¼•ã€‚&lt;/li>
&lt;li>&lt;strong>Index_type&lt;/strong>: ç´¢å¼•ç±»å‹ï¼Œå¸¸ç”¨çš„æœ‰&lt;code>FULLTEXT&lt;/code>(ç”¨ä¸æœç´¢æŠ€æœ¯ï¼Œä¸»è¦è§£å†³æ¨¡ç³ŠæŸ¥è¯¢æ•ˆç‡ä½ä¸‹çš„é—®é¢˜)ï¼Œå’Œ&lt;code>BTREE&lt;/code>ï¼ˆå°±æ˜¯æ ‘å½¢æ•°æ®ç»“æ„å­˜å‚¨ï¼‰ï¼Œè¿˜æœ‰&lt;code>Hash&lt;/code>ï¼ˆç”±äºHashçš„ç‰¹ç‚¹ï¼Œåªèƒ½åˆ¤æ–­å€¼ç›¸ç­‰ï¼Œä¸èƒ½åˆ¤æ–­å€¼èŒƒå›´ï¼‰ã€‚&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>&lt;strong>QUESION:&lt;/strong> ä»€ä¹ˆæ˜¯å‰ç½®ç´¢å¼•ï¼Ÿ&lt;/p>
&lt;blockquote>
&lt;p>å¯¹äºä¸€äº›ç‰¹æ®Šå­—æ®µæ¯”å¦‚&lt;code>TEXT&lt;/code>ï¼Œæˆ–è€…&lt;code>VARCHAR(255)&lt;/code>è¿™ç§å¾ˆå¤§çš„å­—æ®µï¼Œå»ºç«‹çš„ç´¢å¼•æ ‘ä¼šéå¸¸è‚¥ï¼Œè¿™æ ·çš„ç´¢å¼•éå¸¸æ…¢ï¼Œæˆ‘ä»¬å¯¹ä¸è¿™ç§å­—æ®µä¼šé‡‡ç”¨å®ƒä»¬çš„å‰å‡ ä¸ªå­—ç¬¦åšä¸ºç´¢å¼•ã€‚é€‰æ‹©å‡ ä¸ªå­—ç¬¦çš„è¯€çªå°±æ˜¯è¦ä¿è¯è¦æé«˜çš„éé‡å¤æ€§ï¼Œå’Œå°½é‡çŸ­çš„å­—ç¬¦ï¼Œæ¥èŠ‚çœç©ºé—´ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>&lt;strong>NOTE:&lt;/strong> å…³äºåŸºæ•°&lt;/p>
&lt;blockquote>
&lt;p>é€šå¸¸æˆ‘ä»¬åœ¨é€‰æ‹©ç´¢å¼•æ—¶ä¼šå°½å¯èƒ½é€‰æ‹©åŸºæ•°å¤§çš„åˆ—åšä¸ºç´¢å¼•ã€‚
å› ä¸ºMySQLåœ¨æ‰§è¡ŒæŸ¥è¯¢æ—¶ï¼Œ&lt;strong>åŸºæ•°å¯¹æ¯”æ€»æ•°æ˜¯æ˜¯å¦è§¦å‘ç´¢å¼•çš„ä¸€ä¸ªåˆ¤æ–­æ¡ä»¶&lt;/strong>ï¼Œè¿™ä¸ªå€¼å¤§æ¦‚åœ¨30%å·¦å³ã€‚&lt;/p>
&lt;/blockquote>
&lt;/blockquote>
&lt;h3 id="è°ƒä¼˜">è°ƒä¼˜&lt;/h3>
&lt;p>æŸ¥çœ‹ä¸€æ¬¡&lt;strong>SELECT&lt;/strong>åœ¨MySQLä½¿ç”¨äº†å“ªäº›ç­–ç•¥ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨SQLè¯­å¥å‰åŠ ä¸Š&lt;code>EXPLAIN&lt;/code>æ¥åšåˆ°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-SQL" data-lang="SQL">&lt;span class="n">mysql&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="k">EXPLAIN&lt;/span> &lt;span class="k">SELECT&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">username&lt;/span> &lt;span class="k">FROM&lt;/span> &lt;span class="n">users&lt;/span> &lt;span class="k">WHERE&lt;/span> &lt;span class="n">username&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;sdttttt&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="o">+&lt;/span>&lt;span class="c1">----+-------------+-------+------------+-------+---------------+----------+---------+-------+------+----------+-------------+
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="o">|&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">select_type&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="k">table&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">partitions&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="k">type&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">possible_keys&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="k">key&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">key_len&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="k">ref&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="k">rows&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">filtered&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">Extra&lt;/span> &lt;span class="o">|&lt;/span>
&lt;span class="o">+&lt;/span>&lt;span class="c1">----+-------------+-------+------------+-------+---------------+----------+---------+-------+------+----------+-------------+
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="o">|&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="k">SIMPLE&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">users&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="k">NULL&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">const&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">username&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">username&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mi">50&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">const&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mi">100&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">00&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="k">Using&lt;/span> &lt;span class="k">index&lt;/span> &lt;span class="o">|&lt;/span>
&lt;span class="o">+&lt;/span>&lt;span class="c1">----+-------------+-------+------------+-------+---------------+----------+---------+-------+------+----------+-------------+
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="k">row&lt;/span> &lt;span class="k">in&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">warning&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">00&lt;/span> &lt;span class="n">sec&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>&lt;strong>possible_keys&lt;/strong>: å¯èƒ½è§¦å‘çš„ç´¢å¼•ã€‚&lt;/li>
&lt;li>&lt;strong>key&lt;/strong>: æœ¬æ¬¡SQLæ‰§è¡Œè§¦å‘çš„ç´¢å¼•ã€‚&lt;/li>
&lt;li>&lt;strong>filtered&lt;/strong>: è¿‡æ»¤äº†å¤šå°‘æ•°æ®ï¼Œå•ä½ï¼šç™¾åˆ†æ¯”ã€‚&lt;/li>
&lt;li>&lt;strong>Extra&lt;/strong>: æ‰§è¡Œç­–ç•¥ã€‚&lt;/li>
&lt;/ul>
&lt;p>ä¸‹é¢è¯´ä¸€ä¸‹&lt;code>Extra&lt;/code>ï¼Œè¿™ä¸ªæ¯”è¾ƒé‡è¦ï¼š&lt;/p>
&lt;p>&lt;strong>Using index&lt;/strong>&lt;/p>
&lt;p>æŸ¥è¯¢çš„åˆ—è¢«ç´¢å¼•è¦†ç›–ï¼Œå¹¶ä¸”&lt;code>where&lt;/code>ç­›é€‰æ¡ä»¶æ˜¯ç´¢å¼•çš„æ˜¯å‰å¯¼åˆ—ï¼Œ&lt;code>Extra&lt;/code>ä¸­ä¸º&lt;code>Using index&lt;/code>ã€‚&lt;/p>
&lt;p>&lt;strong>Using where Using index&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>æŸ¥è¯¢çš„åˆ—è¢«ç´¢å¼•è¦†ç›–ï¼Œ&lt;strong>å¹¶ä¸”&lt;code>where&lt;/code>ç­›é€‰æ¡ä»¶æ˜¯ç´¢å¼•åˆ—ä¹‹ä¸€, ä½†æ˜¯ä¸æ˜¯ç´¢å¼•çš„ä¸æ˜¯å‰å¯¼åˆ—&lt;/strong>ï¼Œ&lt;code>Extra&lt;/code>ä¸­ä¸º&lt;code>Using where&lt;/code>; &lt;code>Using index&lt;/code>ï¼Œæ„å‘³ç€æ— æ³•ç›´æ¥é€šè¿‡ç´¢å¼•æŸ¥æ‰¾æ¥æŸ¥è¯¢åˆ°ç¬¦åˆæ¡ä»¶çš„æ•°æ®ã€‚&lt;/li>
&lt;li>æŸ¥è¯¢çš„åˆ—è¢«ç´¢å¼•è¦†ç›–ï¼Œå¹¶ä¸”&lt;code>where&lt;/code>ç­›é€‰æ¡ä»¶æ˜¯ç´¢å¼•åˆ—å‰å¯¼åˆ—çš„ä¸€ä¸ªèŒƒå›´ï¼ŒåŒæ ·æ„å‘³ç€æ— æ³•ç›´æ¥é€šè¿‡ç´¢å¼•æŸ¥æ‰¾æŸ¥è¯¢åˆ°ç¬¦åˆæ¡ä»¶çš„æ•°æ®ã€‚&lt;/li>
&lt;/ol>
&lt;p>&lt;em>(æŸ¥è¯¢çš„åˆ—è¢«ç´¢å¼•è¦†ç›–ï¼Œè¿™ç§æƒ…å†µæ˜¯ä¸ä¼šå‘ç”Ÿå›è¡¨çš„ï¼Œåªæ˜¯è¿›è¡Œç´¢å¼•æ‰«æç½¢äº†)&lt;/em>&lt;/p>
&lt;p>&lt;strong>NULL&lt;/strong>&lt;/p>
&lt;p>&lt;em>ï¼ˆæ—¢æ²¡æœ‰&lt;code>Using index&lt;/code>ï¼Œä¹Ÿæ²¡æœ‰&lt;code>Using where Using index&lt;/code>ï¼Œä¹Ÿæ²¡æœ‰&lt;code>using where&lt;/code>ï¼‰&lt;/em>&lt;/p>
&lt;p>1ï¼ŒæŸ¥è¯¢çš„åˆ—æœªè¢«ç´¢å¼•è¦†ç›–ï¼Œå¹¶ä¸”&lt;code>where&lt;/code>ç­›é€‰æ¡ä»¶æ˜¯ç´¢å¼•çš„å‰å¯¼åˆ—ï¼Œæ„å‘³ç€ç”¨åˆ°äº†ç´¢å¼•ï¼Œä½†æ˜¯éƒ¨åˆ†å­—æ®µæœªè¢«ç´¢å¼•è¦†ç›–ï¼Œå¿…é¡»é€šè¿‡â€œå›è¡¨â€æ¥å®ç°ï¼Œä¸æ˜¯çº¯ç²¹åœ°ç”¨åˆ°äº†ç´¢å¼•ï¼Œä¹Ÿä¸æ˜¯å®Œå…¨æ²¡ç”¨åˆ°ç´¢å¼•ï¼Œ&lt;code>Extra&lt;/code>ä¸­ä¸ºNULL(æ²¡æœ‰ä¿¡æ¯)ã€‚&lt;/p>
&lt;p>&lt;strong>Using where&lt;/strong>&lt;/p>
&lt;p>1ï¼ŒæŸ¥è¯¢çš„åˆ—æœªè¢«ç´¢å¼•è¦†ç›–ï¼Œ&lt;code>where&lt;/code>ç­›é€‰æ¡ä»¶éç´¢å¼•çš„å‰å¯¼åˆ—ï¼Œ&lt;code>Extra&lt;/code>ä¸­ä¸º&lt;code>Using where&lt;/code>.&lt;/p>
&lt;p>&lt;em>ï¼ˆ&lt;code>using where&lt;/code> æ„å‘³ç€é€šè¿‡ç´¢å¼•æˆ–è€…è¡¨æ‰«æçš„æ–¹å¼è¿›ç¨‹&lt;code>where&lt;/code>æ¡ä»¶çš„è¿‡æ»¤ï¼Œ
åè¿‡æ¥è¯´ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰å¯ç”¨çš„ç´¢å¼•æŸ¥æ‰¾ï¼Œè¿™é‡Œçš„typeéƒ½æ˜¯allï¼Œè¯´æ˜MySQLè®¤ä¸ºå…¨è¡¨æ‰«ææ˜¯ä¸€ç§æ¯”è¾ƒä½çš„ä»£ä»·ã€‚ï¼‰&lt;/em>&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>EXT:&lt;/strong> ICP(Index Condition Pushdown)&lt;/p>
&lt;p>è¿™ä¸ªæ˜¯&lt;code>MySQL5.6&lt;/code>æ–°åŠ å…¥çš„ç‰¹æ–°ï¼ŒMySQLçš„è®¾è®¡åˆ†ä¸ºä¸¤å±‚ï¼ŒæœåŠ¡å±‚å’Œå­˜å‚¨å¼•æ“ã€‚&lt;/p>
&lt;p>åœ¨æ²¡æœ‰çš„ICPçš„æ—¶å€™ï¼Œä½ å¯¹ç´¢å¼•æ‰§è¡Œè¿‡æ»¤ï¼šé¦–å…ˆSEï¼ˆStorage Engineï¼‰å°†ä¸€æ¡æ¡ç´¢å¼•æ•°æ®å–å‡ºï¼Œå¹¶ä¸”ä¸€æ¡æ¡ç»™æœåŠ¡å±‚çœ‹ï¼Œç”±æœåŠ¡å±‚æ¥å¯¹ç…§whereæ¡ä»¶ã€‚&lt;/p>
&lt;p>åœ¨ä½¿ç”¨ICPåï¼Œä½ å¯¹ç´¢å¼•æ‰§è¡Œè¿‡æ»¤ï¼šé¦–å…ˆSEï¼ˆStorage Engineï¼‰å°†ä¸€æ¡æ¡ç´¢å¼•æ•°æ®å–å‡ºï¼Œå¹¶ä¸”å¯¹ç…§ä¸‹æ¨çš„ç´¢å¼•æ¡ä»¶ï¼Œå¦‚æœæ»¡è¶³æ¡ä»¶ï¼Œå°±è¿”å›ç»™æœåŠ¡å±‚ï¼ŒæœåŠ¡å±‚ä¸‹æ¨åˆ°æ²¡æœ‰è¢«SEæ‰§è¡Œçš„whereæ¡ä»¶ã€‚&lt;/p>
&lt;blockquote>
&lt;p>ä½ æ˜¯ä¸æ˜¯è§‰å¾—å¾ˆç»•ï¼Ÿå…¶å®å°±æ˜¯ç´¢å¼•çš„whereæ¡ä»¶SEå¸®æœåŠ¡å±‚åšäº†ï¼ŒæœåŠ¡å±‚ä¸&amp;gt;ç”¨å»ç®¡ç´¢å¼•çš„Whereæ¡ä»¶äº†ã€‚&lt;/p>
&lt;p>è¯´å®è¯æˆ‘å¯¹è¿™ä¸ªåŠŸèƒ½è¿˜æ˜¯æŒºè¿·çš„ï¼ŒæœåŠ¡å±‚çš„æ‰§è¡Œé€Ÿåº¦æ˜¯ä¸å¦‚SEä¹ˆï¼Ÿä¸ºä»€ä¹ˆICPèƒ½æé«˜é€Ÿåº¦ï¼ŸMySQLä¸­çš„ç§˜å¯†è¿˜æŒºå¤šã€‚&lt;/p>
&lt;/blockquote>
&lt;/blockquote>
&lt;h3 id="all-in-all">All in All&lt;/h3>
&lt;p>åœ¨è®¾è®¡æ•°æ®è¡¨çš„æ—¶å€™éœ€è¦è€ƒè™‘è¿™ä¸ªè¡¨çš„è¯»å†™æƒ…å†µï¼Œæ ¹æ®å­—æ®µæ¥é€‚å½“çš„å¢åŠ ç´¢å¼•ã€‚&lt;/p>
&lt;p>åœ¨ç¼–å†™SQLè¯­å¥æ—¶ï¼Œå°½å¯èƒ½ä½¿ç”¨ç´¢å¼•ã€‚èƒ½è°ƒä¼˜å°±å°½é‡è°ƒä¼˜ã€‚&lt;/p></description></item><item><title>GRC 5</title><link>https://sdttttt.github.io/blog/grc-5/</link><pubDate>Tue, 17 Nov 2020 15:08:13 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/grc-5/</guid><description>
&lt;p>å¾ˆæœ‰è¶£, ä¸Šä¸ªæ˜ŸæœŸæœ‰äººåœ¨GRCä¸­å’Œæˆ‘æäº†ä¸€ä¸ªé—®é¢˜, GITå¾ˆå¤šæ“ä½œæ˜¯è¦ä½¿ç”¨ç¯å¢ƒå˜é‡æ¥æ§åˆ¶.&lt;/p>
&lt;p>æˆ‘å¹³æ—¶æ ¹æœ¬ä¸ä½¿ç”¨ç¯å¢ƒå˜é‡æ¥æ§åˆ¶GIT, è¿™ä¸ªç‰¹æ€§å¯èƒ½ä¼šåœ¨ä»¥åæ”¯æŒå§.&lt;/p></description></item><item><title>Goçš„mapçš„ä¸ªä»€ä¹ˆç»“æ„</title><link>https://sdttttt.github.io/blog/go-map/</link><pubDate>Fri, 13 Nov 2020 15:31:53 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/go-map/</guid><description>
&lt;p>å®é™…ä¸Š&lt;code>Go&lt;/code>çš„&lt;code>map&lt;/code>å’Œ&lt;code>Java7&lt;/code>ä¹‹å‰çš„&lt;code>HashMap&lt;/code>, éå¸¸ç›¸ä¼¼ã€‚éƒ½æ˜¯&lt;code>Array&lt;/code> + &lt;code>LinkedTable&lt;/code>çš„ç»“æ„ã€‚&lt;/p>
&lt;h3 id="ç»“æ„">ç»“æ„&lt;/h3>
&lt;p>&lt;code>map&lt;/code>æ•°æ®ç»“æ„ç”±&lt;code>runtime/map.go/hmap&lt;/code>å®šä¹‰:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-go" data-lang="go">
&lt;span class="kd">type&lt;/span> &lt;span class="nx">hmap&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">count&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="c1">// å½“å‰ä¿å­˜çš„å…ƒç´ ä¸ªæ•°
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="o">...&lt;/span>
&lt;span class="nx">B&lt;/span> &lt;span class="kt">uint8&lt;/span> &lt;span class="c1">// æŒ‡ç¤ºbucketæ•°ç»„çš„å¤§å°
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="o">...&lt;/span>
&lt;span class="nx">buckets&lt;/span> &lt;span class="nx">unsafe&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Pointer&lt;/span> &lt;span class="c1">// bucketæ•°ç»„æŒ‡é’ˆï¼Œæ•°ç»„çš„å¤§å°ä¸º2^B
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="o">...&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>bucket&lt;/code>æ•°æ®ç»“æ„ç”±&lt;code>runtime/map.go/bmap&lt;/code>å®šä¹‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-go" data-lang="go">
&lt;span class="kd">type&lt;/span> &lt;span class="nx">bmap&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">tophash&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kt">uint8&lt;/span> &lt;span class="c1">//å­˜å‚¨å“ˆå¸Œå€¼çš„é«˜8ä½
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">data&lt;/span> &lt;span class="kt">byte&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="c1">//key valueæ•°æ®:key/key/key/.../value/value/value...
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">overflow&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">bmap&lt;/span> &lt;span class="c1">//æº¢å‡ºbucketçš„åœ°å€
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œä½¿ç”¨çš„æ•°ç»„å¯¹é½æ–¹å¼æ¥å­˜æ”¾æ•°æ®ã€‚&lt;code>overflow&lt;/code>æŒ‡å‘ä¸‹ä¸€ä¸ª&lt;code>bucket&lt;/code>.&lt;/p>
&lt;h3 id="å·¥ä½œæµç¨‹">å·¥ä½œæµç¨‹&lt;/h3>
&lt;p>é¦–å…ˆé€šè¿‡&lt;code>key&lt;/code>è®¡ç®—Hashå€¼ï¼Œé€šè¿‡Hashçš„ä½ä½ï¼Œè®¡ç®—å‡ºè¯¥å…ƒç´ éœ€è¦å­˜æ”¾åœ¨&lt;code>buckets&lt;/code>ä¸­çš„å“ªä¸€ä¸ª&lt;code>bucket&lt;/code>.
å¦‚æœHashå†²çªï¼Œä¹Ÿå°±æ˜¯å½“å‰&lt;code>bucket&lt;/code>å·²ç»æœ‰äººè¿›å»äº†ã€‚é‚£ä¹ˆå°±ä½¿ç”¨è¯¥&lt;code>bucket&lt;/code>çš„&lt;code>overflow&lt;/code>æŒ‡å‘è‡ªå·±çš„&lt;code>bucket&lt;/code>.&lt;/p>
&lt;p>æŸ¥æ‰¾å…ƒç´ ä¹Ÿæ˜¯å¤§åŒå°å¼‚ã€‚&lt;/p></description></item><item><title>GRC 4</title><link>https://sdttttt.github.io/blog/grc-4/</link><pubDate>Thu, 12 Nov 2020 14:07:47 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/grc-4/</guid><description>
&lt;p>å•Šå“ˆ, æˆ‘çš„æ–°é”®ç›˜å·²ç»åˆ°äº†, è¿™å‘¨å‘¨æœ«(11.13-11.15)æˆ‘ä¼šå°½å¿«ä¿®å¤ç›®å‰GRCä¸­çš„ä¸€äº›é—®é¢˜:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/sdttttt/gcr/issues/28">#25 Did not check type.&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/sdttttt/gcr/issues/28">#28 [Feature request] Create a template gcr.toml when the install is made with cargo&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/sdttttt/gcr/issues/30">#30 env GIT_AUTHOR_NAME is not used&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>å¸Œæœ›æœ‰æ›´å¤šäººä½¿ç”¨GRC.&lt;/p></description></item><item><title>Impl and Dyn on Rust</title><link>https://sdttttt.github.io/blog/rust-impl-and-dyn/</link><pubDate>Thu, 12 Nov 2020 09:46:53 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/rust-impl-and-dyn/</guid><description>
&lt;p>æˆ‘ä»¬å…ˆæ¥çœ‹è¿™æ ·ä¸€æ®µä»£ç :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="k">impl&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">View&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">for&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Button&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">...&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="k">impl&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">View&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">for&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Text&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">...&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬çœ‹åˆ°&lt;code>Button&lt;/code>å’Œ&lt;code>Text&lt;/code>éƒ½å®ç°äº†&lt;code>View&lt;/code>å±æ€§, æŠ½è±¡æ˜¯ä¸€ç§ä¸é”™çš„è®¾è®¡ç¨‹åºçš„æ–¹æ³•, å¸®åŠ©æˆ‘ä»¬é€æ˜åŒ–çš„ä½¿ç”¨å¤–éƒ¨æä¾›çš„API. ç„¶åæˆ‘ä»¬å¯èƒ½ä¼šä¸‹æ„è¯†çš„å†™å‡ºä¸‹é¢çš„ä»£ç :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-Rust" data-lang="Rust">&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="sd">/// è¿™ç§ä»£ç å®é™…ä¸Šä¼šè®©äººæ„Ÿåˆ°ç–‘æƒ‘. Viewç©¶ç«Ÿæ˜¯ä¸ªç‰¹æ€§è¿˜æ˜¯ä¸€ä¸ªå¯¹è±¡.
&lt;/span>&lt;span class="sd">/// è¿™é‡Œçš„Viewæ˜¯ä¸€ä¸ªç±»å‹, æ‰€ä»¥æˆ‘ä»¬éœ€è¦å†™æˆ `impl View`.
&lt;/span>&lt;span class="sd">/// ä¸è¿‡`impl View` ä¸èƒ½ç”¨äºå¤šä¸ªtraitå®ç°çš„è¿”å›. ä½†æ˜¯å¯ä»¥ä½œä¸ºå…¥å‚.
&lt;/span>&lt;span class="sd">&lt;/span>&lt;span class="k">pub&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">fn&lt;/span> &lt;span class="nf">something&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>-&amp;gt; &lt;span class="nc">View&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">...&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Button&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">...&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Text&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">...&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ®µä»£ç æ— æ³•é€šè¿‡ç¼–è¯‘, åŸå› å°±æ˜¯è¿”å›å€¼&lt;code>View&lt;/code>éœ€è¦åœ¨ç¼–è¯‘å™¨ç¡®è®¤å¤§å°. æˆ‘ä»¬éœ€è¦æŠŠå®ƒè£…æˆä¸€ä¸ªèƒ–æŒ‡é’ˆ.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="k">pub&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">fn&lt;/span> &lt;span class="nf">something&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>-&amp;gt; &lt;span class="nb">Box&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">View&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{...}&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å—¯,è¿™æ ·å°±å¥½å¾ˆå¤š. ä½†æ˜¯ç¼–è¯‘å™¨ä¼šçˆ†ç§, æå‡ºä¸€ä¸ªè­¦å‘Š, å¸Œæœ›ä½ æŠŠ&lt;code>Box&amp;lt;View&amp;gt;&lt;/code>æ”¹ä¸º&lt;code>Box&amp;lt;dyn View&amp;gt;&lt;/code>.&lt;/p>
&lt;p>è¿™åˆæ˜¯ä»€ä¹ˆæ„æ€?&lt;/p>
&lt;p>&lt;code>dyn&lt;/code> æ˜¯åŠ¨æ€çš„ç¼©å†™, æ„ä¹‰å…¶å®å¾ˆæ˜æ˜¾. ä½¿ç”¨&lt;code>dyn&lt;/code>ä¿®é¥°çš„ç±»å‹, ä¼šåœ¨ç¨‹åºæ‰§è¡ŒæœŸåŠ¨æ€åˆ†å‘. ä¼šæœ‰ä¸€å®šçš„RUNTIMEå¼€é”€.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="k">pub&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">fn&lt;/span> &lt;span class="nf">something&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>-&amp;gt; &lt;span class="nb">Box&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">dyn&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">View&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{...}&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨æˆ‘ä»¬æŠŠä»£ç æ”¹æˆè¿™æ ·, å¥½å¤šäº†.&lt;/p>
&lt;p>æ¥ä¸‹æ¥è¯´è¯´&lt;code>impl&lt;/code>, è¿™ä¸ªè¯­æ³•æ˜¯ä¸ªè¯­æ³•ç³–å…¶å®.æ€ä¹ˆä¸ªè¯­æ³•ç³–å‘¢?&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="k">fn&lt;/span> &lt;span class="nf">something&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">T&lt;/span>: &lt;span class="nc">View&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">v&lt;/span>: &lt;span class="nc">T&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">...&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c1">// ------------- ç”¨ impl ä¹‹å ------------------
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="k">fn&lt;/span> &lt;span class="nf">something&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">v&lt;/span>: &lt;span class="nc">impl&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">View&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">...&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>çœŸçš„å°±è¿™ä¹ˆç®€å•.&lt;/p>
&lt;p>ç¬¬äºŒæ¬¡è¯´ä¸€é, è¿™ç§&lt;code>T(æ³›å‹)&lt;/code>å†™æ³•åœ¨å…¥å‚å¯ä»¥è¿™ä¹ˆåš, ä½†æ˜¯è¿”å›å€¼ä¸è¡Œ. é™¤éä½ çš„è¿”å›å€¼åªè¿”å›ä¸€ä¸ª&lt;code>T&lt;/code>å®ç°. ä¸¤ç§ä»¥ä¸Šè¯·&lt;code>é‡è½½ (æˆ‘ä¹±è¯´çš„,rustå¯èƒ½ä¸æ”¯æŒ)&lt;/code>æˆ–è€…ä½¿ç”¨&lt;code>dyn&lt;/code>.&lt;/p></description></item><item><title>Redis Compile</title><link>https://sdttttt.github.io/blog/redis-compile/</link><pubDate>Wed, 11 Nov 2020 16:43:06 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/redis-compile/</guid><description>
&lt;p>ä¹Ÿä¸çŸ¥é“æˆ‘å‘äº†ä»€ä¹ˆç–¯, åœ¨windowsä¸Šç¼–è¯‘äº†ä¸€éredis. äº‹å®ä¸Šæˆ‘æ‰¾åˆ°çš„windowsä¸Šæœ€æ–°çš„redisç‰ˆæœ¬æ˜¯3.&lt;/p>
&lt;p>è¿™ä¸ªç‰ˆæœ¬ä»¥åŠç›¸å½“è€äº†. ç›®å‰æœ€æ–°çš„redisæ˜¯åœ¨6. æˆ‘ä¸æƒ³åŠŸèƒ½ç›¸å·®è¿‡å¤§,å°±é‡æ–°åœ¨windowsä¸Šç¼–è¯‘äº†ä¸€æ¬¡.&lt;/p>
&lt;p>ä¸­é—´æ£é¼“äº†å¾ˆä¹…. ç”±äºredisæ˜¯åœ¨unixç¯å¢ƒä¸Šå¼€å‘çš„, windowsä¸Šç¼–è¯‘è¿˜æ˜¯å¾ˆéº»çƒ¦. é¦–å…ˆè¯•äº†&lt;code>cygwin&lt;/code>è¿™ä¸ªunixæ¨¡æ‹Ÿç¯å¢ƒå¯æƒœç¼–è¯‘å¤±è´¥äº†. åé¢æˆ‘ä¸‹è½½äº†&lt;code>msys2&lt;/code>è¿™ä¸ªunixçš„å·¥å…·å¥—ä»¶. è¿™æ¬¡å¾ˆé¡ºåˆ©. redis6çš„åŒ…æˆ‘å°±æ”¾åœ¨&lt;a href="https://github.com/adminwbb/adminwbb.github.io/releases/download/1/redis6.7z">è¿™é‡Œ&lt;/a>, éœ€è¦å¯ä»¥ä¸‹è½½.&lt;/p></description></item><item><title>Log 9</title><link>https://sdttttt.github.io/blog/log-9/</link><pubDate>Wed, 11 Nov 2020 14:04:54 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/log-9/</guid><description>
&lt;p>ä¸Šå‘¨å‘¨äº”å­¦ä¹ äº†ä¸€ä¸ªæ–°çš„ç©æ„ï¼Œä¸€ä¸ªè‡ªåŠ¨åŒ–æµ‹è¯•ç±»åº“ï¼ˆSeleniumï¼‰ï¼Œä½œç”¨ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œåœ¨æµè§ˆå™¨çš„ç½‘é¡µä¸Šæ¨¡æ‹Ÿé¼ æ ‡å’Œé”®ç›˜è¾“å…¥æ“ä½œã€‚æ˜¯ä¸ªæ²¡å•¥éš¾åº¦ä¹Ÿæ²¡å•¥è¥å…»çš„ä¸œè¥¿ã€‚å°±åƒæ¢äº†ä¸ªè¯­è¨€å†™Javascriptä¸€æ ·ã€‚&lt;/p>
&lt;p>å‡ºä¹æ„æ–™çš„æ˜¯è¿™å‘¨çš„å¼€å¤´å±…ç„¶æœ‰æ­ªæœä»åœ¨æˆ‘çš„GRCä¸Šæå‡ºäº†ä¸€äº›é—®é¢˜ï¼Œæˆ‘è¿˜ä»¥ä¸ºè¿™ä¸ªé¡¹ç›®ä¼šå­¤ç‹¬ç»ˆè€ï¼Œçœ‹èµ·æ¥è¿˜æ˜¯æœ‰äººåœ¨ä½¿ç”¨çš„ã€‚æ­£å¥½ï¼Œè¶ç€11.11æ¢äº†ä¸ªæ˜¾ç¤ºå±å’Œé”®ç›˜ï¼Œç­‰å‘å·¥èµ„å°±å†ä¹°ä¸ªPCä¸»æœºï¼Œæˆ‘å°±è¶è¿™æ®µæ—¶é—´æŠŠç›®å‰GRCå­˜åœ¨çš„é—®é¢˜è§£å†³äº†ã€‚&lt;/p>
&lt;p>æœ€è¿‘ä¹Ÿæ‰“ç®—å­¦ä¹ ä¸€ä¸‹æ“ä½œç³»ç»Ÿçš„çŸ¥è¯†ï¼Œå¸Œæœ›è¿™ä¸ªæœˆé¡ºåˆ©ã€‚&lt;/p></description></item><item><title>GRC 3</title><link>https://sdttttt.github.io/blog/grc-3/</link><pubDate>Tue, 03 Nov 2020 14:28:39 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/grc-3/</guid><description>
&lt;p>ä¸Šå‘¨æœ«ç®—æ˜¯æŠŠGRCæ‰©å±•çš„éƒ¨åˆ†å¼€å‘å®Œæˆäº†ï¼Œ
æœ€å¼€å§‹å†™çš„æ—¶å€™æ²¡æœ‰é‡åˆ°ä»€ä¹ˆç‰¹åˆ«å¤§çš„å›°éš¾ï¼Œ
ä¸ç¦æ„Ÿå¹ï¼Œæˆ‘å†™Rustè¶Šæ¥è¶Šé¡ºæ‰‹äº†å·²ç».&lt;/p>
&lt;p>ç»“æœåˆ°æ˜ŸæœŸå…­å‡†å¤‡æŠŠå‡ ä¸ªæ¨¡å—æ¥èµ·æ¥çš„æ—¶å€™ï¼Œ
å‘ç°å‡ºç°äº†å˜é‡ç”Ÿå‘½å‘¨æœŸçš„é—®é¢˜ï¼Œæˆ‘è¿˜ç‰¹åœ°å»æ‰¾äººé—®ï¼Œ
ä½†æ ¹æœ¬æ²¡å•¥äººé¸Ÿæˆ‘ã€‚æ²¡åŠæ³•ï¼Œæœ€åç®—æ˜¯æœ‰æ„æ— æ„ä¹‹é—´å‘ç°äº†è§£å†³çš„æ–¹æ³•&amp;hellip;&lt;/p>
&lt;p>æœ€ååœ¨æ˜ŸæœŸå…­æ™šä¸Šæ€»ç®—æ˜¯ç¼–å†™å®Œæˆäº†å·²ç»ï¼Œæ˜ŸæœŸå¤©çš„æ—¶å€™å‘å¸ƒäº†ã€‚
å¯æƒœè¿™å‡ å¤©çš„ä¸‹è½½é‡éƒ½æ„äº‘æƒ¨æ·¡&amp;hellip;&lt;/p></description></item><item><title>Log 8</title><link>https://sdttttt.github.io/blog/log-8/</link><pubDate>Thu, 29 Oct 2020 09:04:14 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/log-8/</guid><description>
&lt;p>æ¯å¤©ä¸Šç­, å…ˆéª‘15åˆ†é’Ÿè‡ªè¡Œè½¦åˆ°åœ°é“å†åš20å¤šåˆ†é’Ÿåœ°é“, é’ˆä¸æˆ³.&lt;/p>
&lt;p>æ„Ÿè§‰ä½“èƒ½ä¸‹é™çš„å‰å®³.&lt;/p>
&lt;p>ä»Šå¤©åœ¨åšå®¢ä»“åº“äº†å¢åŠ äº†hugoæ¨¡å—ã€‚ ä»¥åçœ‹èµ·æ¥è·Ÿæ¢ä¸»é¢˜ä¼šæ–¹ä¾¿å¾ˆå¤šã€‚
ä½†æ˜¯ä¸ºå•¥æœ‰&lt;code>go.mod&lt;/code>æ–‡ä»¶ã€‚è¿™åˆä¸æ˜¯ä¸€ä¸ªgoé¡¹ç›®&amp;hellip;&lt;/p></description></item><item><title>Log 7</title><link>https://sdttttt.github.io/blog/log-7/</link><pubDate>Wed, 28 Oct 2020 09:54:22 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/log-7/</guid><description>
&lt;p>å°è¯•ä¼˜åŒ–ä¸€ä¸‹æ–‡ç« åˆ›å»ºçš„è„šæœ¬.&lt;/p></description></item><item><title>Log 6</title><link>https://sdttttt.github.io/blog/log-6/</link><pubDate>Tue, 27 Oct 2020 17:24:55 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/log-6/</guid><description>
&lt;p>æœ€è¿‘ä»”ç»†åæ€äº†ä¸€ä¸‹, è¿˜æ˜¯å»ç ”ç©¶ä¸€äº›ä»€ä¹ˆä¸œè¥¿. sraftå·²ç»å†™çš„æˆ‘å¤´éƒ½å¤§äº†.
æˆ‘æ‰“ç®—æœ€è¿‘ä¸€æ®µæ—¶é—´ä¸å†åœ¨Githubä¸Šç¼–å†™ä»£ç äº†.&lt;/p>
&lt;p>ä¸€æ–¹é¢æ˜¯æ²¡æœ‰ä»€ä¹ˆä¸œè¥¿æ‰“å¾—èµ·æˆ‘çš„å…´è¶£, å¦ä¸€æ–¹é¢è¿˜æ˜¯è§‰å¾—è‡ªå·±æ²¡æœ‰çœŸæ­£æ“…é•¿çš„æ–¹é¢, ç ”ç©¶åˆ†å¸ƒå¼ç³»ç»Ÿè¿™ä¹ˆé•¿æ—¶é—´,
è¿›å±•çœŸçš„å¾ˆæ…¢, ä¸€æ˜¯æˆ‘å¹³æ—¶å¾ˆæ‡’, ä¸å–œæ¬¢æ­å¤æ‚çš„ç¯å¢ƒ, äºŒæ˜¯å•çº¯çš„åˆ†å¸ƒå¼æ–¹é¢çš„çŸ¥è¯†æ²¡æœ‰ä»€ä¹ˆè½¯ç”¨. éœ€è¦ç»“åˆå…¶ä»–æ–¹é¢.&lt;/p>
&lt;p>æ½œäº†æ½œäº†. (å½“ç„¶åšå®¢è¿˜æ˜¯ä¼šå†™www)&lt;/p></description></item><item><title>Cache Algorithm</title><link>https://sdttttt.github.io/blog/cache-algorithm/</link><pubDate>Mon, 26 Oct 2020 11:03:33 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/cache-algorithm/</guid><description>
&lt;p>æœ¬æ–‡ä¸»è¦è®²çš„æ˜¯ç›®å‰å­˜åœ¨çš„å‡ ç§ç¼“å­˜ç®—æ³•, æ²¡é”™, æˆ‘åˆæ¥&lt;del>è¯¯äººå­å¼Ÿ&lt;/del>äº†.&lt;/p>
&lt;p>å†…å®¹ä¼šå›´ç»•è¿‘å‡ å¹´æ¯”è¾ƒæµè¡Œçš„LFU, LRU, è¿˜æœ‰W-TinyLRUè¿™ä¹ˆä¸‰ç§ç¼“å­˜ç®—æ³•æ¥è®², å°½é‡ä½¿ç”¨æœ€ç®€ç»ƒçš„æ–‡æœ¬.&lt;/p>
&lt;h2 id="lfu">LFU&lt;/h2>
&lt;p>è¿‘æœŸæœ€å°‘ä½¿ç”¨ç®—æ³•ï¼Œå³LFUç®—æ³•ï¼ˆLeast Frequently Used algorithmï¼‰ã€‚
è¿™ç§ç®—æ³•ä¼šæ·˜æ±°è¿‘æœŸæœ€å°‘è®¿é—®çš„ç¼“å­˜,
ä»”ç»†åˆ†æä¸€ä¸‹, æ²¡é”™ï¼Œè¿™æ˜¯ä¸€ç§éå¸¸åˆç†çš„ç®—æ³•ï¼Œå› ä¸ºåˆ°ç›®å‰ä¸ºæ­¢æœ€å°‘ä½¿ç”¨çš„é¡µé¢ï¼Œ
å¾ˆå¯èƒ½ä¹Ÿæ˜¯å°†æ¥æœ€å°‘è®¿é—®çš„é¡µé¢ã€‚
è¯¥ç®—æ³•æ—¢å……åˆ†åˆ©ç”¨äº†å†…å­˜ä¸­ç¼“å­˜è°ƒåº¦æƒ…å†µçš„å†å²ä¿¡æ¯ï¼Œåˆæ­£ç¡®åæ˜ äº†ç¨‹åºçš„å±€éƒ¨æ€§ã€‚&lt;/p>
&lt;p>ä½†æ˜¯ï¼Œè¿™ç§ç®—æ³•çš„å¼€é”€æå…¶é«˜, ä¸ºäº†è®°å½•æ¯ä¸ªç¼“å­˜çš„ä½¿ç”¨æƒ…å†µ, ä½ ä¸å¾—ä¸ä¸ºæ¯ä¸€ä¸ªç¼“å­˜å¢åŠ ä¸€ä¸ªå¾ˆå¤§çš„è®¡æ•°å™¨,
æ¯æ¬¡åˆ°è¾¾ä¸´ç•Œç‚¹, æˆ‘ä»¬è¿˜éœ€è¦æ‰¾åˆ°æ‰€æœ‰è®¡æ•°å™¨ä¸­æœ€å°‘çš„ç¼“å­˜, æ·˜æ±°å®ƒ.&lt;/p>
&lt;pre>&lt;code>æ ¸å¿ƒæ€æƒ³ï¼šå¦‚æœä¸€ä¸ªæ•°æ®åœ¨æœ€è¿‘ä¸€æ®µæ—¶é—´å†…ä½¿ç”¨æ¬¡æ•°å¾ˆå°‘ï¼Œé‚£ä¹ˆåœ¨å°†æ¥ä¸€æ®µæ—¶é—´å†…è¢«ä½¿ç”¨çš„å¯èƒ½æ€§ä¹Ÿå¾ˆå°.
&lt;/code>&lt;/pre>
&lt;p>é€šå¸¸æˆ‘ä»¬ä¼šè¿™ä¹ˆå»å®ç°:&lt;/p>
&lt;p>å¤–éƒ¨ç»“æ„ä¸º&lt;code>Array&lt;/code>, å­˜å‚¨å…ƒç´ ä¸º&lt;code>KV&lt;/code>. &lt;code>K&lt;/code>: è¯¥ç¼“å­˜è®¿é—®æ¬¡æ•°. &lt;code>V&lt;/code>: ç¼“å­˜æœ¬èº«.
æ•°ç»„æŒ‰ç…§Kæ’åº. æ¯æ¬¡ç¼“å­˜å¤§å°å³å°†ä¸´ç•Œ, æ·˜æ±°&lt;code>K&lt;/code>æœ€å°çš„ç¼“å­˜.&lt;/p>
&lt;p>é¡ºä¾¿ä¸€æ &lt;code>Window-LFU&lt;/code> å®ƒæ˜¯LFUç®—æ³•çš„æ”¹è‰¯ç‰ˆ. LFUä¸­ç¼“å­˜çš„è®¿é—®æ¬¡æ•°è®°å½•çš„æ—¶é—´èŒƒå›´ä¸ºæ•´ä¸ªç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸ,
åœ¨&lt;code>Window-LFU&lt;/code>ä¸­åªå¯¹ç‰¹å®šèŒƒå›´çš„è®¿é—®æ¬¡æ•°è¿›è¡Œæ·˜æ±°. (æ¯”å¦‚æœ€è¿‘10æ¬¡è®¿é—®çš„ç¼“å­˜.)&lt;/p>
&lt;h2 id="lru">LRU&lt;/h2>
&lt;p>æœ€ä¹…æ²¡æœ‰ä½¿ç”¨ç®—æ³•ï¼Œå³LRUç®—æ³•ï¼ˆLeast Recently Used algorithmï¼‰ã€‚
è¿™ç§ç®—æ³•æŠŠè¿‘æœŸæœ€ä¹…æ²¡æœ‰è¢«è®¿é—®è¿‡çš„é¡µé¢ä½œä¸ºè¢«æ›¿æ¢çš„é¡µé¢ã€‚
å®ƒæŠŠLFUç®—æ³•ä¸­è¦è®°å½•æ•°é‡ä¸Šçš„&amp;quot;å¤š&amp;quot;ä¸&amp;quot;å°‘&amp;quot;ç®€åŒ–æˆåˆ¤æ–­&amp;quot;æœ‰&amp;quot;ä¸&amp;quot;æ— &amp;quot;ï¼Œå› æ­¤ï¼Œå®ç°èµ·æ¥æ¯”è¾ƒå®¹æ˜“ã€‚&lt;/p>
&lt;pre>&lt;code>æ ¸å¿ƒæ€æƒ³ï¼šå¦‚æœåœ¨ä¸€æ®µæ—¶é—´å†…é•¿æ—¶é—´ä¸è®¿é—®çš„é¡µé¢å°†æ¥ä¹Ÿä¸ä¼šè®¿é—®.
&lt;/code>&lt;/pre>
&lt;p>å®ç°å¾ˆç®€å•:&lt;/p>
&lt;p>å‡è®¾æˆ‘ä»¬çš„ç¼“å­˜å®¹é‡å¤§å°ä¸º2, æœ€å¤šç¼“å­˜2ä¸ªå…ƒç´ .
ä¸‹é¢æ˜¯ç¼“å­˜çš„è®¿é—®é¡ºåº.&lt;/p>
&lt;blockquote>
&lt;p>1 2 2 3&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>ç¬¬ä¸€æ¬¡: [1]&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>ç¬¬äºŒæ¬¡: [2, 1]&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>ç¬¬ä¸‰æ¬¡: [2, 1]&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>ç¬¬å››æ¬¡: [3, 2]&lt;/p>
&lt;/blockquote>
&lt;p>æœ€æ–°è®¿é—®çš„ç¼“å­˜ä¼šæ”¾åœ¨é¦–ä½, å¾ˆä¹…æ²¡æœ‰è®¿é—®çš„ç¼“å­˜è‡ªç„¶è€Œç„¶çš„å°±åˆ°äº†æœ«å°¾, ç„¶åè¢«æ·˜æ±°.&lt;/p>
&lt;h2 id="w-tinylru">W-TinyLRU&lt;/h2>
&lt;p>çŸ¥åç¼“å­˜æ¡†æ¶ caffeine å°±æ˜¯ä½¿ç”¨çš„è¿™ç§ç®—æ³• è¿™ç§ç®—æ³•ç»“åˆLRUå’ŒLFUç®—æ³•ï¼Œè§£å†³äº†çªå‘æµé‡é—®é¢˜å¸¦æ¥çš„ã€‚&lt;/p>
&lt;pre>&lt;code>æ•´ä¸ªç®—æ³•æ•°æ®ç»“æ„åˆ†æˆä¸‰ä¸ªæ®µ,åˆ†åˆ«ä¸º Eden,Probation,Protected ä¸‰ä¸ªé˜Ÿåˆ—
&lt;/code>&lt;/pre>
&lt;ul>
&lt;li>
&lt;p>Edené˜Ÿåˆ—: åœ¨caffeineä¸­è§„å®šåªèƒ½ä¸ºç¼“å­˜å®¹é‡çš„%1,å¦‚æœsize=100,
é‚£è¿™ä¸ªé˜Ÿåˆ—çš„æœ‰æ•ˆå¤§å°å°±ç­‰äº1ã€‚è¿™ä¸ªé˜Ÿåˆ—ä¸­è®°å½•çš„æ˜¯æ–°åˆ°çš„æ•°æ®ï¼Œ
é˜²æ­¢çªå‘æµé‡ç”±äºä¹‹å‰æ²¡æœ‰è®¿é—®é¢‘ç‡ï¼Œè€Œå¯¼è‡´è¢«æ·˜æ±°ã€‚
æ¯”å¦‚æœ‰ä¸€éƒ¨æ–°å‰§ä¸Šçº¿ï¼Œåœ¨æœ€å¼€å§‹å…¶å®æ˜¯æ²¡æœ‰è®¿é—®é¢‘ç‡çš„ï¼Œ
é˜²æ­¢ä¸Šçº¿ä¹‹åè¢«å…¶ä»–ç¼“å­˜æ·˜æ±°å‡ºå»ï¼Œè€ŒåŠ å…¥è¿™ä¸ªåŒºåŸŸã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Probationé˜Ÿåˆ—:å«åšç¼“åˆ‘é˜Ÿåˆ—ï¼Œåœ¨è¿™ä¸ªé˜Ÿåˆ—å°±ä»£è¡¨ä½ çš„æ•°æ®ç›¸å¯¹æ¯”è¾ƒå†·ï¼Œé©¬ä¸Šå°±è¦è¢«æ·˜æ±°äº†ã€‚&lt;br>
è¿™ä¸ªæœ‰æ•ˆå¤§å°ä¸ºsizeå‡å»edenå‡å»protectedã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Protectedé˜Ÿåˆ—:åœ¨è¿™ä¸ªé˜Ÿåˆ—ä¸­ï¼Œå¯ä»¥ç¨å¾®æ”¾å¿ƒä¸€ä¸‹äº†ï¼Œä½ æš‚æ—¶ä¸ä¼šè¢«æ·˜æ±°ï¼Œ
ä½†æ˜¯åˆ«æ€¥ï¼Œå¦‚æœProbationé˜Ÿåˆ—æ²¡æœ‰æ•°æ®äº†æˆ–è€…Protectedæ•°æ®æ»¡äº†ï¼Œ
ä½ ä¹Ÿå°†ä¼šè¢«é¢ä¸´æ·˜æ±°çš„å°´å°¬å±€é¢ã€‚å½“ç„¶æƒ³è¦å˜æˆè¿™ä¸ªé˜Ÿåˆ—ï¼Œ
éœ€è¦æŠŠProbationè®¿é—®ä¸€æ¬¡ä¹‹åï¼Œå°±ä¼šæå‡ä¸ºProtectedé˜Ÿåˆ—ã€‚
è¿™ä¸ªæœ‰æ•ˆå¤§å°ä¸º(sizeå‡å»eden) X 80% å¦‚æœsize =100ï¼Œå°±ä¼šæ˜¯79ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>åŒºåŸŸè§„åˆ™:&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>æ‰€æœ‰çš„æ–°æ•°æ®éƒ½ä¼šè¿›å…¥Edenã€‚&lt;/li>
&lt;li>Edenæ»¡äº†ï¼Œæ·˜æ±°è¿›å…¥Probationã€‚&lt;/li>
&lt;li>å¦‚æœåœ¨Probationä¸­è®¿é—®äº†å…¶ä¸­æŸä¸ªæ•°æ®ï¼Œåˆ™è¿™ä¸ªæ•°æ®å‡çº§ä¸ºProtectedã€‚&lt;/li>
&lt;li>å¦‚æœProtectedæ»¡äº†åˆä¼šç»§ç»­é™çº§ä¸ºProbationã€‚&lt;/li>
&lt;/ol>
&lt;p>Probationçš„æ·˜æ±°ç®—æ³•ä¹Ÿæ¯”è¾ƒæœ‰æ„æ€, å–å‡ºé˜Ÿå°¾å’Œé˜Ÿé¦–çš„å…ƒç´ , ç„¶åè®©è¿™ä¸¤çš‡åŸPK, è¾“äº†å°±æ·˜æ±°äº†.&lt;/p>
&lt;p>&lt;strong>çš‡åŸPKè§„åˆ™:&lt;/strong>&lt;/p>
&lt;pre>&lt;code>1.å¦‚æœé˜Ÿå°¾å…ƒç´ çš„é¢‘åº¦å¤§äºé˜Ÿé¦–ï¼Œé‚£ä¹ˆå°±ç›´æ¥æ·˜æ±°é˜Ÿé¦–ï¼Œ
2.å½“é˜Ÿå°¾é¢‘åº¦å°äºç­‰äºé˜Ÿé¦–ï¼Œä¸”é¢‘åº¦å°äº5çš„æ—¶å€™ï¼Œç›´æ¥å°†å…¶æ·˜æ±°
3.å½“é˜Ÿå°¾é¢‘åº¦å°äºç­‰äºé˜Ÿé¦–ï¼Œä¸”é¢‘åº¦å¤§äº5çš„æ—¶å€™ï¼Œé€šè¿‡éšæœºçš„æ–¹å¼è¿›è¡Œæ·˜æ±°ä»»æ„ä¸€ä¸ªã€‚(çœ‹è°è¿æ°”å¥½å’¯)
&lt;/code>&lt;/pre></description></item><item><title>Log 5</title><link>https://sdttttt.github.io/blog/log-5/</link><pubDate>Fri, 23 Oct 2020 16:44:07 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/log-5/</guid><description>
&lt;p>ä»Šå¤©å†™äº†ä¸€å¤©çš„sraft. æœ¬æ¥æ˜¯è‡ªä¿¡æ»¡æ»¡ï¼Œä½†æ˜¯æœ‰äº›åœ°æ–¹çš„è®¾è®¡çœŸçš„è®©æˆ‘ç„¦å¤´çƒ‚é¢.&lt;/p>
&lt;p>ä»Šå¤©æŠŠsraftçš„rpcçš„ç½‘ç»œé€šä¿¡éƒ¨åˆ†æ¢æˆäº†é•¿è¿æ¥ã€‚
ä½†æ˜¯å†™åˆ°èŠ‚ç‚¹å‘ç°çš„éƒ¨åˆ†åˆæœ‰é—®é¢˜æ¥äº†ï¼Œæˆ‘æ²¡æœ‰å†™å…³äºå¤„ç†èŠ‚ç‚¹å‘ç°ä¹‹ç±»çš„æ¨¡å—ï¼Œ
è‡³ä»Šéƒ½æ˜¯æŒ‰ç…§raftè®ºæ–‡ä¸Šçš„åŸºç¡€ç†è®ºæ¥å®ç°çš„ã€‚&lt;/p>
&lt;p>è¿™ä¸€å—åˆè¦æ€ä¹ˆè®¾è®¡å‘¢&amp;hellip;
æœç„¶æœ‰äº›åœ°æ–¹å†™çš„è¿˜æ˜¯å¤ªå¤æ‚äº†ä¹ˆ.&lt;/p></description></item><item><title>Log 4</title><link>https://sdttttt.github.io/blog/log-4/</link><pubDate>Thu, 22 Oct 2020 09:26:05 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/log-4/</guid><description>
&lt;p>æ˜¨å¤©ç®—æ˜¯å®Œæˆäº†ç¬¬ä¸€ä¸ªå‰ç«¯ä¸Šéœ€æ±‚.æ¥è®²è®²æˆæœå§.
(å…¶å®æ ¹æœ¬æ— å…³ç´§è¦)&lt;/p>
&lt;p>çœ‹äº†SVNè®°å½•,æ•´ä¸ªé¡¹ç›®ç¬¬ä¸€æ¬¡æäº¤æ˜¯åœ¨2018å¹´. (ç«‹é¡¹çš„æ—¶é—´æ„Ÿè§‰è‚¯å®šæ›´æ—©)&lt;/p>
&lt;p>æ•´ä½“æŠ€æœ¯ä½¿ç”¨çš„åŸºæœ¬æ—¶åŸç”ŸJS(æ²¡æœ‰ES6) + Jquery. é¡¹ç›®ä»£ç é£æ ¼å‡Œä¹±. è‚¯å®šæœ‰å¥½å‡ ä¸ªäººæ¥æ‰‹è¿‡äº†.&lt;/p>
&lt;p>æ¯ä¸ªé¡µé¢è¿˜ä¸æ˜¯HTML&amp;hellip;æ˜¯nmçš„JSP.(æ‰€ä»¥æˆ‘æ‰è§‰å¾—åº”è¯¥ä¸æ˜¯2018å¹´ç«‹é¡¹çš„)
æ‰€ä»¥æ•´ä¸ªé¡¹ç›®éƒ½æ˜¯åœ¨Tomcatä¸Šè¿è¡Œçš„.æ­£å¸¸æ¥è¯´éƒ½æ˜¯å†™æˆHTMLç„¶åè·‘åœ¨Nginxä¸Š.&lt;/p>
&lt;p>è¿™æ¬¡çš„éœ€æ±‚å°±æ˜¯åœ¨åŸæ¥çš„é¡µé¢ä¸ŠåŠ ä¸€ä¸ªæ–°çš„æŒ‰é’®å¹¶ä¸”å®Œå–„æ•´ä¸ªé¡µé¢. æˆ‘çœ‹æ¥é‚£ä¸ªé¡µé¢çš„å…¶ä»–æ ‡ç­¾.ç”¨çš„åŸºæœ¬æ˜¯ç»å¯¹å®šä½å¸ƒå±€..æƒŠäº†&lt;/p>
&lt;p>è¿™æ¬¡æˆ‘åŸºæœ¬æŠŠåŸç”ŸJSå®Œå…¨å¤ä¹ äº†ä¸€é. æˆ‘ä¸å¤ªå–œæ¬¢ä½¿ç”¨Jquery.å› ä¸ºæ„Ÿè§‰è¯­æ³•å¾ˆå¥‡æ€ª, å¯è¯»æ€§å¾ˆå·®.&lt;/p>
&lt;p>è¿˜å­¦åˆ°äº†ä¸€ä¸ªæ–°çš„åº“(GoJS)ç”¨æ¥ç”»å›¾çš„.è¿™ä¸ªåº“å…¥é—¨å¾ˆç®€å•,ä½†æ˜¯è¦é«˜åº¦è‡ªå®šä¹‰ä½¿ç”¨è¿˜æ˜¯æœ‰äº›å›°éš¾çš„.&lt;/p>
&lt;p>å”‰, æˆ‘åˆ°åº•å•¥æ—¶å€™æ‰èƒ½å†™åç«¯å˜.&lt;/p></description></item><item><title>Log 3</title><link>https://sdttttt.github.io/blog/log-3/</link><pubDate>Wed, 21 Oct 2020 08:55:36 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/log-3/</guid><description>
&lt;p>ç»†å¿ƒçš„äººå¯èƒ½æ³¨æ„åˆ°æˆ‘è¿™å‡ å¤©éƒ½åœ¨å†™JS, å› ä¸ºè¿™è¾¹çš„å…¬å¸äººæ‰‹å…¶å®ç¼ºä¹å¾ˆä¸¥é‡,
å¾ˆå¤šéƒ½æ˜¯åšåç«¯çš„, è€Œä¸”åç«¯å¹¶ä¸æ˜¯å…¨éƒ¨Java, æœ‰ç›¸å½“éƒ¨åˆ†æ˜¯Pythonå†™çš„.&lt;/p>
&lt;p>æˆ‘åœ¨å¤§å­¦æœŸé—´ä¸ºäº†é€‰æ‹©ä»¥åçš„WEBæ–¹å‘, ä¸€ç‹ å¿ƒæŠŠå½“æ—¶æ¯”è¾ƒå‰æ²¿çš„WEBæŠ€æœ¯å…¨éƒ¨å­¦äº†ä¸€é, åŒ…æ‹¬å‰ç«¯çš„ä¸€äº›æ¡†æ¶,
æœ€åé€‰æ‹©äº†WEBåç«¯, è¯­è¨€ä¸ºGo, æˆ–è€…Java. ä¹Ÿç®—åŠä¸ªå…¨æ ˆå§.&lt;/p>
&lt;p>è¿™ä¸ªå…¬å¸æ­£å¥½æ˜¯å‘æŒ¥äº†æˆ‘æ‰€æœ‰çš„æŠ€èƒ½..ä¸è¿‡è¿™è¾¹çš„JSå¤§éƒ¨åˆ†éƒ½æ˜¯åŸç”Ÿçš„, æˆ‘æ¯”è¾ƒä¹ æƒ¯ç”¨ES6çš„å†™æ³•.&lt;/p></description></item><item><title>RocketMQ 3.3.4 Broker</title><link>https://sdttttt.github.io/blog/rocketmq-comments/</link><pubDate>Tue, 13 Oct 2020 16:56:11 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/rocketmq-comments/</guid><description>
&lt;p>å·®ä¸å¤šå¯ä»¥çœ‹æ¶ˆæ¯é˜Ÿåˆ—çš„æºç äº†ã€‚
åœ¨ä¸‹ä»giteeä¸Šæ‰¾åˆ°äº†rocketmqçš„æ—©æœŸç‰ˆæœ¬ï¼ˆ3.2.2ï¼‰ï¼Œ
åæ¶ˆæ¯æ˜¯è¿™ä¸ª2014å¹´çš„é¡¹ç›®é‡Œæ²¡æœ‰å•å…ƒæµ‹è¯•æå°‘, è°ƒè¯•ä¼šæ¯”è¾ƒå›°éš¾.
å¥½æ¶ˆæ¯æ˜¯è¿™ä¸ªæ—¶å€™çš„RocketMQè¿˜æ²¡å¼€æºå¤šä¹…ï¼Œé‡Œé¢æœ‰å¾ˆå¤šä¸­æ–‡æ³¨é‡Šã€‚çœ‹èµ·æ¥ä¼šå¾ˆèˆ’æœã€‚&lt;/p>
&lt;p>æˆ‘ä»¬ä»Brokerå¼€å§‹æ¶‚é¸¦ã€‚å…³äºRocketMQä¸­æ¯ä¸ªè§’è‰²çš„ä½œç”¨è¿™é‡Œä¸å†é™ˆè¿°ï¼š&lt;/p>
&lt;p>å…ˆä»åˆå§‹åŒ–å¼€å§‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-Java" data-lang="Java"> &lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="o">[]&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">start&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">createBrokerController&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">args&lt;/span>&lt;span class="o">));&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>rocketmqæ˜¯ä»&lt;code>commandline&lt;/code>å¯åŠ¨çš„ï¼Œ&lt;code>createBrokerController&lt;/code>å‡½æ•°æ¯”è¾ƒé•¿ï¼Œ
ä¼šæœ‰å¾ˆå¤šé¢å¤–çš„é€»è¾‘å¹²æ‰°ä½ ï¼Œæˆ‘è¿™é‡Œç›´æ¥è¯´é‡ç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>è¯»å–ç¯å¢ƒå˜é‡ï¼Œæ²¡æœ‰å°±ç”¨é»˜è®¤å€¼ã€‚&lt;/li>
&lt;li>è§£æå‘½ä»¤è¡Œå‚æ•°ã€‚&lt;/li>
&lt;li>åˆå§‹åŒ–é…ç½®ç±»ã€‚&lt;/li>
&lt;li>æ‰“å°é»˜è®¤é…ç½®å†…å®¹ã€‚&lt;/li>
&lt;li>æ£€æŸ¥NameServeråœ°å€è®¾ç½®æ˜¯å¦æ­£ç¡®ã€‚&lt;/li>
&lt;li>æ£€æŸ¥brokerçš„ç±»å‹ï¼ˆmasterï¼Œslaveï¼‰&lt;/li>
&lt;li>åˆå§‹åŒ–æ—¥å¿—é…ç½®ç±»ã€‚&lt;/li>
&lt;li>å†æ¬¡æ‰“å°ã€‚&lt;/li>
&lt;li>åˆå§‹åŒ–æœåŠ¡æ§åˆ¶å¯¹è±¡.&lt;/li>
&lt;li>æœ€åå¢åŠ ä¸€ä¸ªå…³é—­Brokeræ—¶è§¦å‘çš„hook.&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>æœåŠ¡æ§åˆ¶å¯¹è±¡ï¼š Brokerå„ä¸ªæœåŠ¡æ§åˆ¶å™¨ï¼ŒåŒ…æ‹¬å­˜å‚¨å±‚é…ç½®ï¼Œé…ç½®æ–‡ä»¶ç‰ˆæœ¬å·ï¼Œæ¶ˆè´¹è¿›åº¦å­˜å‚¨ï¼ŒConsumerè¿æ¥ã€è®¢é˜…å…³ç³»ç®¡ç†ç­‰ç­‰ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>ä»¥ä¸Šå°±æ˜¯&lt;code>createBrokerController&lt;/code>çš„å†…å®¹ï¼Œå‡½æ•°è™½ç„¶é•¿ï¼Œä½†æ˜¯å¹¶ä¸å¤æ‚ã€‚&lt;/p>
&lt;p>ä¸‹é¢ä¸º&lt;code>start&lt;/code>å‡½æ•°çš„å†…å®¹, åœ¨&lt;code>main&lt;/code>ä¸­çš„&lt;code>start&lt;/code>å‡½æ•°å®é™…ä¸Šæ˜¯å»å§”æ‰˜äº†&lt;code>BrokerController&lt;/code>å»æ‰§è¡Œ.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">start&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="kd">throws&lt;/span> &lt;span class="n">Exception&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="c1">// å¯åŠ¨Brokerçš„å„å±‚æœåŠ¡
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">messageStore&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">messageStore&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">start&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">remotingServer&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">remotingServer&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">start&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">brokerOuterAPI&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">brokerOuterAPI&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">start&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">pullRequestHoldService&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">pullRequestHoldService&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">start&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">clientHousekeepingService&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">clientHousekeepingService&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">start&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">filterServerManager&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">filterServerManager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">start&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="c1">// å¯åŠ¨æ—¶ï¼Œæ³¨å†Œè¯¥Brokerçš„ä¿¡æ¯åˆ°æ‰€æœ‰çš„NameServer
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">registerBrokerAll&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="c1">// å®šæ—¶æ³¨å†ŒBrokeråˆ°Name Server
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">scheduledExecutorService&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">scheduleAtFixedRate&lt;/span>&lt;span class="o">(()&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">try&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">registerBrokerAll&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span> &lt;span class="k">catch&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">Exception&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">log&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">error&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;registerBrokerAll Exception&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">},&lt;/span> &lt;span class="n">1000&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">10&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">1000&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">30&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">TimeUnit&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">MILLISECONDS&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">brokerStatsManager&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="c1">// çœ‹èµ·æ¥å°±æ˜¯ä¸€äº›æ•°æ®ç»Ÿè®¡çº¿ç¨‹
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">brokerStatsManager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">start&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="c1">// åˆ é™¤å¤šä½™çš„Topic
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">addDeleteTopicTask&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ•´ä¸ªBorkerçš„æµç¨‹å·®ä¸å¤šå°±æ˜¯è¿™æ ·.ä»£ç é‡Œå¹¶æ²¡æœ‰ä»€ä¹ˆäº®ç‚¹è¯´å®è¯.&lt;/p></description></item><item><title>æ—¥å¿—</title><link>https://sdttttt.github.io/blog/log-2/</link><pubDate>Sun, 11 Oct 2020 14:45:23 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/log-2/</guid><description>
&lt;p>æ˜¨å¤©éª‘è‡ªè¡Œè½¦ä¸‹ç­å›æ¥åè¨éº»ç–¹åˆçŠ¯äº†, å®åœ¨æ˜¯æ¯”è¾ƒéš¾å—, ä»Šå¤©ç®—æ˜¯å»äº†è¶Ÿçš®è‚¤ç—…åŒ»é™¢.&lt;/p>
&lt;p>ç®—æ˜¯é…äº†ç‚¹è¯.
å¸Œæœ›èƒ½å¥½ä¸€ç‚¹.&lt;/p></description></item><item><title>Sraft (ä¸‰)</title><link>https://sdttttt.github.io/blog/sraft-3/</link><pubDate>Fri, 09 Oct 2020 10:52:24 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/sraft-3/</guid><description>
&lt;p>ç»è¿‡å‡ å¤©æ€è€ƒ, æˆ‘å†³å®šç¨å¾®é‡æ–°åˆ†é…ä¸€ä¸‹å„ä¸ªæ¨¡å—çš„å¯†åº¦.&lt;/p>
&lt;p>&lt;code>RaftKernel&lt;/code>ä¸­çš„&lt;code>Solt&lt;/code>ä¸ºæœ¬æ¬¡çš„é‡ç‚¹.å¯¹&lt;code>RaftKernel&lt;/code>æ¥è¯´&lt;code>Solt&lt;/code>ä¸ºä¸€ä¸ªé»‘ç›’.&lt;code>Solt&lt;/code>å¯¹å¤–å¤„ç†æ‰€æœ‰äº‹ä»¶,ä½†æ˜¯ä¸æš´éœ²å®ç°.
å†…éƒ¨çš„çŠ¶æ€æœºè½¬åŒ–ä¹Ÿå¯¹&lt;code>RaftKernel&lt;/code>è¿›è¡Œéšè—.&lt;code>RaftKernel&lt;/code>åªè¦æ¥å—å¤–ç•ŒAE, äº¤ç»™&lt;code>Solt&lt;/code>, &lt;code>Solt&lt;/code>åé¦ˆç›¸åº”çš„äº‹ä»¶, &lt;code>RaftKernel&lt;/code>è¿›è¡Œå¤„ç†.&lt;/p>
&lt;p>æŒ–è—•, å¸Œæœ›è¿™æ¬¡æœ‰æ•ˆ.&lt;img src="https://idanmu.net/2020/10/c003543193753.jpg" alt="dc77f6e30c4b4dba807b4a84b29c74d4.jpg">&lt;/p></description></item><item><title>Essays</title><link>https://sdttttt.github.io/blog/essays/</link><pubDate>Tue, 06 Oct 2020 12:34:31 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/essays/</guid><description>
&lt;p>å‰å‡ å¤©å»æœ‹å‹é‚£è¾¹ç©äº†ä¸€è¶Ÿ, äº‹å®ä¸Šå¹¶æ²¡æœ‰ä»€ä¹ˆå¥½ç©çš„.
è¿™å‡ å¤©ä»€ä¹ˆä¹Ÿæ²¡åš. sraftä¹Ÿæ²¡æœ‰ä»€ä¹ˆè¿›å±•.&lt;/p>
&lt;p>æˆ‘åˆé‡æ–°å¯¹Ruby on Rails æ„Ÿå…´è¶£äº†.ä½†æ˜¯æ²¡æœ‰ä¸€ä¸ªå¾ˆå¥½çš„ç¯å¢ƒå†™è¿™ä¸ªä¸œè¥¿.è¿˜æ˜¯ç®—äº†.&lt;/p>
&lt;p>è¿˜æ˜¯æƒ³æƒ³ä¸‹ä¸€ä¸ªé¡¹ç›®å†™ä»€ä¹ˆæ¯”è¾ƒå¥½.&lt;/p></description></item><item><title>GRC (äºŒ)</title><link>https://sdttttt.github.io/blog/grc-2/</link><pubDate>Thu, 01 Oct 2020 15:24:27 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/grc-2/</guid><description>
&lt;p>æ˜¨å¤©å§‘ä¸”ç®—æ˜¯å®Œæˆäº†GRCçš„å¼€å‘. pushè¿™ä¸ªå‘½ä»¤ä¸æ˜¯å¾ˆæƒ³åŠ ,æƒ³äº†ä¸€ä¸‹ä¹Ÿæ²¡æœ‰å¿…è¦.&lt;/p>
&lt;p>GRCçš„&lt;code>0.8.0&lt;/code>ç‰ˆæœ¬æ˜¨å¤©ç®—æ˜¯å‘å¸ƒäº†, åº”è¯¥ä¹Ÿç®—æ˜¯å¤´ä¸€æ¬¡æ­£ç»çš„ç”¨Rustæ¥å¼€å‘è½¯ä»¶.&lt;/p>
&lt;p>åœ¨crate.ioä¸Šçœ‹èµ·æ¥æœ‰100çš„å®‰è£…äº†. ä¸çŸ¥é“ä»–ä»¬è„¸ä¸Šæ˜¯ä»€ä¹ˆè¡¨æƒ… wwww&lt;/p>
&lt;p>å¸Œæœ›GRCèƒ½ç»™ä»–ä»¬å¸¦å»æ–¹ä¾¿å§.&lt;/p>
&lt;p>å½“ç„¶, GRCçš„ç»ˆç‚¹è¿˜æ²¡åˆ°. æˆ‘ä¼šä¸€ç›´ä½¿ç”¨è¿™ä¸ªå·¥å…·. ç¢°åˆ°BUGæˆ–è€…æœ‰æ–°æƒ³æ³•è‚¯å®šä¼šå»æ›´æ–°.å†µä¸”ç°åœ¨è¿&lt;code>1.0.0&lt;/code>ç‰ˆæœ¬éƒ½è¿˜æ²¡åˆ°.&lt;/p>
&lt;p>æ¥ä¸‹æ¥ä¸»è¦å·¥ä½œä¼šä¸“æ³¨åˆ°å­¦ä¹ åŠ å¯†ç®—æ³•,å’Œsraftçš„å¼€å‘ä¸Š.&lt;/p>
&lt;p>&amp;hellip;sraftä¸€ç›´éƒ½æ²¡æœ‰ä»€ä¹ˆå¥½çš„æƒ³æ³•å•Š&amp;hellip;&lt;/p></description></item><item><title>GRC (ä¸€)</title><link>https://sdttttt.github.io/blog/grc-1/</link><pubDate>Sat, 26 Sep 2020 14:49:17 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/grc-1/</guid><description>
&lt;p>ooo! ä¸€ä¸ªä¸é”™çš„æ¶ˆæ¯.&lt;/p>
&lt;p>ç›®å‰GRCçš„commitè§„èŒƒçš„åŠŸèƒ½å·²ç»å®Œå…¨å®ç°äº†.
ä¹‹å‰è¿˜è¯´è¦å‡ ä¸ªæ˜ŸæœŸ, çœ‹æ¥æ¯”æˆ‘æƒ³å¾—è¦å¿«å¾ˆå¤š
&lt;del>ğŸ‘´å‹¤å‹‰&lt;/del>
åŸºæœ¬ä¸Šå·²ç»å’Œgit-czæœ‰ç€å®Œå…¨ä¸€è‡´çš„åŠŸèƒ½.
æˆ‘ä¹Ÿå·²ç»æŠŠGRCå‘å¸ƒåœ¨äº†crates.ioç½‘ç«™ä¸Š.
åœ¨crates.ioä¸Šæœç´¢grcå°±èƒ½çœ‹åˆ°.
åŒæ—¶æˆ‘ä¹Ÿåœ¨v2exä¸Šå†™äº†å…³äºGRCçš„æ–‡ç« .&lt;/p>
&lt;p>å¼€å‘ä¹Ÿä¼šç»§ç»­è¿›è¡Œ, GRCä¼šåœ¨ä»¥åä¸ºä½ æä¾›æ›´æ–¹ä¾¿çš„åŠŸèƒ½.
æˆ‘ä¹ŸæœŸå¾…æœ‰äººèƒ½å‚ä¸åˆ°è¿™ä¸ªé¡¹ç›®ä¸­æ¥.&lt;/p>
&lt;p>å¸Œæœ›GRCèƒ½å¸®åŠ©æ›´å¤šäºº.&lt;/p></description></item><item><title>sraft (äºŒ)</title><link>https://sdttttt.github.io/blog/sraft-2/</link><pubDate>Tue, 22 Sep 2020 12:08:44 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/sraft-2/</guid><description>
&lt;p>æ˜¨å¤©è‰è‰çš„å®Œæˆäº†é€šä¿¡åè®®é€‚é…å™¨, è‡³å°‘èƒ½åšåˆ°è‡ªç”±åˆ‡æ¢åè®®,
çºµçœ‹æ•´ä¸ªç¼–ç¨‹æ¨¡å‹è¿˜æ˜¯æœ‰ç¼ºé™·,
StateMachineçš„å†…éƒ¨ç»“æ„æ¯”æˆ‘æƒ³çš„è¦å¤æ‚çš„å¤š,
å¤šä¸ªçŠ¶æ€å®ç°çš„åˆ‡æ¢,ä»¥åŠå¯¹ä¸€äº›å†…éƒ¨äº‹ä»¶çš„è§¦å‘.
StateMachineæ¨¡å—çš„å¯†åº¦å’Œå…¶ä»–æ¨¡å—å®Œå…¨ä¸åŒ. åè€ŒRaftKernelå­˜åœ¨çš„æ„ä¹‰å´å‡å°äº†.&lt;/p>
&lt;p>ç»è¿‡æ˜¨å¤©æ™šä¸Šå’Œä»Šæ—©çš„è€ƒè™‘, æˆ‘å†³å®šå°†StateMachineä½œä¸ºä¸€ä¸ªSlot,æ¥å…¥åˆ°RaftKernelä¸­å»,
RaftKernelç°åœ¨åŒæ—¶ä¹Ÿæ˜¯çŠ¶æ€æœºæœ¬èº«, Slotæ˜¯å¯å˜çš„, å¯ä»¥æœ‰Leader, Follower, Candidateä¸‰ç§æ’æ§½,æ¯ä¸ªSlotéƒ½æœ‰ä¸åŒçš„æ‰©å±•å­—æ®µ, æ¯”å¦‚Leaderä¼šéœ€è¦ç™»è®°æ¯ä¸ªNodeçš„åŒæ­¥æ—¥å¿—çš„æ·±åº¦ä»¥åŠçŠ¶æ€. å¹¶ä¸”æ¯ä¸ªSlotéƒ½æœ‰è‡ªå·±çš„äº‹ä»¶å¤„ç†å®ç°.&lt;/p>
&lt;p>æ²¡æƒ³åˆ°ç¬¬ä¸€å¤©å¼€å‘ç»“æŸå°±ä¼šé‡åˆ°éº»çƒ¦, çœ‹æ¥sraftä»¥åçš„è‹¦éš¾è¿˜ä¸å°‘&amp;hellip;&lt;/p></description></item><item><title>Sraft (ä¸€)</title><link>https://sdttttt.github.io/blog/sraft-1/</link><pubDate>Mon, 21 Sep 2020 11:29:51 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/sraft-1/</guid><description>
&lt;p>ä»Šå¤©å¼€å§‹ç®—æ˜¯æ­£å¼ç¼–å†™Sraftè¿™ä¸ªåº“, å¼€å‘çš„åŸå› æœ‰ä¸¤ä¸ª:&lt;/p>
&lt;ul>
&lt;li>æˆ‘éœ€è¦é€šè¿‡è¿™æ¬¡å¼€å‘æ¥ç†Ÿæ‚‰Raftè¿™ä¸ªåè®®.&lt;del>(ä»¥åé¢è¯•æˆ–è€…å’Œäººæ”€è°ˆä¹Ÿæ›´æœ‰åº•æ°”)&lt;/del>&lt;/li>
&lt;li>æˆ‘çš„å¾®æœåŠ¡æ¡†æ¶çš„æœåŠ¡ä¸­å¿ƒéœ€è¦ä¸€ä¸ªèƒ½è¾¾æˆåˆ†å¸ƒå¼ä¸€è‡´æ€§çš„åŠŸèƒ½.&lt;/li>
&lt;/ul>
&lt;p>è¯­è¨€é‡‡ç”¨çš„æ˜¯Go, ç›®å‰çš„ç¼–ç¨‹æ¨¡å‹å¤§æ¦‚ä¹Ÿå®Œæˆäº†, ä¸‹é¢æˆ‘æ¥ä»‹ç»:&lt;/p>
&lt;blockquote>
&lt;p>æœ¬äººå–œæ¬¢ç®€å•å¹¶ä¸”é«˜æ•ˆçš„è®¾è®¡, å¯¹äºè®¾è®¡å¤æ‚éš¾ä»¥å®ç°çš„ä¸œè¥¿ä¼šæ„Ÿåˆ°ä¸é€‚(è„‘å­ä¸å¤Ÿç”¨),&lt;/p>
&lt;/blockquote>
&lt;h3 id="raft-kernel">Raft Kernel&lt;/h3>
&lt;p>æ•´ä¸ªç¼–ç¨‹æ¨¡å‹ä¼šæœ‰æ¯”è¾ƒå¤šçš„æ¨¡å—, æ•´ä½“é‡‡ç”¨çš„æ˜¯å¾®æ ¸æ¶æ„, &lt;code>Raft Kernel&lt;/code>ä¼šåè°ƒå„ä¸ªæ¨¡å—ä¹‹é—´çš„å·¥ä½œ.&lt;/p>
&lt;p>æ¨¡å—ä¹‹é—´çš„é€šä¿¡ç”±&lt;code>Raft Kernel&lt;/code>æ¥å®Œæˆ. é€šä¿¡æ–¹å¼é‡‡ç”¨&lt;code>Channel&lt;/code>å¼‚æ­¥éé˜»å¡çš„å½¢å¼.&lt;/p>
&lt;h3 id="exchange-network">Exchange Network&lt;/h3>
&lt;p>å¤–éƒ¨é€šä¿¡ä»è¿™é‡Œè¿›å…¥, ç”±&lt;code>Exchange Network&lt;/code>å°†é€šä¿¡å†…å®¹å°è£…ä¸ºäº‹ä»¶, å‘é€ç»™&lt;code>Raft Kernel&lt;/code>.&lt;/p>
&lt;p>æˆ–è€…&lt;code>Raft Kernel&lt;/code>ä¼ é€’äº‹ä»¶ç»™&lt;code>Exchange Network&lt;/code>, å†ç”±&lt;code>Exchange Network&lt;/code>æ‰§è¡Œå¤–éƒ¨é€šä¿¡.&lt;/p>
&lt;h3 id="state-machine">State Machine&lt;/h3>
&lt;p>Raftåè®®çš„æ ¸å¿ƒå®ç°, çŠ¶æ€æœºä¼šåœ¨&lt;code>Leader&lt;/code>, &lt;code>Follower&lt;/code>, &lt;code>Candidate&lt;/code>ä¸‰ç§è§’è‰²ä¹‹é—´è‡ªåŠ¨åˆ‡æ¢,
æ¯ä¸€è§’è‰²å¤„ç†çš„äº‹ä»¶éƒ½æ˜¯ä¸€æ ·çš„, ä½†æ˜¯å…·ä½“è¿‡ç¨‹æ˜¯ä¸ä¸€æ ·çš„. (è¿™ä¸ªéƒ¨åˆ†çš„å¯†åº¦ä¼šæ¯”è¾ƒå¤§)&lt;/p>
&lt;h3 id="data-log-synchronizer">Data Log Synchronizer&lt;/h3>
&lt;p>è´Ÿè´£åŒæ­¥æ•°æ®çš„æ¨¡å—, é‡‡ç”¨çš„æ˜¯æ—¥å¿—æäº¤å½¢å¼.&lt;/p>
&lt;hr>
&lt;p>ä»¥ä¸Šçš„æˆ‘ç›®å‰å·²ç»æ„æ€å‡ºçš„ç¼–ç¨‹æ¨¡å‹, ä½†æ˜¯ä¸ºæš‚å®š. å®é™…çš„ç¼–å†™æ¨¡å‹è‚¯å®šä¼šæœ‰å°‘è®¸ä¿®æ”¹.&lt;/p>
&lt;p>PROJECT: github.com/sdttttt/sraft&lt;/p></description></item><item><title>About Gcr</title><link>https://sdttttt.github.io/blog/about-gcr/</link><pubDate>Sun, 20 Sep 2020 13:20:06 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/about-gcr/</guid><description>
&lt;p>åå¤šå¤©å‰, æˆ‘åˆ›å»ºäº†GCRè¿™ä¸ªé¡¹ç›®, åŸå› æ¯”è¾ƒçº¯ç²¹,
æˆ‘æ˜¯ä¸ªå‘½ä»¤è¡Œå·¥å…·çˆ±å¥½è€…, æˆ‘è®¤ä¸ºå‘½ä»¤è¡Œèƒ½å¸¦æ¥æ›´å¥½çš„å·¥ä½œæ•ˆç‡ä»¥åŠæ”¶ç›Š,
æˆ‘å¹³æ—¶ç¼–ç , ä¹Ÿæ˜¯éµå®ˆGitæäº¤è§„èŒƒçš„,
ä½¿ç”¨&lt;code>Node.js&lt;/code>å¹³å°ä¸Šçš„&lt;code>git-cz&lt;/code>å·¥å…·æ¥æ ¼å¼åŒ–æˆ‘çš„æäº¤ä¿¡æ¯,
ä¸è¿‡ç”±äºå®ƒå±äº&lt;code>Node.js&lt;/code>è¿™ä¸ªå¹³å°, ä¸å¯é¿å…, ä½ éœ€è¦å®‰è£…Node.jsçš„runtimeç¯å¢ƒ.&lt;/p>
&lt;p>æˆ‘æƒ³è¦ä¸€ç§æ›´åŠ æ–¹é¢å¿«é€Ÿçš„å·¥å…·, æ‰€ä»¥æˆ‘å»ºç«‹äº†GCRè¿™ä¸ªé¡¹ç›®,
å®ƒæ˜¯ä½¿ç”¨&lt;code>Rust&lt;/code>ç¼–å†™çš„, ä¸éœ€è¦å®‰è£…ä»»ä½•ç¯å¢ƒ, æ¯”èµ·Node, å®ƒä¼šæ›´å¿«, è€Œä¸”ä¿ç•™äº†è·¨å¹³å°çš„ç‰¹æ€§.
åœ¨GCRä¸­æˆ‘è¿˜ä¼šåŠ å…¥ä¸€äº›æ¯”è¾ƒä¸ªæ€§åŒ–çš„å…ƒç´ . GCRçœ‹èµ·æ¥å¯èƒ½ä¼šæ˜¯ä¸€ä¸ªæ›´å¥½ç”¨çš„&lt;code>Git?&lt;/code>.&lt;/p>
&lt;p>è¿™ä¸ªé¡¹ç›®å¯èƒ½è¿˜éœ€è¦å‡ ä¸ªæ˜ŸæœŸçš„æ—¶é—´, è¯·æœŸå¾…å§.&lt;/p></description></item><item><title>FAQ</title><link>https://sdttttt.github.io/blog/faq/</link><pubDate>Sat, 19 Sep 2020 20:15:53 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/faq/</guid><description>
&lt;p>ä»¥å‰ä¸€äº›å°ç™½ç»å¸¸é—®æˆ‘çš„é—®é¢˜.&lt;/p>
&lt;p>Q: æˆ‘æƒ³è‡ªå·±å»ºç«‹ä¸€ä¸ªç½‘ç«™, æˆ‘åº”è¯¥ä½¿ç”¨ä»€ä¹ˆæŠ€æœ¯?&lt;/p>
&lt;p>A: Ruby on Rails.&lt;/p>
&lt;blockquote>
&lt;p>RORæ˜¯ä¸€æ¬¾è€ç‰Œçš„WEBMVCæ¡†æ¶, åˆ°ç°åœ¨æœ‰10å¤šå¹´çš„å†å²äº†. åœ¨ä¸­å›½, RORä½¿ç”¨çš„å¹¶ä¸å¤š,
è¿™å¹¶ä¸èƒ½è¯´æ˜å®ƒä¸ä¼˜ç§€, RORæ‹¥æœ‰éå¸¸å¤šçš„åŠŸèƒ½æ¨¡å—, å‡ ä¹æ²¡æœ‰RORåšä¸åˆ°çš„.
è®ºå¼€å‘æ•ˆç‡,RORç»å¯¹èƒ½æ»¡è¶³ä½ , Rubyè¿™ä¸ªè¯­è¨€, å¦‚æœä½ æœ‰å»å­¦è¿‡,
ä¼šå‘ç°ä»–çš„è¯­æ³•éå¸¸çš„éšæ„. è‡ªå·±é€ ä¸€ä¸ªè¯­æ³•Rubyéƒ½èƒ½æ”¯æŒ, æˆ‘è®¤ä¸º, Rubyæ˜¯åœ¨æ‰€æœ‰è¯­è¨€ä¸­å¼€å‘ä½“éªŒæœ€å¥½çš„è¯­è¨€. è‰¯å¥½çš„å¼€å‘ä½“éªŒåŠ ä¸Šä¼˜ç§€çš„å¼€å‘æ•ˆç‡, RORæ˜¯å€¼å¾—ä½ å»ä½¿ç”¨çš„.&lt;/p>
&lt;/blockquote>
&lt;p>Q: æˆ‘æƒ³å†™ä¸€ç‚¹å°å·¥å…·, æˆ‘åº”è¯¥ç”¨ä»€ä¹ˆè¯­è¨€?&lt;/p>
&lt;p>A: Python.&lt;/p></description></item><item><title>æ—¥å¿—</title><link>https://sdttttt.github.io/blog/log-1/</link><pubDate>Sat, 19 Sep 2020 11:06:17 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/log-1/</guid><description>
&lt;p>ç›®å‰è¿˜æ˜¯ä¸ª5æœˆä»½åˆšæ¯•ä¸šçš„åº”å±Šç”Ÿ, ä»Šå¹´è¿˜æ˜¯æ’åˆ°äº†ç–«æƒ…è¿™ä¸ªæ—¶é—´å£ä¸Š,
å·¥ä½œçœŸæ˜¯ç›¸å½“çš„éš¾æ‰¾, 6æœˆåˆ°7æœˆçš„æ ·å­, æˆ‘å»å°è¯•å»è€ƒé©¾ç…§, ç›®å‰è¿˜åœ¨ç§‘ç›®äºŒè¿™è¾¹å¡ç€,
ä¸­é—´æœ‰ç©ºä¹Ÿæ˜¯å„ç§æ‰¾å•ä½å»é¢è¯•.&lt;/p>
&lt;p>æ¯”è¾ƒå¹¸è¿, æˆ‘åœ¨8æœˆåˆçš„æ—¶å€™æ”¶åˆ°äº†æ¥è‡ªå®‰æ’ä¿¡æ¯çš„é¢è¯•é€šçŸ¥, ä»–ä»¬æ˜¯ä¸€å®¶ä¸Šå¸‚å…¬å¸, è§„æ¨¡ä¹Ÿä¸å°, æˆ‘ä¹Ÿæ˜¯è¢«åˆ«äººå†…æ¨æ‰æœ‰è¿™ä¸ªé¢è¯•èµ„æ ¼çš„, é¢è¯•ä¸€å…±ä¸‰è½®, å‰ä¸¤è½®æŠ€æœ¯é¢è¯•, æœ€åä¸€è½®ç»¼åˆé¢è¯•, ç¬¬ä¸€è½®æŠ€æœ¯é¢è¯•å¤§æ¦‚å°±æ˜¯é—®äº†æˆ‘ä¸€äº›JVMåŸç†, ä»¥åŠç¼–ç æ€è·¯, è¿˜æœ‰ä¸€äº›æˆ‘æ¯”è¾ƒæ“…é•¿çš„åˆ†å¸ƒå¼å­˜å‚¨çš„é—®é¢˜. ç¬¬ä¸€è½®è¿‡çš„å‘¢ä¹Ÿè¿˜ç®—æƒŠé™©. ç¬¬äºŒè½®æ˜¯åœ¨å‡ å¤©å, é—®çš„å†…å®¹åŸºæœ¬ä¸Šæ˜¯ä¸€äº›JDKæºç , æ•°æ®ç»“æ„, è¿˜æœ‰ä¸€äº›æ¡†æ¶é—®é¢˜.æˆ‘å›ç­”çš„è¿˜ç®—æ˜¯æµç•…, ä¹Ÿç®—æ˜¯è¿‡äº†.å¯æƒœ,æœ€åä¸€è½®é¢è¯•ä¹‹å‰,å› ä¸ºå®‰æ’ä¸æ‹›æ”¶985,211ä»¥å¤–çš„åº”å±Šç”Ÿ, æ‰€ä»¥æˆ‘è¢«æ·˜æ±°äº†.&lt;/p>
&lt;p>åé¢æ¯å¤©åœ¨æ™šä¸ŠæŠ•ç®€å†, å¤§æ¦‚åœ¨ä¸€ä¸ªæœˆå, åˆæœ‰æ–°çš„é¢è¯•æ¥äº†, ä¸€å®¶å«åšéƒ¦é¸£ç§‘æŠ€çš„å…¬å¸, é¢è¯•å®˜é—®çš„éƒ½æ˜¯ä¸€äº›ä¸šåŠ¡å¤„ç†é€»è¾‘, èº«ä¸ºåº”å±Šç”Ÿçš„æˆ‘ä¹Ÿæ˜¯åƒäº†äº, å› ä¸ºæˆ‘æ ¹æœ¬æ²¡æœ‰å®é™…çš„å·¥ä½œç»éªŒ. ä¸è¿‡æˆ‘è¿˜æ˜¯ä»¥è¯•ç”¨ç”Ÿçš„èº«ä»½è¿›å»äº†.&lt;/p>
&lt;p>æ–°äººå…¥èŒç¬¬ä¸€å¤©å°±æ˜¯å…ˆæŠŠå…¬å¸é¡¹ç›®çš„ä»£ç è¿‡ä¸€è¾¹, çœ‹äº†ä»–ä»¬å…¬å¸çš„ä»£ç ä¹‹å, è¯´å®è¯, æˆ‘éå¸¸å¤±æœ›, å¤æ‚çš„å¯¹è±¡å…³ç³»ç»“æ„, é•¿å†—çš„æ§åˆ¶å™¨å‡½æ•°, ä»¥åŠç©ºç©ºå¦‚ä¹Ÿçš„testæ–‡ä»¶å¤¹, æˆ‘ä¸çŸ¥é“ä»–ä»¬çš„é¡¹ç›®èƒ½ç»´æŠ¤å¤šé•¿æ—¶é—´, å¯èƒ½æ˜¯æˆ‘çš„æƒ³æ³•å¤ªæç«¯äº†, å¤§å­¦æ—¶çš„æˆ‘å°±å¼€å§‹å—åˆ°é©¬ä¸ç¦å‹’çš„è½¯ä»¶è®¾è®¡æ€æƒ³çš„å½±å“, å¯¹ç»´æŠ¤æ€§å·®çš„ä»£ç å˜å¾—æ•æ„Ÿèµ·æ¥. æˆ‘è¾¹è¯»ä»–ä»¬çš„ä»£ç , è¾¹é‡æ„ç€. å°±è¿™æ ·è¿‡äº†ä¸€ä¸ªæ˜ŸæœŸ.&lt;/p>
&lt;p>åœ¨è¿™å‘¨é‡Œ, æˆ‘è¿˜æ”¶åˆ°äº†æ¥è‡ªç”µä¿¡å’Œä¸€å®¶ç”µå­äº¤æ˜“å…¬å¸çš„é¢è¯•é€šçŸ¥, æˆ‘å¾ˆé«˜å…´, å› ä¸ºæˆ‘å¯¹ç°åœ¨çš„å·¥ä½œå¹¶ä¸æ„Ÿåˆ°æ»¡è¶³, åœ¨å‘¨äº”, æˆ‘è¯·äº†å‡, å»é¢è¯•, ç”µä¿¡è¿™è¾¹å¾ˆé¡ºåˆ©, é¢è¯•å®˜å’Œæˆ‘è¯´, ä»–å–œæ¬¢æˆ‘çš„å¼€æºé¡¹ç›®, å¹¶ä¸”å¯¹æˆ‘çš„CICDæŠ€æœ¯æ„Ÿå…´è¶£, è€Œä¸”ä»–ä¹Ÿä¸å…³å¿ƒæˆ‘çš„å­¦å†, æˆ‘çœŸçš„å¾ˆé«˜å…´.ä¸è¿‡åœ¨å½•ç”¨ä¹‹å‰,é¢è¯•å®˜è¯´å¾—å…ˆå’Œä¸Šçº§æ±‡æŠ¥, å› ä¸ºå½•ä¸å½•ç”¨ä¸æ˜¯ä»–èƒ½å†³å®šçš„.&lt;/p>
&lt;p>ä¸‹åˆ, æˆ‘å»äº†é‚£å®¶ç”µå­äº¤æ˜“å…¬å¸é¢è¯•, ä¸è¿‡åº”å±Šç”Ÿåœ¨ä»–ä»¬å…¬å¸é¢è¯•ä¹‹å‰å¾—å…ˆåšè¯•å·, å†…å®¹æ˜¯å…³äºJavaçš„, æˆ‘æœ‰ç‚¹åƒæƒŠ, ä¸è¿‡æˆ‘ä¹Ÿå‘ç°äº†, å¯¹äºä¸€äº›javaä»£ç çš„è¿è¡Œç»†èŠ‚æˆ‘è¿˜äº†è§£çš„ä¸å¤Ÿæ¸…æ¥š, åœ¨è¿™é‡Œåˆå‘ç°äº†è‡ªå·±çš„ç¼ºç‚¹, æˆ‘æ„Ÿåˆ°å¾ˆæ»¡è¶³. è¯•å·å®Œæˆå, å°±æ˜¯é¢è°ˆäº†, é¢è¯•å®˜çœ‹èµ·æ¥æ¥è¿‘30å², ä»–å…ˆé—®äº†æˆ‘çš„å¼€æºé¡¹ç›®çš„é—®é¢˜, æ¥ç€æ˜¯ä¸€äº›JavaåŸºç¡€çš„é—®é¢˜, æœ€ååˆè€ƒäº†è€ƒæˆ‘çš„ä¸šåŠ¡èƒ½åŠ›, ä»–å‡ºäº†ä¸€ä¸ªç§’æ€é¢˜, æˆ‘å›ç­”çš„å¹¶ä¸ç®—å¥½, åº”è¯¥åªç­”å¯¹äº†ä¸€åŠ.
è¿™æ¬¡çš„é¢è¯•åº”è¯¥æ˜¯å‡‰äº†.å›å®¶çš„è·¯ä¸Šæˆ‘å°±æ˜¯è¿™æ ·æƒ³çš„.&lt;/p>
&lt;p>æœ€åå¸Œæœ›ç”µä¿¡çš„é¢è¯•èƒ½å¤Ÿé¡ºåˆ©å§.&lt;/p></description></item><item><title>MyBatis æºç åˆ†æ</title><link>https://sdttttt.github.io/blog/mybatissourcecode/</link><pubDate>Thu, 10 Sep 2020 22:15:42 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/mybatissourcecode/</guid><description>
&lt;p>å…¶å®å¾ˆæ—©å°±æƒ³å†™ä¸€ç¯‡ iBatis çš„æºç åˆ†æäº†, ä¸è¿‡æœ‰æ®µæ—¶é—´å»å­¦ä¹  Go äº†, Java å°±æ”¾ä¸‹äº†, æœ€è¿‘
é‡æ–°æ¡èµ· Java å°±æŠŠä»¥å‰æ²¡å¡«çš„å‘,å¡«ä¸€ä¸‹.&lt;/p>
&lt;h1 id="init">Init&lt;/h1>
&lt;p>ç°åœ¨å¼€å§‹æ­£ç‰‡.&lt;/p>
&lt;p>é¦–å…ˆæ˜¯ iBatis çš„åˆå§‹åŒ–å·¥ä½œ.æˆ‘ä»¬çœ‹ä¸‹é¢çš„ä»£ç :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-Java" data-lang="Java">&lt;span class="c1">// `BlogDataSourceFactory`çš„ä¸»è¦ä½œç”¨: é€šè¿‡ä½ çš„é…ç½®æ–‡ä»¶, åˆå§‹åŒ–ä¸€ä¸ªDataSource
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">DataSource&lt;/span> &lt;span class="n">dataSource&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">BlogDataSourceFactory&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getBlogDataSource&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="c1">// JdbcTransactionFactoryä¸€ä¸ªNewå°±èƒ½å¾—åˆ°, æ²¡ä»€ä¹ˆä¾èµ–æ¡ä»¶
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">TransactionFactory&lt;/span> &lt;span class="n">transactionFactory&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">JdbcTransactionFactory&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="c1">// Environmentè¦ä½ äº¤å‡ºæ•°æ®æºå’Œäº‹åŠ¡å·¥å‚è¿˜æœ‰ä½ çš„ç¯å¢ƒæ˜¯å¼€å‘è¿˜æ˜¯ç”Ÿäº§
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">Environment&lt;/span> &lt;span class="n">environment&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Environment&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;development&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">transactionFactory&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">dataSource&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="c1">// Configurationæœ‰åŸºæœ¬ä¸Šä½ æ‰€æœ‰çš„é…ç½®
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">Configuration&lt;/span> &lt;span class="n">configuration&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Configuration&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">environment&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="c1">// æ·»åŠ ä½ çš„mapperåˆ°é…ç½®åˆ—è¡¨ä¸­, ç­‰ä¼šæˆ‘ä»¬å»åˆ†æå®ƒ
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">configuration&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">addMapper&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">BlogMapper&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="c1">// é€šè¿‡ä½ çš„é…ç½®ç±»,è®©æˆ‘ä»¬åˆå§‹åŒ–ä¸€ä¸ªSqlSessionFactory! æˆ‘ä»¬ç»ˆäºè¿›å…¥æ­£é¢˜äº†!!
&lt;/span>&lt;span class="c1">// å¯èƒ½ä½ è§‰å¾—å¾ˆå¿«... å…¶å®æœ¬äººåœ¨è¿™é‡Œé¢åˆ†æè¿˜æ˜¯èŠ±äº†å¾ˆé•¿æ—¶é—´
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="n">SqlSessionFactory&lt;/span> &lt;span class="n">sqlSessionFactory&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">SqlSessionFactoryBuilder&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="na">build&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">configuration&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¥½, ä¸Šæ–‡æœ‰è¯´&lt;code>configuration.addMapper(BlogMapper.class)&lt;/code>è¿™ä¸ªæ–¹æ³•, ç°åœ¨æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹å®ƒ.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-Java" data-lang="Java">
&lt;span class="c1">// è¿™ä¸ªæ˜¯Configurationä¸­çš„æ–¹æ³•, å®ƒå®é™…ä¸Šæ˜¯å§”æ‰˜mapperRegistryå»æ‰§è¡Œ
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="kd">public&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">addMapper&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">Class&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">type&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">mapperRegistry&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">addMapper&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">addMapper&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">Class&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">type&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="c1">//mapperå¿…é¡»æ˜¯æ¥å£
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">isInterface&lt;/span>&lt;span class="o">())&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">hasMapper&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="o">))&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="c1">//å¦‚æœé‡å¤æ·»åŠ äº†ï¼ŒæŠ¥é”™
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">throw&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">BindingException&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;Type &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">type&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s">&amp;#34; is already known to the MapperRegistry.&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="kt">boolean&lt;/span> &lt;span class="n">loadCompleted&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="k">try&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="c1">// åŠ å…¥ä¸€ä¸ªMapperçš„ä»£ç†ç”Ÿäº§å·¥å‚
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">knownMappers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">put&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">MapperProxyFactory&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="o">&amp;gt;(&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="o">));&lt;/span>
&lt;span class="c1">// It&amp;#39;s important that the type is added before the parser is run
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// otherwise the binding may automatically be attempted by the
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// mapper parser. If the type is already known, it won&amp;#39;t try.
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// è¿™ä¸ªæ˜¯é€šè¿‡æ³¨è§£æ¥æ„å»ºMapper, æš‚æ—¶ä¸çœ‹
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">MapperAnnotationBuilder&lt;/span> &lt;span class="n">parser&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">MapperAnnotationBuilder&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">type&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">parser&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">parse&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="n">loadCompleted&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">}&lt;/span> &lt;span class="k">finally&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="c1">//å¦‚æœåŠ è½½è¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸éœ€è¦å†å°†è¿™ä¸ªmapperä»mybatisä¸­åˆ é™¤
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="o">(!&lt;/span>&lt;span class="n">loadCompleted&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">knownMappers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">remove&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="sqlsessionfactory">SqlSessionFactory&lt;/h1>
&lt;p>æ—¢ç„¶æœ‰äº† SqlSessionFactoryï¼Œé¡¾åæ€ä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸­è·å¾— SqlSession çš„å®ä¾‹ã€‚
SqlSession æä¾›äº†åœ¨æ•°æ®åº“æ‰§è¡Œ SQL å‘½ä»¤æ‰€éœ€çš„æ‰€æœ‰æ–¹æ³•ã€‚
ä½ å¯ä»¥é€šè¿‡ SqlSession å®ä¾‹æ¥ç›´æ¥æ‰§è¡Œå·²æ˜ å°„çš„ SQL è¯­å¥ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-Java" data-lang="Java">&lt;span class="k">try&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">SqlSession&lt;/span> &lt;span class="n">session&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">sqlSessionFactory&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">openSession&lt;/span>&lt;span class="o">())&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">BlogMapper&lt;/span> &lt;span class="n">mapper&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">session&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getMapper&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">BlogMapper&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">Blog&lt;/span> &lt;span class="n">blog&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">mapper&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">selectBlog&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">101&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¥½! æˆ‘ä»¬å¿«è¿›åˆ°&lt;del>æ›¹ä¸•&lt;/del>sqlSessionFactory.openSession()&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-Java" data-lang="Java"> &lt;span class="kd">public&lt;/span> &lt;span class="n">SqlSession&lt;/span> &lt;span class="nf">openSession&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="n">openSessionFromDataSource&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">configuration&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getDefaultExecutorType&lt;/span>&lt;span class="o">(),&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="kd">private&lt;/span> &lt;span class="n">SqlSession&lt;/span> &lt;span class="nf">openSessionFromDataSource&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">ExecutorType&lt;/span> &lt;span class="n">execType&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">TransactionIsolationLevel&lt;/span> &lt;span class="n">level&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="kt">boolean&lt;/span> &lt;span class="n">autoCommit&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="c1">// Transactionäº‹åŠ¡ï¼ŒåŒ…è£…äº†ä¸€ä¸ªConnection, åŒ…å«commit,rollback,closeæ–¹æ³•
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">Transaction&lt;/span> &lt;span class="n">tx&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="k">try&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="c1">// è¿˜è®°å¾—ä¹ˆ, environmenté‡Œå°è£…äº†æˆ‘ä»¬çš„æ•°æ®æº;äº‹åŠ¡å·¥å‚;è¿˜æœ‰ç¯å¢ƒ
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="kd">final&lt;/span> &lt;span class="n">Environment&lt;/span> &lt;span class="n">environment&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">configuration&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getEnvironment&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="c1">// å¾—åˆ°ä¸€ä¸ªäº‹åŠ¡å·¥å‚, å¦‚æœenvæˆ–è€…envé‡Œçš„äº‹åŠ¡å·¥å‚æ˜¯ç©ºçš„å°±è¿”å›ä¸€ä¸ªæ‰˜ç®¡äº‹åŠ¡å·¥å‚
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// æ‰˜ç®¡äº‹åŠ¡å·¥å‚çš„ç‰¹ç‚¹å°±æ˜¯æ¯æ¬¡æ‰§è¡Œå®ŒæˆSQLéƒ½ä¼šå…³é—­è¿æ¥, å¦‚æœä½ ä¸å¸Œæœ›å…³é—­è¿æ¥è¦åœ¨é…ç½®æ–‡ä»¶é‡Œè®¾ç½®å®ƒ
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="kd">final&lt;/span> &lt;span class="n">TransactionFactory&lt;/span> &lt;span class="n">transactionFactory&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">getTransactionFactoryFromEnvironment&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">environment&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="c1">//é€šè¿‡äº‹åŠ¡å·¥å‚æ¥äº§ç”Ÿä¸€ä¸ªäº‹åŠ¡
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">tx&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">transactionFactory&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">newTransaction&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">environment&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getDataSource&lt;/span>&lt;span class="o">(),&lt;/span> &lt;span class="n">level&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">autoCommit&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="c1">//ç”Ÿæˆä¸€ä¸ªæ‰§è¡Œå™¨(äº‹åŠ¡åŒ…å«åœ¨æ‰§è¡Œå™¨é‡Œ)
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="kd">final&lt;/span> &lt;span class="n">Executor&lt;/span> &lt;span class="n">executor&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">configuration&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">newExecutor&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">tx&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">execType&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="c1">//ç„¶åäº§ç”Ÿä¸€ä¸ªDefaultSqlSession
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">DefaultSqlSession&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">configuration&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">executor&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">autoCommit&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span> &lt;span class="k">catch&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">Exception&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="c1">//å¦‚æœæ‰“å¼€äº‹åŠ¡å‡ºé”™ï¼Œåˆ™å…³é—­å®ƒ
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">closeTransaction&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">tx&lt;/span>&lt;span class="o">);&lt;/span> &lt;span class="c1">// may have fetched a connection so lets call close()
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">throw&lt;/span> &lt;span class="n">ExceptionFactory&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">wrapException&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;Error opening session. Cause: &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span> &lt;span class="k">finally&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="c1">//æœ€åæ¸…ç©ºé”™è¯¯ä¸Šä¸‹æ–‡
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">ErrorContext&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">instance&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="na">reset&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€ä¸ª&lt;code>SqlSession&lt;/code>.&lt;/p>
&lt;blockquote>
&lt;p>2020.10.12 ç»§ç»­æ›´æ–°&lt;/p>
&lt;/blockquote>
&lt;p>æœ‰äº†&lt;code>SqlSession&lt;/code>ä¹‹åæˆ‘ä»¬å°±å¯ä»¥æ“ä½œæ•°æ®åº“äº†ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬æ¥çœ‹çœ‹MyBatisæ˜¯æ€ä¹ˆå®ç°&lt;code>session.selectOne(&amp;quot;org.mybatis.example.BlogMapper.selectBlog&amp;quot;, 101);&lt;/code>çš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;span class="lnt">81
&lt;/span>&lt;span class="lnt">82
&lt;/span>&lt;span class="lnt">83
&lt;/span>&lt;span class="lnt">84
&lt;/span>&lt;span class="lnt">85
&lt;/span>&lt;span class="lnt">86
&lt;/span>&lt;span class="lnt">87
&lt;/span>&lt;span class="lnt">88
&lt;/span>&lt;span class="lnt">89
&lt;/span>&lt;span class="lnt">90
&lt;/span>&lt;span class="lnt">91
&lt;/span>&lt;span class="lnt">92
&lt;/span>&lt;span class="lnt">93
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-Java" data-lang="Java"> &lt;span class="kd">public&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">T&lt;/span> &lt;span class="nf">selectOne&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">statement&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">Object&lt;/span> &lt;span class="n">parameter&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="c1">// Popular vote was to return null on 0 results and throw exception on too many.
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">//è½¬è€Œå»è°ƒç”¨selectList,å¾ˆç®€å•çš„ï¼Œå¦‚æœå¾—åˆ°0æ¡åˆ™è¿”å›nullï¼Œå¾—åˆ°1æ¡åˆ™è¿”å›1æ¡ï¼Œå¾—åˆ°å¤šæ¡æŠ¥TooManyResultsExceptioné”™
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// ç‰¹åˆ«éœ€è¦ä¸»è¦çš„æ˜¯å½“æ²¡æœ‰æŸ¥è¯¢åˆ°ç»“æœçš„æ—¶å€™å°±ä¼šè¿”å›nullã€‚å› æ­¤ä¸€èˆ¬å»ºè®®åœ¨mapperä¸­ç¼–å†™resultTypeçš„æ—¶å€™ä½¿ç”¨åŒ…è£…ç±»å‹
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">//è€Œä¸æ˜¯åŸºæœ¬ç±»å‹ï¼Œæ¯”å¦‚æ¨èä½¿ç”¨Integerè€Œä¸æ˜¯intã€‚è¿™æ ·å°±å¯ä»¥é¿å…NPE
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="o">.&amp;lt;&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="n">selectList&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">statement&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">parameter&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">list&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">size&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">1&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="n">list&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">get&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">0&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">list&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">size&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">1&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">throw&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">TooManyResultsException&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;Expected one result (or null) to be returned by selectOne(), but found: &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">list&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">size&lt;/span>&lt;span class="o">());&lt;/span>
&lt;span class="o">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="c1">// emmï¼Œè¿™é‡Œå…¶å®å•¥éƒ½æ²¡æœ‰ï¼Œæˆ‘ä»¬å»SelectListçœ‹çœ‹ã€‚
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="c1">// åœ¨ä¸‹æ¥è§£é‡Šä¸€ä¸‹è¿™ä¸‰ä¸ªå‚æ•°ï¼š
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// statement æ˜ å°„è¯­å¥çš„ä½ç½®ï¼Œæ¯”å¦‚&amp;#34;org.mybatis.example.BlogMapper.selectBlog&amp;#34;
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// parameter SQLè¯­å¥ä¸­çš„å‚æ•°
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// RowBounds åˆ†é¡µé™åˆ¶ï¼Œç›¸å½“äºSQLä¸­çš„limit.
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="kd">public&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">E&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">E&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="nf">selectList&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">statement&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">Object&lt;/span> &lt;span class="n">parameter&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">RowBounds&lt;/span> &lt;span class="n">rowBounds&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">try&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="c1">//æ ¹æ®statement idæ‰¾åˆ°å¯¹åº”çš„MappedStatement
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">MappedStatement&lt;/span> &lt;span class="n">ms&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">configuration&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getMappedStatement&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">statement&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="c1">//è½¬è€Œç”¨æ‰§è¡Œå™¨æ¥æŸ¥è¯¢ç»“æœ,æ³¨æ„è¿™é‡Œä¼ å…¥çš„ResultHandleræ˜¯null
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// wrapCollectionï¼šå¦‚æœå‚æ•°æ˜¯Collectionç±»å‹ï¼Œè½¬æ¢æˆMapï¼Œkeyä¸ºparameterçš„type.
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">executor&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">query&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">ms&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">wrapCollection&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">parameter&lt;/span>&lt;span class="o">),&lt;/span> &lt;span class="n">rowBounds&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">Executor&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">NO_RESULT_HANDLER&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span> &lt;span class="k">catch&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">Exception&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">throw&lt;/span> &lt;span class="n">ExceptionFactory&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">wrapException&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;Error querying database. Cause: &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span> &lt;span class="k">finally&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">ErrorContext&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">instance&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="na">reset&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="c1">// æ¥ä¸‹æ¥æ˜¯æ‰§è¡Œå™¨çš„éƒ¨åˆ†
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="kd">public&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">E&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">E&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="nf">query&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">MappedStatement&lt;/span> &lt;span class="n">ms&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">Object&lt;/span> &lt;span class="n">parameter&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">RowBounds&lt;/span> &lt;span class="n">rowBounds&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">ResultHandler&lt;/span> &lt;span class="n">resultHandler&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="kd">throws&lt;/span> &lt;span class="n">SQLException&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="c1">//å¾—åˆ°ç»‘å®šsqlï¼Œå°±æ˜¯å°†å‚æ•°æ’å…¥æ˜ å°„è¯­å¥é‡Œï¼Œè·å¾—å®Œæ•´çš„SQL
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">BoundSql&lt;/span> &lt;span class="n">boundSql&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ms&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getBoundSql&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">parameter&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="c1">//åˆ›å»ºç¼“å­˜Key
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">CacheKey&lt;/span> &lt;span class="n">key&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">createCacheKey&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">ms&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">parameter&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">rowBounds&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">boundSql&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="c1">//æŸ¥è¯¢
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">query&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">ms&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">parameter&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">rowBounds&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">resultHandler&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">key&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">boundSql&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="c1">// æ‰§è¡ŒæŸ¥è¯¢
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="kd">public&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">E&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">E&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="nf">query&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">MappedStatement&lt;/span> &lt;span class="n">ms&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">Object&lt;/span> &lt;span class="n">parameter&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">RowBounds&lt;/span> &lt;span class="n">rowBounds&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">ResultHandler&lt;/span> &lt;span class="n">resultHandler&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">CacheKey&lt;/span> &lt;span class="n">key&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">BoundSql&lt;/span> &lt;span class="n">boundSql&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="kd">throws&lt;/span> &lt;span class="n">SQLException&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="c1">// ErrorContext æ˜¯æ¯ä¸ªçº¿ç¨‹å•ç‹¬ä½¿ç”¨çš„é”™è¯¯ä¸Šä¸‹æ–‡ï¼Œå®ƒæ˜¯ç”¨ThreadLocalåˆ¶ä½œçš„.
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">ErrorContext&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">instance&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="na">resource&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">ms&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getResource&lt;/span>&lt;span class="o">()).&lt;/span>&lt;span class="na">activity&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;executing a query&amp;#34;&lt;/span>&lt;span class="o">).&lt;/span>&lt;span class="na">object&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">ms&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getId&lt;/span>&lt;span class="o">());&lt;/span>
&lt;span class="c1">//å¦‚æœå·²ç»å…³é—­ï¼ŒæŠ¥é”™
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">closed&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">throw&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">ExecutorException&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;Executor was closed.&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="c1">//å…ˆæ¸…å±€éƒ¨ç¼“å­˜ï¼Œå†æŸ¥è¯¢.ä½†ä»…æŸ¥è¯¢å †æ ˆä¸º0ï¼Œæ‰æ¸…ã€‚ä¸ºäº†å¤„ç†é€’å½’è°ƒç”¨
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">queryStack&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">0&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">ms&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">isFlushCacheRequired&lt;/span>&lt;span class="o">())&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">clearLocalCache&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="n">List&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">E&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">list&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="k">try&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="c1">//åŠ ä¸€,è¿™æ ·é€’å½’è°ƒç”¨åˆ°ä¸Šé¢çš„æ—¶å€™å°±ä¸ä¼šå†æ¸…å±€éƒ¨ç¼“å­˜äº†
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">queryStack&lt;/span>&lt;span class="o">++;&lt;/span>
&lt;span class="c1">//å…ˆæ ¹æ®cachekeyä»localCacheå»æŸ¥
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">resultHandler&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="kc">null&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">List&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">E&lt;/span>&lt;span class="o">&amp;gt;)&lt;/span> &lt;span class="n">localCache&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getObject&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">key&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">list&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="c1">//è‹¥æŸ¥åˆ°localCacheç¼“å­˜ï¼Œå¤„ç†localOutputParameterCache
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">handleLocallyCachedOutputParameters&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">ms&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">key&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">parameter&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">boundSql&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="c1">//ä»æ•°æ®åº“æŸ¥
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">queryFromDatabase&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">ms&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">parameter&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">rowBounds&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">resultHandler&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">key&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">boundSql&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span> &lt;span class="k">finally&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="c1">//æ¸…ç©ºå †æ ˆ
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">queryStack&lt;/span>&lt;span class="o">--;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">queryStack&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">0&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="c1">//å»¶è¿ŸåŠ è½½é˜Ÿåˆ—ä¸­æ‰€æœ‰å…ƒç´ 
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">DeferredLoad&lt;/span> &lt;span class="n">deferredLoad&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="n">deferredLoads&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">deferredLoad&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">load&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="c1">// issue #601
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">//æ¸…ç©ºå»¶è¿ŸåŠ è½½é˜Ÿåˆ—
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">deferredLoads&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">clear&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">configuration&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getLocalCacheScope&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">LocalCacheScope&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">STATEMENT&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="c1">// issue #482
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">//å¦‚æœæ˜¯STATEMENTï¼Œæ¸…æœ¬åœ°ç¼“å­˜
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">clearLocalCache&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="n">list&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä»¥ä¸Šæ˜¯&lt;code>SqlSession.selectOne&lt;/code>çš„æµç¨‹ã€‚ç„¶è€Œå®é™…ä¸­æˆ‘ä»¬ç›´æ¥ä½¿ç”¨SqlSessionæ¥æ‰§è¡Œæ•°æ®åº“æ“ä½œçš„æƒ…å†µå¾ˆå°‘ã€‚&lt;/p>
&lt;p>å¤§å¤šæ•°æƒ…å†µæˆ‘ä»¬ä¼šè¿™æ ·ä½¿ç”¨MyBatis:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-Java" data-lang="Java">&lt;span class="k">try&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">SqlSession&lt;/span> &lt;span class="n">session&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">sqlSessionFactory&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">openSession&lt;/span>&lt;span class="o">())&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">BlogMapper&lt;/span> &lt;span class="n">mapper&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">session&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getMapper&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">BlogMapper&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">Blog&lt;/span> &lt;span class="n">blog&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">mapper&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">selectBlog&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">101&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªæ–¹æ³•çš„è¯¦ç»†è¿‡ç¨‹æˆ‘ä»¬ä½¿ç”¨MyBatisçš„å•å…ƒæµ‹è¯•æ¥æ¢ç´¢ã€‚&lt;/p>
&lt;p>å•å…ƒæµ‹è¯•ä»£ç ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-Java" data-lang="Java"> &lt;span class="nd">@Test&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">shouldSelectBlogWithPostsUsingSubSelect&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="kd">throws&lt;/span> &lt;span class="n">Exception&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">SqlSession&lt;/span> &lt;span class="n">session&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">sqlSessionFactory&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">openSession&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="k">try&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">BoundBlogMapper&lt;/span> &lt;span class="n">mapper&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">session&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getMapper&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">BoundBlogMapper&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">Blog&lt;/span> &lt;span class="n">b&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">mapper&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">selectBlogWithPostsUsingSubSelect&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">1&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">assertEquals&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">1&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getId&lt;/span>&lt;span class="o">());&lt;/span>
&lt;span class="n">session&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">close&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="n">assertNotNull&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getAuthor&lt;/span>&lt;span class="o">());&lt;/span>
&lt;span class="n">assertEquals&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">101&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getAuthor&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="na">getId&lt;/span>&lt;span class="o">());&lt;/span>
&lt;span class="n">assertEquals&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;jim&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getAuthor&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="na">getUsername&lt;/span>&lt;span class="o">());&lt;/span>
&lt;span class="n">assertEquals&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;********&amp;#34;&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getAuthor&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="na">getPassword&lt;/span>&lt;span class="o">());&lt;/span>
&lt;span class="n">assertEquals&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">2&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getPosts&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="na">size&lt;/span>&lt;span class="o">());&lt;/span>
&lt;span class="o">}&lt;/span> &lt;span class="k">finally&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">session&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">close&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¿«è¿›åˆ°&lt;code>session.getMapper&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-Java" data-lang="Java"> &lt;span class="c1">//è¿”å›ä»£ç†ç±»
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="kd">public&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">T&lt;/span> &lt;span class="nf">getMapper&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">Class&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">type&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">SqlSession&lt;/span> &lt;span class="n">sqlSession&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="c1">// ç›´æ¥å¾—åˆ°è¯¥ç±»å‹Mapperä»£ç†å·¥å‚
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="kd">final&lt;/span> &lt;span class="n">MapperProxyFactory&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">mapperProxyFactory&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">MapperProxyFactory&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="o">&amp;gt;)&lt;/span> &lt;span class="n">knownMappers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">get&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="c1">// æ²¡æœ‰å°±ç¦»è°±
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">mapperProxyFactory&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">throw&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">BindingException&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;Type &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">type&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s">&amp;#34; is not known to the MapperRegistry.&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="k">try&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="c1">// é€šè¿‡å½“å‰Sessionç”Ÿäº§ä¸€ä¸ªä»£ç†
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">mapperProxyFactory&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">newInstance&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">sqlSession&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span> &lt;span class="k">catch&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">Exception&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">throw&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">BindingException&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;Error getting mapper instance. Cause: &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å®é™…ä¸Šç”Ÿäº§Mapperçš„é€»è¾‘å¹¶ä¸å¤šã€‚&lt;/p>
&lt;p>ä¸»è¦æ˜¯æ‰§è¡Œä»£ç†æ–¹æ³•æ—¶çš„åŠ¨ä½œã€‚&lt;/p>
&lt;p>æ‰§è¡Œ&lt;code>mapper.selectBlogWithPostsUsingSubSelect(1);&lt;/code>çš„é€»è¾‘å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-Java" data-lang="Java"> &lt;span class="c1">// ç”±äºæ˜¯ä»£ç†ç”Ÿæˆçš„ï¼Œæ‰€ä»¥è°ƒç”¨æ–¹æ³•åä¼šè¿›å…¥ä¸€ä¸‹é€»è¾‘ï¼š
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nd">@Override&lt;/span>
&lt;span class="kd">public&lt;/span> &lt;span class="n">Object&lt;/span> &lt;span class="nf">invoke&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">Object&lt;/span> &lt;span class="n">proxy&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">Method&lt;/span> &lt;span class="n">method&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">Object&lt;/span>&lt;span class="o">[]&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="kd">throws&lt;/span> &lt;span class="n">Throwable&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="c1">// å¦‚æœè¿™ä¸ªæ–¹æ³•æ˜¯æ¥è‡ªObjectï¼Œå°±ç›´æ¥æ‰§è¡Œï¼Œç›´æ¥è¿”å›
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">Object&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">equals&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">method&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getDeclaringClass&lt;/span>&lt;span class="o">()))&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">try&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="n">method&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">invoke&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span> &lt;span class="k">catch&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">Throwable&lt;/span> &lt;span class="n">t&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">throw&lt;/span> &lt;span class="n">ExceptionUtil&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">unwrapThrowable&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="c1">// å»ç¼“å­˜ä¸­æ‰¾MapperMethodï¼Œç¬¬ä¸€æ¬¡çš„è¯ä¼šnewä¸€ä¸ª
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="kd">final&lt;/span> &lt;span class="n">MapperMethod&lt;/span> &lt;span class="n">mapperMethod&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">cachedMapperMethod&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">method&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="c1">//æ‰§è¡Œæœ¬ä½“
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">mapperMethod&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">execute&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">sqlSession&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸‹é¢å°±æ˜¯æ•´ä¸ªä»£ç†çš„æ‰§è¡Œæ•°æ®åº“æ“ä½œçš„é€»è¾‘ï¼Œæ¯”è¾ƒé•¿ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-Java" data-lang="Java"> &lt;span class="kd">public&lt;/span> &lt;span class="n">Object&lt;/span> &lt;span class="nf">execute&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">SqlSession&lt;/span> &lt;span class="n">sqlSession&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">Object&lt;/span>&lt;span class="o">[]&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">Object&lt;/span> &lt;span class="n">result&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="c1">//å¯ä»¥çœ‹åˆ°æ‰§è¡Œæ—¶å°±æ˜¯4ç§æƒ…å†µï¼Œinsert|update|delete|selectï¼Œåˆ†åˆ«è°ƒç”¨SqlSessionçš„4å¤§ç±»æ–¹æ³•
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">SqlCommandType&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">INSERT&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">command&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getType&lt;/span>&lt;span class="o">())&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">Object&lt;/span> &lt;span class="n">param&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">method&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">convertArgsToSqlCommandParam&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">args&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">rowCountResult&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">sqlSession&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">insert&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getName&lt;/span>&lt;span class="o">(),&lt;/span> &lt;span class="n">param&lt;/span>&lt;span class="o">));&lt;/span>
&lt;span class="o">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">SqlCommandType&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">UPDATE&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">command&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getType&lt;/span>&lt;span class="o">())&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">Object&lt;/span> &lt;span class="n">param&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">method&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">convertArgsToSqlCommandParam&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">args&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">rowCountResult&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">sqlSession&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">update&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getName&lt;/span>&lt;span class="o">(),&lt;/span> &lt;span class="n">param&lt;/span>&lt;span class="o">));&lt;/span>
&lt;span class="o">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">SqlCommandType&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">DELETE&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">command&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getType&lt;/span>&lt;span class="o">())&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="n">Object&lt;/span> &lt;span class="n">param&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">method&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">convertArgsToSqlCommandParam&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">args&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">rowCountResult&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">sqlSession&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">delete&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getName&lt;/span>&lt;span class="o">(),&lt;/span> &lt;span class="n">param&lt;/span>&lt;span class="o">));&lt;/span>
&lt;span class="o">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">SqlCommandType&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">SELECT&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">command&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getType&lt;/span>&lt;span class="o">())&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="c1">// æˆ‘ä»¬æ‰§è¡Œçš„æ˜¯æŸ¥è¯¢ï¼Œç›´æ¥è·³åˆ°è¿™é‡Œ
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">method&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">returnsVoid&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">method&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">hasResultHandler&lt;/span>&lt;span class="o">())&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="c1">// æ£€æŸ¥æ˜¯ä¸æ˜¯æ²¡æœ‰è¿”å›å€¼ä»¥åŠç»“æœå¤„ç†å™¨: æˆ‘ä»¬æ‰§è¡Œçš„æ˜¯æŸ¥è¯¢ï¼Œæ˜¯æœ‰è¿”å›å€¼çš„
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">executeWithResultHandler&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">sqlSession&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">method&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">returnsMany&lt;/span>&lt;span class="o">())&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="c1">//å¦‚æœç»“æœæœ‰å¤šæ¡è®°å½•ï¼šæˆ‘ä»¬åªæŸ¥ä¸€æ¡
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">executeForMany&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">sqlSession&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">method&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">returnsMap&lt;/span>&lt;span class="o">())&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="c1">//å¦‚æœç»“æœæ˜¯mapï¼šæˆ‘ä»¬æŸ¥çš„åªæ˜¯ä¸ªå¯¹è±¡
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">executeForMap&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">sqlSession&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="c1">//å¦åˆ™å°±æ˜¯ä¸€æ¡è®°å½•
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// æˆ‘ä»¬ä»”ç»†åˆ†æè¿™ä¸ªconvertArgsToSqlCommandParamæ–¹æ³•
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">Object&lt;/span> &lt;span class="n">param&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">method&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">convertArgsToSqlCommandParam&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">args&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="c1">// ä¹‹åæˆ‘ä»¬åˆå›åˆ°äº†SelectOneè¿™ä¸ªæ–¹æ³•ã€‚
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">sqlSession&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">selectOne&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getName&lt;/span>&lt;span class="o">(),&lt;/span> &lt;span class="n">param&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">throw&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">BindingException&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;Unknown execution method for: &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">command&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getName&lt;/span>&lt;span class="o">());&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">result&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="kc">null&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">method&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getReturnType&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="na">isPrimitive&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="o">!&lt;/span>&lt;span class="n">method&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">returnsVoid&lt;/span>&lt;span class="o">())&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">throw&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">BindingException&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;Mapper method &amp;#39;&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">command&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getName&lt;/span>&lt;span class="o">()&lt;/span>
&lt;span class="o">+&lt;/span> &lt;span class="s">&amp;#34; attempted to return null from a method with a primitive return type (&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">method&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getReturnType&lt;/span>&lt;span class="o">()&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s">&amp;#34;).&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="n">result&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="c1">// å°†å‚æ•°è½¬æ¢ä¸ºSQLå‘½ä»¤å‚æ•°
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="kd">public&lt;/span> &lt;span class="n">Object&lt;/span> &lt;span class="nf">convertArgsToSqlCommandParam&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">Object&lt;/span>&lt;span class="o">[]&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="c1">// è¿™é‡Œæœ‰ä¸€ä¸ªå‘ï¼š
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// args æ˜¯Mapperæ–¹æ³•æ‰§è¡Œçš„å‚æ•°
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// param æ˜¯ç¼–å†™çš„SQLè¯­å¥æ‰€éœ€è¦çš„å‘½ä»¤å‚æ•°
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// å®ƒä»¬æœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼š
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// åœ¨MyBatisä¸­ä½ éœ€è¦ä½¿ç”¨åˆ†é¡µæ—¶å¯ä»¥ä¸æ˜¾å¼åœ¨SQLè¯­å¥ä¸­ä½¿ç”¨limitå‘½ä»¤
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// ä½¿ç”¨RowBoundså¯¹è±¡ä½œä¸ºMapperçš„é¢å¤–å‚æ•°æ¥åšåˆ°æ•°æ®åˆ†é¡µ
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// è¯¥å‚æ•°ä¸ç”¨åœ¨SQLè¯­å¥ä¸­æ˜¾å¼ä½¿ç”¨.
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="kd">final&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">paramCount&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">params&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">size&lt;/span>&lt;span class="o">();&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">args&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="kc">null&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="n">paramCount&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">0&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="c1">//å¦‚æœæ²¡å‚æ•°
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="o">(!&lt;/span>&lt;span class="n">hasNamedParameters&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">paramCount&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">1&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="c1">//å¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="n">params&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">keySet&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="na">iterator&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="na">next&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="na">intValue&lt;/span>&lt;span class="o">()];&lt;/span>
&lt;span class="o">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="c1">//å¦åˆ™ï¼Œè¿”å›ä¸€ä¸ªParamMapï¼Œä¿®æ”¹å‚æ•°åï¼Œå‚æ•°åå°±æ˜¯å…¶ä½ç½®
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="kd">final&lt;/span> &lt;span class="n">Map&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">Object&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">param&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">ParamMap&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Object&lt;/span>&lt;span class="o">&amp;gt;();&lt;/span>
&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">0&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="k">for&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">Map&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">Entry&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Integer&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">String&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">entry&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="n">params&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">entrySet&lt;/span>&lt;span class="o">())&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="c1">//1.å…ˆåŠ ä¸€ä¸ª#{0},#{1},#{2}...å‚æ•°
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">param&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">put&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">entry&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getValue&lt;/span>&lt;span class="o">(),&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="n">entry&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getKey&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="na">intValue&lt;/span>&lt;span class="o">()]);&lt;/span>
&lt;span class="c1">// issue #71, add param names as param1, param2...but ensure backward compatibility
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="kd">final&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="n">genericParamName&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;param&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">String&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">valueOf&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">1&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">(!&lt;/span>&lt;span class="n">param&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">containsKey&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">genericParamName&lt;/span>&lt;span class="o">))&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="c1">//2.å†åŠ ä¸€ä¸ª#{param1},#{param2}...å‚æ•°
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">//ä½ å¯ä»¥ä¼ é€’å¤šä¸ªå‚æ•°ç»™ä¸€ä¸ªæ˜ å°„å™¨æ–¹æ³•ã€‚å¦‚æœä½ è¿™æ ·åšäº†,
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">//é»˜è®¤æƒ…å†µä¸‹å®ƒä»¬å°†ä¼šä»¥å®ƒä»¬åœ¨å‚æ•°åˆ—è¡¨ä¸­çš„ä½ç½®æ¥å‘½å,æ¯”å¦‚:#{param1},#{param2}ç­‰ã€‚
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">//å¦‚æœä½ æƒ³æ”¹å˜å‚æ•°çš„åç§°(åªåœ¨å¤šå‚æ•°æƒ…å†µä¸‹) ,é‚£ä¹ˆä½ å¯ä»¥åœ¨å‚æ•°ä¸Šä½¿ç”¨@Param(â€œparamNameâ€)æ³¨è§£ã€‚
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">param&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">put&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">genericParamName&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="n">entry&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">getKey&lt;/span>&lt;span class="o">()]);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="n">i&lt;/span>&lt;span class="o">++;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="n">param&lt;/span>&lt;span class="o">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>OK, æˆ‘åŸºæœ¬æƒ³è¯´çš„éƒ½è¯´å®Œäº†ã€‚åç»­å¯èƒ½ä¼šé¢å¤–è¡¥å……ä¸€äº›å†…å®¹ï¼Œä½†æ˜¯ä¸ä¼šåœ¨æœ¬æ–‡ä¸­ï¼Œä¼šå†™æ–°æ–‡ç« ã€‚&lt;/p></description></item><item><title>GoSyncPool</title><link>https://sdttttt.github.io/blog/gosyncpool/</link><pubDate>Thu, 03 Sep 2020 17:06:04 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/gosyncpool/</guid><description>
&lt;p>ä»Šå¤©åœ¨çœ‹Sentinel-golangæºç çš„æ—¶å€™å‘ç°sentinelåœ¨å†…éƒ¨ä½¿ç”¨äº†sync.Poolè¯¥ç»“æ„ä½“.çœ‹åˆ°Syncå’ŒPoolçš„æˆ‘ç¬¬ä¸€ååº”æƒ³åˆ°åº”è¯¥æ˜¯çº¿ç¨‹æ± ä¹‹ç±»çš„ä¸œè¥¿.åœ¨å®é™…çœ‹è¿‡åŸç†ä¹‹åå‘ç°å¹¶ä¸æ˜¯è¿™æ ·çš„.&lt;/p>
&lt;hr>
&lt;p>sync.Pool çš„ç›®çš„æ˜¯ä¸ºäº†åˆ©ç”¨å¯¹è±¡çš„å¤ç”¨æ¥å‡å°GCå‹åŠ›.ä½†æ˜¯å¼€é”€æ¯”è¾ƒé«˜.è¦æ–Ÿé…Œä½¿ç”¨.&lt;/p>
&lt;p>Poolå’Œgolangçš„GMPåç¨‹æ¨¡å‹çš„å…³ç³»æ¯”è¾ƒå¤§.
sync.Poolå¯¹æ¯ä¸€ä¸ªP(ç³»ç»Ÿçº¿ç¨‹)éƒ½åˆ†é…äº†ä¸€ä¸ªæœ¬åœ°æ± .&lt;/p>
&lt;p>æœ¬åœ°æ± ä¸­æœ‰2ä¸ªå±æ€§ï¼Œåˆ†åˆ«æ˜¯privateå’Œshareã€‚
privateåªèƒ½è¢«å½“å‰Pè®¿é—®ï¼Œshareå¯ä»¥è¢«ä¸åŒçš„Pè®¿é—®.&lt;/p>
&lt;p>åœ¨æ‰§è¡ŒGet or Putçš„æ—¶å€™.ä¼šå¯¹åº”å½“å‰æ‰§è¡ŒPçš„æœ¬åœ°æ± .&lt;/p>
&lt;h4 id="get">Get&lt;/h4>
&lt;ol>
&lt;li>å°è¯•ä»æœ¬åœ°På¯¹åº”çš„é‚£ä¸ªæœ¬åœ°æ± ä¸­è·å–ä¸€ä¸ªå¯¹è±¡å€¼, å¹¶ä»æœ¬åœ°æ± å†²åˆ é™¤è¯¥å€¼ã€‚&lt;/li>
&lt;li>å¦‚æœè·å–å¤±è´¥ï¼Œé‚£ä¹ˆä»å…±äº«æ± ä¸­è·å–, å¹¶ä»å…±äº«é˜Ÿåˆ—ä¸­åˆ é™¤è¯¥å€¼ã€‚&lt;/li>
&lt;li>å¦‚æœè·å–å¤±è´¥ï¼Œé‚£ä¹ˆä»å…¶ä»–Pçš„å…±äº«æ± ä¸­å·ä¸€ä¸ªè¿‡æ¥ï¼Œå¹¶åˆ é™¤å…±äº«æ± ä¸­çš„è¯¥å€¼(p.getSlow())ã€‚&lt;/li>
&lt;li>å¦‚æœä»ç„¶å¤±è´¥ï¼Œé‚£ä¹ˆç›´æ¥é€šè¿‡New()åˆ†é…ä¸€ä¸ªè¿”å›å€¼ï¼Œæ³¨æ„è¿™ä¸ªåˆ†é…çš„å€¼ä¸ä¼šè¢«æ”¾å…¥æ± ä¸­ã€‚New()è¿”å›ç”¨æˆ·æ³¨å†Œçš„Newå‡½æ•°çš„å€¼ï¼Œå¦‚æœç”¨æˆ·æœªæ³¨å†ŒNewï¼Œé‚£ä¹ˆè¿”å›nilã€‚&lt;/li>
&lt;/ol>
&lt;h4 id="put">Put&lt;/h4>
&lt;ol>
&lt;li>å¦‚æœæ”¾å…¥çš„å€¼ä¸ºç©ºï¼Œç›´æ¥return.&lt;/li>
&lt;li>æ£€æŸ¥å½“å‰goroutineçš„æ˜¯å¦è®¾ç½®å¯¹è±¡æ± ç§æœ‰å€¼ï¼Œå¦‚æœæ²¡æœ‰åˆ™å°†xèµ‹å€¼ç»™å…¶ç§æœ‰æˆå‘˜ï¼Œå¹¶å°†xè®¾ç½®ä¸ºnilã€‚&lt;/li>
&lt;li>å¦‚æœå½“å‰goroutineç§æœ‰å€¼å·²ç»è¢«è®¾ç½®ï¼Œé‚£ä¹ˆå°†è¯¥å€¼è¿½åŠ åˆ°å…±äº«åˆ—è¡¨ã€‚&lt;/li>
&lt;/ol></description></item><item><title>B Tree</title><link>https://sdttttt.github.io/blog/btree/</link><pubDate>Sun, 30 Aug 2020 20:41:54 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/btree/</guid><description>
&lt;p>è¿™ç¯‡æ–‡ç« ä»¥æ•°æ®åº“å­˜å‚¨çš„æ•°æ®ç»“æ„æ¥å¼•å‡ºæœ¬æ–‡çš„é‡ç‚¹&lt;strong>Bæ ‘&lt;/strong>,ä»¥åŠåé¢è¿˜æœ‰å¦ä¸€ç§æ•°æ®ç»“æ„&lt;strong>B+æ ‘&lt;/strong>.&lt;/p>
&lt;p>è¯•æƒ³, å¦‚æœä½ æƒ³æŒä¹…åŒ–å¤§é‡çš„æ•°æ®åœ¨ç¡¬ç›˜ä¸Š, åŒæ—¶è¿˜å¸Œæœ›èƒ½é«˜æ•ˆçš„æŸ¥è¯¢å’Œä¿®æ”¹ä»–ä»¬, ä½ ä¼šæ€ä¹ˆåš, ä½¿ç”¨å“ªç§æ•°æ®ç»“æ„.&lt;/p>
&lt;p>æ•°ç»„å’Œé“¾è¡¨, ä»–ä»¬çš„ç¼ºç‚¹å¾ˆæ˜æ˜¾, æˆ‘ä»¬å¯»æ‰¾æ•°æ®éœ€è¦éå†æ•´ä¸ªæ•°æ®ç»“æ„, è¯•æƒ³ä¸€ä¸‹ä½ çš„æ•°æ®åº“ä¸­æœ‰50PBçš„æ•°æ®, è¿™ä¸ªå¼€é”€æ˜¯æˆ‘ä»¬æ— æ³•æ¥å—çš„.&lt;/p>
&lt;p>å“ˆå¸Œè¡¨, é€šè¿‡ç»™å®šçš„æ•°æ®é€šè¿‡Hashå‡½æ•°ç”Ÿæˆå¯¹åº”çš„ç´¢å¼•, èƒ½éå¸¸é«˜æ•ˆçš„æ‰¾åˆ°å¯¹åº”çš„æ•°æ®. ä½†æ˜¯, å“ˆå¸Œè¡¨ä¸èƒ½ç”¨äºèŒƒå›´æŸ¥è¯¢.&lt;/p>
&lt;p>äºŒå‰æ ‘, ä¸€ç§ä½¿ç”¨äºŒåˆ†æ³•ä½œä¸ºæŸ¥è¯¢ç®—æ³•çš„æ•°æ®ç»“æ„, åœ¨å†…å­˜ä¸­, äºŒå‰æ ‘çš„æ•ˆç‡ç¡®å®éå¸¸é«˜, ä½†æ˜¯å¦‚æœæ˜¯åœ¨ç¡¬ç›˜ä¸Š, æ¯æ¬¡è¯»å–èŠ‚ç‚¹, éƒ½éœ€è¦è¿›è¡Œä¸€æ¬¡IO, éšç€æ•°æ®é‡çš„å¢å¤§, æ·±åº¦é€æ¸åŠ æ·±, äºŒå‰æ ‘çš„æ•ˆç‡å°±ä¼šå¤§å¤§é™ä½.&lt;/p>
&lt;h2 id="b-tree">B Tree&lt;/h2>
&lt;p>Bæ ‘å­˜åœ¨ä¸€äº›å’ŒäºŒå‰æ ‘ä¸ä¸€æ ·çš„åœ°æ–¹: äºŒå‰æ ‘æ¯ä¸ªèŠ‚ç‚¹åªä¿å­˜ä¸€ä»½æ•°æ®ä»¥åŠä¸¤ä¸ªæŒ‡é’ˆ, Bæ ‘åœ¨æ¯ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥ä¿ç•™ä¸€æ ·æ•°é‡çš„æ•°æ®å’ŒæŒ‡é’ˆ, æŒ‡é’ˆçš„æ•°é‡ä¸ºæ•°æ®çš„æ•°é‡+1.&lt;/p>
&lt;p>åœ¨Bæ ‘ä¸­è¿˜æœ‰å­˜åœ¨ä¸€ä¸ªæ¦‚å¿µ, é˜¶æ•°, å®ƒå†³å®šäº†è¯¥Bæ ‘æ¯ä¸ªèŠ‚ç‚¹åº”è¯¥æœ‰å¤šå°‘æ•°æ®ä»¥åŠæŒ‡é’ˆ.&lt;/p>
&lt;h3 id="rules">Rules&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>æ’åºæ–¹å¼ï¼šæ‰€æœ‰èŠ‚ç‚¹å…³é”®å­—æ˜¯æŒ‰é€’å¢æ¬¡åºæ’åˆ—ï¼Œå¹¶éµå¾ªå·¦å°å³å¤§åŸåˆ™ï¼›ä¾‹å¦‚ä¸€ä¸ªèŠ‚ç‚¹èƒ½å­˜æ”¾3ä»½æ•°æ®, è¯¥æ•°æ®éœ€è¦ä»å·¦åˆ°å³å¢åºå­˜æ”¾, 1, 2, 3.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å­èŠ‚ç‚¹æ•°ï¼šéå¶èŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ•°&amp;gt;1ï¼Œä¸”&amp;lt;=M ï¼Œä¸”M&amp;gt;=2ï¼Œç©ºæ ‘é™¤å¤–(æ³¨ï¼šMé˜¶ä»£è¡¨ä¸€ä¸ªæ ‘èŠ‚ç‚¹æœ€å¤šæœ‰å¤šå°‘ä¸ªæŸ¥æ‰¾è·¯å¾„ï¼ŒM=Mè·¯,å½“M=2åˆ™æ˜¯2å‰æ ‘,M=3åˆ™æ˜¯3å‰)ï¼›&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å…³é”®å­—æ•°ï¼šå­èŠ‚ç‚¹çš„å…³é”®å­—æ•°é‡å¤§äºç­‰äºceil(m/2)-1ä¸ªä¸”å°äºç­‰äºM-1ä¸ª(æ³¨ï¼šceil()æ˜¯ä¸ªæœæ­£æ— ç©·æ–¹å‘å–æ•´çš„å‡½æ•° å¦‚ceil(1.1)ç»“æœä¸º2);&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ‰€æœ‰å¶å­èŠ‚ç‚¹å‡åœ¨åŒä¸€å±‚ã€å¶å­èŠ‚ç‚¹é™¤äº†åŒ…å«äº†å…³é”®å­—å’Œå…³é”®å­—è®°å½•çš„æŒ‡é’ˆå¤–ä¹Ÿæœ‰æŒ‡å‘å…¶å­èŠ‚ç‚¹çš„æŒ‡é’ˆåªä¸è¿‡å…¶æŒ‡é’ˆåœ°å€éƒ½ä¸ºnullå¯¹åº”ä¸‹å›¾æœ€åä¸€å±‚èŠ‚ç‚¹çš„ç©ºæ ¼å­;&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="find">Find&lt;/h3>
&lt;p>æˆ‘ä»¬ç”¨ä¸€ä¸ªå›¾å’Œä¸€ä¸ªå®é™…çš„ä¾‹å­æ¥ç†è§£Bæ ‘(è¿™é‡Œä¸ºäº†ç†è§£æ–¹ä¾¿æˆ‘å°±ç›´æ¥ç”¨å®é™…å­—æ¯çš„å¤§å°æ¥æ’åˆ—C&amp;gt;B&amp;gt;A):&lt;/p>
&lt;p>&lt;img src="https://sdttttt.github.io/DataStructure/BT.jpg" alt="BT">&lt;/p>
&lt;p>å¦‚ä¸Šå›¾æˆ‘è¦ä»ä¸Šå›¾ä¸­æ‰¾åˆ°Eå­—æ¯ï¼ŒæŸ¥æ‰¾æµç¨‹å¦‚ä¸‹:&lt;/p>
&lt;ol>
&lt;li>
&lt;p>è·å–æ ¹èŠ‚ç‚¹çš„å…³é”®å­—è¿›è¡Œæ¯”è¾ƒï¼Œå½“å‰æ ¹èŠ‚ç‚¹å…³é”®å­—ä¸ºMï¼ŒE&amp;lt;M(26ä¸ªå­—æ¯é¡ºåº)ï¼Œæ‰€ä»¥å¾€æ‰¾åˆ°æŒ‡å‘å·¦è¾¹çš„å­èŠ‚ç‚¹(äºŒåˆ†æ³•è§„åˆ™ï¼Œå·¦å°å³å¤§ï¼Œå·¦è¾¹æ”¾å°äºå½“å‰èŠ‚ç‚¹å€¼çš„å­èŠ‚ç‚¹ã€å³è¾¹æ”¾å¤§äºå½“å‰èŠ‚ç‚¹å€¼çš„å­èŠ‚ç‚¹)ï¼›&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ‹¿åˆ°å…³é”®å­—Då’ŒGï¼ŒD&amp;lt;E&amp;lt;G æ‰€ä»¥ç›´æ¥æ‰¾åˆ°Då’ŒGä¸­é—´çš„èŠ‚ç‚¹ï¼›&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ‹¿åˆ°Eå’ŒFï¼Œå› ä¸ºE=E æ‰€ä»¥ç›´æ¥è¿”å›å…³é”®å­—å’ŒæŒ‡é’ˆä¿¡æ¯(å¦‚æœæ ‘ç»“æ„é‡Œé¢æ²¡æœ‰åŒ…å«æ‰€è¦æŸ¥æ‰¾çš„èŠ‚ç‚¹åˆ™è¿”å›null).&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="insert">Insert&lt;/h3>
&lt;p>ä¸‹æ¬¡æ›´æ–°.&lt;/p></description></item><item><title>Blog Upgrade</title><link>https://sdttttt.github.io/blog/blogupgrade/</link><pubDate>Sat, 29 Aug 2020 18:07:48 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/blogupgrade/</guid><description>
&lt;p>è¿™å‡ å¤©ä¿®æ”¹äº†è¿™ä¸ªBlogçš„ä¸»é¢˜, åŠ è½½é€Ÿåº¦åº”è¯¥æ˜¯æ›´å¿«äº†, è€Œä¸”ä¼˜åŒ–äº†æ•´ä¸ªé¡¹ç›®çš„è‡ªåŠ¨éƒ¨ç½². å–æ¶ˆäº†åŒä»“åº“çš„éƒ¨ç½²ç­–ç•¥, åœ¨éƒ¨ç½²ä»»åŠ¡çš„æ‰§è¡Œä¸Šä¹Ÿç”¨ä¸Šäº†å¼‚æ­¥.&lt;/p>
&lt;p>ç°åœ¨æ¯æ¬¡ä¿®æ”¹å®Œæˆåçš„ç”Ÿæˆä»¥åŠéƒ¨ç½²çš„é€Ÿåº¦æ¯”ä»¥å‰å¿«äº†å¤§æ¦‚40%å·¦å³.ä½†æ˜¯è®¿é—®&lt;strong>Github Page&lt;/strong>çš„é€Ÿåº¦è¿˜æ˜¯ä¸€å¦‚æ—¢å¾€çš„çš„æ»¡.&lt;/p></description></item><item><title>Thread Pool Executor è¿è¡Œç»†èŠ‚</title><link>https://sdttttt.github.io/blog/thread_pool_executor/</link><pubDate>Tue, 25 Aug 2020 17:29:15 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/thread_pool_executor/</guid><description>
&lt;p>å…ˆè¯´è¯´çº¿ç¨‹æ± æœ¬èº«, ç”±äºçº¿ç¨‹èµ„æºæœ¬èº«åœ¨è®¡ç®—æœºä¸­æ¯”è¾ƒæ˜‚è´µ, åˆ›å»ºå’Œé”€æ¯éƒ½æœ‰ç›¸å½“çš„å¼€é”€, æ‰€ä»¥åœ¨ä¸€äº›å¤„ç†ç®€å•ä½†æ˜¯å¹¶å‘é‡å¤§çš„åœºæ™¯ä½¿ç”¨ä¸€ä¸ªè¯·æ±‚å¯¹åº”ä¸€ä¸ªçº¿ç¨‹çš„æ˜¯ä¸æ˜æ™ºçš„é€‰æ‹©.&lt;/p>
&lt;p>ThreadPoolExecutoræ˜¯Javaä¸­çº¿ç¨‹æ± çš„ä¸€ç§å®ç°. æ„é€ å‡½æ•°å¦‚ä¸‹:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="kd">public&lt;/span> &lt;span class="nf">ThreadPoolExecutor&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">corePoolSize&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="c1">// æ ¸å¿ƒçº¿ç¨‹æ•°é‡
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">maximumPoolSize&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="c1">// æœ€å¤§çº¿ç¨‹æ•°é‡
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="kt">long&lt;/span> &lt;span class="n">keepAliveTime&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="c1">// å­˜æ´»æ—¶é—´
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">TimeUnit&lt;/span> &lt;span class="n">unit&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="c1">// æ—¶é—´å•ä½
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="n">BlockingQueue&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Runnable&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">workQueue&lt;/span> &lt;span class="c1">// æ¥ä¸ªåˆ—é˜Ÿ
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">this&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">corePoolSize&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">maximumPoolSize&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">keepAliveTime&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">unit&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">workQueue&lt;/span>&lt;span class="o">,&lt;/span>
&lt;span class="n">Executors&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">defaultThreadFactory&lt;/span>&lt;span class="o">(),&lt;/span> &lt;span class="n">defaultHandler&lt;/span>&lt;span class="o">);&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æäº¤ä»»åŠ¡æ—¶çš„è¿è¡Œå¦‚ä¸‹:&lt;/p>
&lt;ul>
&lt;li>å¦‚æœæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æ•° &amp;lt; coreSizeï¼Œé©¬ä¸Šåˆ›å»ºçº¿ç¨‹æ‰§è¡Œè¯¥taskï¼Œä¸æ’é˜Ÿç­‰å¾…ï¼›&lt;/li>
&lt;li>å¦‚æœæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æ•° &amp;gt;= coreSizeï¼ŒæŠŠè¯¥taskæ”¾å…¥é˜»å¡é˜Ÿåˆ—ï¼›&lt;/li>
&lt;li>å¦‚æœé˜Ÿåˆ—å·²æ»¡ &amp;amp;&amp;amp; æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æ•° &amp;lt; maximumPoolSizeï¼Œåˆ›å»ºæ–°çš„çº¿ç¨‹æ‰§è¡Œè¯¥taskï¼›&lt;/li>
&lt;li>å¦‚æœé˜Ÿåˆ—å·²æ»¡ &amp;amp;&amp;amp; æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æ•° &amp;gt;= maximumPoolSizeï¼Œçº¿ç¨‹æ± è°ƒç”¨handlerçš„rejectæ–¹æ³•æ‹’ç»æœ¬æ¬¡æäº¤ã€‚&lt;/li>
&lt;li>ä»workerçº¿ç¨‹è‡ªå·±çš„è§’åº¦æ¥çœ‹ï¼Œå½“workerçš„taskæ‰§è¡Œç»“æŸä¹‹åï¼Œå¾ªç¯ä»é˜»å¡é˜Ÿåˆ—ä¸­å–å‡ºä»»åŠ¡æ‰§è¡Œã€‚&lt;/li>
&lt;/ul></description></item><item><title>Raftå®ç°çš„æ€è€ƒ</title><link>https://sdttttt.github.io/blog/raft_impl/</link><pubDate>Thu, 25 Jun 2020 19:02:23 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/raft_impl/</guid><description>
&lt;p>æ¯”è¾ƒRaftç®—æ³•å’ŒPaxosç®—æ³•ä¹‹å,ç¡®å®èƒ½æ„Ÿå—åˆ°Raftç®—æ³•æ›´åŠ æ¥è¿‘æ­£å¸¸äººçš„æ€ç»´é€»è¾‘, Paxosåè€Œæ¯”è¾ƒ&lt;code>ä¸“ä¸š?&lt;/code>&lt;/p>
&lt;p>æœ¬æ–‡ä¼šè¯´ä¸€äº›Raftç®—æ³•å®ç°ä¸Šçš„ä¸€äº›è€ƒé‡, æˆ‘ç›®å‰è¿˜æ²¡æœ‰æ­£å¼å¼€å§‹å¼€å‘Raftçš„å®ç°.
æ–‡ä¸­æ‰€æœ‰çš„å†…å®¹ä»…ä¾›å‚è€ƒ.&lt;/p>
&lt;p>Raftæœ€åŸºç¡€åˆ†ä¸ºä¸‰ç§çŠ¶æ€: &lt;strong>Leader&lt;/strong>, &lt;strong>Follower&lt;/strong>, &lt;strong>Candidate&lt;/strong>.
æ•´ä¸ªRaftä¸»ä½“å³æ˜¯ä¸€ä¸ªçŠ¶æ€æœº.&lt;/p>
&lt;p>æ¯ä¸ªRaftNodeéƒ½éœ€è¦å¤„ç†å¤–éƒ¨çš„äº‹ä»¶.æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é‡‡ç”¨äº‹ä»¶é©±åŠ¨æ¨¡å‹.&lt;/p>
&lt;p>æ•´ä½“æˆ‘ä»¬å¯ä»¥æ‹†åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†:&lt;/p>
&lt;ul>
&lt;li>RaftProcessor: å¤„ç†äº‹ä»¶çš„å¤„ç†å™¨.&lt;/li>
&lt;li>EventDispatcher: è´Ÿè´£æ¥æ”¶å¤–éƒ¨ä»»åŠ¡,å‘é€ç»™Raftæœ¬ä½“, æˆ–è€…æ¥æ”¶Raftæœ¬ä½“å‘æ¥çš„äº‹ä»¶,å‘å¤–å‘å¸ƒ.&lt;/li>
&lt;li>LogSynchronizer: åŒæ­¥LogBufferä¸­çš„æ—¥å¿—åˆ°Raftæœ¬ä½“.&lt;/li>
&lt;/ul>
&lt;p>ä¸‰ä¸ªéƒ¨åˆ†å¯ä»¥ä½¿ç”¨Channelæ¥åˆ°è¾¾äº’ç›¸é€šä¿¡.&lt;/p>
&lt;p>&lt;img src="https://static01.imgkr.com/temp/4b34da085c8742018791aa36e4921210.jpg" alt="">&lt;/p></description></item><item><title>Kanon</title><link>https://sdttttt.github.io/blog/kanon/</link><pubDate>Fri, 12 Jun 2020 17:09:04 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/kanon/</guid><description>
&lt;iframe frameborder="no" width=330 height=86 src="//music.163.com/outchain/player?type=2&amp;id=26134218&amp;auto=1&amp;height=66">&lt;/iframe>
&lt;link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
&lt;p>æœ‰ä¸€æ®µæ—¶é—´æ²¡æœ‰ç©è¿‡&lt;code>GALGAME&lt;/code>äº†.&lt;/p>
&lt;p>æ‰€ä»¥å°±å»å°è¯•ç©äº†&lt;code>Kanon&lt;/code>.&lt;/p>
&lt;p>æ€»ä¹‹å°±æ˜¯, &lt;strong>éå¸¸åæ‚”&lt;/strong>.&lt;/p></description></item><item><title>Database Storage</title><link>https://sdttttt.github.io/blog/database_storage/</link><pubDate>Tue, 02 Jun 2020 19:51:50 +0800</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/database_storage/</guid><description>
&lt;p>&lt;strong>CMU Database System 15-445/645&lt;/strong> å‚¨å­˜ Part 1&lt;/p>
&lt;p>æ•°æ®åº“å­˜å‚¨çš„æ•°æ®åœ¨ FS(File System) ä¸­æ˜¯ä»¥ &lt;strong>å—(Block)&lt;/strong> çš„æ–¹å¼è¡¨ç¤ºçš„.&lt;/p>
&lt;p>å®é™…ä¸Šä½ å¾ˆå¯èƒ½å·²ç»è§åˆ°è¿‡äº†,åœ¨MySQLä¸­çš„æ•°æ®åº“å°±æ˜¯ä»¥ä¸€åˆ‡Blockæ–‡ä»¶çš„æ–¹å¼å­˜å‚¨çš„.&lt;/p>
&lt;p>è¿™ç¯‡æ–‡ç« ä¼šå‘Šè¯‰ä½ ç›®å‰å¸¸è§çš„æ•°æ®åº“å­˜å‚¨æ–¹å¼.&lt;/p>
&lt;hr>
&lt;p>æœ€å¼€å§‹ç”¨&lt;strong>Tuple Storage&lt;/strong>æ¥å°è¯•æ”¹å–„æ•°æ®åº“çš„å­˜å‚¨ç»“æ„.&lt;/p>
&lt;p>&lt;img src="https://imgkr.cn-bj.ufileos.com/0029ea52-6d5b-4989-a8e0-a7dec2e0d49c.png" alt="">&lt;/p>
&lt;p>å®ƒçš„å·¥ä½œåŸç†æ¯”è¾ƒç®€å•, æ¯ä¸€ä¸ª&lt;strong>Page&lt;/strong>ç»´æŠ¤ä¸€ä¸ª&lt;strong>Header&lt;/strong>,
Headerä¸­ä¼šåŒ…å«ä¸€äº›Pageçš„å…ƒæ•°æ®,ä»¥åŠè¢«å­˜å‚¨æ•°æ®çš„åç§»å€¼.&lt;/p>
&lt;p>æ¯å½“æ’å…¥ä¸€ä¸ªTuple,æˆ‘ä»¬å°±ä¼šUpdate Headerä¸­çš„åç§»å€¼.&lt;/p>
&lt;p>è¿™ä¸ªè®¾è®¡ä¸­å­˜åœ¨æ¯”è¾ƒå¤§çš„é—®é¢˜, å¦‚æœæˆ‘ä»¬åˆ é™¤äº†åº•ä¸‹Tuple,å°±ä¸å¾—ä¸ç§»åŠ¨æ‰€æœ‰Tuple.
å¦‚æœä¸ç§»åŠ¨æ•°æ®, é‚£æˆ‘ä»¬ä¹Ÿè¦èŠ±è´¹é«˜æ˜‚çš„ä»£ä»·å»ç»´æŠ¤Headerä¸­Pageçš„metaæ•°æ®.&lt;/p>
&lt;hr>
&lt;p>ç›®å‰æœ€å¸¸è§çš„å°±æ˜¯&lt;strong>Slotted Pages&lt;/strong>çš„æ–¹å¼å»å­˜å‚¨æ•°æ®.
åœ¨ä¸åŒæ•°æ®åº“ä¸­çš„å®ç°ç»†èŠ‚å¯èƒ½ä¸åŒ,ä½†æ˜¯ä»é«˜çº§å±‚é¢æ¥è®²,å¤§å¤šæ•°æ•°æ®åº“ç³»ç»Ÿ,
ç”¨çš„éƒ½æ˜¯è¿™ç§æ–¹å¼å»å­˜å‚¨æ•°æ®.&lt;/p>
&lt;p>&lt;img src="https://imgkr.cn-bj.ufileos.com/a47909a8-e0e6-48ea-a0b7-e3e327d7fdf2.png" alt="">&lt;/p>
&lt;p>æ¯ä¸ªPageä¸­æœ‰ä¸‰ä¸ªéƒ¨åˆ†:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Header&lt;/strong>: ä¿å­˜æœ€åŸºæœ¬çš„matedata, è¿˜åŒ…å«ä¸€äº›checksumå’Œè®¿é—®æ—¶é—´ä¹‹ç±»çš„.&lt;/li>
&lt;li>&lt;strong>SlotArray&lt;/strong>: å°†æ¯ä¸€ä¸ªç‰¹å®šçš„Slotæ˜ å°„åˆ°å¯¹åº”Tupleçš„åç§»å€¼ä¸Š.&lt;/li>
&lt;li>&lt;strong>TupleArray&lt;/strong>: å‚¨å­˜æ¯ä¸€ä¸ªTuple.&lt;/li>
&lt;/ul>
&lt;p>åœ¨è¿™ä¸ªç»“æ„ä¸­Headeråé¢ç´§æ¥è¿™SoltArray, è€ŒTupleæ˜¯ä»Pageçš„å°¾éƒ¨å¼€å§‹å­˜å‚¨çš„.
æ¯ä¸ªPageå­˜å‚¨çš„Tupleçš„ä¸ªæ•°æ˜¯å›ºå®šçš„.&lt;/p>
&lt;p>å¦‚æœTupleè¢«åˆ é™¤,æˆ‘ä»¬ä¹Ÿåªéœ€è¦åˆ é™¤å›ºå®šçš„Soltå°±è¡Œ.
ç©ºå‡ºæ¥çš„ç©ºé—´ç¢ç‰‡,å¯ä»¥ç”±æ•°æ®åº“çš„ç©ºé—´æ•´ç†åŠŸèƒ½å»å®Œæˆ.
ç»´æŠ¤æ¯ä¸ªTupleçš„æˆæœ¬ä¹Ÿæ¯”è¾ƒå°.åªéœ€è¦æ”¹å˜Soltå°±å¯ä»¥.&lt;/p>
&lt;hr>
&lt;p>æœ€åè®²ä¸€ä¸ªDemoæ¥æ¼”ç¤ºæ•°æ®åº“çš„å·¥ä½œè¿‡ç¨‹.&lt;/p>
&lt;p>å‡å¦‚æˆ‘æƒ³è¦æ‰¾ä¸€ä¸ªå«Açš„äºº,æˆ‘ä¼šå…ˆå»æŸ¥æ‰¾ç´¢å¼•.
ä»ç´¢å¼•é‡Œæˆ‘çŸ¥é“Açš„Pageæ˜¯123, Soltæ˜¯2.
æˆ‘å»æ‰¾ç®¡ç†Pagesçš„äºº,è®©ä»–æŠŠPage123çš„æŒ‡é’ˆç»™æˆ‘,
ç„¶åæ‹¿ç€Pageçš„æŒ‡é’ˆ,æ‰¾åˆ°Solt2ä¸­çš„åç§»åœ°å€,æ‰¾åˆ°äº†Aè¿™ä¸ªäºº.&lt;/p></description></item><item><title>Red Black Tree</title><link>https://sdttttt.github.io/blog/red-black-tree/</link><pubDate>Mon, 25 May 2020 19:27:28 +0800</pubDate><guid>https://sdttttt.github.io/blog/red-black-tree/</guid><description>
&lt;p>åŠå¹´å‰åœ¨ç ”ç©¶&lt;code>HashMap&lt;/code>çš„æ—¶å€™å·²ç»å­¦ä¹ è¿‡çº¢é»‘æ ‘çš„è§„åˆ™åŸç†äº†.
ä¸è¿‡ç°åœ¨åˆé‡åˆ°å°±å¿˜è®°æ˜¯æ€ä¹ˆå®ç°çš„äº†.(åªçŸ¥é“è¿™ç©æ„æ˜¯ç”¨æ¥å¹³è¡¡æ ‘çš„)
è¿™æ¬¡å°±æŠŠè¿™ä¸ªæ•°æ®ç»“æ„åšä¸€ä¸ªäº†æ–­.&lt;/p>
&lt;h3 id="æ€§è´¨">æ€§è´¨&lt;/h3>
&lt;ul>
&lt;li>æ€§è´¨1ï¼šæ¯ä¸ªèŠ‚ç‚¹è¦ä¹ˆæ˜¯é»‘è‰²ï¼Œè¦ä¹ˆæ˜¯çº¢è‰²ã€‚&lt;/li>
&lt;li>æ€§è´¨2ï¼šæ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²ã€‚&lt;/li>
&lt;li>æ€§è´¨3ï¼šæ¯ä¸ªå¶å­èŠ‚ç‚¹ï¼ˆNILï¼‰æ˜¯é»‘è‰²ã€‚&lt;/li>
&lt;li>æ€§è´¨4ï¼šæ¯ä¸ªçº¢è‰²ç»“ç‚¹çš„ä¸¤ä¸ªå­ç»“ç‚¹ä¸€å®šéƒ½æ˜¯é»‘è‰²ã€‚&lt;/li>
&lt;li>æ€§è´¨5ï¼šä»»æ„ä¸€ç»“ç‚¹åˆ°æ¯ä¸ªå¶å­ç»“ç‚¹çš„è·¯å¾„éƒ½åŒ…å«æ•°é‡ç›¸åŒçš„é»‘ç»“ç‚¹ã€‚&lt;/li>
&lt;/ul>
&lt;p>æ»¡è¶³è¿™5ä¸ªæ€§è´¨å°±èƒ½ä¿è¯çº¢é»‘æ ‘æ˜¯å¹³è¡¡çš„.&lt;/p>
&lt;h3 id="insert">Insert&lt;/h3>
&lt;p>æ’å…¥çš„èŠ‚ç‚¹é»˜è®¤æ˜¯çº¢è‰²çš„.å› ä¸ºè¿™æ ·å¯ä»¥æœ€å¤§é™åº¦æ»¡è¶³çº¢é»‘æ ‘çš„5ä¸ªæ€§è´¨.&lt;/p>
&lt;p>è¯·è¯•æƒ³ä¸€ä¸‹.å¦‚æœæ’å…¥çš„èŠ‚ç‚¹æ˜¯çº¢è‰²:&lt;/p>
&lt;ul>
&lt;li>æ€§è´¨1å¯ä»¥æ»¡è¶³.&lt;/li>
&lt;li>æ€§è´¨2å¯ä»¥æ»¡è¶³.&lt;/li>
&lt;li>æ€§è´¨3å¯ä»¥æ»¡è¶³(æ’å…¥çº¢è‰²èŠ‚ç‚¹åè‡ªåŠ¨è¡ç”Ÿå‡º2ä¸ªé»‘è‰²çš„NILèŠ‚ç‚¹).&lt;/li>
&lt;li>æ€§è´¨4å¯èƒ½æ²¡æ³•æ»¡è¶³(æ–°æ’å…¥çš„èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ä¹Ÿæ˜¯çº¢è‰²).&lt;/li>
&lt;li>æ€§è´¨5å¯èƒ½æ²¡æ³•æ»¡è¶³(çˆ¶èŠ‚ç‚¹æ˜¯é»‘è‰²æ—¶å°±ä¸è¡Œ).&lt;/li>
&lt;/ul>
&lt;p>ç„¶åæ˜¯çº¢é»‘æ ‘èŠ‚ç‚¹çš„å·¦å³æ—‹.&lt;/p>
&lt;p>&lt;img src="https://gitee.com/sdttttt/images/raw/master//1323444-ff870251222c460e.gif" alt="">&lt;/p>
&lt;p>&lt;img src="https://gitee.com/sdttttt/images/raw/master//1323444-3f68be339d2a3983.gif" alt="">&lt;/p>
&lt;p>çœ‹æ‡‚æ²¡? èŠ‚ç‚¹çš„æ—‹è½¬å¤§æ¦‚å°±æ˜¯è¿™æ ·ã€‚&lt;/p>
&lt;p>ç„¶åå°±æ˜¯è¦åˆ†æ’å…¥çš„æƒ…å†µäº†.&lt;/p>
&lt;ul>
&lt;li>
&lt;p>ç¬¬ä¸€ç§ï¼šæ ¹èŠ‚ç‚¹ä¸ºç©ºã€‚è¿™ç§æƒ…å†µï¼Œå°†nodeçš„é¢œè‰²æ”¹ä¸ºé»‘è‰²å³å¯.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç¬¬äºŒç§: nodeçš„çˆ¶èŠ‚ç‚¹ä¸ºé»‘è‰²ã€‚è¿™ç§æƒ…å†µä¸éœ€è¦åšä¿®æ”¹.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç¬¬ä¸‰ç§: nodeçš„çˆ¶èŠ‚ç‚¹ä¸ºçº¢è‰² (æ ¹æ®æ€§è´¨3ï¼ŒNçš„ç¥–çˆ¶èŠ‚ç‚¹å¿…ä¸ºé»‘è‰²). è¿™ç§æƒ…å†µå’Œå˜æ¢è§„åˆ™éƒ½æ¯”è¾ƒå¤š.ä¸‹é¢ç»†è¯´&amp;hellip;&lt;/p>
&lt;ul>
&lt;li>nodeçš„å”çˆ¶èŠ‚ç‚¹ä¸ºçº¢è‰²ã€‚è¿™ç§æƒ…å†µï¼Œå°†Nçš„çˆ¶èŠ‚ç‚¹å’Œå”çˆ¶èŠ‚ç‚¹çš„é¢œè‰²éƒ½æ”¹ä¸ºé»‘è‰²ï¼Œè‹¥ç¥–çˆ¶èŠ‚ç‚¹æ˜¯è·ŸèŠ‚ç‚¹å°±å°†å…¶æ”¹ä¸ºé»‘è‰²ï¼Œå¦åˆ™å°†å…¶é¢œè‰²æ”¹ä¸ºçº¢è‰²ï¼Œå¹¶ä»¥ç¥–çˆ¶èŠ‚ç‚¹ä¸ºæ’å…¥çš„ç›®æ ‡èŠ‚ç‚¹å¼€å§‹é‡æ–°é€’å½’ä¿®å¤çº¢é»‘æ ‘.&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://gitee.com/sdttttt/images/raw/master//Red-black_tree_insert_case_3.png" alt="">&lt;/p>
&lt;ul>
&lt;li>nodeçš„å”çˆ¶èŠ‚ç‚¹ä¸ºé»‘è‰²ï¼Œä¸”nodeå’Œnodeçš„çˆ¶èŠ‚ç‚¹åœ¨åŒä¸€è¾¹ (å³çˆ¶èŠ‚ç‚¹ä¸ºç¥–çˆ¶çš„å·¦å„¿å­æ—¶ï¼ŒNä¹Ÿæ˜¯çˆ¶èŠ‚ç‚¹çš„å·¦å„¿å­ã€‚çˆ¶èŠ‚ç‚¹ä¸ºç¥–çˆ¶èŠ‚ç‚¹çš„å³å„¿å­æ—¶ã€‚Nä¹Ÿæ˜¯çˆ¶èŠ‚ç‚¹çš„å³å„¿å­)ã€‚ä»¥çˆ¶èŠ‚ç‚¹ä¸ºç¥–çˆ¶èŠ‚çš„å·¦å„¿å­ä¸ºä¾‹ï¼Œå°†çˆ¶èŠ‚ç‚¹æ”¹ä¸ºé»‘è‰²ï¼Œç¥–çˆ¶èŠ‚ç‚¹æ”¹ä¸ºçº¢è‰²ï¼Œç„¶åä»¥ç¥–çˆ¶èŠ‚ç‚¹ä¸ºåŸºå‡†å³æ—‹ã€‚(Nä¸ºçˆ¶èŠ‚ç‚¹å³å„¿å­æ—¶åšç›¸åº”çš„å·¦æ—‹)&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://gitee.com/sdttttt/images/raw/master//Red-black_tree_insert_case_5.png" alt="">&lt;/p>
&lt;ul>
&lt;li>nodeçš„å”çˆ¶èŠ‚ç‚¹ä¸ºé»‘è‰²ï¼Œä¸”nodeå’Œnodeçš„çˆ¶èŠ‚ç‚¹ä¸åœ¨åŒä¸€è¾¹ (å³çˆ¶èŠ‚ç‚¹ä¸ºç¥–çˆ¶çš„å·¦å„¿å­æ—¶ï¼ŒNæ˜¯çˆ¶èŠ‚ç‚¹çš„å³å„¿å­ã€‚çˆ¶èŠ‚ç‚¹ä¸ºç¥–çˆ¶èŠ‚ç‚¹çš„å³å„¿å­æ—¶ã€‚Nä¹Ÿæ˜¯çˆ¶èŠ‚ç‚¹å·¦å³å„¿å­)ã€‚ä»¥çˆ¶èŠ‚ç‚¹ä¸ºç¥–çˆ¶èŠ‚ç‚¹çš„å·¦å„¿å­ä¸ºä¾‹ã€‚ä»¥çˆ¶èŠ‚ç‚¹ä¸ºåŸºå‡†ï¼Œè¿›è¡Œå·¦æ—‹ï¼Œç„¶åä»¥çˆ¶èŠ‚ç‚¹ä¸ºç›®æ ‡æ’å…¥èŠ‚ç‚¹è¿›å…¥æƒ…å†µ3çš„bæƒ…å†µè¿›è¡Œæ“ä½œã€‚&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://gitee.com/sdttttt/images/raw/master//Red-black_tree_insert_case_4.png" alt="">&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="delete">Delete&lt;/h3>
&lt;p>è¿™ä¸ªä»¥åå†è¯´.&lt;/p>
&lt;h3 id="search">Search&lt;/h3>
&lt;p>çº¢é»‘æ ‘ç®—æ˜¯æœç´¢äºŒå‰æ ‘çš„ä¸€ä¸ªå­é›†ï¼Œ&lt;code>Search&lt;/code>æ–¹æ³•æ˜¯ç›¸åŒçš„ã€‚&lt;/p></description></item><item><title>Tree by Rust implement</title><link>https://sdttttt.github.io/blog/tree_rust/</link><pubDate>Wed, 20 May 2020 19:14:33 +0800</pubDate><guid>https://sdttttt.github.io/blog/tree_rust/</guid><description>
&lt;p>&lt;img src="https://sdttttt.github.io/code/carbon2.png" alt="">&lt;/p></description></item><item><title>Stack by Rust implement</title><link>https://sdttttt.github.io/blog/stack_rust/</link><pubDate>Wed, 20 May 2020 19:01:23 +0800</pubDate><guid>https://sdttttt.github.io/blog/stack_rust/</guid><description>
&lt;p>&lt;img src="https://sdttttt.github.io/code/carbon.png" alt="">&lt;/p></description></item><item><title>GFS</title><link>https://sdttttt.github.io/blog/gfs/</link><pubDate>Sat, 09 May 2020 13:00:00 +0000</pubDate><author>sdttttt</author><guid>https://sdttttt.github.io/blog/gfs/</guid><description>
&lt;p>è¿™æ˜¯ &lt;code>MIT 6.824&lt;/code> è¯¾ç¨‹&lt;code>GFS&lt;/code>éƒ¨åˆ†çš„ä¸€äº›æ€»ç»“.&lt;/p>
&lt;p>GFS (Google File System) æ˜¯Googleä¸ºäº†ç®¡ç†æµ·é‡æ•°æ®è€Œå¼€å‘çš„ä¸€ä¸ªåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ.&lt;/p>
&lt;p>ç›´æ¥è¿›å…¥æ­£é¢˜.&lt;/p>
&lt;p>åœ¨GFSä¸­æ–‡ä»¶æ˜¯ä»¥&lt;code>Chunk&lt;/code>çš„å½¢å¼å­˜å‚¨ã€‚æ‰€è°“çš„&lt;code>Chunk&lt;/code>æ˜¯ä¸€ä¸ªå‚¨å­˜å—ã€‚ä¸€ä¸ªChunkçš„å¤§å°ä¸º64MB.ä¸€ä¸ªæ–‡ä»¶ä¼šåˆ†ä¸ºå¤šä¸ªChunk.å‚¨å­˜åœ¨ä¸åŒçš„æœåŠ¡å™¨é‡Œã€‚å½“ç„¶ä¹Ÿä¼šæœ‰2-3ä»½&lt;code>Chunk&lt;/code>çš„æ‹·è´ã€‚&lt;/p>
&lt;p>GFSä¸­è¿˜å­˜åœ¨ä¸€ä¸ª&lt;code>Master&lt;/code>ï¼ŒMasteræ”¶é›†æ‰€æœ‰æ–‡ä»¶çš„metadata, ä¿å­˜åœ¨ä¸€å¼ è¡¨ä¸­ã€‚&lt;/p>
&lt;p>ä¸‹é¢ç®€å•çš„è§£é‡Šä¸€ä¸‹è¯»æ“ä½œçš„äº¤äº’ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;code>Client&lt;/code>æŒ‡å®šçš„æ–‡ä»¶åå’Œå­—èŠ‚åç§»è½¬æ¢æˆæ–‡ä»¶çš„ä¸€ä¸ªå—ç´¢å¼•ï¼ˆ&lt;code>Chunk Index&lt;/code>ï¼‰ã€‚&lt;/li>
&lt;li>ç»™&lt;code>Master&lt;/code>å‘é€ä¸€ä¸ªåŒ…å«æ–‡ä»¶åå’Œå—ç´¢å¼•çš„è¯·æ±‚ã€‚&lt;/li>
&lt;li>masterå›åº”å¯¹åº”çš„&lt;code>Chunk Handle&lt;/code>(å­˜å‚¨æ•°æ®æœåŠ¡å™¨ä»¥&lt;code>Chunk Handle&lt;/code>æ ‡è¯†&lt;code>Chunk&lt;/code>)å’Œå‰¯æœ¬çš„ä½ç½®ï¼ˆå¤šä¸ªå‰¯æœ¬ï¼‰ã€‚&lt;/li>
&lt;li>&lt;code>Client&lt;/code>ä»¥æ–‡ä»¶åå’Œå—ç´¢å¼•ä¸ºé”®ç¼“å­˜è¿™äº›ä¿¡æ¯ã€‚ï¼ˆhandleå’Œå‰¯æœ¬çš„ä½ç½®ï¼‰&lt;/li>
&lt;li>&lt;code>Client&lt;/code>å‘å…¶ä¸­ä¸€ä¸ªå‰¯æœ¬å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œå¾ˆå¯èƒ½æ˜¯æœ€è¿‘çš„ä¸€ä¸ªå‰¯æœ¬ã€‚è¯·æ±‚æŒ‡å®šäº†&lt;code>Chunk Handle&lt;/code>å’Œå—å†…çš„ä¸€ä¸ªå­—èŠ‚åŒºé—´ã€‚&lt;/li>
&lt;li>é™¤éç¼“å­˜çš„ä¿¡æ¯ä¸å†æœ‰æ•ˆï¼ˆcache for a limited timeï¼‰æˆ–æ–‡ä»¶è¢«é‡æ–°æ‰“å¼€ï¼Œå¦åˆ™ä»¥åå¯¹åŒä¸€ä¸ªå—çš„è¯»æ“ä½œä¸å†éœ€è¦clientå’Œmasteré—´çš„äº¤äº’ã€‚&lt;/li>
&lt;/ul></description></item><item><title>ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•</title><link>https://sdttttt.github.io/blog/consistent_hash_algorithm/</link><pubDate>Mon, 27 Apr 2020 10:05:10 +0800</pubDate><guid>https://sdttttt.github.io/blog/consistent_hash_algorithm/</guid><description>
&lt;p>ç¬¬ä¸€ä»£åˆ†å¸ƒå¼ç³»ç»Ÿé‡‡ç”¨çš„æ˜¯ä¸­å¿ƒåŒ–çš„ç³»ç»Ÿï¼Œå¯¹äºå­˜è´®å¤§é‡æ•°æ®çš„åˆ†å¸ƒå¼ç³»ç»Ÿæ¥è¯´å®ƒçš„ç¼ºç‚¹å°±æ˜¯&lt;code>ä¸­å¤®èŠ‚ç‚¹&lt;/code>æˆä¸ºäº†æ•´ä¸ªä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿçš„&lt;code>å•ç‚¹æ•…éšœ&lt;/code>.&lt;/p>
&lt;p>ç¬¬äºŒä»£åˆ†å¸ƒå¼ç³»ç»Ÿï¼ŒèŠ‚ç‚¹ä¹‹é—´é€šè¡Œé‡‡ç”¨çš„æ˜¯&lt;code>å¹¿æ’­&lt;/code>ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½å‘è‡ªå·±ç›¸è¿çš„&lt;code>æ‰€æœ‰èŠ‚ç‚¹&lt;/code>è¿›è¡Œè¯¢é—®ï¼Œè¢«è¯¢é—®çš„èŠ‚ç‚¹å¦‚æœä¸çŸ¥é“è¿™ä¸ªæ–‡ä»¶åœ¨å“ªé‡Œ,å°±å†æ¬¡è¿›è¡Œ&lt;code>å¹¿æ’­&lt;/code>&amp;hellip;&amp;hellip;å¦‚æ­¤å¾€å¤,ç›´è‡³æ‰¾åˆ°æ‰€éœ€æ–‡ä»¶ã€‚è¯·æ±‚å˜å¤šå°±æ„å‘³ç€ä¼šäº§ç”Ÿ&lt;code>å¹¿æ’­é£æš´&lt;/code>ï¼Œè¿™ä¼šä¸¥é‡å ç”¨å¸¦å®½å’Œç³»ç»Ÿèµ„æºã€‚&lt;/p>
&lt;p>ç¬¬ä¸‰ä»£åˆ†å¸ƒå¼ç³»ç»Ÿå¼€å§‹é‡‡ç”¨&lt;code>DHT&lt;/code>(Distrbuted Hash Table)ï¼Œä¹Ÿå°±æ˜¯&lt;code>ä¸€è‡´æ€§HASHç®—æ³•&lt;/code>.&lt;/p>
&lt;h2 id="ç®—æ³•èƒŒæ™¯">ç®—æ³•èƒŒæ™¯&lt;/h2>
&lt;p>ä¸€è‡´æ€§ HASH ç®—æ³•åœ¨ 1997 å¹´ç”±éº»çœç†å·¥å­¦é™¢çš„ Karger ç­‰äººåœ¨è§£å†³åˆ†å¸ƒå¼ Cache ä¸­æå‡ºçš„,è®¾è®¡ç›®æ ‡æ˜¯ä¸ºäº†
è§£å†³å› ç‰¹ç½‘ä¸­çš„çƒ­ç‚¹(Hot spot)é—®é¢˜,åˆè¡·å’Œ CARP ååˆ†ç±»ä¼¼ã€‚ä¸€è‡´æ€§ HASH ä¿®æ­£äº† CARP ä½¿ç”¨çš„ç®€å•å“ˆå¸Œ
ç®—æ³•å¸¦æ¥çš„é—®é¢˜,ä½¿å¾— DHT å¯ä»¥åœ¨ P2P ç¯å¢ƒä¸­çœŸæ­£å¾—åˆ°åº”ç”¨ã€‚&lt;/p>
&lt;p>ä½†ç°åœ¨ä¸€è‡´æ€§ hash ç®—æ³•åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä¹Ÿå¾—åˆ°äº†å¹¿æ³›åº”ç”¨,ç ”ç©¶è¿‡ &lt;code>memcached&lt;/code> ç¼“å­˜æ•°æ®åº“çš„äººéƒ½çŸ¥é“,
&lt;code>memcached&lt;/code> æœåŠ¡å™¨ç«¯æœ¬èº«ä¸æä¾›åˆ†å¸ƒå¼ &lt;code>Cache&lt;/code> çš„ä¸€è‡´æ€§,è€Œæ˜¯ç”±å®¢æˆ·ç«¯æ¥æä¾›,å…·ä½“åœ¨è®¡ç®—ä¸€è‡´æ€§ HASH æ—¶é‡‡ç”¨å¦‚ä¸‹æ­¥éª¤:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>é¦–å…ˆæ±‚å‡º memcached æœåŠ¡å™¨(èŠ‚ç‚¹)çš„å“ˆå¸Œå€¼,å¹¶å°†å…¶é…ç½®åˆ° &lt;code>0 ~ 2^32&lt;/code> çš„åœ†(continuum)ä¸Šã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç„¶åé‡‡ç”¨åŒæ ·çš„æ–¹æ³•æ±‚å‡ºå­˜å‚¨æ•°æ®çš„é”®çš„å“ˆå¸Œå€¼,å¹¶æ˜ å°„åˆ°ç›¸åŒçš„åœ†ä¸Šã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç„¶åä»æ•°æ®æ˜ å°„åˆ°çš„ä½ç½®å¼€å§‹é¡ºæ—¶é’ˆæŸ¥æ‰¾,å°†æ•°æ®ä¿å­˜åˆ°æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªæœåŠ¡å™¨ä¸Šã€‚å¦‚æœè¶…è¿‡ 2^32 ä»ç„¶æ‰¾ä¸åˆ°æœåŠ¡å™¨,å°±ä¼šä¿å­˜åˆ°ç¬¬ä¸€å° memcached æœåŠ¡å™¨ä¸Šã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://sdttttt.github.io/ConsistentHashAlgorithm/1.png" alt="">&lt;/p>
&lt;p>ä»ä¸Šå›¾çš„çŠ¶æ€ä¸­æ·»åŠ ä¸€å° memcached æœåŠ¡å™¨ã€‚ä½™æ•°åˆ†å¸ƒå¼ç®—æ³•ç”±äºä¿å­˜é”®çš„æœåŠ¡å™¨ä¼šå‘ç”Ÿå·¨å¤§å˜åŒ–
è€Œå½±å“ç¼“å­˜çš„å‘½ä¸­ç‡,ä½†&lt;code>ä¸€è‡´æ€§Hashing&lt;/code> ä¸­,åªæœ‰åœ¨åœ†(continuum)ä¸Šå¢åŠ æœåŠ¡å™¨çš„åœ°ç‚¹é€†æ—¶é’ˆæ–¹å‘
çš„ç¬¬ä¸€å°æœåŠ¡å™¨ä¸Šçš„é”®ä¼šå—åˆ°å½±å“ã€‚&lt;/p>
&lt;h2 id="æ€§è´¨">æ€§è´¨&lt;/h2>
&lt;p>å› ä¸ºè€ƒè™‘åˆ°æ•´ä¸ªç³»ç»Ÿçš„èŠ‚ç‚¹æ•°é‡æ˜¯åŠ¨æ€çš„ï¼Œæ¯æ—¶æ¯åˆ»æœ‰æ–°èŠ‚ç‚¹åŠ å…¥å’Œæ—§èŠ‚ç‚¹çš„å¤±æ•ˆã€‚
åœ¨è¿™ç±»æƒ…å†µä¸‹ä¾ç„¶è¦ä¿è¯ç³»ç»Ÿçš„å¯ç”¨æ€§ï¼Œè¿™æ˜¯å€¼å¾—æ€è€ƒçš„ï¼Œå°¤å…¶æ˜¯åœ¨è®¾è®¡åˆ†å¸ƒå¼ç¼“å­˜ç³»ç»Ÿçš„æ—¶å€™ã€‚
å¦‚æœä¸é‡‡ç”¨&lt;code>ä¸€è‡´æ€§HASHç®—æ³•&lt;/code>, å®¢æˆ·ç«¯åœ¨è®¡ç®—æ•°æ®çš„ hash æ—¶å¾€å¾€è¦é‡æ–°è®¡ç®—(é€šå¸¸è¿™ä¸ª Hash ç®—æ³•å’Œç³»ç»Ÿä¸­çš„èŠ‚ç‚¹æ•°é‡æœ‰å…³),
ç”±äº Hash å€¼å·²ç»æ”¹å˜ï¼Œæ‰€ä»¥å¾ˆæœ‰å¯èƒ½æ‰¾ä¸åˆ°åœ¨æ•´ä¸ªç³»ç»Ÿä¸­æ‰€å¯¹åº”çš„èŠ‚ç‚¹ï¼Œå¯¼è‡´ä¸å¯ç”¨ã€‚æ‰€ä»¥&lt;code>ä¸€è‡´æ€§HASHç®—æ³•&lt;/code>ï¼Œåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ååˆ†é‡è¦ã€‚&lt;/p>
&lt;p>è‰¯å¥½çš„&lt;code>ä¸€è‡´æ€§HASHç®—æ³•&lt;/code>éœ€è¦æ»¡è¶³ä¸€ä¸‹ç‰¹ç‚¹ï¼š&lt;/p>
&lt;p>&lt;strong>å¹³è¡¡æ€§(Balance)&lt;/strong>&lt;/p>
&lt;p>å¹³è¡¡æ€§æ˜¯æŒ‡å“ˆå¸Œçš„ç»“æœèƒ½å¤Ÿå°½å¯èƒ½åˆ†å¸ƒåˆ°æ‰€æœ‰çš„ç¼“å†²ä¸­å»,è¿™æ ·å¯ä»¥ä½¿å¾—æ‰€æœ‰çš„ç¼“å†²ç©ºé—´éƒ½å¾—åˆ°åˆ©ç”¨ã€‚å¾ˆå¤šå“ˆå¸Œç®—æ³•éƒ½èƒ½å¤Ÿæ»¡è¶³è¿™ä¸€æ¡ä»¶ã€‚&lt;/p>
&lt;p>&lt;strong>å•è°ƒæ€§(Monotonicity)&lt;/strong>&lt;/p>
&lt;p>å•è°ƒæ€§æ˜¯æŒ‡å¦‚æœå·²ç»æœ‰ä¸€äº›å†…å®¹é€šè¿‡å“ˆå¸Œåˆ†æ´¾åˆ°äº†ç›¸åº”çš„ç¼“å†²ä¸­,åˆæœ‰æ–°çš„ç¼“å†²åŒºåŠ å…¥åˆ°ç³»ç»Ÿä¸­,é‚£ä¹ˆå“ˆ å¸Œçš„ç»“æœåº”èƒ½å¤Ÿä¿è¯åŸæœ‰å·²åˆ†é…çš„å†…å®¹å¯ä»¥è¢«æ˜ å°„åˆ°æ–°çš„ç¼“å†²åŒºä¸­å»,è€Œä¸ä¼šè¢«æ˜ å°„åˆ°æ—§çš„ç¼“å†²é›†åˆä¸­çš„ å…¶ä»–ç¼“å†²åŒºã€‚ç®€å•çš„å“ˆå¸Œç®—æ³•å¾€å¾€ä¸èƒ½æ»¡è¶³å•è°ƒæ€§çš„è¦æ±‚,å¦‚æœ€ç®€å•çš„çº¿æ€§å“ˆå¸Œ:x = (ax + b) mod (P), åœ¨ä¸Šå¼ä¸­,P è¡¨ç¤ºå…¨éƒ¨ç¼“å†²çš„å¤§å°ã€‚ä¸éš¾çœ‹å‡º,å½“ç¼“å†²å¤§å°å‘ç”Ÿå˜åŒ–æ—¶(ä» P1 åˆ° P2),åŸæ¥æ‰€æœ‰çš„å“ˆå¸Œç»“æœ å‡ä¼šå‘ç”Ÿå˜åŒ–,ä»è€Œä¸æ»¡è¶³å•è°ƒæ€§çš„è¦æ±‚ã€‚å“ˆå¸Œç»“æœçš„å˜åŒ–æ„å‘³ç€å½“ç¼“å†²ç©ºé—´å‘ç”Ÿå˜åŒ–æ—¶,æ‰€æœ‰çš„æ˜ å°„å…³ ç³»éœ€è¦åœ¨ç³»ç»Ÿå†…å…¨éƒ¨æ›´æ–°ã€‚è€Œåœ¨ P2P ç³»ç»Ÿå†…,ç¼“å†²çš„å˜åŒ–ç­‰ä»·äº Peer åŠ å…¥æˆ–é€€å‡ºç³»ç»Ÿ,è¿™ä¸€æƒ…å†µåœ¨ P2P ç³» ç»Ÿä¸­ä¼šé¢‘ç¹å‘ç”Ÿ,å› æ­¤ä¼šå¸¦æ¥æå¤§è®¡ç®—å’Œä¼ è¾“è´Ÿè·ã€‚å•è°ƒæ€§å°±æ˜¯è¦æ±‚å“ˆå¸Œç®—æ³•èƒ½å¤Ÿåº”å¯¹è¿™ç§æƒ…å†µã€‚&lt;/p>
&lt;p>&lt;strong>åˆ†æ•£æ€§(Spread)&lt;/strong>&lt;/p>
&lt;p>åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­,ç»ˆç«¯æœ‰å¯èƒ½çœ‹ä¸åˆ°æ‰€æœ‰çš„ç¼“å†²,è€Œæ˜¯åªèƒ½çœ‹åˆ°å…¶ä¸­çš„ä¸€éƒ¨åˆ†ã€‚å½“ç»ˆç«¯å¸Œæœ›é€šè¿‡å“ˆå¸Œè¿‡ç¨‹ å°†å†…å®¹æ˜ å°„åˆ°ç¼“å†²ä¸Šæ—¶,ç”±äºä¸åŒç»ˆç«¯æ‰€è§çš„ç¼“å†²èŒƒå›´æœ‰å¯èƒ½ä¸åŒ,ä»è€Œå¯¼è‡´å“ˆå¸Œçš„ç»“æœä¸ä¸€è‡´,æœ€ç»ˆçš„ ç»“æœæ˜¯ç›¸åŒçš„å†…å®¹è¢«ä¸åŒçš„ç»ˆç«¯æ˜ å°„åˆ°ä¸åŒçš„ç¼“å†²åŒºä¸­ã€‚è¿™ç§æƒ…å†µæ˜¾ç„¶æ˜¯åº”è¯¥é¿å…çš„,å› ä¸ºå®ƒå¯¼è‡´ç›¸åŒå†… å®¹è¢«å­˜å‚¨åˆ°ä¸åŒç¼“å†²ä¸­å»,é™ä½äº†ç³»ç»Ÿå­˜å‚¨çš„æ•ˆç‡ã€‚åˆ†æ•£æ€§çš„å®šä¹‰å°±æ˜¯ä¸Šè¿°æƒ…å†µå‘ç”Ÿçš„ä¸¥é‡ç¨‹åº¦ã€‚å¥½çš„å“ˆ å¸Œç®—æ³•åº”èƒ½å¤Ÿå°½é‡é¿å…ä¸ä¸€è‡´çš„æƒ…å†µå‘ç”Ÿ,ä¹Ÿå°±æ˜¯å°½é‡é™ä½åˆ†æ•£æ€§ã€‚&lt;/p>
&lt;p>&lt;strong>è´Ÿè½½(Load)&lt;/strong>&lt;/p>
&lt;p>è´Ÿè½½é—®é¢˜å®é™…ä¸Šæ˜¯ä»å¦ä¸€ä¸ªè§’åº¦çœ‹å¾…åˆ†æ•£æ€§é—®é¢˜ã€‚æ—¢ç„¶ä¸åŒçš„ç»ˆç«¯å¯èƒ½å°†ç›¸åŒçš„å†…å®¹æ˜ å°„åˆ°ä¸åŒçš„ç¼“å†²åŒº ä¸­,é‚£ä¹ˆå¯¹äºä¸€ä¸ªç‰¹å®šçš„ç¼“å†²åŒºè€Œè¨€,ä¹Ÿå¯èƒ½è¢«ä¸åŒçš„ç”¨æˆ·æ˜ å°„ä¸ºä¸åŒçš„å†…å®¹ã€‚ä¸åˆ†æ•£æ€§ä¸€æ ·,è¿™ç§æƒ…å†µ ä¹Ÿæ˜¯åº”å½“é¿å…çš„,å› æ­¤å¥½çš„å“ˆå¸Œç®—æ³•åº”èƒ½å¤Ÿå°½é‡é™ä½ç¼“å†²çš„è´Ÿè·ã€‚&lt;/p>
&lt;p>&lt;strong>å¹³æ»‘æ€§(Smoothness)&lt;/strong>&lt;/p>
&lt;p>å¹³æ»‘æ€§æ˜¯æŒ‡ç¼“å­˜æœåŠ¡å™¨çš„æ•°ç›®å¹³æ»‘æ”¹å˜å’Œç¼“å­˜å¯¹è±¡çš„å¹³æ»‘æ”¹å˜æ˜¯ä¸€è‡´çš„ã€‚&lt;/p>
&lt;h2 id="è™šæ‹ŸèŠ‚ç‚¹">è™šæ‹ŸèŠ‚ç‚¹&lt;/h2>
&lt;p>å‡è®¾åœ¨åœ†ä¸Š&lt;code>Node A&lt;/code>å’Œ&lt;code>Node B&lt;/code>è·ç¦»è¿‡è¿‘ï¼ŒæŒ‰ç…§ä»¥ä¸Šçš„ç¯å½¢ä¸€è‡´ HASH ç®—æ³•å°±ä¼šå‘ç”Ÿä¸¤ä¸ªèŠ‚ç‚¹æ‰€æ‹¥æœ‰çš„æ•°æ®æ•°é‡ä¸ä¸€è‡´çš„é—®é¢˜ã€‚&lt;/p>
&lt;p>&lt;img src="https://sdttttt.github.io/ConsistentHashAlgorithm/2.png" alt="">&lt;/p>
&lt;p>ä¸ºäº†è§£å†³è¿™ç§æ•°æ®å€¾æ–œé—®é¢˜ï¼Œä¸€è‡´æ€§å“ˆå¸Œç®—æ³•å¼•å…¥äº†è™šæ‹ŸèŠ‚ç‚¹æœºåˆ¶ï¼Œå³å¯¹æ¯ä¸€ä¸ªæœåŠ¡èŠ‚ç‚¹è®¡ç®—&lt;code>å¤šä¸ªå“ˆå¸Œ&lt;/code>ï¼Œæ¯ä¸ªè®¡ç®—ç»“æœä½ç½®éƒ½æ”¾ç½®ä¸€ä¸ªæ­¤&lt;code>æœåŠ¡èŠ‚ç‚¹&lt;/code>ï¼Œç§°ä¸ºè™šæ‹ŸèŠ‚ç‚¹ã€‚å…·ä½“åšæ³•å¯ä»¥åœ¨æœåŠ¡å™¨ ip æˆ–ä¸»æœºåçš„åé¢å¢åŠ ç¼–å·æ¥å®ç°ã€‚ä¾‹å¦‚ä¸Šé¢çš„æƒ…å†µï¼Œå¯ä»¥ä¸ºæ¯å°æœåŠ¡å™¨è®¡ç®—ä¸‰ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œäºæ˜¯å¯ä»¥åˆ†åˆ«è®¡ç®— â€œNode A#1â€ã€â€œNode A#2â€ã€â€œNode A#3â€ã€â€œNode B#1â€ã€â€œNode B#2â€ã€â€œNode B#3â€çš„å“ˆå¸Œå€¼ï¼Œäºæ˜¯å½¢æˆå…­ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼š&lt;/p>
&lt;p>åŒæ—¶æ•°æ®å®šä½ç®—æ³•ä¸å˜ï¼Œåªæ˜¯å¤šäº†ä¸€æ­¥è™šæ‹ŸèŠ‚ç‚¹åˆ°å®é™…èŠ‚ç‚¹çš„æ˜ å°„ï¼Œä¾‹å¦‚å®šä½åˆ°â€œNode A#1â€ã€â€œNode A#2â€ã€â€œNode A#3â€ä¸‰ä¸ªè™šæ‹ŸèŠ‚ç‚¹çš„æ•°æ®å‡å®šä½åˆ° Node A ä¸Šã€‚è¿™æ ·å°±è§£å†³äº†æœåŠ¡èŠ‚ç‚¹å°‘æ—¶æ•°æ®å€¾æ–œçš„é—®é¢˜ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œé€šå¸¸å°†è™šæ‹ŸèŠ‚ç‚¹æ•°è®¾ç½®ä¸º 32 ç”šè‡³æ›´å¤§ï¼Œå› æ­¤å³ä½¿å¾ˆå°‘çš„æœåŠ¡èŠ‚ç‚¹ä¹Ÿèƒ½åšåˆ°ç›¸å¯¹å‡åŒ€çš„æ•°æ®åˆ†å¸ƒã€‚&lt;/p></description></item><item><title>File Upload</title><link>https://sdttttt.github.io/blog/file_upload/</link><pubDate>Sun, 12 Apr 2020 10:46:06 +0800</pubDate><guid>https://sdttttt.github.io/blog/file_upload/</guid><description>
&lt;p>DVWA File upload è¿‡å…³ç§˜ç±.&lt;/p>
&lt;h3 id="low">LOW&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-PHP" data-lang="PHP">&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nx">isset&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$_POST&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;Upload&amp;#39;&lt;/span> &lt;span class="p">]&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// Where are we going to be writing to?
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$target_path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">DVWA_WEB_PAGE_TO_ROOT&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="s2">&amp;#34;hackable/uploads/&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nv">$target_path&lt;/span> &lt;span class="o">.=&lt;/span> &lt;span class="nx">basename&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$_FILES&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;uploaded&amp;#39;&lt;/span> &lt;span class="p">][&lt;/span> &lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span> &lt;span class="p">]&lt;/span> &lt;span class="p">);&lt;/span>
&lt;span class="c1">// Can we move the file to the upload folder?
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// å®Œå…¨æ²¡åšè¿‡æ»¤.
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// ä¸Šä¼ ä¸€ä¸ªPHPæ–‡ä»¶ä¹Ÿæ˜¯å¯ä»¥çš„.
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="o">!&lt;/span>&lt;span class="nx">move_uploaded_file&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$_FILES&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;uploaded&amp;#39;&lt;/span> &lt;span class="p">][&lt;/span> &lt;span class="s1">&amp;#39;tmp_name&amp;#39;&lt;/span> &lt;span class="p">],&lt;/span> &lt;span class="nv">$target_path&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// No
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">echo&lt;/span> &lt;span class="s1">&amp;#39;&amp;lt;pre&amp;gt;Your image was not uploaded.&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// Yes!
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">echo&lt;/span> &lt;span class="s2">&amp;#34;&amp;lt;pre&amp;gt;&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="nv">$target_path&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2"> succesfully uploaded!&amp;lt;/pre&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="medium">Medium&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-PHP" data-lang="PHP">&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nx">isset&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$_POST&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;Upload&amp;#39;&lt;/span> &lt;span class="p">]&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// Where are we going to be writing to?
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$target_path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">DVWA_WEB_PAGE_TO_ROOT&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="s2">&amp;#34;hackable/uploads/&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nv">$target_path&lt;/span> &lt;span class="o">.=&lt;/span> &lt;span class="nx">basename&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$_FILES&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;uploaded&amp;#39;&lt;/span> &lt;span class="p">][&lt;/span> &lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span> &lt;span class="p">]&lt;/span> &lt;span class="p">);&lt;/span>
&lt;span class="c1">// File information
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$uploaded_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$_FILES&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;uploaded&amp;#39;&lt;/span> &lt;span class="p">][&lt;/span> &lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span> &lt;span class="p">];&lt;/span>
&lt;span class="nv">$uploaded_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$_FILES&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;uploaded&amp;#39;&lt;/span> &lt;span class="p">][&lt;/span> &lt;span class="s1">&amp;#39;type&amp;#39;&lt;/span> &lt;span class="p">];&lt;/span>
&lt;span class="nv">$uploaded_size&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$_FILES&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;uploaded&amp;#39;&lt;/span> &lt;span class="p">][&lt;/span> &lt;span class="s1">&amp;#39;size&amp;#39;&lt;/span> &lt;span class="p">];&lt;/span>
&lt;span class="c1">// Is it an image?
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// // å¼€å§‹åšäº†ä¸€äº›è¿‡æ»¤
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="c1">// ä¸‹é¢æ˜¯å®˜æ–¹å¯¹$_FILES å‡½æ•°çš„æè¿°
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// [name] =&amp;gt; MyFile.txt (comes from the browser, so treat as tainted)
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// [type] =&amp;gt; text/plain (not sure where it gets this from - assume the browser, so treat as tainted)
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// [tmp_name] =&amp;gt; /tmp/php/php1h4j1o (could be anywhere on your system, depending on your config settings, but the user has no control, so this isn&amp;#39;t tainted)
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// [error] =&amp;gt; UPLOAD_ERR_OK (= 0)
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// [size] =&amp;gt; 123 (the size in bytes)
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="c1">// å…¶ä¸­å¯¹nameå’Œtypeçš„descriptionçš„æè¿°éƒ½æ˜¯ `treat as tainted`(è¢«æ±¡æŸ“çš„)
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// è¿™æ„å‘³ç€å®ƒæœ‰å¯èƒ½ä¼šè¢«ä¿®æ”¹ unsafe
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="c1">// æˆ‘ä»¬å¯ä»¥å°è¯•ä¸Šä¼ ä¸€ä¸ªPHPæ–‡ä»¶ï¼Œä½¿ç”¨ä¸€äº›æ‹¦æˆªè¯·æ±‚å·¥å…·ï¼Œä¿®æ”¹å³å°†å‘å‡ºçš„è¯·æ±‚.
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// æ¥è¾¾åˆ°ä¿®æ”¹`name`ä¸­çš„åç¼€åå’Œ`type`ä¸­çš„åª’ä½“ç±»å‹.
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="p">(&lt;/span> &lt;span class="nv">$uploaded_type&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;image/jpeg&amp;#34;&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="nv">$uploaded_type&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;image/png&amp;#34;&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span>
&lt;span class="p">(&lt;/span> &lt;span class="nv">$uploaded_size&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">100000&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// Can we move the file to the upload folder?
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="o">!&lt;/span>&lt;span class="nx">move_uploaded_file&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$_FILES&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;uploaded&amp;#39;&lt;/span> &lt;span class="p">][&lt;/span> &lt;span class="s1">&amp;#39;tmp_name&amp;#39;&lt;/span> &lt;span class="p">],&lt;/span> &lt;span class="nv">$target_path&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// No
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">echo&lt;/span> &lt;span class="s1">&amp;#39;&amp;lt;pre&amp;gt;Your image was not uploaded.&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// Yes!
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">echo&lt;/span> &lt;span class="s2">&amp;#34;&amp;lt;pre&amp;gt;&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="nv">$target_path&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2"> succesfully uploaded!&amp;lt;/pre&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// Invalid file
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">echo&lt;/span> &lt;span class="s1">&amp;#39;&amp;lt;pre&amp;gt;Your image was not uploaded. We can only accept JPEG or PNG images.&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="high">High&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-PHP" data-lang="PHP">&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nx">isset&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$_POST&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;Upload&amp;#39;&lt;/span> &lt;span class="p">]&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// Where are we going to be writing to?
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$target_path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">DVWA_WEB_PAGE_TO_ROOT&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="s2">&amp;#34;hackable/uploads/&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nv">$target_path&lt;/span> &lt;span class="o">.=&lt;/span> &lt;span class="nx">basename&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$_FILES&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;uploaded&amp;#39;&lt;/span> &lt;span class="p">][&lt;/span> &lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span> &lt;span class="p">]&lt;/span> &lt;span class="p">);&lt;/span>
&lt;span class="c1">// File information
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$uploaded_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$_FILES&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;uploaded&amp;#39;&lt;/span> &lt;span class="p">][&lt;/span> &lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span> &lt;span class="p">];&lt;/span>
&lt;span class="c1">// jpg
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$uploaded_ext&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">substr&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$uploaded_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">strrpos&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$uploaded_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;.&amp;#39;&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="c1">// file size
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$uploaded_size&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$_FILES&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;uploaded&amp;#39;&lt;/span> &lt;span class="p">][&lt;/span> &lt;span class="s1">&amp;#39;size&amp;#39;&lt;/span> &lt;span class="p">];&lt;/span>
&lt;span class="c1">// tmp_name æ˜¯ä¸´æ—¶å‰¯æœ¬çš„åå­—
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$uploaded_tmp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$_FILES&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;uploaded&amp;#39;&lt;/span> &lt;span class="p">][&lt;/span> &lt;span class="s1">&amp;#39;tmp_name&amp;#39;&lt;/span> &lt;span class="p">];&lt;/span>
&lt;span class="c1">// Is it an image?
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// å’Œä¸Šé¢çš„æ¯”èµ·æ¥å¤šä¸ªä¸€ä¸ªæ–‡ä»¶åç¼€åçš„åˆ¤æ–­.
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// strtolower è½¬å°å†™
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// æ‰©å±•ååªè¦æ»¡è¶³jpeg,pngæˆ–è€…jpgå°±è¡Œ
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="p">(&lt;/span> &lt;span class="nx">strtolower&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$uploaded_ext&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;jpg&amp;#34;&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="nx">strtolower&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$uploaded_ext&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;jpeg&amp;#34;&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="nx">strtolower&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$uploaded_ext&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;png&amp;#34;&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span>
&lt;span class="p">(&lt;/span> &lt;span class="nv">$uploaded_size&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">100000&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span>
&lt;span class="c1">// getimagesize è·å–å›¾åƒä¿¡æ¯
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// è¿™ä¸ªå‡½æ•°ä¿è¯ä½ ç©¿çš„ä¸€å®šå¾—æ˜¯ä¸ªå›¾åƒ
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// å¯ä»¥ç”¨å›¾ç‰‡æœ¨é©¬ç»•è¿‡
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">getimagesize&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$uploaded_tmp&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// Can we move the file to the upload folder?
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="o">!&lt;/span>&lt;span class="nx">move_uploaded_file&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$uploaded_tmp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nv">$target_path&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// No
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">echo&lt;/span> &lt;span class="s1">&amp;#39;&amp;lt;pre&amp;gt;Your image was not uploaded.&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// Yes!
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">echo&lt;/span> &lt;span class="s2">&amp;#34;&amp;lt;pre&amp;gt;&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="nv">$target_path&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2"> succesfully uploaded!&amp;lt;/pre&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// Invalid file
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">echo&lt;/span> &lt;span class="s1">&amp;#39;&amp;lt;pre&amp;gt;Your image was not uploaded. We can only accept JPEG or PNG images.&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="high-1">High&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-PHP" data-lang="PHP">&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nx">isset&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$_POST&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;Upload&amp;#39;&lt;/span> &lt;span class="p">]&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// Where are we going to be writing to?
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$target_path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">DVWA_WEB_PAGE_TO_ROOT&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="s2">&amp;#34;hackable/uploads/&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nv">$target_path&lt;/span> &lt;span class="o">.=&lt;/span> &lt;span class="nx">basename&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$_FILES&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;uploaded&amp;#39;&lt;/span> &lt;span class="p">][&lt;/span> &lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span> &lt;span class="p">]&lt;/span> &lt;span class="p">);&lt;/span>
&lt;span class="c1">// File information
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$uploaded_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$_FILES&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;uploaded&amp;#39;&lt;/span> &lt;span class="p">][&lt;/span> &lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span> &lt;span class="p">];&lt;/span>
&lt;span class="nv">$uploaded_ext&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">substr&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$uploaded_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">strrpos&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$uploaded_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;.&amp;#39;&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nv">$uploaded_size&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$_FILES&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;uploaded&amp;#39;&lt;/span> &lt;span class="p">][&lt;/span> &lt;span class="s1">&amp;#39;size&amp;#39;&lt;/span> &lt;span class="p">];&lt;/span>
&lt;span class="nv">$uploaded_tmp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$_FILES&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;uploaded&amp;#39;&lt;/span> &lt;span class="p">][&lt;/span> &lt;span class="s1">&amp;#39;tmp_name&amp;#39;&lt;/span> &lt;span class="p">];&lt;/span>
&lt;span class="c1">// Is it an image?
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// å¯¹æ¯”ä¸Šé¢å¤šéªŒè¯äº†æ–‡ä»¶çš„åç¼€å
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="p">(&lt;/span> &lt;span class="nx">strtolower&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$uploaded_ext&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;jpg&amp;#34;&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="nx">strtolower&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$uploaded_ext&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;jpeg&amp;#34;&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="nx">strtolower&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$uploaded_ext&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;png&amp;#34;&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span>
&lt;span class="p">(&lt;/span> &lt;span class="nv">$uploaded_size&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">100000&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span>
&lt;span class="c1">// å‡½æ•°ä¼šé€šè¿‡è¯»å–æ–‡ä»¶å¤´ï¼Œè¿”å›å›¾ç‰‡çš„é•¿ã€å®½ç­‰ä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰ç›¸å…³çš„å›¾ç‰‡æ–‡ä»¶å¤´ï¼Œå‡½æ•°ä¼šæŠ¥é”™
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">getimagesize&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$uploaded_tmp&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// å¯ä»¥çœ‹åˆ°ï¼ŒHighçº§åˆ«çš„ä»£ç è¯»å–æ–‡ä»¶åä¸­æœ€åä¸€ä¸ªâ€.â€åçš„å­—ç¬¦ä¸²ï¼ŒæœŸæœ›é€šè¿‡æ–‡ä»¶åæ¥é™åˆ¶æ–‡ä»¶ç±»å‹
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// å› æ­¤è¦æ±‚ä¸Šä¼ æ–‡ä»¶åå½¢å¼å¿…é¡»æ˜¯â€*.jpgâ€ã€â€*.jpegâ€ ã€â€*.pngâ€ä¹‹ä¸€
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// åŒæ—¶ï¼Œgetimagesizeå‡½æ•°æ›´æ˜¯é™åˆ¶äº†ä¸Šä¼ æ–‡ä»¶çš„æ–‡ä»¶å¤´å¿…é¡»ä¸ºå›¾åƒç±»å‹
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="c1">// Can we move the file to the upload folder?
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="o">!&lt;/span>&lt;span class="nx">move_uploaded_file&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$uploaded_tmp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nv">$target_path&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// No
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">echo&lt;/span> &lt;span class="s1">&amp;#39;&amp;lt;pre&amp;gt;Your image was not uploaded.&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// Yes!
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">echo&lt;/span> &lt;span class="s2">&amp;#34;&amp;lt;pre&amp;gt;&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="nv">$target_path&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2"> succesfully uploaded!&amp;lt;/pre&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// Invalid file
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">echo&lt;/span> &lt;span class="s1">&amp;#39;&amp;lt;pre&amp;gt;Your image was not uploaded. We can only accept JPEG or PNG images.&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="impossible">Impossible&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-PHP" data-lang="PHP">&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nx">isset&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$_POST&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;Upload&amp;#39;&lt;/span> &lt;span class="p">]&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// Check Anti-CSRF token
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">checkToken&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$_REQUEST&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;user_token&amp;#39;&lt;/span> &lt;span class="p">],&lt;/span> &lt;span class="nv">$_SESSION&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;session_token&amp;#39;&lt;/span> &lt;span class="p">],&lt;/span> &lt;span class="s1">&amp;#39;index.php&amp;#39;&lt;/span> &lt;span class="p">);&lt;/span>
&lt;span class="c1">// File information
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$uploaded_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$_FILES&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;uploaded&amp;#39;&lt;/span> &lt;span class="p">][&lt;/span> &lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span> &lt;span class="p">];&lt;/span>
&lt;span class="nv">$uploaded_ext&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">substr&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$uploaded_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">strrpos&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$uploaded_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;.&amp;#39;&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nv">$uploaded_size&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$_FILES&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;uploaded&amp;#39;&lt;/span> &lt;span class="p">][&lt;/span> &lt;span class="s1">&amp;#39;size&amp;#39;&lt;/span> &lt;span class="p">];&lt;/span>
&lt;span class="nv">$uploaded_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$_FILES&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;uploaded&amp;#39;&lt;/span> &lt;span class="p">][&lt;/span> &lt;span class="s1">&amp;#39;type&amp;#39;&lt;/span> &lt;span class="p">];&lt;/span>
&lt;span class="nv">$uploaded_tmp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$_FILES&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;uploaded&amp;#39;&lt;/span> &lt;span class="p">][&lt;/span> &lt;span class="s1">&amp;#39;tmp_name&amp;#39;&lt;/span> &lt;span class="p">];&lt;/span>
&lt;span class="c1">// Where are we going to be writing to?
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$target_path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">DVWA_WEB_PAGE_TO_ROOT&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="s1">&amp;#39;hackable/uploads/&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="c1">//$target_file = basename( $uploaded_name, &amp;#39;.&amp;#39; . $uploaded_ext ) . &amp;#39;-&amp;#39;;
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="c1">// MD5 åŠ å¯†
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$target_file&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">md5&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nx">uniqid&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="nv">$uploaded_name&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="s1">&amp;#39;.&amp;#39;&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="nv">$uploaded_ext&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nv">$temp_file&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span> &lt;span class="p">(&lt;/span> &lt;span class="nx">ini_get&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="s1">&amp;#39;upload_tmp_dir&amp;#39;&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;&amp;#39;&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="p">(&lt;/span> &lt;span class="nx">sys_get_temp_dir&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="p">(&lt;/span> &lt;span class="nx">ini_get&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="s1">&amp;#39;upload_tmp_dir&amp;#39;&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">);&lt;/span>
&lt;span class="nv">$temp_file&lt;/span> &lt;span class="o">.=&lt;/span> &lt;span class="nx">DIRECTORY_SEPARATOR&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="nx">md5&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nx">uniqid&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="nv">$uploaded_name&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="s1">&amp;#39;.&amp;#39;&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="nv">$uploaded_ext&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="c1">// Is it an image?
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="p">(&lt;/span> &lt;span class="nx">strtolower&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$uploaded_ext&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;jpg&amp;#39;&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="nx">strtolower&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$uploaded_ext&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;jpeg&amp;#39;&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="nx">strtolower&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$uploaded_ext&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;png&amp;#39;&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span>
&lt;span class="p">(&lt;/span> &lt;span class="nv">$uploaded_size&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">100000&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span>
&lt;span class="p">(&lt;/span> &lt;span class="nv">$uploaded_type&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;image/jpeg&amp;#39;&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="nv">$uploaded_type&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;image/png&amp;#39;&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span>
&lt;span class="nx">getimagesize&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$uploaded_tmp&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// Strip any metadata, by re-encoding image (Note, using php-Imagick is recommended over php-GD)
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$uploaded_type&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;image/jpeg&amp;#39;&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nv">$img&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">imagecreatefromjpeg&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$uploaded_tmp&lt;/span> &lt;span class="p">);&lt;/span>
&lt;span class="nx">imagejpeg&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$img&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nv">$temp_file&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">100&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nv">$img&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">imagecreatefrompng&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$uploaded_tmp&lt;/span> &lt;span class="p">);&lt;/span>
&lt;span class="nx">imagepng&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$img&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nv">$temp_file&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">imagedestroy&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$img&lt;/span> &lt;span class="p">);&lt;/span>
&lt;span class="c1">// Can we move the file to the web root from the temp folder?
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nx">rename&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$temp_file&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">(&lt;/span> &lt;span class="nx">getcwd&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="nx">DIRECTORY_SEPARATOR&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="nv">$target_path&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="nv">$target_file&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// Yes!
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">echo&lt;/span> &lt;span class="s2">&amp;#34;&amp;lt;pre&amp;gt;&amp;lt;a href=&amp;#39;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">target_path}${target_file}&amp;#39;&amp;gt;${target_file&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;lt;/a&amp;gt; succesfully uploaded!&amp;lt;/pre&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// No
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">echo&lt;/span> &lt;span class="s1">&amp;#39;&amp;lt;pre&amp;gt;Your image was not uploaded.&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">// Delete any temp files
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nx">file_exists&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$temp_file&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">)&lt;/span>
&lt;span class="nx">unlink&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$temp_file&lt;/span> &lt;span class="p">);&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// Invalid file
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">echo&lt;/span> &lt;span class="s1">&amp;#39;&amp;lt;pre&amp;gt;Your image was not uploaded. We can only accept JPEG or PNG images.&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">// Generate Anti-CSRF token
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="nx">generateSessionToken&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="extension">Extension&lt;/h3>
&lt;p>&lt;strong>00%æˆªæ–­&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-PHP" data-lang="PHP">&lt;span class="nv">$is_upload&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nv">$msg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">null&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">isset&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$_POST&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;submit&amp;#39;&lt;/span>&lt;span class="p">])){&lt;/span>
&lt;span class="c1">// ç™½åå•
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$ext_arr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;jpg&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;png&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;gif&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="nv">$file_ext&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">substr&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$_FILES&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;upload_file&amp;#39;&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span>&lt;span class="nx">strrpos&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$_FILES&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;upload_file&amp;#39;&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span>&lt;span class="s2">&amp;#34;.&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">in_array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$file_ext&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nv">$ext_arr&lt;/span>&lt;span class="p">)){&lt;/span>
&lt;span class="nv">$temp_file&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$_FILES&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;upload_file&amp;#39;&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="s1">&amp;#39;tmp_name&amp;#39;&lt;/span>&lt;span class="p">];&lt;/span>
&lt;span class="c1">// æ³¨æ„è¿™ä¸ªä½ç½®
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// æœ€åæ‹¼æ¥çš„å‚¨å­˜è·¯å¾„ï¼Œæ˜¯ç”±ç”¨æˆ·æäº¤ä¸Šçš„æ•°æ®æ¥åšä¸ºè·¯å¾„
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$img_path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$_POST&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;save_path&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="s2">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="nx">rand&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">99&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="nx">date&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;YmdHis&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="s2">&amp;#34;.&amp;#34;&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="nv">$file_ext&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">move_uploaded_file&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$temp_file&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nv">$img_path&lt;/span>&lt;span class="p">)){&lt;/span>
&lt;span class="nv">$is_upload&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nv">$msg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;ä¸Šä¼ å¤±è´¥&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nv">$msg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;åªå…è®¸ä¸Šä¼ .jpg|.png|.gifç±»å‹æ–‡ä»¶ï¼&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä»£ç é‡‡ç”¨çš„ç™½åå•æ ¡éªŒï¼Œåªå…è®¸ä¸Šä¼ å›¾ç‰‡æ ¼å¼ï¼Œç†è®ºä¸Šè¿™ä¸ªä¸Šä¼ æ˜¯ä¸å¥½ç»•è¿‡çš„ã€‚&lt;/p>
&lt;p>ä½†æ˜¯åé¢é‡‡ç”¨ä¿å­˜æ–‡ä»¶çš„æ—¶å€™ï¼Œæ˜¯è·¯å¾„æ‹¼æ¥çš„å½¢å¼ï¼Œè€Œè·¯å¾„åˆæ˜¯ä»å‰ç«¯è·å–ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨è·¯å¾„ä¸Šåšæ‰‹è„šã€‚&lt;/p>
&lt;p>å¦‚ä¸‹ä¸Šä¼ ï¼Œæ˜¾ç¤ºæ–‡ä»¶è·¯å¾„ä¸­æœ‰ä¸ªç©ºæ ¼ï¼Œè¿™å¹¶ä¸æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„ç©ºæ ¼ï¼Œè€Œæ˜¯%00æˆªæ–­åæ˜¾ç¤ºæˆçš„ç©ºæ ¼ã€‚&lt;/p>
&lt;blockquote>
&lt;p>åœ¨urlä¸­%00è¡¨ç¤ºascllç ä¸­çš„0 ï¼Œè€Œasciiä¸­0ä½œä¸ºç‰¹æ®Šå­—ç¬¦ä¿ç•™ï¼Œè¡¨ç¤ºå­—ç¬¦ä¸²ç»“æŸï¼Œæ‰€ä»¥å½“urlä¸­å‡ºç°%00æ—¶å°±ä¼šè®¤ä¸ºè¯»å–å·²ç»“æŸ (phpç‰ˆæœ¬è¦å°äº5.3.4ï¼Œ5.3.4åŠä»¥ä¸Šå·²ç»ä¿®å¤è¯¥é—®é¢˜)&lt;/p>
&lt;/blockquote></description></item><item><title>Sql Injection Blind</title><link>https://sdttttt.github.io/blog/sql_injection_blind/</link><pubDate>Fri, 10 Apr 2020 11:11:22 +0800</pubDate><guid>https://sdttttt.github.io/blog/sql_injection_blind/</guid><description>
&lt;p>è¿”å›çš„ç»“æœé›†æ— æ³•çœ‹åˆ°ï¼Œåªèƒ½é€šè¿‡ä¸€äº›é¡µé¢æ˜¾ç¤ºæˆ–çŠ¶æ€æ¥åˆ¤æ–­ã€‚
åƒçå­ä¸€æ ·ã€‚&lt;/p>
&lt;p>DVWA SQL Injection blind è¿‡å…³ç§˜ç±.&lt;/p>
&lt;h3 id="low">Low&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-PHP" data-lang="PHP">&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">isset&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$_GET&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;Submit&amp;#39;&lt;/span> &lt;span class="p">]))&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// Get input
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$_GET&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;id&amp;#39;&lt;/span> &lt;span class="p">];&lt;/span>
&lt;span class="c1">// Check database
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$getid&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;SELECT first_name, last_name FROM users WHERE user_id = &amp;#39;&lt;/span>&lt;span class="si">$id&lt;/span>&lt;span class="s2">&amp;#39;;&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="c1">// æ²¡æœ‰ä¸€ç‚¹ç‚¹é˜²å¤‡
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// å°è¯•æ„é€ : (ç”±äºçœ‹ä¸åˆ°ç»“æœé›†ï¼Œæ‰€ä»¥è„±è£¤å­çš„è¯­å¥æ˜¯æ— æ•ˆ)
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// SELECT first_name, last_name FROM users WHERE user_id = &amp;#39;0&amp;#39; union select 1,2 # &amp;#39;;
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// User ID exists in the database. &amp;lt;å­˜åœ¨æ³¨å…¥æ¼æ´&amp;gt;
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// SELECT first_name, last_name FROM users WHERE user_id = &amp;#39;0&amp;#39; union select 1,if(length( database())=4,sleep(4),2) # &amp;#39;;
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="nv">$result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">mysql_query&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$getid&lt;/span> &lt;span class="p">);&lt;/span> &lt;span class="c1">// Removed &amp;#39;or die&amp;#39; to suppress mysql errors
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="c1">// Get results
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$num&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">@&lt;/span>&lt;span class="nx">mysql_numrows&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$result&lt;/span> &lt;span class="p">);&lt;/span> &lt;span class="c1">// The &amp;#39;@&amp;#39; character suppresses errors
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$num&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// Feedback for end user
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">echo&lt;/span> &lt;span class="s1">&amp;#39;&amp;lt;pre&amp;gt;User ID exists in the database.&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// User wasn&amp;#39;t found, so the page wasn&amp;#39;t!
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">header&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$_SERVER&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;SERVER_PROTOCOL&amp;#39;&lt;/span> &lt;span class="p">]&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="s1">&amp;#39; 404 Not Found&amp;#39;&lt;/span> &lt;span class="p">);&lt;/span>
&lt;span class="c1">// Feedback for end user
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">echo&lt;/span> &lt;span class="s1">&amp;#39;&amp;lt;pre&amp;gt;User ID is MISSING from the database.&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">mysql_close&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="miedum">MIEDUM&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-PHP" data-lang="PHP">&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nx">isset&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$_POST&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;Submit&amp;#39;&lt;/span> &lt;span class="p">]&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// Get input
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$_POST&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;id&amp;#39;&lt;/span> &lt;span class="p">];&lt;/span>
&lt;span class="nv">$id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">mysql_real_escape_string&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$id&lt;/span> &lt;span class="p">);&lt;/span>
&lt;span class="c1">// Check database
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$getid&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;SELECT first_name, last_name FROM users WHERE user_id = &lt;/span>&lt;span class="si">$id&lt;/span>&lt;span class="s2">;&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="c1">// å°è¯•æ„é€ :
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// SELECT first_name, last_name FROM users WHERE user_id = 0 union select 1,2;
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// ä»¥ä¸Šåˆ¤æ–­å­˜åœ¨æ³¨å…¥æ¼æ´
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// SELECT first_name, last_name FROM users WHERE user_id = 0 union select 1,if(length(database()) &amp;gt; 4, sleep(3), 2)
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="nv">$result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">mysql_query&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$getid&lt;/span> &lt;span class="p">);&lt;/span> &lt;span class="c1">// Removed &amp;#39;or die&amp;#39; to suppress mysql errors
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="c1">// Get results
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$num&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">@&lt;/span>&lt;span class="nx">mysql_numrows&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$result&lt;/span> &lt;span class="p">);&lt;/span> &lt;span class="c1">// The &amp;#39;@&amp;#39; character suppresses errors
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$num&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// Feedback for end user
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">echo&lt;/span> &lt;span class="s1">&amp;#39;&amp;lt;pre&amp;gt;User ID exists in the database.&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// Feedback for end user
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">echo&lt;/span> &lt;span class="s1">&amp;#39;&amp;lt;pre&amp;gt;User ID is MISSING from the database.&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">//mysql_close();
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="high">High&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-PHP" data-lang="PHP">&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nx">isset&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$_SESSION&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;id&amp;#39;&lt;/span>&lt;span class="p">])){&lt;/span>
&lt;span class="c1">// Get input
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$_SESSION&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;id&amp;#39;&lt;/span> &lt;span class="p">];&lt;/span>
&lt;span class="c1">// Check database
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$query&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;SELECT first_name, last_name FROM users WHERE user_id = &amp;#39;&lt;/span>&lt;span class="si">$id&lt;/span>&lt;span class="s2">&amp;#39; LIMIT 1;&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="c1">// æ²¡æœ‰æ–°èŠ±æ ·ï¼Œåªé™åˆ¶è¾“å‡ºæ¡ç›®æ˜¯æ— æ³•æ‹¦ä½æˆ‘ä»¬çš„
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// å°è¯•æ„é€ :
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// SELECT first_name, last_name FROM users WHERE user_id = &amp;#39;0&amp;#39; union select 1,if(length(database()) = 4, sleep(3), 2) # LIMIT 1;
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">mysql_query&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$query&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="k">or&lt;/span> &lt;span class="k">die&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="s1">&amp;#39;&amp;lt;pre&amp;gt;Something went wrong.&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span> &lt;span class="p">);&lt;/span>
&lt;span class="c1">// Get results
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$num&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">mysql_numrows&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$result&lt;/span> &lt;span class="p">);&lt;/span>
&lt;span class="nv">$i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">while&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="nv">$num&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// Get values
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$first&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">mysql_result&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$result&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nv">$i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;first_name&amp;#34;&lt;/span> &lt;span class="p">);&lt;/span>
&lt;span class="nv">$last&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">mysql_result&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$result&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nv">$i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;last_name&amp;#34;&lt;/span> &lt;span class="p">);&lt;/span>
&lt;span class="c1">// Feedback for end user
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">echo&lt;/span> &lt;span class="s2">&amp;#34;&amp;lt;pre&amp;gt;ID: &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="nv">$id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;lt;br /&amp;gt;First name: &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="nv">$first&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;lt;br /&amp;gt;Surname: &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="nv">$last&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;lt;/pre&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="c1">// Increase loop count
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">mysql_close&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="high-1">High&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-PHP" data-lang="PHP">&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nx">isset&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$_GET&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;Submit&amp;#39;&lt;/span> &lt;span class="p">]&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// Check Anti-CSRF token
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">checkToken&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$_REQUEST&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;user_token&amp;#39;&lt;/span> &lt;span class="p">],&lt;/span> &lt;span class="nv">$_SESSION&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;session_token&amp;#39;&lt;/span> &lt;span class="p">],&lt;/span> &lt;span class="s1">&amp;#39;index.php&amp;#39;&lt;/span> &lt;span class="p">);&lt;/span>
&lt;span class="c1">// Get input
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$_GET&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;id&amp;#39;&lt;/span> &lt;span class="p">];&lt;/span>
&lt;span class="c1">// Was a number entered?
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">is_numeric&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$id&lt;/span> &lt;span class="p">))&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// Check the database
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// PDO æ— æ³•æ³¨å…¥
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$db&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">prepare&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="s1">&amp;#39;SELECT first_name, last_name FROM users WHERE user_id = (:id) LIMIT 1;&amp;#39;&lt;/span> &lt;span class="p">);&lt;/span>
&lt;span class="nv">$data&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">bindParam&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="s1">&amp;#39;:id&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nv">$id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">PDO&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">PARAM_INT&lt;/span> &lt;span class="p">);&lt;/span>
&lt;span class="nv">$data&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">execute&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="c1">// Get results
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$data&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">rowCount&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// Feedback for end user
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">echo&lt;/span> &lt;span class="s1">&amp;#39;&amp;lt;pre&amp;gt;User ID exists in the database.&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// User wasn&amp;#39;t found, so the page wasn&amp;#39;t!
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">header&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$_SERVER&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;SERVER_PROTOCOL&amp;#39;&lt;/span> &lt;span class="p">]&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="s1">&amp;#39; 404 Not Found&amp;#39;&lt;/span> &lt;span class="p">);&lt;/span>
&lt;span class="c1">// Feedback for end user
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">echo&lt;/span> &lt;span class="s1">&amp;#39;&amp;lt;pre&amp;gt;User ID is MISSING from the database.&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">// Generate Anti-CSRF token
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="nx">generateSessionToken&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>SQL Injection</title><link>https://sdttttt.github.io/blog/sql_injection/</link><pubDate>Fri, 10 Apr 2020 10:54:47 +0800</pubDate><guid>https://sdttttt.github.io/blog/sql_injection/</guid><description>
&lt;p>DVWA SQL Injection è¿‡å…³ç§˜ç±.&lt;/p>
&lt;h3 id="low">LOW&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-PHP" data-lang="PHP">&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nx">isset&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$_REQUEST&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;Submit&amp;#39;&lt;/span> &lt;span class="p">]&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// Get input
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$_REQUEST&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;id&amp;#39;&lt;/span> &lt;span class="p">];&lt;/span>
&lt;span class="c1">// Check database
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$query&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;SELECT first_name, last_name FROM users WHERE user_id = &amp;#39;&lt;/span>&lt;span class="si">$id&lt;/span>&lt;span class="s2">&amp;#39;;&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="c1">// å¹¶æ²¡æœ‰åšä»€ä¹ˆæ³¨å…¥é˜²æŠ¤
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// å°è¯•æ„é€ ï¼š
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// select first_name, last_name from from users where user_id = &amp;#39;1&amp;#39; and 1=1;
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// select first_name, last_name from from users where user_id = &amp;#39;1&amp;#39; and 1=2;
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// select first_name, last_name from from users where user_id = &amp;#39;1&amp;#39; or 1=1;
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="nv">$result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">mysql_query&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$query&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="k">or&lt;/span> &lt;span class="k">die&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="s1">&amp;#39;&amp;lt;pre&amp;gt;&amp;#39;&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="nx">mysql_error&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="s1">&amp;#39;&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span> &lt;span class="p">);&lt;/span>
&lt;span class="c1">// Get results
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$num&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">mysql_numrows&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$result&lt;/span> &lt;span class="p">);&lt;/span>
&lt;span class="nv">$i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">while&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="nv">$num&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// Get values
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$first&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">mysql_result&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$result&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nv">$i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;first_name&amp;#34;&lt;/span> &lt;span class="p">);&lt;/span>
&lt;span class="nv">$last&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">mysql_result&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$result&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nv">$i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;last_name&amp;#34;&lt;/span> &lt;span class="p">);&lt;/span>
&lt;span class="c1">// Feedback for end user
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">echo&lt;/span> &lt;span class="s2">&amp;#34;&amp;lt;pre&amp;gt;ID: &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="nv">$id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;lt;br /&amp;gt;First name: &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="nv">$first&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;lt;br /&amp;gt;Surname: &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="nv">$last&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;lt;/pre&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="c1">// Increase loop count
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">mysql_close&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="medium">Medium&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nx">isset&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$_POST&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;Submit&amp;#39;&lt;/span> &lt;span class="p">]&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// Get input
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="c1">// æ¢æˆäº†Post è¿™ä¹Ÿå¤ªæ™®é€šäº†
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// ä½¿ç”¨ä¸€äº›ç½‘ç»œè¯·æ±‚å·¥å…·ç…§æ ·æ”¹ï¼Œæ¯”å¦‚BurpSuiteï¼ŒPostManï¼Œcurl.
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$_POST&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;id&amp;#39;&lt;/span> &lt;span class="p">];&lt;/span>
&lt;span class="nv">$id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">mysql_real_escape_string&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$id&lt;/span> &lt;span class="p">);&lt;/span>
&lt;span class="c1">// mysql_real_escape_string å¯ä»¥å¯¹ä»¥ä¸‹å­—ç¬¦è¿›è¡Œè½¬ä¹‰
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// \x00, \n, \r, \, &amp;#39;, &amp;#34; å’Œ \x1a.
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// å€¼å¾—æ³¨æ„çš„æ˜¯ mysql_real_escape_string å‡½æ•°æ‰€åœ¨çš„MYSQLæ‰©å±•åœ¨
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// PHP 5.5.0 èµ·å·²åºŸå¼ƒï¼Œå¹¶åœ¨è‡ª PHP 7.0.0 å¼€å§‹è¢«ç§»é™¤ã€‚
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="c1">// Check database
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$query&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;SELECT first_name, last_name FROM users WHERE user_id = &lt;/span>&lt;span class="si">$id&lt;/span>&lt;span class="s2">;&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="c1">// å°è¯•æ„é€ :
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// SELECT first_name, last_name FROM users WHERE user_id = 1 or 1=1;
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="nv">$result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">mysql_query&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$query&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="k">or&lt;/span> &lt;span class="k">die&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="s1">&amp;#39;&amp;lt;pre&amp;gt;&amp;#39;&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="nx">mysql_error&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="s1">&amp;#39;&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span> &lt;span class="p">);&lt;/span>
&lt;span class="c1">// Get results
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$num&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">mysql_numrows&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$result&lt;/span> &lt;span class="p">);&lt;/span>
&lt;span class="nv">$i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">while&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="nv">$num&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// Display values
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$first&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">mysql_result&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$result&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nv">$i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;first_name&amp;#34;&lt;/span> &lt;span class="p">);&lt;/span>
&lt;span class="nv">$last&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">mysql_result&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$result&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nv">$i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;last_name&amp;#34;&lt;/span> &lt;span class="p">);&lt;/span>
&lt;span class="c1">// Feedback for end user
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">echo&lt;/span> &lt;span class="s2">&amp;#34;&amp;lt;pre&amp;gt;ID: &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="nv">$id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;lt;br /&amp;gt;First name: &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="nv">$first&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;lt;br /&amp;gt;Surname: &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="nv">$last&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;lt;/pre&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="c1">// Increase loop count
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">//mysql_close();
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="high">High&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-PHP" data-lang="PHP">&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nx">isset&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$_SESSION&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;id&amp;#39;&lt;/span> &lt;span class="p">]&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// Get input
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$_SESSION&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;id&amp;#39;&lt;/span> &lt;span class="p">];&lt;/span>
&lt;span class="c1">// Check database
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// çœ‹èµ·æ¥åšäº†è¿”å›æ¡ç›®é™åˆ¶
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$query&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;SELECT first_name, last_name FROM users WHERE user_id = &amp;#39;&lt;/span>&lt;span class="si">$id&lt;/span>&lt;span class="s2">&amp;#39; LIMIT 1;&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="c1">// æ²¡ä»€ä¹ˆå¥—è·¯
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// SELECT first_name, last_name FROM users WHERE user_id = &amp;#39;1&amp;#39; or 1=1 # &amp;#39; LIMIT 1;
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="nv">$result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">mysql_query&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$query&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="k">or&lt;/span> &lt;span class="k">die&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="s1">&amp;#39;&amp;lt;pre&amp;gt;Something went wrong.&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span> &lt;span class="p">);&lt;/span>
&lt;span class="c1">// Get results
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$num&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">mysql_numrows&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$result&lt;/span> &lt;span class="p">);&lt;/span>
&lt;span class="nv">$i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">while&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="nv">$num&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// Get values
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$first&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">mysql_result&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$result&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nv">$i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;first_name&amp;#34;&lt;/span> &lt;span class="p">);&lt;/span>
&lt;span class="nv">$last&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">mysql_result&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$result&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nv">$i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;last_name&amp;#34;&lt;/span> &lt;span class="p">);&lt;/span>
&lt;span class="c1">// Feedback for end user
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">echo&lt;/span> &lt;span class="s2">&amp;#34;&amp;lt;pre&amp;gt;ID: &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="nv">$id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;lt;br /&amp;gt;First name: &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="nv">$first&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;lt;br /&amp;gt;Surname: &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="nv">$last&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;lt;/pre&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="c1">// Increase loop count
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">mysql_close&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="impossible">impossible&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-PHP" data-lang="PHP">&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nx">isset&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$_GET&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;Submit&amp;#39;&lt;/span> &lt;span class="p">]&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// Check Anti-CSRF token
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">checkToken&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$_REQUEST&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;user_token&amp;#39;&lt;/span> &lt;span class="p">],&lt;/span> &lt;span class="nv">$_SESSION&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;session_token&amp;#39;&lt;/span> &lt;span class="p">],&lt;/span> &lt;span class="s1">&amp;#39;index.php&amp;#39;&lt;/span> &lt;span class="p">);&lt;/span>
&lt;span class="c1">// Get input
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$_GET&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;id&amp;#39;&lt;/span> &lt;span class="p">];&lt;/span>
&lt;span class="c1">// Was a number entered?
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">is_numeric&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$id&lt;/span> &lt;span class="p">))&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// Check the database
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// è¿™æ˜¯ï¼PDO!
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// PDO æ˜¯ä¸€ç§PHPä¸­æ¯”è¾ƒå…ˆè¿›çš„é¢å‘å¯¹è±¡å½¢å¼çš„æ•°æ®åº“è®¿é—®æŠ€æœ¯
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// ä¸è¿‡å³ä½¿æ˜¯é¢å‘å¯¹è±¡å®ƒè¿˜æ˜¯äº‹åŠ¡è„šæœ¬å½¢å¼çš„ã€‚
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// æä¾›äº†é˜²SQLæ³¨å…¥çš„åŠŸèƒ½ã€‚
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$db&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">prepare&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="s1">&amp;#39;SELECT first_name, last_name FROM users WHERE user_id = (:id) LIMIT 1;&amp;#39;&lt;/span> &lt;span class="p">);&lt;/span>
&lt;span class="c1">// æ— æ³•æ³¨å…¥
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="nv">$data&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">bindParam&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="s1">&amp;#39;:id&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nv">$id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">PDO&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">PARAM_INT&lt;/span> &lt;span class="p">);&lt;/span>
&lt;span class="nv">$data&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">execute&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="nv">$row&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$data&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">fetch&lt;/span>&lt;span class="p">();&lt;/span>
&lt;span class="c1">// Make sure only 1 result is returned
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="nv">$data&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">rowCount&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// Get values
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nv">$first&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$row&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;first_name&amp;#39;&lt;/span> &lt;span class="p">];&lt;/span>
&lt;span class="nv">$last&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$row&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;last_name&amp;#39;&lt;/span> &lt;span class="p">];&lt;/span>
&lt;span class="c1">// Feedback for end user
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">echo&lt;/span> &lt;span class="s2">&amp;#34;&amp;lt;pre&amp;gt;ID: &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="nv">$id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;lt;br /&amp;gt;First name: &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="nv">$first&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;lt;br /&amp;gt;Surname: &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="nv">$last&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;lt;/pre&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">// Generate Anti-CSRF tsoken
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="nx">generateSessionToken&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="extension">Extension&lt;/h2>
&lt;p>&lt;strong>äºŒæ¬¡æ³¨å…¥:&lt;/strong>&lt;/p>
&lt;p>ç½‘ç«™æœ‰ç®¡ç†å‘˜&lt;code>admin&lt;/code>.&lt;/p>
&lt;p>ä¸€ä½æ¶æ„ç”¨æˆ·æ³¨å†Œäº†&lt;code>admin'#&lt;/code>ç”¨æˆ·.&lt;/p>
&lt;p>æ¶æ„ç”¨æˆ·æ›´æ–°äº†è‡ªå·±çš„å¯†ç .&lt;/p>
&lt;p>æ›´æ–°SQL:&lt;/p>
&lt;blockquote>
&lt;p>update from users
set password = &amp;lsquo;$password&amp;rsquo;
where
username = &amp;lsquo;$username&amp;rsquo; and password &amp;lsquo;$password&amp;rsquo;&lt;/p>
&lt;/blockquote>
&lt;p>æ›¿æ¢ä¸ºæ¶æ„ç”¨æˆ·å†™å…¥çš„æ•°æ®:&lt;/p>
&lt;blockquote>
&lt;p>update from users
set password = #{password}
where
username = &amp;lsquo;admin&amp;rsquo;#' and password = &amp;lsquo;$password&amp;rsquo;&lt;/p>
&lt;/blockquote>
&lt;p>æ³¨æ„&lt;code>#&lt;/code> åé¢çš„è¯­å¥è¢«æ³¨é‡Šæ‰äº†, æ‰€ä»¥çœŸæ­£è¢«æ‰§è¡Œçš„åªæœ‰.&lt;/p>
&lt;blockquote>
&lt;p>update from users
set password = #{password}
where
username = &amp;lsquo;admin&amp;rsquo;&lt;/p>
&lt;/blockquote>
&lt;p>æ¶æ„ç”¨æˆ·å¯ä»¥æ— è§†ç®¡ç†å‘˜&lt;code>admin&lt;/code>çš„å¯†ç éªŒè¯ï¼Œç›´æ¥ä¿®æ”¹å¯†ç ã€‚&lt;/p></description></item><item><title>The Framework a good design?</title><link>https://sdttttt.github.io/blog/library_and_framework/</link><pubDate>Mon, 06 Apr 2020 23:34:30 +0800</pubDate><guid>https://sdttttt.github.io/blog/library_and_framework/</guid><description>
&lt;p>æˆ‘ç¬¬ä¸€æ¬¡å¬åˆ°æ¡†æ¶è¿™ä¸ªæ¦‚å¿µå·²ç»æ˜¯åœ¨å¤§å­¦çš„æ—¶å€™äº†ï¼Œå½“æ—¶æˆ‘çš„è€å¸ˆå’Œæˆ‘æèµ·ã€‚
ä¸€å¼€å§‹æˆ‘éå¸¸ä¸ä¹ æƒ¯åœ¨æˆ‘ä¸ç†Ÿæ‚‰çš„ä¸Šä¸‹æ–‡ä¸­ç¼–å†™ç¨‹åºçš„æ„Ÿè§‰ã€‚åªèƒ½ç”¨å››ä¸ªå­—æ¥å½¢å®¹&lt;code>å¯¸æ­¥éš¾è¡Œ&lt;/code>ã€‚&lt;/p>
&lt;p>è¿‡äº†ä¸€æ®µæ—¶é—´åï¼Œå½“ä½ ç†Ÿæ‚‰é‡Œè¿™ä¸ªæ¡†æ¶æå‰ä¸ºä½ æ‰€åšçš„ä¸€åˆ‡çš„æ—¶å€™ï¼Œä¸€åˆ‡åªèƒ½ç”¨å››ä¸ªå­—æ¥å½¢å®¹&lt;code>ç´ å·´æ‹‰ç»†&lt;/code>ï¼ˆç¾å¦™ï¼‰ã€‚&lt;/p>
&lt;p>åæ¥ï¼Œæˆ‘æ¥è§¦äº†å„ç§å½¢å½¢è‰²è‰²çš„æ¡†æ¶ï¼Œä»PHPåˆ°Java.&lt;/p>
&lt;p>æœ€è®©æˆ‘æƒŠå¹çš„è«è¿‡äºSpringBoot, å®ƒå‡ ä¹ä¸ºä½ å‡†å¤‡å¥½äº†ä½ æ‰€éœ€è¦çš„ä¸€åˆ‡ï¼Œå¦‚æœä½ éœ€è¦å…¶ä»–çš„ï¼Œä¹Ÿèƒ½éå¸¸å®¹æ˜“çš„å¼•å…¥è¿›æ¥ï¼Œ
ä»»ä½•æ¡†æ¶ä»¥åŠåº“éƒ½èƒ½å’ŒSpringå®Œç¾çš„ç»“åˆåœ¨ä¸€èµ·ã€‚Springçš„å¯æ‰©å±•æ€§æ˜¯æˆ‘è§è¿‡æ‰€æœ‰æ¡†æ¶ä¸­æœ€æ£’çš„ï¼ï¼ˆå®ƒçš„æ ¸å¿ƒç†å¿µå°±æ˜¯IOCï¼‰ï¼Œä¸å¾—ä¸èµå¹Springæ˜¯åº”ç”¨å±‚çš„å®Œç¾äº§ç‰©ã€‚ï¼ˆSpringæ— æ³•è¢«å…¶ä»–è¯­è¨€æ¨¡ä»¿å’ŒJavaçš„&lt;code>ä¸‡ç‰©å¯¹è±¡&lt;/code>çš„ç†å¿µæœ‰å¾ˆå¤§å…³ç³»ï¼‰&lt;/p>
&lt;hr>
&lt;p>æ›¾ç»çš„è½¯ä»¶å·¥ç¨‹å¸ˆæ²¡æœ‰è¿™æ ·çš„å¾…é‡ï¼Œä»–ä»¬å¾€å¾€æ˜¯ä»å¤´æ„å»ºèµ·ä»–ä»¬çš„åº”ç”¨ã€‚
è¿™ä½¿å¾—æˆä¸ºè½¯ä»¶å·¥ç¨‹å¸ˆè¿™ä¸€èŒä¸šéš¾ä»¥ä¼åŠã€‚&lt;/p>
&lt;p>ç”±äºå¦‚ä»Šè½¯ä»¶è¡Œä¸šçš„å˜åŒ–ï¼Œè½¯ä»¶å·¥ç¨‹å¸ˆä»¬å·²ç»ä¸èƒ½ä»…ä»…åªåœ¨åº•å±‚å·¥ä½œäº†ï¼Œåº”ç”¨å±‚çš„å‘å±•ä¹Ÿçªé£çŒ›è¿›ã€‚
å„ç§è½¯ä»¶æ¶æ„çš„å‡ºç°åº”æ¥ä¸æš‡ã€‚&lt;/p>
&lt;p>æ¡†æ¶æœ€åˆæ˜¯ä¸ºäº†è§£å†³é‡å¤è€Œå¤æ‚çš„å·¥ä½œè€Œè¯ç”Ÿå‡ºæ¥çš„äº§ç‰©ã€‚
å¸®åŠ©æˆ‘ä»¬ä¸å¿…å†å†™é‡å¤çš„ä»£ç ï¼Œåªéœ€è¦å…³å¿ƒä¸šåŠ¡é€»è¾‘ã€‚&lt;/p>
&lt;p>æ¡†æ¶å¯ä»¥è¯´æ˜¯ä¸ºäº†åº”ç”¨å±‚çš„è½¯ä»¶å·¥ç¨‹å¸ˆè€Œè®¾è®¡çš„ã€‚ä»–ä»¬å¾€å¾€ä¸ä¼šå…³å¿ƒæ›´ç»†ç²’åº¦çš„å·¥ä½œã€‚ä»–ä»¬åªè¿½æ±‚ç¨³å®šçš„åº”ç”¨å’Œä¼ä¸šæ¶æ„ã€‚&lt;/p>
&lt;p>To be continued&amp;hellip;&lt;/p></description></item><item><title>SS:SPé¸¡ä½ å¤ªç¾å­˜å™¨</title><link>https://sdttttt.github.io/blog/sssp/</link><pubDate>Mon, 06 Apr 2020 16:38:01 +0800</pubDate><guid>https://sdttttt.github.io/blog/sssp/</guid><description>
&lt;p>å¦‚ä»Šçš„CPUéƒ½æœ‰æä¾›æ ˆæœºåˆ¶ï¼Œ8086ä¹Ÿä¸ä¾‹å¤–ã€‚&lt;/p>
&lt;p>8086æä¾›çš„æœ€åŸºæœ¬çš„ä¸¤ä¸ªæŒ‡ä»¤å°±æ˜¯&lt;code>push&lt;/code> and &lt;code>pop&lt;/code>.&lt;/p>
&lt;pre>&lt;code>push ax ;å°†å¯„å­˜å™¨axä¸­çš„æ•°æ®é€å…¥æ ˆé¡¶
pop ax ;å°†æ ˆé¡¶çš„æ•°æ®é€å…¥ax
&lt;/code>&lt;/pre>&lt;p>æˆ‘ä»¬çŸ¥é“CS:IPå¯„å­˜å™¨å­˜æ”¾äº†ä¸‹ä¸€æ¡æŒ‡ä»¤çš„æ®µåœ°å€å’Œåç§»åœ°å€ï¼Œé‚£ä¹ˆCPUæ˜¯å¦‚ä½•çŸ¥é“æ ˆé¡¶åœ¨å“ªå‘ï¼Ÿ
æ˜¾ç„¶ä¹Ÿæœ‰ä¸¤ä¸ªå¯„å­˜å™¨ä¸“é—¨å­˜æ”¾æ ˆé¡¶çš„åœ°å€ï¼Œé‚£å°±æ˜¯SS:SPå¯„å­˜å™¨ï¼ŒSS = æ®µåœ°å€ï¼Œ SP = åç§»åœ°å€&lt;/p>
&lt;p>ä»»æ„æ—¶åˆ»ï¼ŒSS:SPéƒ½æŒ‡å‘æ ˆé¡¶å…ƒç´ ã€‚&lt;code>push&lt;/code>å’Œ&lt;code>pop&lt;/code>æŒ‡ä»¤æ‰§è¡Œæ—¶CPUå°†ä»SSå’ŒSPä¸­è·å¾—æ ˆé¡¶çš„åœ°å€ã€‚&lt;/p>
&lt;p>&lt;code>push&lt;/code> æœ‰2æ­¥:&lt;/p>
&lt;ul>
&lt;li>SP -= 2 SS:SPæŒ‡å‘æ ˆé¡¶å‰é¢çš„å•å…ƒï¼Œä»¥è¿™ä¸ªä½ç½®ä¸ºæ–°æ ˆã€‚&lt;/li>
&lt;li>å°†AXä¸­çš„å†…å®¹é€å…¥ SS:SP æ‰€æŒ‡çš„ä½ç½®.&lt;/li>
&lt;/ul>
&lt;pre>&lt;code>10000H |_______|
|_______|
|_______|
|_______|
|_______|
|_______|
|_______|
|_______|
|_______|
|_______|
1000EH |__23___| &amp;lt;= SS:SP
1000FH |__01___|
&lt;/code>&lt;/pre>&lt;pre>&lt;code>10000H |_______|
|_______|
|_______|
|_______|
|_______|
|_______|
|_______|
|_______|
|_______| &amp;lt;= SS:SP: æ¢ä¸ªä½ç½®
|_______|
1000EH |__23___|
1000FH |__01___|
&lt;/code>&lt;/pre>&lt;pre>&lt;code>10000H |_______|
|_______|
|_______|
|_______|
|_______|
|_______|
|_______|
|_______| ;æ¥è‡ªaxå¯„å­˜å™¨çš„æ•°æ®
|__54___| &amp;lt;= SS:SP: æ¢ä¸ªä½ç½®
|__11___|
1000EH |__23___|
1000FH |__01___|
&lt;/code>&lt;/pre>&lt;hr>
&lt;p>å‡è®¾ 10000H -&amp;gt; 1000FH è¿™æ®µç©ºé—´æ˜¯æ ˆï¼Œé‚£ä¹ˆæ ˆç©ºæ—¶ï¼ŒSS:SPåœ¨å‘ï¼Ÿ&lt;/p>
&lt;pre>&lt;code>10000H |_______|
|_______|
|_______|
|_______|
|_______|
|_______|
|_______|
|_______|
|_______|
|_______|
1000EH |_______|
1000FH |_______| &amp;lt;= SS:SP: æˆ‘åœ¨è¿™ï¼Ÿ
&lt;/code>&lt;/pre>&lt;pre>&lt;code>10000H |_______|
|_______|
|_______|
|_______|
|_______|
|_______|
|_______|
|_______|
|_______|
|_______|
1000EH |_______|
1000FH |_______|
10010H |_______| &amp;lt;= SS:SP: å…¶å®çˆ·åœ¨è¿™é‡Œã€‚
&lt;/code>&lt;/pre>&lt;p>è‡³äºä¸ºä»€ä¹ˆåªè¦æƒ³æƒ³ &lt;code>SP -= 2&lt;/code> ä½ å°±çŸ¥é“äº†ã€‚&lt;/p>
&lt;h1 id="å…³äºçˆ†æ ˆ">å…³äºçˆ†æ ˆ&lt;/h1>
&lt;p>æ ˆä¸€æ—¦çˆ†äº†ï¼ŒSS:SPå°±ä¼šæŒ‡åˆ°åˆ«çš„åœ°æ–¹å»ã€‚
è¿™ä¹ˆä¸€æƒ³CPUåº”è¯¥ä¼šçŸ¥é“æ ˆé¡¶åœ¨å“ªé‡Œã€‚&lt;/p>
&lt;p>æ¯æ¬¡&lt;code>push&lt;/code>,&lt;code>pop&lt;/code>éƒ½ä¼šæ£€æŸ¥æ ˆé¡¶å’Œæ ˆåº•çš„ä½ç½®ï¼Œä¿è¯æ ˆä¸ä¼šè¶…ã€‚è¿™ä¹ˆä¸€æƒ³ç¾æ»‹æ»‹ã€‚&lt;/p>
&lt;p>ç„¶è€Œï¼Œ8086CPUå¹¶æ²¡æœ‰åšè¿™æ ·çš„è®¾è®¡ã€‚
å®ƒåªçŸ¥é“æ ˆé¡¶åœ¨å“ªé‡Œã€‚ä¸çŸ¥é“æ ˆæœ‰å¤šå¤§ã€‚&lt;/p>
&lt;p>æ¢ä¸ªè¯´æ³•å°±æ˜¯ï¼š&lt;strong>åªçŸ¥é“ä¸‹ä¸€æ¡æŒ‡ä»¤åœ¨å“ªé‡Œï¼Œè€Œä¸çŸ¥é“è¦å¤„ç†çš„æŒ‡ä»¤æœ‰å¤šå°‘æ¡ã€‚&lt;/strong>&lt;/p></description></item><item><title>CSIPé¸¡ä½ å¤ªç¾å­˜å™¨</title><link>https://sdttttt.github.io/blog/csip/</link><pubDate>Mon, 06 Apr 2020 15:35:44 +0800</pubDate><guid>https://sdttttt.github.io/blog/csip/</guid><description>
&lt;p>ä¹‹å‰åˆšå­¦çš„æ—¶å€™å¯¹è¿™ä¸ªç©æ„éŸ³å“æ²¡é‚£ä¹ˆæ·±åˆ»ï¼Œç°åœ¨å†å­¦ï¼Œæ„Ÿè§‰å¾ˆä¸ä¸€æ ·äº†ã€‚&lt;/p>
&lt;p>CSä¸ºä»£ç æ®µå¯„å­˜å™¨ï¼ŒIPä¸ºæŒ‡ä»¤æŒ‡é’ˆå¯„å­˜å™¨ã€‚
è®¾CS = M, IP = N, 8086CPUå°†ä» &lt;code>M Ã— 16 + N&lt;/code> å¤„è¯»å–æŒ‡ä»¤å¹¶è¿›è¡Œã€‚&lt;/p>
&lt;p>ä¹Ÿå¯ä»¥è¿™æ ·è¡¨è¿°ï¼š &lt;strong>8086CPUä¸­ï¼Œä»»æ„æ—¶åˆ»ï¼ŒCPUéƒ½ä¼šå°†CS:IPæŒ‡å‘çš„å†…å®¹åšä¸ºæ‰§è¡ŒæŒ‡ä»¤.&lt;/strong>&lt;/p>
&lt;p>æ‰§è¡Œæµç¨‹:&lt;/p>
&lt;ul>
&lt;li>åˆå§‹çŠ¶æ€: CS = 2000H, IP = 0000H&lt;/li>
&lt;li>CS:IP å†…å®¹é€å…¥åœ°å€åŠ æ³•å™¨ï¼Œ2000H Ã— 16 + 0000H = 20000H&lt;/li>
&lt;li>åœ°å€åŠ æ³•å™¨è®¡ç®—å‡ºç‰©ç†åœ°å€20000Håå°†ç»“æœé€å…¥è¾“å…¥è¾“å‡ºç”µè·¯.&lt;/li>
&lt;li>è¾“å…¥è¾“å‡ºç”µè·¯å°†ç‰©ç†åœ°å€20000Hé€åˆ°åœ°å€æ€»çº¿ã€‚&lt;/li>
&lt;li>å†…å­˜å°†ç‰©ç†åœ°å€20000Hä¸Šå­˜æ”¾çš„æœºå™¨æŒ‡ä»¤Xé€šè¿‡æ•°æ®æ€»çº¿é€å…¥CPU.&lt;/li>
&lt;li>è¾“å…¥è¾“å‡ºç”µè·¯å°†æœºå™¨æŒ‡ä»¤Xé€å…¥æŒ‡ä»¤ç¼“å†²å™¨ã€‚&lt;/li>
&lt;li>å¯„å­˜å™¨IPçš„å€¼è‡ªåŠ¨å¢åŠ ã€‚&lt;/li>
&lt;li>ä»¥æ­¤ç±»æ¨&amp;hellip;&lt;/li>
&lt;/ul>
&lt;hr>
&lt;p>å½“8086CPUåŠ ç‚¹æˆ–è€…å¤ä½åï¼ŒCS = FFFFH, IP = 0000H,ä¹Ÿå°±æ˜¯CPUæ¸…æ™¨èµ·åºŠåšçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯å»æ‰§è¡ŒFFFF0Hå†…å­˜å•å…ƒä¸­å­˜æ”¾çš„æœºå™¨æŒ‡ä»¤ã€‚&lt;/p>
&lt;h2 id="ä¿®æ”¹csip">ä¿®æ”¹CS:IP&lt;/h2>
&lt;p>&lt;code>mov&lt;/code>æŒ‡ä»¤èƒ½å¸®æˆ‘ä»¬å°†å€¼é€å…¥å¯„å­˜å™¨ã€‚ä½†æ˜¯ï¼Œå®ƒä¸èƒ½ç”¨äºä¿®æ”¹CS:IPï¼ŒåŸå› å¾ˆç®€å•8086å‡ºäºè®¾è®¡è€ƒé‡ä¸å…è®¸ã€‚
èƒ½ä¿®æ”¹CS:IPçš„æŒ‡ä»¤ç»Ÿç§°ä¸º&lt;code>è½¬ç§»æŒ‡ä»¤&lt;/code>ï¼ˆä»¥åæˆ‘ä»¬æ·±å…¥ç ”ç©¶ï¼‰,ç°åœ¨æˆ‘å­¦ä¹ ç¬¬ä¸€ä¸ªå¯ä»¥ä¿®æ”¹CS:IPå¯„å­˜å™¨çš„æŒ‡ä»¤ï¼Œ&lt;code>jmp&lt;/code>.&lt;/p>
&lt;p>è‹¥æƒ³åŒæ—¶ä¿®æ”¹CS:IPå¯„å­˜å™¨,å¯ä»¥ç”¨&lt;code>jmp æ®µåœ°å€, åç§»åœ°å€&lt;/code>çš„æŒ‡ä»¤æ¥å®Œæˆã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-asm" data-lang="asm">&lt;span class="nf">jmp&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="no">AE3&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="c">;æ‰§è¡Œå: CS = 2AE3H IP = 0003H, CPU å°†ä»è¿™2AE33H å¤„è¯»å–æŒ‡ä»¤
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœåªæƒ³ä¿®æ”¹IPå¯„å­˜å™¨, å¯ä»¥ç”¨&lt;code>jmp å¯„å­˜å™¨&lt;/code>çš„æŒ‡ä»¤æ¥å®Œæˆ.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-asm" data-lang="asm">&lt;span class="nf">jmp&lt;/span> &lt;span class="no">ax&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç±»ä¼¼, &lt;code>mov IP, ax&lt;/code>&lt;/p></description></item><item><title>MultiplexingIO</title><link>https://sdttttt.github.io/blog/multiplexingio/</link><pubDate>Mon, 06 Apr 2020 12:42:26 +0800</pubDate><guid>https://sdttttt.github.io/blog/multiplexingio/</guid><description>
&lt;p>å…¶å®â€œI/Oå¤šè·¯å¤ç”¨â€è¿™ä¸ªå‘çˆ¹ç¿»è¯‘å¯èƒ½æ˜¯è¿™ä¸ªæ¦‚å¿µåœ¨ä¸­æ–‡é‡Œé¢å¦‚æ­¤éš¾ç†è§£çš„åŸå› ã€‚æ‰€è°“çš„I/Oå¤šè·¯
å¤ç”¨åœ¨è‹±æ–‡ä¸­å…¶å®å« I/O multiplexing. å¦‚æœä½ æœç´¢multiplexingå•¥æ„æ€,åŸºæœ¬ä¸Šéƒ½ä¼šå‡ºè¿™ä¸ªå›¾:&lt;/p>
&lt;p>&lt;img src="https://sdttttt.github.io/multiplexIO/1.png" alt="">&lt;/p>
&lt;p>äºæ˜¯å¤§éƒ¨åˆ†äººéƒ½ç›´æ¥è”æƒ³åˆ°&amp;quot;ä¸€æ ¹ç½‘çº¿,å¤šä¸ªsockå¤ç”¨&amp;quot; è¿™ä¸ªæ¦‚å¿µ,åŒ…æ‹¬ä¸Šé¢çš„å‡ ä¸ªå›ç­”, å…¶å®ä¸
ç®¡ä½ ç”¨å¤šè¿›ç¨‹è¿˜æ˜¯I/Oå¤šè·¯å¤ç”¨, ç½‘çº¿éƒ½åªæœ‰ä¸€æ ¹å¥½ä¼ã€‚&lt;strong>å¤šä¸ªSockå¤ç”¨ä¸€æ ¹ç½‘çº¿è¿™ä¸ªåŠŸèƒ½æ˜¯åœ¨å†…æ ¸
+é©±åŠ¨å±‚å®ç°çš„.&lt;/strong>&lt;/p>
&lt;p>&lt;strong>é‡è¦çš„äº‹æƒ…å†è¯´ä¸€é: I/O multiplexing è¿™é‡Œé¢çš„ multiplexing æŒ‡çš„å…¶å®æ˜¯åœ¨å•ä¸ªçº¿ç¨‹é€šè¿‡è®°
å½•è·Ÿè¸ªæ¯ä¸€ä¸ªSock(I/Oæµ)çš„çŠ¶æ€(å¯¹åº”ç©ºç®¡å¡”é‡Œé¢çš„Fight progress stripæ§½)æ¥åŒæ—¶ç®¡ç†å¤šä¸ªI/O
æµ.&lt;/strong> å‘æ˜å®ƒçš„åŸå› ,æ˜¯å°½é‡å¤šçš„æé«˜æœåŠ¡å™¨çš„ååèƒ½åŠ›ã€‚&lt;/p>
&lt;p>æ˜¯ä¸æ˜¯å¬èµ·æ¥å¥½æ‹—å£,çœ‹ä¸ªå›¾å°±æ‡‚äº†.&lt;/p>
&lt;p>&lt;img src="https://sdttttt.github.io/multiplexIO/2.png" alt="">&lt;/p>
&lt;p>åœ¨åŒä¸€ä¸ªçº¿ç¨‹é‡Œé¢, é€šè¿‡æ‹¨å¼€å…³çš„æ–¹å¼,æ¥åŒæ—¶ä¼ è¾“å¤šä¸ªI/Oæµ, (å­¦è¿‡EEçš„äººç°åœ¨å¯ä»¥ç«™å‡ºæ¥ä¹‰æ­£
ä¸¥è¾è¯´è¿™ä¸ªå«â€œæ—¶åˆ†å¤ç”¨â€äº†)ã€‚&lt;/p>
&lt;p>ä»€ä¹ˆ,ä½ è¿˜æ²¡æœ‰ææ‡‚ â€œä¸€ä¸ªè¯·æ±‚åˆ°æ¥äº†,nginxä½¿ç”¨epollæ¥æ”¶è¯·æ±‚çš„è¿‡ç¨‹æ˜¯æ€æ ·çš„â€, å¤šçœ‹çœ‹è¿™ä¸ª
å›¾å°±äº†è§£äº†ã€‚æé†’ä¸‹,ngnixä¼šæœ‰å¾ˆå¤šé“¾æ¥è¿›æ¥, epollä¼šæŠŠä»–ä»¬éƒ½ç›‘è§†èµ·æ¥,ç„¶ååƒæ‹¨å¼€å…³ä¸€æ ·,
è°æœ‰æ•°æ®å°±æ‹¨å‘è°,ç„¶åè°ƒç”¨ç›¸åº”çš„ä»£ç å¤„ç†ã€‚&lt;/p>
&lt;hr>
&lt;p>äº†è§£è¿™ä¸ªåŸºæœ¬çš„æ¦‚å¿µä»¥å,å…¶ä»–çš„å°±å¾ˆå¥½è§£é‡Šäº†ã€‚&lt;/p>
&lt;p>&lt;strong>select, poll, epoll éƒ½æ˜¯I/Oå¤šè·¯å¤ç”¨çš„å…·ä½“çš„å®ç°,ä¹‹æ‰€ä»¥æœ‰è¿™ä¸‰ä¸ªé¬¼å­˜åœ¨,å…¶å®æ˜¯ä»–ä»¬å‡ºç°æ˜¯æœ‰
å…ˆåé¡ºåºçš„ã€‚&lt;/strong>&lt;/p>
&lt;p>I/Oå¤šè·¯å¤ç”¨è¿™ä¸ªæ¦‚å¿µè¢«æå‡ºæ¥ä»¥å, selectæ˜¯ç¬¬ä¸€ä¸ªå®ç° (1983 å·¦å³åœ¨BSDé‡Œé¢å®ç°çš„)ã€‚&lt;/p>
&lt;p>select è¢«å®ç°ä»¥å,å¾ˆå¿«å°±æš´éœ²å‡ºäº†å¾ˆå¤šé—®é¢˜ã€‚&lt;/p>
&lt;ul>
&lt;li>select ä¼šä¿®æ”¹ä¼ å…¥çš„å‚æ•°æ•°ç»„,è¿™ä¸ªå¯¹äºä¸€ä¸ªéœ€è¦è°ƒç”¨å¾ˆå¤šæ¬¡çš„å‡½æ•°,æ˜¯éå¸¸ä¸å‹å¥½çš„ã€‚&lt;/li>
&lt;li>select å¦‚æœä»»ä½•ä¸€ä¸ªsock(I/O stream)å‡ºç°äº†æ•°æ®,select ä»…ä»…ä¼šè¿”å›,ä½†æ˜¯å¹¶ä¸ä¼šå‘Šè¯‰ä½ æ˜¯é‚£
ä¸ªsockä¸Šæœ‰æ•°æ®,äºæ˜¯ä½ åªèƒ½è‡ªå·±ä¸€ä¸ªä¸€ä¸ªçš„æ‰¾,10å‡ ä¸ªsockå¯èƒ½è¿˜å¥½,è¦æ˜¯å‡ ä¸‡çš„sockæ¯æ¬¡&lt;/li>
&lt;li>select ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„,å¦‚æœä½ æŠŠä¸€ä¸ªsockåŠ å…¥åˆ°select, ç„¶åçªç„¶å¦å¤–ä¸€ä¸ªçº¿ç¨‹å‘ç°,å°¼ç›,è¿™
ä¸ªsockä¸ç”¨,è¦æ”¶å›ã€‚å¯¹ä¸èµ·,è¿™ä¸ªselect ä¸æ”¯æŒçš„,å¦‚æœä½ ä¸§å¿ƒç—…ç‹‚çš„ç«Ÿç„¶å…³æ‰è¿™ä¸ªsock,
selectçš„æ ‡å‡†è¡Œä¸ºæ˜¯ã€‚ã€‚å‘ƒã€‚ã€‚ä¸å¯é¢„æµ‹çš„, è¿™ä¸ªå¯æ˜¯å†™åœ¨æ–‡æ¡£ä¸­çš„å“¦.&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>â€œIf a file descriptor being monitored by select() is closed in another thread, the result is
unspecified.â€&lt;/p>
&lt;/blockquote>
&lt;p>äºæ˜¯14å¹´ä»¥å(1997å¹´)ä¸€å¸®äººåˆå®ç°äº†poll, poll ä¿®å¤äº†selectçš„å¾ˆå¤šé—®é¢˜,æ¯”å¦‚:&lt;/p>
&lt;ul>
&lt;li>poll å»æ‰äº†1024ä¸ªé“¾æ¥çš„é™åˆ¶,äºæ˜¯è¦å¤šå°‘é“¾æ¥å‘¢, ä¸»äººä½ å¼€å¿ƒå°±å¥½ã€‚&lt;/li>
&lt;li>poll ä»è®¾è®¡ä¸Šæ¥è¯´,ä¸å†ä¿®æ”¹ä¼ å…¥æ•°ç»„,ä¸è¿‡è¿™ä¸ªè¦çœ‹ä½ çš„å¹³å°äº†,æ‰€ä»¥è¡Œèµ°æ±Ÿæ¹–,è¿˜æ˜¯å°å¿ƒä¸º
å¦™.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>å…¶å®æ‹–14å¹´é‚£ä¹ˆä¹…ä¹Ÿä¸æ˜¯æ•ˆç‡é—®é¢˜, è€Œæ˜¯é‚£ä¸ªæ—¶ä»£çš„ç¡¬ä»¶å®åœ¨å¤ªå¼±,ä¸€å°æœåŠ¡å™¨å¤„ç†1åƒå¤šä¸ªé“¾æ¥
ç®€ç›´å°±æ˜¯ç¥ä¸€æ ·çš„å­˜åœ¨äº†,selectå¾ˆé•¿æ®µæ—¶é—´å·²ç»æ»¡è¶³éœ€æ±‚ã€‚&lt;/strong>&lt;/p>
&lt;hr>
&lt;p>äºæ˜¯5å¹´ä»¥å, åœ¨2002, å¤§ç¥ Davide Libenzi å®ç°äº†epoll.&lt;/p>
&lt;p>epoll å¯ä»¥è¯´æ˜¯I/O å¤šè·¯å¤ç”¨æœ€æ–°çš„ä¸€ä¸ªå®ç°,epoll ä¿®å¤äº†poll å’Œselectç»å¤§éƒ¨åˆ†é—®é¢˜, æ¯”å¦‚:&lt;/p>
&lt;ul>
&lt;li>epoll ç°åœ¨æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚&lt;/li>
&lt;li>epoll ç°åœ¨ä¸ä»…å‘Šè¯‰ä½ sockç»„é‡Œé¢æ•°æ®,è¿˜ä¼šå‘Šè¯‰ä½ å…·ä½“å“ªä¸ªsockæœ‰æ•°æ®,ä½ ä¸ç”¨è‡ªå·±å»æ‰¾äº†ã€‚&lt;/li>
&lt;/ul>
&lt;p>å¯æ˜¯epoll æœ‰ä¸ªè‡´å‘½çš„ç¼ºç‚¹ã€‚ã€‚åªæœ‰linuxæ”¯æŒã€‚æ¯”å¦‚BSDä¸Šé¢å¯¹åº”çš„å®ç°æ˜¯kqueueã€‚&lt;/p>
&lt;p>å…¶å®æœ‰äº›å›½å†…çŸ¥åå‚å•†æŠŠepollä»å®‰å“é‡Œé¢è£æ‰è¿™ç§è„‘æ®‹çš„äº‹æƒ…æˆ‘ä¼šä¸»åŠ¨å‘Šè¯‰ä½ å˜›ã€‚ä»€ä¹ˆ,ä½ è¯´æ²¡äºº
ç”¨å®‰å“åšæœåŠ¡å™¨,å°¼ç›ä½ æ˜¯çœ‹ä¸èµ·p2pè½¯ä»¶äº†å•¦ã€‚&lt;/p>
&lt;p>è€Œngnix çš„è®¾è®¡åŸåˆ™é‡Œé¢, å®ƒä¼šä½¿ç”¨ç›®æ ‡å¹³å°ä¸Šé¢æœ€é«˜æ•ˆçš„I/Oå¤šè·¯å¤ç”¨æ¨¡å‹å’¯,æ‰€ä»¥æ‰ä¼šæœ‰è¿™ä¸ª
è®¾ç½®ã€‚ä¸€èˆ¬æƒ…å†µä¸‹,å¦‚æœå¯èƒ½çš„è¯,å°½é‡éƒ½ç”¨epoll/kqueueå§ã€‚&lt;/p></description></item><item><title>é¢†åŸŸé€»è¾‘çš„ç»„ç»‡æ¨¡å¼</title><link>https://sdttttt.github.io/blog/domain-logic-org-mode/</link><pubDate>Fri, 03 Apr 2020 20:58:28 +0800</pubDate><guid>https://sdttttt.github.io/blog/domain-logic-org-mode/</guid><description>
&lt;p>ç›®å‰é¢†åŸŸé€»è¾‘çš„ç»„ç»‡æ¨¡å¼åˆ†ä¸ºä¸‰ç§ï¼Œâ€œäº‹åŠ¡è„šæœ¬â€ï¼Œâ€œé¢†åŸŸæ¨¡å‹â€ ä»¥åŠ â€œè¡¨æ¨¡å—â€ã€‚&lt;/p>
&lt;p>&lt;code>äº‹åŠ¡è„šæœ¬&lt;/code>ç±»ä¼¼äº&lt;code>é¢å‘è¿‡ç¨‹&lt;/code>ç¼–ç¨‹ï¼Œäº‹åŠ¡è„šæœ¬æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>å®ƒæ˜¯ä¸€ç§å¤§å¤šæ•°è½¯ä»¶å·¥ç¨‹å¸ˆéƒ½èƒ½ç†è§£çš„ç®€å•è¿‡ç¨‹æ¨¡å‹ã€‚&lt;/li>
&lt;li>å®ƒèƒ½å’Œä¸€ä¸ªè¡Œæ•°æ®å…¥å£æˆ–è¡¨æ•°æ®å…¥å£ç®€å•çš„æ•°æ®æºå¾ˆå¥½çš„åä½œã€‚&lt;/li>
&lt;li>éå¸¸å®¹æ˜“è®¾å®šäº‹åŠ¡çš„è¾¹ç•Œã€‚&lt;/li>
&lt;/ul>
&lt;p>ä¸€ä¸ªç»„æ•°æ®æºæ“ä½œä¾¿æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„äº‹åŠ¡è„šæœ¬ã€‚
å½“ç„¶äº‹åŠ¡è„šæœ¬ä¹Ÿå­˜åœ¨å¾ˆå¤§çš„ç¼ºé™·ï¼Œå½“é¢†åŸŸé€»è¾‘å¼€å§‹å˜å¾—å¤æ‚æ—¶ï¼Œè¿™äº›ç¼ºç‚¹å°±å¼€å§‹æš´éœ²å‡ºæ¥ã€‚
å½“å‡ ä¸ªäº‹åŠ¡è¦æ‰§è¡Œç±»ä¼¼çš„é€»è¾‘æ—¶ï¼Œé€šå¸¸å‡ ä¸ªè„šæœ¬ä¸­ä¼šå«æœ‰æŸäº›ç›¸åŒçš„ä»£ç ã€‚
é€šè¿‡å°†è¿™äº›ä»£ç æå–å‡ºæ¥ï¼Œæ¥å½¢æˆå…¬å…±çš„å­ä¾‹ç¨‹ï¼Œæ¥æ¶ˆé™¤è¿™ç§æƒ…å†µã€‚
ä½†æ˜¯ï¼Œå¾ˆå¤šæ—¶å€™æ¶ˆé™¤å‰¯æœ¬ä¼šå˜å¾—æ£˜æ‰‹ï¼Œè€Œæ£€æµ‹å‰¯æœ¬åˆ™æ›´å›°éš¾ï¼Œå€’æ˜¯æ¶ˆé™¤å‰¯æœ¬åçš„ç¨‹åºåè€Œæ¯”ä»¥å‰è¿˜è¦æ‚ä¹±æ— ç« ï¼Œéš¾ä»¥ç»´æŠ¤ã€‚&lt;/p>
&lt;p>å¤æ‚çš„é¢†åŸŸé€»è¾‘ï¼Œå¿…ç„¶è¦å¼•å…¥å¯¹è±¡ï¼Œè§£å†³å‰é¢æè¿°é—®é¢˜çš„é¢å‘å¯¹è±¡æ–¹æ³•å°±æ˜¯&lt;code>é¢†åŸŸæ¨¡å‹&lt;/code>ã€‚
ä¸€ä¸ªå†…å®¹ç®¡ç†ç³»ç»Ÿä¼šæœ‰ç”¨æˆ·ï¼Œæ–‡ç« ç­‰ç±»ï¼Œè¿›è¡Œé‰´æƒï¼Œä»¥åŠå†™å…¥ç­‰é€»è¾‘å‡ç½®äºé¢†åŸŸæ¨¡å‹ä¸­ã€‚
å› æ­¤ï¼Œå‘å¸ƒå¯¹è±¡è°ƒç”¨ä¸€æ¬¡å†™å…¥æ–¹æ³•ã€‚
å¯èƒ½è¿˜ä¼šæœ‰å…¶ä»–ä¾‹ç¨‹æ¥å®Œæˆä¸€äº›è¯»å–åŠŸèƒ½ï¼Œä½†å®ƒå…¶å®éƒ½æ˜¯è°ƒç”¨é¢†åŸŸæ¨¡å‹ä¸­å·²æœ‰æ‰“æ–¹æ³•å®ç°çš„ã€‚&lt;/p>
&lt;blockquote>
&lt;p>é¢†åŸŸæ¨¡å‹çš„æ§åˆ¶ä¸å†æ˜¯ç”±ä¸€ä¸ªè¿‡ç¨‹æ¥æ§åˆ¶ç”¨æˆ·æŸä¸€ä¸ªåŠ¨ä½œçš„é€»è¾‘ï¼Œè€Œæ˜¯ç”±æ¯ä¸ªå¯¹è±¡éƒ½æ‰¿æ‹…ä¸€éƒ¨åˆ†ç›¸å…³é€»è¾‘ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>é¢†åŸŸæ¨¡å‹çš„å¼€é”€æ¥è‡ªäºæ•°æ®æºçš„å¤æ‚åº¦å’Œä½¿ç”¨ä¸Šçš„å¤æ‚æ€§ï¼Œåˆšåˆšæ¥è§¦é¢†åŸŸæ¨¡å‹çš„äººä¼šéœ€è¦æ—¶é—´æ¥é€‚åº”è¿™ç§æ€ç»´æ–¹å¼ã€‚ä¸€æ—¦ä¹ æƒ¯äº†ï¼Œä½ å°±ä¼šå¾ˆçˆ½ï¼
å¦ä¸€æ–¹é¢ä½ éœ€è¦å°†æ•°æ®æºæ˜ å°„åˆ°é¢†åŸŸæ¨¡å‹ä¸Šï¼Œæ•°æ®æºè¶Šæ˜¯å¤æ‚ï¼Œé¢†åŸŸæ¨¡å‹çš„æ•ˆæœå°±è¶Šæ˜¯æ˜¾è‘—ã€‚&lt;/p>
&lt;p>&lt;img src="https://sdttttt.github.io/shiwujiaoben.png" alt="">&lt;/p>
&lt;p>ä¸Šä¸ºäº‹åŠ¡è„šæœ¬&lt;/p>
&lt;p>&lt;img src="https://sdttttt.github.io/lingyumoxing.png" alt="">&lt;/p>
&lt;p>ä¸Šä¸ºé¢†åŸŸæ¨¡å‹&lt;/p>
&lt;p>ç¬¬ä¸‰ä¸­ä¸ºé¢†åŸŸé€»è¾‘çš„ç»„ç»‡æ¨¡å¼ä¸º&lt;code>è¡¨æ¨¡å—&lt;/code>ï¼Œå®ƒå¤„äº&lt;code>äº‹åŠ¡è„šæœ¬&lt;/code>å’Œ&lt;code>é¢†åŸŸæ¨¡å‹&lt;/code>çš„ä¸€ä¸ªä¸­é—´åœ°å¸¦ã€‚
å’Œé¢†åŸŸæ¨¡å‹æœ€å¤§çš„åŒºåˆ«å°±æ˜¯åœ¨è¡¨æ¨¡å—ä¸­ä¸€ä¸ªè¡¨åªå¯¹åº”ä¸€ä¸ªå®ä¾‹ï¼Œè€Œé¢†åŸŸæ¨¡å‹ä¸€è¡Œæ•°æ®ä¾¿èƒ½å¯¹åº”ä¸€ä¸ªå®ä¾‹ã€‚&lt;/p>
&lt;p>è¡¨æ¨¡å—çš„ä¼˜ç‚¹åœ¨äºå¯ä»¥å¾ˆå®¹æ˜“çš„å’Œè½¯ä»¶æ¶æ„ä¸­å·²ç»å­˜åœ¨çš„éƒ¨åˆ†è¡”æ¥ï¼Œå¾ˆå¤šGUIåº”ç”¨éƒ½æ˜¯å‡å®šå°†å…¶ä¸SQLæŸ¥è¯¢ç»“æœçš„è®°å½•é›†ç»“æœååŒå·¥ä½œçš„ã€‚è¡¨æ¨¡å—å°±å·¥ä½œåœ¨è®°å½•é›†ä¹‹ä¸Šã€‚ä½ å¯ä»¥å¾ˆå®¹æ˜“çš„ä½¿ç”¨ã€‚&lt;/p>
&lt;p>&lt;img src="https://sdttttt.github.io/tablemodule.png" alt="">&lt;/p>
&lt;h2 id="æŠ‰æ‹©">æŠ‰æ‹©&lt;/h2>
&lt;p>&lt;img src="https://sdttttt.github.io/modelfuzadu.png" alt="">&lt;/p>
&lt;p>åˆ«é—®ï¼Œé—®å°±ï¼Œç›´æ¥ä½¿ç”¨é¢†åŸŸæ¨¡å‹ã€‚&lt;/p>
&lt;p>æ¥ä¸‹æ¥æˆ‘ç¨å¾®ä»‹ç»ä¸€ä¸‹ç›®å‰å„ä¸ªæ¡†æ¶/åº“åœ¨é¢†åŸŸé€»è¾‘çš„ç»„ç»‡æ¨¡å¼ä¸Šçš„é€‰æ‹©ï¼ˆåªåˆ—å‡ºæˆ‘ç”¨ï¼‰ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>PHP&lt;/p>
&lt;ul>
&lt;li>PHP åŸç”Ÿ &amp;lt;äº‹åŠ¡è„šæœ¬&amp;gt;&lt;/li>
&lt;li>ThinkPHP &amp;lt;é¢†åŸŸæ¨¡å‹&amp;gt;&lt;/li>
&lt;li>Laravel &amp;lt;é¢†åŸŸæ¨¡å‹&amp;gt;&lt;/li>
&lt;li>YII &amp;lt;é¢†åŸŸæ¨¡å‹&amp;gt;&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Java&lt;/p>
&lt;ul>
&lt;li>java.sql.* &amp;lt;äº‹åŠ¡è„šæœ¬&amp;gt;&lt;/li>
&lt;li>MyBatis &amp;lt;è¡¨æ¨¡å—&amp;gt;&lt;/li>
&lt;li>JPA &amp;lt;é¢†åŸŸæ¨¡å‹&amp;gt;&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Go&lt;/p>
&lt;ul>
&lt;li>gorm &amp;lt;è¡¨æ¨¡å— | é¢†åŸŸæ¨¡å‹&amp;gt; ï¼ˆè¿™ä¸ªæ¯”è¾ƒç¥å¥‡ï¼‰&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>ç°åœ¨ç”¨è¡¨æ¨¡å—çš„äººæ™®éæ¯”è¾ƒå¤šï¼Œæˆ‘æ›¾é‡åˆ°å¥½å‡ ä¸ªJ2EEå·¥ç¨‹å¸ˆéƒ½å¹¶ä¸å–œæ¬¢&lt;code>JPA&lt;/code>çš„æ€ç»´æ¨¡å¼ã€‚&lt;/p></description></item><item><title>About the Blog</title><link>https://sdttttt.github.io/blog/about_blog/</link><pubDate>Fri, 03 Apr 2020 15:36:02 +0800</pubDate><guid>https://sdttttt.github.io/blog/about_blog/</guid><description>
&lt;p>&lt;code>blog&lt;/code>é‡Œçš„æ–‡ç« å¹¶éå…¨éƒ¨åŸåˆ›ï¼Œæœ‰ä¸€éƒ¨åˆ†æ˜¯ç»è¿‡ä¿®æ”¹åæ•´ç†å‡º&lt;code>è¦ç‚¹&lt;/code>ï¼Œé›†ä¸­ä¸€èµ·å†™åˆ°è¿™é‡Œé¢ã€‚ä¹ŸåŒ…æ¶µäº†ä¸€äº›æˆ‘å¯¹æ•´ä¸ªè½¯ä»¶è¡Œä¸šçš„æƒ³æ³•ã€‚&lt;/p>
&lt;hr>
&lt;p>è¿™ä¸ª&lt;code>blog&lt;/code>æ˜¯ç”¨&lt;code>Hugo&lt;/code>æ„å»ºçš„ï¼ŒThemeä½¿ç”¨çš„æ˜¯&lt;code>rocinante&lt;/code>,live2Dçš„çº¸ç‰‡äººæ˜¯æˆ‘è‡ªå·±åŠ çš„.(ä¸æ˜¯ä¸»é¢˜é‡Œè‡ªå¸¦çš„).&lt;/p>
&lt;p>æˆ‘ä¹‹å‰è¿˜ä½¿ç”¨è¿‡&lt;code>Vuepress&lt;/code>åšä¸ºé™æ€ç½‘ç«™ç”Ÿæˆå™¨ï¼Œä¸è¿‡è‡ªå®šä¹‰ç¨‹åº¦å¾ˆä½ï¼Œä¹Ÿä¸æ˜¯å¾ˆå¤åˆæˆ‘çš„å®¡ç¾ã€‚ï¼ˆæˆ‘å¸Œæœ›æ˜¯æ—è¾¹ä¸è¦å‡ºç°ç›®å½•æ ï¼‰&lt;/p>
&lt;p>åé¢æˆ‘å°±è½¬æˆ˜&lt;code>Hugo&lt;/code>,ä¼˜ç‚¹ï¼šç”¨Goç¼–å†™ï¼Œç”Ÿæˆå¿«ã€‚ç”Ÿæ€åœˆä¹Ÿæ¯”è¾ƒè‰¯å¥½ã€‚æˆ‘ç¬¬ä¸€ä¸ªä½¿ç”¨çš„Themeæ˜¯&lt;code>book&lt;/code>ï¼Œä¸å¾—ä¸è¯´ï¼Œé…ç½®å¤æ‚ï¼Œæˆ‘å°±é©¬ä¸Šä¸¢å¼ƒäº†ï¼Œåé¢åˆä½¿ç”¨äº†&lt;code>Ezhi&lt;/code>ï¼Œç”±äºæˆ‘ä¸æ˜¯å¾ˆå–œæ¬¢çº¢è‰²ï¼Œå°±åˆæ‰”äº†ã€‚&lt;/p>
&lt;p>ç„¶åå°±ä½¿ç”¨äº†ç°åœ¨è¿™ä¸ªThemeï¼Œè¿˜æ˜¯æ¯”è¾ƒæ»¡æ„çš„ï¼Œå¾ˆæç®€ã€‚åé¢ä¹ŸåŠ äº†&lt;code>utteranc&lt;/code>åšä¸ºè¯„è®ºæ¨¡å—ï¼Œé€‰æ‹©utterancçš„ç†ç”±å¾ˆç®€å•ï¼Œæœ€åˆ&lt;code>Hugo&lt;/code>æ˜¯è‡ªå¸¦&lt;code>Disqus&lt;/code>åšä¸ºè¯„è®ºæ¨¡å—çš„ï¼Œä½†æ˜¯æ— å¥ˆè¿™ä¸ª&lt;code>Disqus&lt;/code>åœ¨å›½å¤–ï¼Œè€Œä¸”è¿˜æ˜¯è¢«å¢™çš„ï¼&lt;/p>
&lt;p>åæ¥æš‚æ—¶æäº†ä¸€æ®µæ—¶é—´ï¼Œæ‰æ‰¾åˆ°&lt;code>utteranc&lt;/code>ï¼Œä¼˜ç‚¹å°±æ˜¯ç»“åˆ&lt;code>Github issues&lt;/code>æ— éœ€ç¿»å¢™ï¼Œä½¿ç”¨çš„UIä¹Ÿæ˜¯Githubçš„ï¼ˆGithubä½¿ç”¨çš„UIæ˜¯Bootstrapåº“ï¼‰ï¼Œè€Œä¸”é›¶é…ç½®ï¼Œæˆæƒä¸€ä¸‹Appï¼Œæ”¹ä¸€ä¸‹JSçš„tagé©¬ä¸Šå°±å¯ä»¥ç”¨ã€‚&lt;/p></description></item><item><title>åªéœ€è¦æœåŠ¡ä¸­å¿ƒ</title><link>https://sdttttt.github.io/blog/onlyhub/</link><pubDate>Thu, 02 Apr 2020 15:58:01 +0800</pubDate><guid>https://sdttttt.github.io/blog/onlyhub/</guid><description>
&lt;p>ç›®å‰ï¼Œå¸‚é¢ä¸Šä»¥åŠå‡ºç°äº†å„ç§å„æ ·çš„é€‚ç”¨äºå¾®æœåŠ¡(ä¸‹é¢ç®€ç§°ms)çš„æ³¨å†Œä¸­å¿ƒï¼Œé…åˆå…¶ä½¿ç”¨çš„è¿˜æœ‰å„ç§msæ¡†æ¶ï¼Œä¾‹å¦‚Alibabaçš„&lt;code>Dubbo&lt;/code>ã€‚&lt;/p>
&lt;p>å¾®æœåŠ¡èƒ½é€šè¿‡åˆ†è§£æœåŠ¡ç²’åº¦ï¼Œç„¶åé’ˆå¯¹ç‰¹å®šæœåŠ¡è¿›è¡Œæ€§èƒ½æ‰©å±•ï¼Œæ¥è¾¾åˆ°é«˜æ€§èƒ½çš„ç›®çš„ã€‚&lt;/p>
&lt;p>å…¶ä¸­æœåŠ¡ä¸­å¿ƒè´Ÿè´£æœåŠ¡çš„æ³¨å†Œå’Œç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œ&lt;code>Dubbo&lt;/code>ä¹‹ç±»çš„å¾®æœåŠ¡æ¡†æ¶åˆ™å¯¹æœåŠ¡çš„æ³¨å†Œ, è´Ÿè½½å‡è¡¡ï¼ŒæœåŠ¡é‰´æƒ, æœåŠ¡è°ƒç”¨ç­‰ä¸€ç³»åˆ—æ“ä½œåšå°è£…ï¼Œä¾›ç”¨æˆ·è°ƒç”¨.&lt;/p>
&lt;p>ä½¿å¾—ç”¨æˆ·ä¸ç”¨å»å…³å¿ƒå¾®æœåŠ¡çš„å®ç°ç»†èŠ‚ã€‚&lt;/p>
&lt;hr>
&lt;p>æˆ‘çš„æƒ³æ³•ç›¸åï¼Œæˆ–è®¸èƒ½è®©æœåŠ¡ä¸­å¿ƒåšæ›´å¤šçš„äº‹ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬å¯ä»¥ä»å¤´ï¼Œå»è®¾è®¡ä¸€ä¸ªæœåŠ¡ä¸­å¿ƒï¼š&lt;/p>
&lt;ul>
&lt;li>åªç®¡ç†æœåŠ¡åå’ŒæœåŠ¡åœ°å€ã€‚&lt;/li>
&lt;li>æ¶ˆè´¹ç«¯ç´¢å–æœåŠ¡æ—¶ï¼Œåˆ™ç”±æœåŠ¡ä¸­å¿ƒæ¥åšè´Ÿè½½å‡è¡¡å’Œä¸€äº›é¢å¤–çš„å·¥ä½œï¼Œç›´æ¥ç»™å‡ºæœåŠ¡æä¾›æ–¹åœ°å€ã€‚&lt;/li>
&lt;/ul>
&lt;p>å…¶ä»–çš„åŠŸèƒ½å¯ä»¥æŒ‰ç…§ç°æœ‰çš„æœåŠ¡æ³¨å†Œä¸­å¿ƒæ¥è®¾è®¡ã€‚&lt;/p>
&lt;p>å…³äºå¾®æœåŠ¡çš„è°ƒç”¨ï¼Œåˆ™ç”±æœåŠ¡æ³¨å†Œä¸­å¿ƒæä¾›ä¸€ä¸ªå¾®æœåŠ¡åº“ï¼Œæ¥ä¾›æˆ‘ä»¬è°ƒç”¨ï¼Œæˆ–è€…ç”±ç”¨æˆ·è‡ªå·±å®ç°ã€‚è¿™ä¸ªæ¶æ„ä¸‹ï¼Œå°±ä¸éœ€è¦&lt;code>Dubbo&lt;/code>ä¹‹ç±»çš„RPCæ¡†æ¶ã€‚&lt;/p>
&lt;p>ä¼˜ç‚¹ï¼šæ¨¡å—å‡å°‘ï¼Œå¼€å‘å¯èƒ½ä¼šæˆæœ¬å‡å°‘ã€‚&lt;/p>
&lt;p>ç¼ºç‚¹ï¼šéœ€è¦æœåŠ¡ä¸­å¿ƒæ¥æä¾›å¾®æœåŠ¡è°ƒç”¨åº“ã€‚ï¼ˆè€Œä¸”æœåŠ¡ä¸­å¿ƒå¤„ç†çš„ä¸œè¥¿å˜å¤šäº†ï¼Œä¸çŸ¥é“æ€§èƒ½ä¼šæœ‰å¤šå°‘å½±å“ï¼‰&lt;/p>
&lt;p>ç›®å‰å°ç”Ÿå·²ç»æäº†ä¸€ä¸ªç±»ä¼¼è¿™ä¸­æœåŠ¡æ³¨å†Œä¸­å¿ƒçš„Demoï¼Œå¯ä»¥å‚è€ƒã€‚&lt;/p>
&lt;p>&lt;a href="https://github.com/sdttttt/go-tds">https://github.com/sdttttt/go-tds&lt;/a>&lt;/p>
&lt;p>ï¼ˆè¿™åªæ˜¯ä¸€ä¸ªæˆ‘çªå‘çš„çµæ„Ÿç½¢äº†ï¼Œå…¶å®æŒºè’å”çš„ã€‚ï¼‰&lt;/p></description></item><item><title>Kratos åˆå§‹åŒ–æµç¨‹æºç è§£æ</title><link>https://sdttttt.github.io/blog/kratos/</link><pubDate>Tue, 31 Mar 2020 20:17:28 +0800</pubDate><guid>https://sdttttt.github.io/blog/kratos/</guid><description>
&lt;p>&lt;strong>Kratos&lt;/strong> æ˜¯bilibiliå¼€æºçš„ä¸€å¥—Goå¾®æœåŠ¡æ¡†æ¶ï¼ŒåŒ…å«å¤§é‡å¾®æœåŠ¡ç›¸å…³æ¡†æ¶åŠå·¥å…·ã€‚&lt;/p>
&lt;blockquote>
&lt;p>åå­—æ¥æºäº:ã€Šæˆ˜ç¥ã€‹æ¸¸æˆä»¥å¸Œè…Šç¥è¯ä¸ºèƒŒæ™¯ï¼Œè®²è¿°ç”±å‡¡äººæˆä¸ºæˆ˜ç¥çš„å¥æ‰˜æ–¯ï¼ˆKratosï¼‰æˆä¸ºæˆ˜ç¥å¹¶å±•å¼€å¼‘ç¥å± æ€çš„å†’é™©å†ç¨‹ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>å¥½ï¼å¼€å§‹å§ï¼&lt;/p>
&lt;p>&lt;em>å°æç¤ºï¼šé˜…è¯»æºç æ—¶è¯·ä¿æŒæ¸…é†’ã€‚&lt;/em>&lt;/p>
&lt;p>é¦–å…ˆæ˜¯æŒ‰ç…§Kratos tool ç”Ÿäº§çš„å·¥ç¨‹ç›®å½•ã€‚&lt;/p>
&lt;pre>&lt;code>â”œâ”€â”€ CHANGELOG.md
â”œâ”€â”€ OWNERS
â”œâ”€â”€ README.md
â”œâ”€â”€ api # apiç›®å½•ä¸ºå¯¹å¤–ä¿ç•™çš„protoæ–‡ä»¶åŠç”Ÿæˆçš„pb.goæ–‡ä»¶
â”‚ â”œâ”€â”€ api.bm.go
â”‚ â”œâ”€â”€ api.pb.go # é€šè¿‡go generateç”Ÿæˆçš„pb.goæ–‡ä»¶
â”‚ â”œâ”€â”€ api.proto
â”‚ â””â”€â”€ client.go
â”œâ”€â”€ cmd
â”‚ â””â”€â”€ main.go # cmdç›®å½•ä¸ºmainæ‰€åœ¨
â”œâ”€â”€ configs # configsä¸ºé…ç½®æ–‡ä»¶ç›®å½•
â”‚ â”œâ”€â”€ application.toml # åº”ç”¨çš„è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ï¼Œå¯èƒ½æ˜¯ä¸€äº›ä¸šåŠ¡å¼€å…³å¦‚ï¼šuseABtest = true
â”‚ â”œâ”€â”€ db.toml # dbç›¸å…³é…ç½®
â”‚ â”œâ”€â”€ grpc.toml # grpcç›¸å…³é…ç½®
â”‚ â”œâ”€â”€ http.toml # httpç›¸å…³é…ç½®
â”‚ â”œâ”€â”€ memcache.toml # memcacheç›¸å…³é…ç½®
â”‚ â””â”€â”€ redis.toml # redisç›¸å…³é…ç½®
â”œâ”€â”€ go.mod
â”œâ”€â”€ go.sum
â””â”€â”€ internal # internalä¸ºé¡¹ç›®å†…éƒ¨åŒ…ï¼ŒåŒ…æ‹¬ä»¥ä¸‹ç›®å½•ï¼š
â”‚ â”œâ”€â”€ dao # daoå±‚ï¼Œç”¨äºæ•°æ®åº“ã€cacheã€MQã€ä¾èµ–æŸä¸šåŠ¡grpc|httpç­‰èµ„æºè®¿é—®
â”‚ â”‚ â”œâ”€â”€ dao.bts.go
â”‚ â”‚ â”œâ”€â”€ dao.go
â”‚ â”‚ â”œâ”€â”€ db.go
â”‚ â”‚ â”œâ”€â”€ mc.cache.go
â”‚ â”‚ â”œâ”€â”€ mc.go
â”‚ â”‚ â””â”€â”€ redis.go
â”‚ â”œâ”€â”€ di # ä¾èµ–æ³¨å…¥å±‚ é‡‡ç”¨wireé™æ€åˆ†æä¾èµ–
â”‚ â”‚ â”œâ”€â”€ app.go
â”‚ â”‚ â”œâ”€â”€ wire.go # wire å£°æ˜
â”‚ â”‚ â””â”€â”€ wire_gen.go # go generate ç”Ÿæˆçš„ä»£ç 
â”‚ â”œâ”€â”€ model # modelå±‚ï¼Œç”¨äºå£°æ˜ä¸šåŠ¡ç»“æ„ä½“
â”‚ â”‚ â””â”€â”€ model.go
â”‚ â”œâ”€â”€ server # serverå±‚ï¼Œç”¨äºåˆå§‹åŒ–grpcå’Œhttp server
â”‚ â”‚ â”œâ”€â”€ grpc # grpcå±‚ï¼Œç”¨äºåˆå§‹åŒ–grpc serverå’Œå®šä¹‰method
â”‚ â”‚ â”‚ â””â”€â”€ server.go
â”‚ â”‚ â””â”€â”€ http # httpå±‚ï¼Œç”¨äºåˆå§‹åŒ–http serverå’Œå£°æ˜handler
â”‚ â”‚ â””â”€â”€ server.go
â”‚ â””â”€â”€ service # serviceå±‚ï¼Œç”¨äºä¸šåŠ¡é€»è¾‘å¤„ç†ï¼Œä¸”ä¸ºæ–¹ä¾¿httpå’Œgrpcå…±ç”¨æ–¹æ³•ï¼Œå»ºè®®å…¥å‚å’Œå‡ºå‚ä¿æŒgrpcé£æ ¼ï¼Œä¸”ä½¿ç”¨pbæ–‡ä»¶ç”Ÿæˆä»£ç 
â”‚ â””â”€â”€ service.go
â””â”€â”€ test # æµ‹è¯•èµ„æºå±‚ ç”¨äºå­˜æ”¾æµ‹è¯•ç›¸å…³èµ„æºæ•°æ® å¦‚docker-composeé…ç½® æ•°æ®åº“åˆå§‹åŒ–è¯­å¥ç­‰
â””â”€â”€ docker-compose.yaml
&lt;/code>&lt;/pre>&lt;h2 id="entry">Entry&lt;/h2>
&lt;p>å…¥å£åœ¨&lt;code>cmd/main.go&lt;/code>ä¸‹ï¼Œæˆ‘ä»¬è¿›å»çœ‹çœ‹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œå‚æ•°è§£æ
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">flag&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Init&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">nil&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// debug flag: log.dir={path}
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">defer&lt;/span> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Close&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;kratos-demo start&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">// -conf å‚æ•°çš„è§£æ
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">paladin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Init&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">// è¿™é‡Œæ˜¯ `æ·±å‘çš„å…¥å£`
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// ä¸€ä¼šåˆ†æ
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">closeFunc&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">di&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">InitApp&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">// os.Signal æ˜¯ä¸€ä¸ªç³»ç»Ÿä¿¡å·æ¥æ”¶channel
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">c&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nb">make&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">chan&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Signal&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">// syscall éƒ½æ˜¯ä¸€äº›ç³»ç»Ÿä¿¡å·
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">signal&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Notify&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">syscall&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">SIGHUP&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">syscall&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">SIGQUIT&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">syscall&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">SIGTERM&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">syscall&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">SIGINT&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">for&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// ä¸€æ—¦æœ‰ä¿¡å·è¿›æ¥äº†ï¼Œçœ‹ä¸‹é¢çš„ä»£ç é€»è¾‘ï¼Œå…«æˆæ˜¯å…³é—­è¿™ä¸ªåº”ç”¨ã€‚
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">s&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span>&lt;span class="nx">c&lt;/span>
&lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;get a signal %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">())&lt;/span>
&lt;span class="k">switch&lt;/span> &lt;span class="nx">s&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">case&lt;/span> &lt;span class="nx">syscall&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">SIGQUIT&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">syscall&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">SIGTERM&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">syscall&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">SIGINT&lt;/span>&lt;span class="p">:&lt;/span>
&lt;span class="nf">closeFunc&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;kratos-demo exit&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sleep&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Second&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">return&lt;/span>
&lt;span class="k">case&lt;/span> &lt;span class="nx">syscall&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">SIGHUP&lt;/span>&lt;span class="p">:&lt;/span>
&lt;span class="k">default&lt;/span>&lt;span class="p">:&lt;/span>
&lt;span class="k">return&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="initializer">Initializer&lt;/h2>
&lt;p>æ¥ä¸‹æ¥æˆ‘ä»¬å»çœ‹&lt;code>di.InitApp()&lt;/code>é‡Œåšäº†ä»€ä¹ˆã€‚&lt;/p>
&lt;p>è¿™ä¸ªæ–¹æ³•æ˜¯é€šè¿‡&lt;code>github.com/google/wire&lt;/code>æ¥ç”Ÿæˆ.&lt;/p>
&lt;p>å¦‚æœä½ ä¸çŸ¥é“&lt;code>wire&lt;/code>å¯ä»¥å‚è€ƒä¸‹é¢çš„å®˜æ–¹åŸè¯ï¼š&lt;/p>
&lt;blockquote>
&lt;p>Wire is a code generation tool that automates connecting components using dependency injection. Dependencies between components are represented in Wire as function parameters, encouraging explicit initialization instead of global variables. Because Wire operates without runtime state or reflection, code written to be used with Wire is useful even for hand-written initialization.&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>ç®€å•æ¥è¯´å°±æ˜¯Golangçš„ä¾èµ–æ³¨å…¥ä»£ç ç”Ÿæˆå™¨, å®ƒä¸ä½¿ç”¨åå°„.ç”±Googleæä¾›.&lt;/p>
&lt;/blockquote>
&lt;p>ä¸è¿‡&lt;code>Wire&lt;/code>ä¸æ˜¯æˆ‘ä»¬çš„é‡ç‚¹, æˆ‘ä»¬æ¥ç€å›åˆ°&lt;code>di.InitApp()&lt;/code>å»ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;span class="lnt">81
&lt;/span>&lt;span class="lnt">82
&lt;/span>&lt;span class="lnt">83
&lt;/span>&lt;span class="lnt">84
&lt;/span>&lt;span class="lnt">85
&lt;/span>&lt;span class="lnt">86
&lt;/span>&lt;span class="lnt">87
&lt;/span>&lt;span class="lnt">88
&lt;/span>&lt;span class="lnt">89
&lt;/span>&lt;span class="lnt">90
&lt;/span>&lt;span class="lnt">91
&lt;/span>&lt;span class="lnt">92
&lt;/span>&lt;span class="lnt">93
&lt;/span>&lt;span class="lnt">94
&lt;/span>&lt;span class="lnt">95
&lt;/span>&lt;span class="lnt">96
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="c1">// Injectors from wire.go:
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">InitApp&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">App&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// åŸºæœ¬ä¸Šå°±æ˜¯åˆ›å»ºä¸€ä¸ªä¸ªå®ä¾‹ï¼Œå’Œå–„åå®ƒä»¬çš„å‡½æ•°
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// å¦‚æœé€”ä¸­åˆ›å»ºå‡ºé—®é¢˜å°±å…¨ä½“ä¸‹è‘¬ï¼ˆè§¦å‘å–„åå‡½æ•°ï¼‰.
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="c1">// Rediså®ä¾‹ï¼Œå–„åå‡½æ•°
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">redis&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cleanup&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">dao&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewRedis&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">// memcacheå®ä¾‹ï¼Œå–„åå‡½æ•°
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">memcache&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cleanup2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">dao&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewMC&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nf">cleanup&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">// çœ‹èµ·æ¥åªæ”¯æŒMySQLï¼Œå–„åå‡½æ•°
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">db&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cleanup3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">dao&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewDB&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nf">cleanup2&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="nf">cleanup&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">// æŠŠä¸Šé¢æ‰€æœ‰çš„æ¨¡å‹å¯¹è±¡åšä¸€ä¸ªDAOå±‚å°è£…
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">daoDao&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cleanup4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">dao&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">redis&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">memcache&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">db&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nf">cleanup3&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="nf">cleanup2&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="nf">cleanup&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">// è¿™ä¸ªæ˜¯ä¸ªé‡ç‚¹ï¼Œ`service`æ˜¯ä½ çš„gRPCæœåŠ¡.
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// ä¸€ä¼šæˆ‘ä»¬å»åˆ†æä»–
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">serviceService&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cleanup5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">service&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">daoDao&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nf">cleanup4&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="nf">cleanup3&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="nf">cleanup2&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="nf">cleanup&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">// æœ‰äººä¼šå¥½å¥‡Kratosæ˜¯æ€ä¹ˆæŠŠgRPCå’ŒGinèåˆåœ¨ä¸€èµ·çš„
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">//ï¼ˆæ²¡é”™Bilibiliçš„webæ¡†æ¶æ˜¯Gin, ä¸è¿‡è¿™ä¸ªGinçš„ä¸€éƒ¨åˆ†æ ¸å¿ƒä»£ç å·²ç»è¢«é­”æ”¹è¿‡äº†ï¼Œ åœ¨Engineåˆå§‹åŒ–çš„æ—¶å€™ä¼šå¤šåŠ å…¥ä¸€ä¸ªé“¾è·¯è¿½è¸ªçš„Middleware, è¿˜æœ‰ä¸€å †è·¯ç”±...ï¼‰
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// ç§˜å¯†å°±åœ¨è¿™é‡Œï¼Œç­‰ä¼šæˆ‘ä»¬å†çœ‹
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">engine&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">serviceService&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nf">cleanup5&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="nf">cleanup4&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="nf">cleanup3&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="nf">cleanup2&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="nf">cleanup&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">// gRPCçš„åˆå§‹åŒ–çš„å¸¸è§„æ“ä½œ
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">server&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">grpc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">serviceService&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nf">cleanup5&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="nf">cleanup4&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="nf">cleanup3&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="nf">cleanup2&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="nf">cleanup&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">// æŠŠä¸Šé¢çš„æœåŠ¡ï¼Œengine,gRPCæœåŠ¡,æ•´ä¸€å—
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// å–„åå‡½æ•°
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// åé¢ç¨å¾®åˆ†æä¸€ä¸‹
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">app&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cleanup6&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">NewApp&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">serviceService&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">engine&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">server&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nf">cleanup5&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="nf">cleanup4&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="nf">cleanup3&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="nf">cleanup2&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="nf">cleanup&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">// ä½ å¯ä»¥èµ°äº†.
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nx">app&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nf">cleanup6&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="nf">cleanup5&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="nf">cleanup4&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="nf">cleanup3&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="nf">cleanup2&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="nf">cleanup&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="p">},&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">//ä»¥ä¸Šä»£ç å…¨æ˜¯è‡ªåŠ¨ç”Ÿæˆï¼Œå†—ä½™å¾ˆæ­£å¸¸
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¥ä¸‹æ¥æˆ‘ä»¬é¦–å…ˆçœ‹çœ‹&lt;code>serviceService&lt;/code>æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿.&lt;em>(è¿™æ˜¯ä»€ä¹ˆé­”é¬¼å‘½å)&lt;/em>&lt;/p>
&lt;p>è¿›åˆ°&lt;code>Service.New(dao)&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-go" data-lang="go">
&lt;span class="c1">// Service service.
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kd">type&lt;/span> &lt;span class="nx">Service&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// é…ç½®æ–‡ä»¶æ˜ å°„çš„Map (è¿™ä¸ªå‘½åå°±nmç¦»è°±)
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">ac&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">paladin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Map&lt;/span>
&lt;span class="c1">// å­—é¢æ„æ€
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">dao&lt;/span> &lt;span class="nx">dao&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Dao&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">// New new a service and return.
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">d&lt;/span> &lt;span class="nx">dao&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Dao&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Service&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cf&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// åˆå§‹åŒ–ï½ï½ï½
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">s&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">Service&lt;/span>&lt;span class="p">{&lt;/span>
&lt;span class="nx">ac&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">paladin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">TOML&lt;/span>&lt;span class="p">{},&lt;/span>
&lt;span class="nx">dao&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">d&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">// ä¸€ä¸ªå…³é—­çš„é’©å­
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">cf&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Close&lt;/span>
&lt;span class="c1">// çƒ­åŠ è½½ application.toml é…ç½®æ–‡ä»¶
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// åŸç†æ˜¯ä½¿ç”¨fsnotifyç›‘å¬æ–‡ä»¶å˜æ›´
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">paladin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Watch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;application.toml&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ac&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">return&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">// -------------- ä¸‹é¢éƒ½æ˜¯ä½ çš„gRPCä¸šåŠ¡é€»è¾‘-------------
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="c1">// SayHello grpc demo func.
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Service&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">SayHello&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span> &lt;span class="nx">context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">req&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">pb&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">HelloReq&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">reply&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">empty&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Empty&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">reply&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">new&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">empty&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Empty&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;hello %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">req&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">return&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">// SayHelloURL bm demo func.
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Service&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">SayHelloURL&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span> &lt;span class="nx">context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">req&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">pb&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">HelloReq&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">reply&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">pb&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">HelloResp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">reply&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">pb&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">HelloResp&lt;/span>&lt;span class="p">{&lt;/span>
&lt;span class="nx">Content&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;hello &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">req&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;hello url %s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">req&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">return&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">// Ping ping the resource.
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Service&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Ping&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span> &lt;span class="nx">context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">e&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">empty&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Empty&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">empty&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Empty&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">empty&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Empty&lt;/span>&lt;span class="p">{},&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">dao&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Ping&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">// Close close the resource.
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Service&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">Close&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å“‡å“¦ï¼Œç°åœ¨æˆ‘ä»¬çŸ¥é“äº†ï¼Œ&lt;code>Service&lt;/code>æ˜¯ç”±ä¸€äº›&lt;code>gRPC&lt;/code>æ–¹æ³•ï¼Œé…ç½®é¡¹ï¼Œæ¨¡å‹å±‚ç»„æˆçš„ã€‚&lt;/p>
&lt;p>å¥½ï¼Œä¹˜èƒœè¿½å‡»æˆ‘ä»¬å†çœ‹ä¸€çœ‹&lt;code>engine, err := http.New(serviceService)&lt;/code>åšäº†ä»€ä¹ˆã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="kd">var&lt;/span> &lt;span class="nx">svc&lt;/span> &lt;span class="nx">pb&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DemoServer&lt;/span>
&lt;span class="c1">// New new a bm server.
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="nx">pb&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DemoServer&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">engine&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">bm&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Engine&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="kd">var&lt;/span> &lt;span class="p">(&lt;/span>
&lt;span class="nx">cfg&lt;/span> &lt;span class="nx">bm&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ServerConfig&lt;/span>
&lt;span class="nx">ct&lt;/span> &lt;span class="nx">paladin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">TOML&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="c1">// è¯»å–ä½ çš„é…ç½®æ–‡ä»¶
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">paladin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;http.toml&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">Unmarshal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">ct&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">// å¾—åˆ°http.tomlçš„Serverå­—æ®µ
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">ct&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Server&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nf">UnmarshalTOML&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">cfg&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">svc&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">s&lt;/span>
&lt;span class="c1">// åšä¸€ä¸ªæ–° engine
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// (engine æ˜¯ Gin é‡Œçš„æ¨¡å—ï¼Œè¿™é‡Œæˆ‘å°±ä¸åˆ†æGinçš„æºç äº†)
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">engine&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">bm&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">DefaultServer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">cfg&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">// å°†gRPCæœåŠ¡æ³¨å†Œåˆ°engine, è¿™ä¸ªä»£ç æ³¨å†Œä»£ç æ˜¯bmè‡ªå·±ç”Ÿæˆçš„
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// ä¸€ä¼šæˆ‘ä»¬åˆ†æ
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">pb&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">RegisterDemoBMServer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">engine&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">// æŠŠä½ çš„è·¯ç”±æè¿›å»
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nf">initRouter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">engine&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">// å¼€å§‹è·‘
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">engine&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Start&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="k">return&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">// è·¯ç”±åœ¨è¿™é‡Œç™»è®°ï¼
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">initRouter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">e&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">bm&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Engine&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">e&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Ping&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ping&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nx">g&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">e&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Group&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/kratos-demo&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="nx">g&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/start&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">howToStart&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kd">func&lt;/span> &lt;span class="nf">ping&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">bm&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">svc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Ping&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ping error(%v)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nx">ctx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AbortWithStatus&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StatusServiceUnavailable&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">// example for http request handler.
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">howToStart&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">bm&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">k&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">model&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Kratos&lt;/span>&lt;span class="p">{&lt;/span>
&lt;span class="nx">Hello&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;Golang å¤§æ³•å¥½ !!!æˆ‘å¥½ä½ ä¸ªå¤´ï¼&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">k&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœä½ ä½¿ç”¨è¿‡&lt;code>gin&lt;/code>è¿™ä¸ªwebæ¡†æ¶, ä¸Šé¢çš„ä»£ç ä½ ä¸€å®šå¾ˆç†Ÿæ‚‰ï¼Œå¯¹å§ï¼Ÿ
&lt;code>bm&lt;/code>å°±æ˜¯&lt;code>gin&lt;/code>ï¼Œåªæ˜¯éƒ¨åˆ†ä»£ç è¢«Bilibilié­”æ”¹äº†ï¼Œæ•´ä½“æ¶æ„æ˜¯ä¸å˜çš„ã€‚&lt;/p>
&lt;p>OKï¼Œæˆ‘ä»¬çœ‹çœ‹&lt;code>RegisterDemoBMServer&lt;/code>é‡Œåšäº†ä»€ä¹ˆ.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="c1">// DemoBMServer is the server API for Demo service.
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kd">type&lt;/span> &lt;span class="nx">DemoBMServer&lt;/span> &lt;span class="kd">interface&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nf">Ping&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span> &lt;span class="nx">context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">req&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">google_protobuf1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Empty&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">resp&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">google_protobuf1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Empty&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">SayHello&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span> &lt;span class="nx">context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">req&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">HelloReq&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">resp&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">google_protobuf1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Empty&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">SayHelloURL&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span> &lt;span class="nx">context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">req&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">HelloReq&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">resp&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">HelloResp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">// æˆ‘ä»¬å†™çš„gRPCæœåŠ¡
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kd">var&lt;/span> &lt;span class="nx">DemoSvc&lt;/span> &lt;span class="nx">DemoBMServer&lt;/span>
&lt;span class="c1">// ------------------------------------------------
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="c1">// æˆ‘ä»¬ä»”ç»†åˆ†æè¿™äº›æ–¹æ³•ä¸éš¾å‘ç°
&lt;/span>&lt;span class="c1">// ä»–ä»¬éƒ½ä¼šè°ƒç”¨ `BindWith` å’Œå¯¹åº”çš„gRPCæ–¹æ³•
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="c1">// å…ˆä½¿ç”¨BindWith: å°†requestä¸­çš„`Body` è½¬åŒ–ä¸ºgoä¸­çš„ `struct`
&lt;/span>&lt;span class="c1">// ç„¶åä½¿ç”¨gRPCæ–¹æ³•å¤„ç†è¯·æ±‚æ•°æ®
&lt;/span>&lt;span class="c1">// æœ€åè¿”å›
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="c1">// æœ¬è´¨å°±æ˜¯é€šè¿‡httpè°ƒç”¨gRPCæœåŠ¡
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="kd">func&lt;/span> &lt;span class="nf">demoPing&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">bm&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">p&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nb">new&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">google_protobuf1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Empty&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">BindWith&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">p&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">binding&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Default&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Request&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Method&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Request&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Header&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Content-Type&amp;#34;&lt;/span>&lt;span class="p">)));&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">resp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">DemoSvc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Ping&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">p&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">resp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kd">func&lt;/span> &lt;span class="nf">demoSayHello&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">bm&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">p&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nb">new&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">HelloReq&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">BindWith&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">p&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">binding&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Default&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Request&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Method&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Request&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Header&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Content-Type&amp;#34;&lt;/span>&lt;span class="p">)));&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">resp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">DemoSvc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SayHello&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">p&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">resp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kd">func&lt;/span> &lt;span class="nf">demoSayHelloURL&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">bm&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">p&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nb">new&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">HelloReq&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">BindWith&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">p&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">binding&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Default&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Request&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Method&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Request&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Header&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Content-Type&amp;#34;&lt;/span>&lt;span class="p">)));&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">resp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">DemoSvc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">SayHelloURL&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">p&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">JSON&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">resp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">//-------------------------------------
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="c1">// RegisterDemoBMServer Register the blademaster route
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">RegisterDemoBMServer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">e&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">bm&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Engine&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">server&lt;/span> &lt;span class="nx">DemoBMServer&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="c1">// server æ˜¯æˆ‘ä»¬ä¹‹å‰ç¼–å†™çš„gRPCæœåŠ¡
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">DemoSvc&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">server&lt;/span>
&lt;span class="c1">// å°†ä¸€äº›æ–¹æ³•æ³¨å†Œåˆ°è·¯ç”±é‡Œå»
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">e&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/demo.service.v1.Demo/Ping&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">demoPing&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nx">e&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/demo.service.v1.Demo/SayHello&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">demoSayHello&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nx">e&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/kratos-demo/say_hello&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">demoSayHelloURL&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å“‡ï¼ŒåŸæ¥åªæ˜¯æŠŠä¸€äº›gRPCçš„æœåŠ¡ç»‘å®šåˆ°&lt;code>gin&lt;/code>çš„è·¯ç”±é‡Œäº†å‘€ã€‚
å€Ÿç”¨&lt;code>gin&lt;/code>æ¥è°ƒç”¨gRPC.&lt;/p>
&lt;p>&lt;code>grpc.New()&lt;/code>å°±ä¸åˆ†æäº†ã€‚&lt;/p>
&lt;p>ç„¶åæ˜¯&lt;code>AppNew()&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="c1">//go:generate kratos tool wire
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="kd">type&lt;/span> &lt;span class="nx">App&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">svc&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">service&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Service&lt;/span>
&lt;span class="nx">http&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">bm&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Engine&lt;/span>
&lt;span class="nx">grpc&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">warden&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Server&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kd">func&lt;/span> &lt;span class="nf">NewApp&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">svc&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">service&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Service&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">h&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">bm&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Engine&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">g&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">warden&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Server&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">app&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">App&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">closeFunc&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">app&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">App&lt;/span>&lt;span class="p">{&lt;/span>
&lt;span class="nx">svc&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">svc&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">http&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">h&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">grpc&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">g&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">// ä¸€ä¸ªå…³é—­contextçš„å›è°ƒ
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">closeFunc&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">ctx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cancel&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">WithTimeout&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Background&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="mi">35&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Second&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">g&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Shutdown&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;grpcSrv.Shutdown error(%v)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">h&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Shutdown&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;httpSrv.Shutdown error(%v)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nf">cancel&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="k">return&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åˆ°è¿™é‡Œåˆå§‹åŒ–æ˜¯ç»“æŸäº†ã€‚&lt;/p>
&lt;h1 id="summary">Summary&lt;/h1>
&lt;p>&lt;code>kratos&lt;/code>çš„åˆå§‹åŒ–æµç¨‹:&lt;/p>
&lt;ul>
&lt;li>è¯»å–é…ç½®æ–‡ä»¶&lt;/li>
&lt;li>å®ä¾‹åŒ–Daoå±‚&lt;/li>
&lt;li>å®ä¾‹åŒ–gRPCæœåŠ¡&lt;/li>
&lt;li>å®ä¾‹åŒ–ginçš„engine&lt;/li>
&lt;li>æ³¨å†ŒgPRCåˆ°engine&lt;/li>
&lt;li>å¯åŠ¨engine&lt;/li>
&lt;li>å¯åŠ¨gRPCæœåŠ¡ç«¯&lt;/li>
&lt;li>è·å¾—æ•´ä¸ªç¨‹åºå…³é—­çš„å›è°ƒ&lt;/li>
&lt;/ul>
&lt;p>æˆ‘åˆ†å¾—åº”è¯¥è¿˜æ˜¯æ¯”è¾ƒç»†çš„ã€‚&lt;/p>
&lt;p>åé¢åº”è¯¥è¿˜ä¼šåˆ†æ&lt;code>warden&lt;/code>ï¼Œå®ƒæ˜¯&lt;code>Kratos&lt;/code>åœ¨&lt;code>grpc&lt;/code>åŸç‰ˆä¸Šçš„ä¸€ä¸ªå°è£…ç‰ˆæœ¬ã€‚&lt;/p>
&lt;p>æºœäº†æºœäº†&amp;hellip;&lt;/p></description></item><item><title>Protubuf åŸç†</title><link>https://sdttttt.github.io/blog/protubuf/</link><pubDate>Mon, 30 Mar 2020 03:05:12 +0800</pubDate><guid>https://sdttttt.github.io/blog/protubuf/</guid><description>
&lt;p>protobufçš„messageä¸­æœ‰å¾ˆå¤šå­—æ®µ,æ¯ä¸ªå­—æ®µçš„æ ¼å¼ä¸º:
ä¿®é¥°ç¬¦ å­—æ®µç±»å‹ å­—æ®µå = åŸŸå·;
åœ¨åºåˆ—åŒ–æ—¶,protobufæŒ‰ç…§TLVçš„æ ¼å¼åºåˆ—åŒ–æ¯ä¸€ä¸ªå­—æ®µ,Tå³Tag,ä¹Ÿå«Key;Væ˜¯è¯¥å­—æ®µå¯¹åº”çš„å€¼v
çœç•¥ã€‚
åºåˆ—åŒ–åçš„Valueæ˜¯æŒ‰åŸæ ·ä¿å­˜åˆ°å­—ç¬¦ä¸²æˆ–è€…æ–‡ä»¶ä¸­,KeyæŒ‰ç…§ä¸€å®šçš„è½¬æ¢æ¡ä»¶ä¿å­˜èµ·æ¥,åºåˆ—åŒ–åçš„
messageä¸­å­—æ®µåé¢çš„åŸŸå·ä¸å­—æ®µç±»å‹æ¥è½¬æ¢ã€‚è½¬æ¢å…¬å¼å¦‚ä¸‹:&lt;/p>
&lt;blockquote>
&lt;p>(field_number &amp;laquo; 3) | wire_type&lt;/p>
&lt;/blockquote>
&lt;p>wire_typeä¸ç±»å‹çš„å¯¹åº”å…³ç³»è¡¨:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>wire_type&lt;/th>
&lt;th>meaning&lt;/th>
&lt;th>&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>0&lt;/td>
&lt;td>Vaint&lt;/td>
&lt;td>int32ã€int64ã€uint32ã€uint64ã€sint32ã€sint64ã€boolã€enum&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>1&lt;/td>
&lt;td>64-bit&lt;/td>
&lt;td>fixedã€sfixed64ã€double&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2&lt;/td>
&lt;td>Length-delimi&lt;/td>
&lt;td>stringã€bytesã€embeddedã€messagesã€packed repeated fields&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>3&lt;/td>
&lt;td>Start group&lt;/td>
&lt;td>Groups(deprecated)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>4&lt;/td>
&lt;td>End group&lt;/td>
&lt;td>Groups(deprecated)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>5&lt;/td>
&lt;td>32-bit&lt;/td>
&lt;td>fixed32ã€sfixed32ã€float&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;blockquote>
&lt;p>ã€€As you can see, each field in the message definition has a unique numbered tag. These tags are used to identify your fields in the message binary format, and should not be changed once your message type is in use. Note that tags with values in the range 1 through 15 take one byte to encode. Tags in the range 16 through 2047 take two bytes. So you should reserve the tags 1 through 15 for very frequently occurring message elements. Remember to leave some room for frequently occurring elements that might be added in the future.&lt;/p>
&lt;/blockquote>
&lt;p>ä¸Šé¢ä¸€æ®µè¯æ˜¯æ¥è‡ªGoogle Protobuf Documentsï¼Œä¸Šé¢æœ‰å‡ ä¸ªä¿¡æ¯éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼š
protobufåè®®ä½¿ç”¨äºŒè¿›åˆ¶æ ¼å¼è¡¨ç¤ºKeyå­—æ®µï¼›å¯¹valueè€Œè¨€ï¼Œä¸åŒçš„ç±»å‹é‡‡ç”¨çš„ç¼–ç æ–¹å¼ä¹Ÿä¸åŒï¼Œå¦‚æœæ˜¯æ•´å‹ï¼Œé‡‡ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºï¼›å¦‚æœæ˜¯å­—ç¬¦ï¼Œä¼šç›´æ¥åŸæ ·å†™å…¥æ–‡ä»¶æˆ–è€…å­—ç¬¦ä¸²ï¼ˆå³ä¸ç¼–ç ï¼‰ã€‚ç”±äºåˆšå¼€å§‹æ¥è§¦protobufåè®®ï¼Œæˆ‘ä¹Ÿåœ¨å­¦ä¹ ä¸­ï¼Œä¸‹é¢æˆ‘ä¼šç»™å‡ºä¸€ä¸ªä¾‹å­ï¼Œå¯¹äºå…¶ä»–ä¸€äº›ç±»å‹çš„ç¼–ç æ–¹å¼ï¼Œå¯ä»¥ä»¿ç…§è¿™ä¸ªä¾‹å­è‡ªå·±å®éªŒä¸€ä¸‹ã€‚
&lt;strong>ï¼ˆè¿™ä¸ªä¾‹å­ä¸»è¦æ˜¯è®²è¿°Keyçš„ç¼–ç æ–¹å¼ï¼‰&lt;/strong>&lt;/p>
&lt;p>ä¸Šé¢è¯´è¿‡ï¼Œå¯¹äºmessageä¸­çš„æ¯ä¸€ä¸ªåŸŸï¼Œéƒ½å¯¹åº”ä¸€ä¸ªåŸŸå·ã€‚protobufè§„å®šï¼š&lt;/p>
&lt;ul>
&lt;li>å¦‚æœåŸŸå·åœ¨[1ï¼Œ15]èŒƒå›´å†…ï¼Œä¼šä½¿ç”¨ä¸€ä¸ªå­—èŠ‚è¡¨ç¤ºKeyï¼›&lt;/li>
&lt;li>å¦‚æœåŸŸå·å¤§äºç­‰äº16ï¼Œä¼šä½¿ç”¨ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºKeyï¼›&lt;/li>
&lt;/ul>
&lt;p>Keyç¼–ç è¿‡åï¼Œè¯¥å­—èŠ‚çš„ç¬¬ä¸€ä¸ªæ¯”ç‰¹ä½è¡¨ç¤ºä¹‹åçš„ä¸€ä¸ªå­—èŠ‚æ˜¯å¦ä¸å½“å‰è¿™ä¸ªå­—èŠ‚æœ‰å…³:&lt;/p>
&lt;ul>
&lt;li>å¦‚æœç¬¬ä¸€ä¸ªæ¯”ç‰¹ä½ä¸º1ï¼Œè¡¨ç¤ºæœ‰å…³ï¼Œå³è¿ç»­ä¸¤ä¸ªå­—èŠ‚éƒ½æ˜¯Keyçš„ç¼–ç ï¼›&lt;/li>
&lt;li>å¦‚æœç¬¬ä¸€ä¸ªæ¯”ç‰¹ä½ä¸º0ï¼Œè¡¨ç¤ºKeyçš„ç¼–ç åªæœ‰å½“å‰ä¸€ä¸ªå­—èŠ‚ï¼Œåé¢çš„å­—èŠ‚æ˜¯Lengthæˆ–è€…Valueï¼›&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>ç»“åˆå…¬å¼ ï¼ˆfield_number &amp;laquo; 3ï¼‰| wire_type ï¼Œå¦‚æœåŸŸå·å¤§äºç­‰äº16ï¼Œä¸¤ä¸ªå­—èŠ‚å…±16ä½ï¼Œå»æ‰ç§»ä½çš„3ä½ï¼Œå»æ‰ä¸¤ä¸ªå­—èŠ‚ä¸­ç¬¬ä¸€ä¸ªæ¯”ç‰¹ä½ï¼Œæ€»å…±16ä¸ªæ¯”ç‰¹ä½åªæœ‰16-5==11ä¸ªæ¯”ç‰¹ä½ç”¨æ¥è¡¨ç¤ºKeyï¼Œæ‰€ä»¥Keyçš„åŸŸå·è¦å°äº2^11== 2048&lt;/p>
&lt;/blockquote>
&lt;h2 id="protobuf-example">Protobuf Example&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-proto" data-lang="proto">&lt;span class="kd">message&lt;/span> &lt;span class="nc">Person&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="err">
&lt;/span>&lt;span class="err">&lt;/span> &lt;span class="k">required&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err">
&lt;/span>&lt;span class="err">&lt;/span> &lt;span class="k">required&lt;/span> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err">
&lt;/span>&lt;span class="err">&lt;/span> &lt;span class="k">required&lt;/span> &lt;span class="n">addr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err">
&lt;/span>&lt;span class="err">
&lt;/span>&lt;span class="err">&lt;/span> &lt;span class="k">required&lt;/span> &lt;span class="n">test&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1000&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err">
&lt;/span>&lt;span class="err">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="err">
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½¿ç”¨protocç¼–è¯‘åï¼Œç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">protoc -I&lt;span class="o">=&lt;/span>. â€“cpp_out&lt;span class="o">=&lt;/span>. person.proto
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å»ºç«‹ä¸€ä¸ªPersonå¯¹è±¡: å±æ€§ä¸º&lt;/p>
&lt;pre>&lt;code>id = 111
name = China
addr = Asia
test = ttttt
# æ‰“å°å‡ºåºåˆ—åŒ–åçš„ç»“æœä¸ºï¼š
'\n\003\061\061\061\022\005China\032\004\Asia\302\005ttttt'
&lt;/code>&lt;/pre>&lt;p>â€˜\nâ€™æ˜¯idå­—æ®µçš„Keyï¼Œåé¢çš„\003ï¼ˆå…«è¿›åˆ¶ï¼‰è¡¨ç¤ºidå­—æ®µçš„å€¼é•¿åº¦ä¸º3&lt;/p>
&lt;p>&lt;strong>keyçš„åŸŸå·ä¸è¶…è¿‡15çš„åºåˆ—åŒ–è§£æï¼š&lt;/strong>&lt;/p>
&lt;p>å› ä¸ºidå­—æ®µçš„åŸŸå·ä¸º1ï¼Œæ˜¯å°äº15çš„ï¼Œæ‰€ä»¥idå­—æ®µçš„Keyåºåˆ—åŒ–è¦å 1ä¸ªå­—èŠ‚çš„ç©ºé—´ï¼Œ00000001å·¦ç§»3ä½å˜æˆ 00001000ï¼Œå› ä¸ºstringçš„wire_typeå€¼æ˜¯2ï¼Œæ‰€ä»¥00001000å†æˆ–ä¸Š2ï¼Œå˜æˆ00001010ï¼Œå°±æ˜¯åè¿›åˆ¶çš„10ï¼Œå³å­—ç¬¦â€™\nâ€™ã€‚ä¸‹é¢çš„å­—æ®µå¦‚æœåŸŸå·ä¸è¶…è¿‡15ï¼Œè§£æåŒidå­—æ®µã€‚
åé¢è¿ç»­3ä¸ªâ€™\61â€™ï¼ˆå…«è¿›åˆ¶ï¼‰å³å­—ç¬¦â€™1â€™ï¼›
åŒæ ·\022\005æ˜¯nameå­—æ®µçš„keyå’Œvalueé•¿åº¦ï¼Œåé¢æ˜¯nameå­—æ®µçš„å€¼ï¼›
\032\004æ˜¯addrå­—æ®µçš„keyå’Œvalueé•¿åº¦ï¼›&lt;/p>
&lt;p>æœ€åï¼Œ\302&amp;gt;\005æ˜¯testå­—æ®µçš„Keyå’ŒValueé•¿åº¦ï¼›&lt;/p>
&lt;p>&lt;strong>keyçš„åŸŸå·å¤§äº15çš„åºåˆ—åŒ–è§£æï¼š&lt;/strong>&lt;/p>
&lt;p>ç”±äºCSDNç¼–è¾‘å™¨ä¸æ”¯æŒCSSæ ¼å¼ï¼Œæ²¡æœ‰åŠæ³•æ ‡è®°ä¸‹é¢çš„è§£æå†…å®¹çš„é¢œè‰²ï¼Œåªæœ‰æ”¾ä¸€ä¸ªå›¾ç‰‡ä¸Šå»äº† ^_^;
ä¸‹é¢å›¾ç‰‡ä¸­çš„\76å°±æ˜¯\302åé¢çš„â€˜&amp;gt;â€™å­—ç¬¦çš„å…«è¿›åˆ¶è¡¨ç¤ºï¼Œ\302ä¸&amp;gt;å…±åŒç»„æˆæœ€åä¸€ä¸ªå­—æ®µçš„Keyçš„è¡¨ç¤ºï¼ˆå› ä¸ºæœ€åä¸€ä¸ªå­—æ®µtestçš„åŸŸå·1000å¤§äº15ï¼Œæ‰€ä»¥éœ€è¦å ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºKeyï¼‰&lt;/p>
&lt;p>&lt;img src="../../protobuf_1.jpg" alt="">&lt;/p></description></item><item><title>Github Actions</title><link>https://sdttttt.github.io/blog/github_actions/</link><pubDate>Wed, 11 Mar 2020 00:50:00 +0800</pubDate><guid>https://sdttttt.github.io/blog/github_actions/</guid><description>
&lt;h2 id="github-actions-ä¸Šä¼ -releases">Github Actions ä¸Šä¼  Releases&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">release&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># https://help.github.com/en/articles/workflow-syntax-for-github-actions#on&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">push&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">tags&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="s1">&amp;#39;*&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">jobs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">build&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">runs-on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ubuntu-latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">steps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">actions/checkout@v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;find env&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;span class="sd"> set | grep GITHUB_ | grep -v GITHUB_TOKEN
&lt;/span>&lt;span class="sd"> zip -r pkg.zip *.md&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">xresloader/upload-to-github-release@v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">env&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">GITHUB_TOKEN&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ secrets.GITHUB_TOKEN }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">file&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;*.md;*.zip&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">tags&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">draft&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">false&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">prerelease&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">overwrite&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">verbose&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Appveyor</title><link>https://sdttttt.github.io/blog/appveyor/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://sdttttt.github.io/blog/appveyor/</guid><description>
&lt;p>Appveyor ä¹Ÿæ˜¯ä¸€æ¬¾çº¿ä¸Š CICD å·¥å…·ã€‚&lt;/p>
&lt;p>Support Contexts:&lt;/p>
&lt;ul>
&lt;li>Windows (Default)&lt;/li>
&lt;li>Ubuntu&lt;/li>
&lt;li>MacOS&lt;/li>
&lt;/ul>
&lt;p>Support Languages:&lt;/p>
&lt;ul>
&lt;li>Node.js&lt;/li>
&lt;li>io.js&lt;/li>
&lt;li>Xamarin&lt;/li>
&lt;li>Python&lt;/li>
&lt;li>Ruby&lt;/li>
&lt;li>C++&lt;/li>
&lt;li>Go&lt;/li>
&lt;/ul>
&lt;h2 id="ruby">Ruby&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1.0&lt;/span>&lt;span class="l">.{build}-{branch}&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">skip_commits&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">files&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="s1">&amp;#39;azure-pipelines.yml&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="s1">&amp;#39;README.md&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">install&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">set PATH=C:\Ruby26-x64\bin;%PATH%&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">bundle install&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">build&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">off&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">before_test&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">ruby -v&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">gem -v&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">bundle -v&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">test_script&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">rails db:migrate RAILS_ENV=test&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="appveyoryml-reference">Appveyor.yml Reference&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;span class="lnt">138
&lt;/span>&lt;span class="lnt">139
&lt;/span>&lt;span class="lnt">140
&lt;/span>&lt;span class="lnt">141
&lt;/span>&lt;span class="lnt">142
&lt;/span>&lt;span class="lnt">143
&lt;/span>&lt;span class="lnt">144
&lt;/span>&lt;span class="lnt">145
&lt;/span>&lt;span class="lnt">146
&lt;/span>&lt;span class="lnt">147
&lt;/span>&lt;span class="lnt">148
&lt;/span>&lt;span class="lnt">149
&lt;/span>&lt;span class="lnt">150
&lt;/span>&lt;span class="lnt">151
&lt;/span>&lt;span class="lnt">152
&lt;/span>&lt;span class="lnt">153
&lt;/span>&lt;span class="lnt">154
&lt;/span>&lt;span class="lnt">155
&lt;/span>&lt;span class="lnt">156
&lt;/span>&lt;span class="lnt">157
&lt;/span>&lt;span class="lnt">158
&lt;/span>&lt;span class="lnt">159
&lt;/span>&lt;span class="lnt">160
&lt;/span>&lt;span class="lnt">161
&lt;/span>&lt;span class="lnt">162
&lt;/span>&lt;span class="lnt">163
&lt;/span>&lt;span class="lnt">164
&lt;/span>&lt;span class="lnt">165
&lt;/span>&lt;span class="lnt">166
&lt;/span>&lt;span class="lnt">167
&lt;/span>&lt;span class="lnt">168
&lt;/span>&lt;span class="lnt">169
&lt;/span>&lt;span class="lnt">170
&lt;/span>&lt;span class="lnt">171
&lt;/span>&lt;span class="lnt">172
&lt;/span>&lt;span class="lnt">173
&lt;/span>&lt;span class="lnt">174
&lt;/span>&lt;span class="lnt">175
&lt;/span>&lt;span class="lnt">176
&lt;/span>&lt;span class="lnt">177
&lt;/span>&lt;span class="lnt">178
&lt;/span>&lt;span class="lnt">179
&lt;/span>&lt;span class="lnt">180
&lt;/span>&lt;span class="lnt">181
&lt;/span>&lt;span class="lnt">182
&lt;/span>&lt;span class="lnt">183
&lt;/span>&lt;span class="lnt">184
&lt;/span>&lt;span class="lnt">185
&lt;/span>&lt;span class="lnt">186
&lt;/span>&lt;span class="lnt">187
&lt;/span>&lt;span class="lnt">188
&lt;/span>&lt;span class="lnt">189
&lt;/span>&lt;span class="lnt">190
&lt;/span>&lt;span class="lnt">191
&lt;/span>&lt;span class="lnt">192
&lt;/span>&lt;span class="lnt">193
&lt;/span>&lt;span class="lnt">194
&lt;/span>&lt;span class="lnt">195
&lt;/span>&lt;span class="lnt">196
&lt;/span>&lt;span class="lnt">197
&lt;/span>&lt;span class="lnt">198
&lt;/span>&lt;span class="lnt">199
&lt;/span>&lt;span class="lnt">200
&lt;/span>&lt;span class="lnt">201
&lt;/span>&lt;span class="lnt">202
&lt;/span>&lt;span class="lnt">203
&lt;/span>&lt;span class="lnt">204
&lt;/span>&lt;span class="lnt">205
&lt;/span>&lt;span class="lnt">206
&lt;/span>&lt;span class="lnt">207
&lt;/span>&lt;span class="lnt">208
&lt;/span>&lt;span class="lnt">209
&lt;/span>&lt;span class="lnt">210
&lt;/span>&lt;span class="lnt">211
&lt;/span>&lt;span class="lnt">212
&lt;/span>&lt;span class="lnt">213
&lt;/span>&lt;span class="lnt">214
&lt;/span>&lt;span class="lnt">215
&lt;/span>&lt;span class="lnt">216
&lt;/span>&lt;span class="lnt">217
&lt;/span>&lt;span class="lnt">218
&lt;/span>&lt;span class="lnt">219
&lt;/span>&lt;span class="lnt">220
&lt;/span>&lt;span class="lnt">221
&lt;/span>&lt;span class="lnt">222
&lt;/span>&lt;span class="lnt">223
&lt;/span>&lt;span class="lnt">224
&lt;/span>&lt;span class="lnt">225
&lt;/span>&lt;span class="lnt">226
&lt;/span>&lt;span class="lnt">227
&lt;/span>&lt;span class="lnt">228
&lt;/span>&lt;span class="lnt">229
&lt;/span>&lt;span class="lnt">230
&lt;/span>&lt;span class="lnt">231
&lt;/span>&lt;span class="lnt">232
&lt;/span>&lt;span class="lnt">233
&lt;/span>&lt;span class="lnt">234
&lt;/span>&lt;span class="lnt">235
&lt;/span>&lt;span class="lnt">236
&lt;/span>&lt;span class="lnt">237
&lt;/span>&lt;span class="lnt">238
&lt;/span>&lt;span class="lnt">239
&lt;/span>&lt;span class="lnt">240
&lt;/span>&lt;span class="lnt">241
&lt;/span>&lt;span class="lnt">242
&lt;/span>&lt;span class="lnt">243
&lt;/span>&lt;span class="lnt">244
&lt;/span>&lt;span class="lnt">245
&lt;/span>&lt;span class="lnt">246
&lt;/span>&lt;span class="lnt">247
&lt;/span>&lt;span class="lnt">248
&lt;/span>&lt;span class="lnt">249
&lt;/span>&lt;span class="lnt">250
&lt;/span>&lt;span class="lnt">251
&lt;/span>&lt;span class="lnt">252
&lt;/span>&lt;span class="lnt">253
&lt;/span>&lt;span class="lnt">254
&lt;/span>&lt;span class="lnt">255
&lt;/span>&lt;span class="lnt">256
&lt;/span>&lt;span class="lnt">257
&lt;/span>&lt;span class="lnt">258
&lt;/span>&lt;span class="lnt">259
&lt;/span>&lt;span class="lnt">260
&lt;/span>&lt;span class="lnt">261
&lt;/span>&lt;span class="lnt">262
&lt;/span>&lt;span class="lnt">263
&lt;/span>&lt;span class="lnt">264
&lt;/span>&lt;span class="lnt">265
&lt;/span>&lt;span class="lnt">266
&lt;/span>&lt;span class="lnt">267
&lt;/span>&lt;span class="lnt">268
&lt;/span>&lt;span class="lnt">269
&lt;/span>&lt;span class="lnt">270
&lt;/span>&lt;span class="lnt">271
&lt;/span>&lt;span class="lnt">272
&lt;/span>&lt;span class="lnt">273
&lt;/span>&lt;span class="lnt">274
&lt;/span>&lt;span class="lnt">275
&lt;/span>&lt;span class="lnt">276
&lt;/span>&lt;span class="lnt">277
&lt;/span>&lt;span class="lnt">278
&lt;/span>&lt;span class="lnt">279
&lt;/span>&lt;span class="lnt">280
&lt;/span>&lt;span class="lnt">281
&lt;/span>&lt;span class="lnt">282
&lt;/span>&lt;span class="lnt">283
&lt;/span>&lt;span class="lnt">284
&lt;/span>&lt;span class="lnt">285
&lt;/span>&lt;span class="lnt">286
&lt;/span>&lt;span class="lnt">287
&lt;/span>&lt;span class="lnt">288
&lt;/span>&lt;span class="lnt">289
&lt;/span>&lt;span class="lnt">290
&lt;/span>&lt;span class="lnt">291
&lt;/span>&lt;span class="lnt">292
&lt;/span>&lt;span class="lnt">293
&lt;/span>&lt;span class="lnt">294
&lt;/span>&lt;span class="lnt">295
&lt;/span>&lt;span class="lnt">296
&lt;/span>&lt;span class="lnt">297
&lt;/span>&lt;span class="lnt">298
&lt;/span>&lt;span class="lnt">299
&lt;/span>&lt;span class="lnt">300
&lt;/span>&lt;span class="lnt">301
&lt;/span>&lt;span class="lnt">302
&lt;/span>&lt;span class="lnt">303
&lt;/span>&lt;span class="lnt">304
&lt;/span>&lt;span class="lnt">305
&lt;/span>&lt;span class="lnt">306
&lt;/span>&lt;span class="lnt">307
&lt;/span>&lt;span class="lnt">308
&lt;/span>&lt;span class="lnt">309
&lt;/span>&lt;span class="lnt">310
&lt;/span>&lt;span class="lnt">311
&lt;/span>&lt;span class="lnt">312
&lt;/span>&lt;span class="lnt">313
&lt;/span>&lt;span class="lnt">314
&lt;/span>&lt;span class="lnt">315
&lt;/span>&lt;span class="lnt">316
&lt;/span>&lt;span class="lnt">317
&lt;/span>&lt;span class="lnt">318
&lt;/span>&lt;span class="lnt">319
&lt;/span>&lt;span class="lnt">320
&lt;/span>&lt;span class="lnt">321
&lt;/span>&lt;span class="lnt">322
&lt;/span>&lt;span class="lnt">323
&lt;/span>&lt;span class="lnt">324
&lt;/span>&lt;span class="lnt">325
&lt;/span>&lt;span class="lnt">326
&lt;/span>&lt;span class="lnt">327
&lt;/span>&lt;span class="lnt">328
&lt;/span>&lt;span class="lnt">329
&lt;/span>&lt;span class="lnt">330
&lt;/span>&lt;span class="lnt">331
&lt;/span>&lt;span class="lnt">332
&lt;/span>&lt;span class="lnt">333
&lt;/span>&lt;span class="lnt">334
&lt;/span>&lt;span class="lnt">335
&lt;/span>&lt;span class="lnt">336
&lt;/span>&lt;span class="lnt">337
&lt;/span>&lt;span class="lnt">338
&lt;/span>&lt;span class="lnt">339
&lt;/span>&lt;span class="lnt">340
&lt;/span>&lt;span class="lnt">341
&lt;/span>&lt;span class="lnt">342
&lt;/span>&lt;span class="lnt">343
&lt;/span>&lt;span class="lnt">344
&lt;/span>&lt;span class="lnt">345
&lt;/span>&lt;span class="lnt">346
&lt;/span>&lt;span class="lnt">347
&lt;/span>&lt;span class="lnt">348
&lt;/span>&lt;span class="lnt">349
&lt;/span>&lt;span class="lnt">350
&lt;/span>&lt;span class="lnt">351
&lt;/span>&lt;span class="lnt">352
&lt;/span>&lt;span class="lnt">353
&lt;/span>&lt;span class="lnt">354
&lt;/span>&lt;span class="lnt">355
&lt;/span>&lt;span class="lnt">356
&lt;/span>&lt;span class="lnt">357
&lt;/span>&lt;span class="lnt">358
&lt;/span>&lt;span class="lnt">359
&lt;/span>&lt;span class="lnt">360
&lt;/span>&lt;span class="lnt">361
&lt;/span>&lt;span class="lnt">362
&lt;/span>&lt;span class="lnt">363
&lt;/span>&lt;span class="lnt">364
&lt;/span>&lt;span class="lnt">365
&lt;/span>&lt;span class="lnt">366
&lt;/span>&lt;span class="lnt">367
&lt;/span>&lt;span class="lnt">368
&lt;/span>&lt;span class="lnt">369
&lt;/span>&lt;span class="lnt">370
&lt;/span>&lt;span class="lnt">371
&lt;/span>&lt;span class="lnt">372
&lt;/span>&lt;span class="lnt">373
&lt;/span>&lt;span class="lnt">374
&lt;/span>&lt;span class="lnt">375
&lt;/span>&lt;span class="lnt">376
&lt;/span>&lt;span class="lnt">377
&lt;/span>&lt;span class="lnt">378
&lt;/span>&lt;span class="lnt">379
&lt;/span>&lt;span class="lnt">380
&lt;/span>&lt;span class="lnt">381
&lt;/span>&lt;span class="lnt">382
&lt;/span>&lt;span class="lnt">383
&lt;/span>&lt;span class="lnt">384
&lt;/span>&lt;span class="lnt">385
&lt;/span>&lt;span class="lnt">386
&lt;/span>&lt;span class="lnt">387
&lt;/span>&lt;span class="lnt">388
&lt;/span>&lt;span class="lnt">389
&lt;/span>&lt;span class="lnt">390
&lt;/span>&lt;span class="lnt">391
&lt;/span>&lt;span class="lnt">392
&lt;/span>&lt;span class="lnt">393
&lt;/span>&lt;span class="lnt">394
&lt;/span>&lt;span class="lnt">395
&lt;/span>&lt;span class="lnt">396
&lt;/span>&lt;span class="lnt">397
&lt;/span>&lt;span class="lnt">398
&lt;/span>&lt;span class="lnt">399
&lt;/span>&lt;span class="lnt">400
&lt;/span>&lt;span class="lnt">401
&lt;/span>&lt;span class="lnt">402
&lt;/span>&lt;span class="lnt">403
&lt;/span>&lt;span class="lnt">404
&lt;/span>&lt;span class="lnt">405
&lt;/span>&lt;span class="lnt">406
&lt;/span>&lt;span class="lnt">407
&lt;/span>&lt;span class="lnt">408
&lt;/span>&lt;span class="lnt">409
&lt;/span>&lt;span class="lnt">410
&lt;/span>&lt;span class="lnt">411
&lt;/span>&lt;span class="lnt">412
&lt;/span>&lt;span class="lnt">413
&lt;/span>&lt;span class="lnt">414
&lt;/span>&lt;span class="lnt">415
&lt;/span>&lt;span class="lnt">416
&lt;/span>&lt;span class="lnt">417
&lt;/span>&lt;span class="lnt">418
&lt;/span>&lt;span class="lnt">419
&lt;/span>&lt;span class="lnt">420
&lt;/span>&lt;span class="lnt">421
&lt;/span>&lt;span class="lnt">422
&lt;/span>&lt;span class="lnt">423
&lt;/span>&lt;span class="lnt">424
&lt;/span>&lt;span class="lnt">425
&lt;/span>&lt;span class="lnt">426
&lt;/span>&lt;span class="lnt">427
&lt;/span>&lt;span class="lnt">428
&lt;/span>&lt;span class="lnt">429
&lt;/span>&lt;span class="lnt">430
&lt;/span>&lt;span class="lnt">431
&lt;/span>&lt;span class="lnt">432
&lt;/span>&lt;span class="lnt">433
&lt;/span>&lt;span class="lnt">434
&lt;/span>&lt;span class="lnt">435
&lt;/span>&lt;span class="lnt">436
&lt;/span>&lt;span class="lnt">437
&lt;/span>&lt;span class="lnt">438
&lt;/span>&lt;span class="lnt">439
&lt;/span>&lt;span class="lnt">440
&lt;/span>&lt;span class="lnt">441
&lt;/span>&lt;span class="lnt">442
&lt;/span>&lt;span class="lnt">443
&lt;/span>&lt;span class="lnt">444
&lt;/span>&lt;span class="lnt">445
&lt;/span>&lt;span class="lnt">446
&lt;/span>&lt;span class="lnt">447
&lt;/span>&lt;span class="lnt">448
&lt;/span>&lt;span class="lnt">449
&lt;/span>&lt;span class="lnt">450
&lt;/span>&lt;span class="lnt">451
&lt;/span>&lt;span class="lnt">452
&lt;/span>&lt;span class="lnt">453
&lt;/span>&lt;span class="lnt">454
&lt;/span>&lt;span class="lnt">455
&lt;/span>&lt;span class="lnt">456
&lt;/span>&lt;span class="lnt">457
&lt;/span>&lt;span class="lnt">458
&lt;/span>&lt;span class="lnt">459
&lt;/span>&lt;span class="lnt">460
&lt;/span>&lt;span class="lnt">461
&lt;/span>&lt;span class="lnt">462
&lt;/span>&lt;span class="lnt">463
&lt;/span>&lt;span class="lnt">464
&lt;/span>&lt;span class="lnt">465
&lt;/span>&lt;span class="lnt">466
&lt;/span>&lt;span class="lnt">467
&lt;/span>&lt;span class="lnt">468
&lt;/span>&lt;span class="lnt">469
&lt;/span>&lt;span class="lnt">470
&lt;/span>&lt;span class="lnt">471
&lt;/span>&lt;span class="lnt">472
&lt;/span>&lt;span class="lnt">473
&lt;/span>&lt;span class="lnt">474
&lt;/span>&lt;span class="lnt">475
&lt;/span>&lt;span class="lnt">476
&lt;/span>&lt;span class="lnt">477
&lt;/span>&lt;span class="lnt">478
&lt;/span>&lt;span class="lnt">479
&lt;/span>&lt;span class="lnt">480
&lt;/span>&lt;span class="lnt">481
&lt;/span>&lt;span class="lnt">482
&lt;/span>&lt;span class="lnt">483
&lt;/span>&lt;span class="lnt">484
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># Notes:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># - Minimal appveyor.yml file is an empty file. All sections are optional.&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># - Indent each level of configuration with 2 spaces. Do not use tabs!&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># - All section names are case-sensitive.&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># - Section names should be unique on each level.&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c">#---------------------------------#&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># general configuration #&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c">#---------------------------------#&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># version format&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1.0&lt;/span>&lt;span class="l">.{build}&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># you can use {branch} name in version format too&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># version: 1.0.{build}-{branch}&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># branches to build&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">branches&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># whitelist&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">only&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">master&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">production&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># blacklist&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">except&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">gh-pages&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># Do not build on tags (GitHub, Bitbucket, GitLab, Gitea)&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">skip_tags&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># Start builds on tags only (GitHub, BitBucket, GitLab, Gitea)&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">skip_non_tags&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># Skipping commits with particular message or from specific user&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">skip_commits&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">message&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/Created.*\.(png|jpg|jpeg|bmp|gif)/ &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Regex for matching commit message&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">author&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">John &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Commit author&amp;#39;s username, name, email or regexp maching one of these.&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># Including commits with particular message or from specific user&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">only_commits&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">message&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/build/ &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Start a new build if message contains &amp;#39;build&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">author&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">jack@company.com &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Start a new build for commit of user with email jack@company.com&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># Skipping commits affecting specific files (GitHub only). More details here: /docs/appveyor-yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c">#skip_commits:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># files:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># - docs/*&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># - &amp;#39;**/*.html&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># Including commits affecting specific files (GitHub only). More details here: /docs/appveyor-yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c">#only_commits:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># files:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># - Project-A/&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># - Project-B/&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># Do not build feature branch with open Pull Requests&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">skip_branch_with_pr&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># Maximum number of concurrent jobs for the project&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">max_jobs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c">#---------------------------------#&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># environment configuration #&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c">#---------------------------------#&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># Build worker image (VM template)&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Visual Studio 2015&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># scripts that are called at very beginning, before repo cloning&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">init&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">git config --global core.autocrlf input&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># clone directory&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">clone_folder&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">c:\projects\myproject&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># fetch repository as zip archive&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">shallow_clone&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># default is &amp;#34;false&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># set clone depth&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">clone_depth&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">5&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># clone entire repository history if not defined&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># setting up etc\hosts file&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">hosts&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">queue-server&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">127.0.0.1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">db.server.com&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">127.0.0.2&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># environment variables&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">my_var1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">value1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">my_var2&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">value2&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># this is how to set encrypted variable. Go to &amp;#34;Settings&amp;#34; -&amp;gt; &amp;#34;Encrypt YAML&amp;#34; page in account menu to encrypt data.&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">my_secure_var1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">secure&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">FW3tJ3fMncxvs58/ifSP7w==&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># environment:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># global:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># connection_string: server=12;password=13;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># service_url: https://127.0.0.1:8090&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c">#&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># matrix:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># - db: mysql&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># provider: mysql&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c">#&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># - db: mssql&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># provider: mssql&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># password:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># secure: $#(JFDA)jQ@#$&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># this is how to allow failing jobs in the matrix&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">matrix&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">fast_finish&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># set this flag to immediately finish build once one of the jobs fails.&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">allow_failures&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">platform&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">x86&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">configuration&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Debug&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">platform&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">x64&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">configuration&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Release&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># exclude configuration from the matrix. Works similarly to &amp;#39;allow_failures&amp;#39; but build not even being started for excluded combination.&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">exclude&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">platform&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">x86&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">configuration&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Debug&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># build cache to preserve files/folders between builds&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">cache&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">packages -&amp;gt; **\packages.config &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># preserve &amp;#34;packages&amp;#34; directory in the root of build folder but will reset it if packages.config is modified&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">projectA\libs&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">node_modules &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># local npm modules&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="s1">&amp;#39;%LocalAppData%\NuGet\Cache&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># NuGet &amp;lt; v3&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="s1">&amp;#39;%LocalAppData%\NuGet\v3-cache&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># NuGet v3&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># enable service required for build/tests&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">services&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">mssql2014 &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># start SQL Server 2014 Express&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">mssql2014rs &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># start SQL Server 2014 Express and Reporting Services&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">mssql2012sp1 &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># start SQL Server 2012 SP1 Express&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">mssql2012sp1rs &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># start SQL Server 2012 SP1 Express and Reporting Services&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">mssql2008r2sp2 &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># start SQL Server 2008 R2 SP2 Express&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">mssql2008r2sp2rs &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># start SQL Server 2008 R2 SP2 Express and Reporting Services&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">mysql &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># start MySQL 5.6 service&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">postgresql &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># start PostgreSQL 9.5 service&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">iis &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># start IIS&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">msmq &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># start Queuing services&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">mongodb &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># start MongoDB&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># scripts that run after cloning repository&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">install&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># by default, all script lines are interpreted as batch&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">echo This is batch&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># to run script as a PowerShell command prepend it with ps:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">ps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Write-Host &amp;#39;This is PowerShell&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># batch commands start from cmd:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">cmd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">echo This is batch again&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">cmd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">set MY_VAR=12345&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># enable patching of AssemblyInfo.* files&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">assembly_info&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">patch&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">file&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">AssemblyInfo.*&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">assembly_version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;2.2.{build}&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">assembly_file_version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;{version}&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">assembly_informational_version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;{version}&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># Automatically register private account and/or project AppVeyor NuGet feeds.&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">nuget&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">account_feed&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">project_feed&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">disable_publish_on_pr&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># disable publishing of .nupkg artifacts to account/project feeds for pull request builds&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">publish_wap_octopus&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># disable publishing of Octopus Deploy .nupkg artifacts to account/project feeds&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c">#---------------------------------#&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># build configuration #&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c">#---------------------------------#&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># build platform, i.e. x86, x64, Any CPU. This setting is optional.&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">platform&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Any CPU&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># to add several platforms to build matrix:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c">#platform:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># - x86&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># - Any CPU&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># build Configuration, i.e. Debug, Release, etc.&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">configuration&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Release&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># to add several configurations to build matrix:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c">#configuration:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># - Debug&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># - Release&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># Build settings, not to be confused with &amp;#34;before_build&amp;#34; and &amp;#34;after_build&amp;#34;.&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># &amp;#34;project&amp;#34; is relative to the original build directory and not influenced by directory changes in &amp;#34;before_build&amp;#34;.&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">build&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">parallel&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># enable MSBuild parallel builds&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">project&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">MyTestAzureCS.sln &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># path to Visual Studio solution or project&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">publish_wap&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># package Web Application Projects (WAP) for Web Deploy&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">publish_wap_xcopy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># package Web Application Projects (WAP) for XCopy deployment&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">publish_wap_beanstalk&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Package Web Applications for AWS Elastic Beanstalk deployment&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">publish_wap_octopus&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Package Web Applications for Octopus deployment&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">publish_azure_webjob&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Package Azure WebJobs for Zip Push deployment&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">publish_azure&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># package Azure Cloud Service projects and push to artifacts&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">publish_aspnet_core&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Package ASP.NET Core projects&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">publish_core_console&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Package .NET Core console projects&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">publish_nuget&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># package projects with .nuspec files and push to artifacts&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">publish_nuget_symbols&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># generate and publish NuGet symbol packages&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">include_nuget_references&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># add -IncludeReferencedProjects option while packaging NuGet artifacts&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># MSBuild verbosity level&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">verbosity&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">quiet|minimal|normal|detailed&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># scripts to run before build&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">before_build&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># to run your custom scripts instead of automatic MSBuild&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">build_script&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># scripts to run after build (working directory and environment changes are persisted from the previous steps)&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">after_build&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># scripts to run *after* solution is built and *before* automatic packaging occurs (web apps, NuGet packages, Azure Cloud Services)&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">before_package&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># to disable automatic builds&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c">#build: off&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c">#---------------------------------#&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># tests configuration #&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c">#---------------------------------#&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># to run tests against only selected assemblies and/or categories&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">test&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">assemblies&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">only&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">asm1.dll&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">asm2.dll&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">categories&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">only&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">UI&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">E2E&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># to run tests against all except selected assemblies and/or categories&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c">#test:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># assemblies:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># except:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># - asm1.dll&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># - asm2.dll&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c">#&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># categories:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># except:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># - UI&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># - E2E&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># to run tests from different categories as separate jobs in parallel&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c">#test:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># categories:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># - A # A category common for all jobs&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># - [UI] # 1st job&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># - [DAL, BL] # 2nd job&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># scripts to run before tests (working directory and environment changes are persisted from the previous steps such as &amp;#34;before_build&amp;#34;)&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">before_test&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">echo script1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">ps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Write-Host &amp;#34;script1&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># to run your custom scripts instead of automatic tests&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">test_script&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">echo This is my custom test script&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># scripts to run after tests&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">after_test&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># to disable automatic tests&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c">#test: off&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c">#---------------------------------#&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># artifacts configuration #&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c">#---------------------------------#&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">artifacts&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># pushing a single file&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">test.zip&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># pushing a single file with environment variable in path and &amp;#34;Deployment name&amp;#34; specified&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">MyProject\bin\$(configuration)&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">myapp&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># pushing entire folder as a zip archive&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">logs&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># pushing all *.nupkg files in build directory recursively&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;**\*.nupkg&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c">#---------------------------------#&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># deployment configuration #&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c">#---------------------------------#&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># providers: Local, FTP, WebDeploy, AzureCS, AzureBlob, S3, NuGet, Environment&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># provider names are case-sensitive!&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">deploy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># FTP deployment provider settings&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">provider&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">FTP&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">protocol&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ftp|ftps|sftp&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">host&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ftp.myserver.com&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">username&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">admin&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">password&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">secure&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">eYKZKFkkEvFYWX6NfjZIVw==&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">folder&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">application&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">active_mode&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">false&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">beta&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># enable alternative FTP library for &amp;#39;ftp&amp;#39; and &amp;#39;ftps&amp;#39; modes&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">debug&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># show complete FTP log&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Amazon S3 deployment provider settings&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">provider&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">S3&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">access_key_id&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">secure&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ABcd==&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">secret_access_key&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">secure&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ABcd==&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">bucket&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">my_bucket&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">folder&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">artifact&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">set_public&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">false&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Azure Blob storage deployment provider settings&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">provider&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">AzureBlob&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">storage_account_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">secure&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ABcd==&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">storage_access_key&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">secure&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ABcd==&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">container&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">my_container&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">folder&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">artifact&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Web Deploy deployment provider settings&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">provider&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">WebDeploy&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">server&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">http://www.deploy.com/myendpoint&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">website&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mywebsite&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">username&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">user&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">password&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">secure&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">eYKZKFkkEvFYWX6NfjZIVw==&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">ntlm&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">false&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">remove_files&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">false&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">app_offline&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">false&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">do_not_use_checksum&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># do not use check sum for comparing source and destination files. By default checksums are used.&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">sync_retry_attempts&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># sync attempts, max&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">sync_retry_interval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">2000&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># timeout between sync attempts, milliseconds&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">aspnet_core&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># artifact zip contains ASP.NET Core application&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">aspnet_core_force_restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># poke app&amp;#39;s web.config before deploy to force application restart&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">skip_dirs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">\\App_Data&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">skip_files&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">web.config&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">branch&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">release&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">platform&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">x86&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">configuration&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">debug&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Deploying to Azure Cloud Service&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">provider&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">AzureCS&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">subscription_id&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">secure&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">fjZIVw==&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">subscription_certificate&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">secure&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">eYKZKFkkEv...FYWX6NfjZIVw==&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">storage_account_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">my_storage&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">storage_access_key&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">secure&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ABcd==&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">service&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">my_service&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">slot&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Production&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">target_profile&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Cloud&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">artifact&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">MyPackage.cspkg&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Deploying to NuGet feed&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">provider&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">NuGet&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">server&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">https://my.nuget.server/feed&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">api_key&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">secure&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">FYWX6NfjZIVw==&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">skip_symbols&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">false&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">symbol_server&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">https://your.symbol.server/feed&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">artifact&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">MyPackage.nupkg&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Deploy to GitHub Releases&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">provider&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">GitHub&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">artifact&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/.*\.nupkg/ &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># upload all NuGet packages to release assets&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">draft&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">false&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">prerelease&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">false&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">branch&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">master &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># release from master branch only&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">APPVEYOR_REPO_TAG&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># deploy on tag push only&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Deploying to a named environment&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">provider&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Environment&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">staging&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">branch&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">staging&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">env_var1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">value1&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">env_var2&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">value2&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># scripts to run before deployment&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">before_deploy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># scripts to run after deployment&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">after_deploy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># to run your custom scripts instead of provider deployments&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">deploy_script&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># to disable deployment&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c">#deploy: off&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c">#---------------------------------#&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># global handlers #&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c">#---------------------------------#&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># on successful build&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">on_success&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">do something&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># on build failure&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">on_failure&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">do something&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># after build failure or success&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">on_finish&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">do something&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c">#---------------------------------#&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># notifications #&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c">#---------------------------------#&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">notifications&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Email&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">provider&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Email&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">to&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">user1@email.com&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">user2@email.com&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">subject&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;Build {{status}}&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># optional&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">message&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;{{message}}, {{commitId}}, ...&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># optional&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">on_build_status_changed&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># HipChat&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">provider&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">HipChat&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">auth_token&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">secure&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">RbOnSMSFKYzxzFRrxM1+XA==&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">room&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ProjectA&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">template&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;{message}, {commitId}, ...&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Slack&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">provider&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Slack&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">incoming_webhook&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">http://incoming-webhook-url&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># ...or using auth token&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">provider&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Slack&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">auth_token&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">secure&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">kBl9BlxvRMr9liHmnBs14A==&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">channel&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">development&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">template&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;{message}, {commitId}, ...&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Campfire&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">provider&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Campfire&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">account&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">appveyor&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">auth_token&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">secure&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">RifLRG8Vfyol+sNhj9u2JA==&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">room&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ProjectA&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">template&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;{message}, {commitId}, ...&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Webhook&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">provider&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Webhook&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">url&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">http://www.myhook2.com&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">headers&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">User-Agent&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">myapp 1.0&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">Authorization&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">secure&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">GhD+5xhLz/tkYY6AO3fcfQ==&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">on_build_success&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">false&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">on_build_failure&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">on_build_status_changed&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Azure Pipelines</title><link>https://sdttttt.github.io/blog/azure_pipelines/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://sdttttt.github.io/blog/azure_pipelines/</guid><description>
&lt;p>Azure Pipelinesæ˜¯ä¸€ç§äº‘æœåŠ¡ï¼Œå¯ç”¨äºè‡ªåŠ¨æ„å»ºå’Œæµ‹è¯•æ‚¨çš„ä»£ç é¡¹ç›®å¹¶å°†å…¶æä¾›ç»™å…¶ä»–ç”¨æˆ·ã€‚å®ƒå‡ ä¹é€‚ç”¨äºä»»ä½•è¯­è¨€æˆ–é¡¹ç›®ç±»å‹ã€‚&lt;/p>
&lt;p>Azure Pipelineså°†æŒç»­é›†æˆï¼ˆCIï¼‰å’ŒæŒç»­äº¤ä»˜ï¼ˆCDï¼‰ç›¸ç»“åˆï¼Œä»¥æŒç»­ä¸æ–­åœ°æµ‹è¯•å’Œæ„å»ºæ‚¨çš„ä»£ç å¹¶å°†å…¶äº¤ä»˜ç»™ä»»ä½•ç›®æ ‡ã€‚&lt;/p>
&lt;p>Azure Pipelines æ”¯æŒéå¸¸å¤šçš„è¯­è¨€ã€‚&lt;/p>
&lt;h4 id="price">Price&lt;/h4>
&lt;p>å¦‚æœä½¿ç”¨å…¬å…±é¡¹ç›®ï¼Œåˆ™Azure Pipelinesæ˜¯å…è´¹çš„ã€‚å¦‚æœæ‚¨ä½¿ç”¨ç§äººé¡¹ç›®ï¼Œåˆ™æ¯æœˆå¯ä»¥å…è´¹è¿è¡Œå¤šè¾¾1800åˆ†é’Ÿï¼ˆ30å°æ—¶ï¼‰çš„ç®¡é“ä½œä¸šã€‚äº†è§£æœ‰å…³åŸºäºå¹¶è¡Œä½œä¸šå®šä»·çš„æ›´å¤šä¿¡æ¯ã€‚&lt;/p>
&lt;p>æ˜¯ä¸æ˜¯éå¸¸çš„æ£’å‘¢ o(&lt;em>////â–½////&lt;/em>)q&lt;/p>
&lt;p>&lt;strong>è¯·éµå¾ªä»¥ä¸‹åŸºæœ¬æ­¥éª¤ï¼š&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>é…ç½®Azure Pipelinesä»¥ä½¿ç”¨æ‚¨çš„Gitå­˜å‚¨åº“ã€‚&lt;/li>
&lt;li>ç¼–è¾‘azure-pipelines.ymlæ–‡ä»¶ä»¥å®šä¹‰æ„å»ºã€‚&lt;/li>
&lt;li>å°†æ‚¨çš„ä»£ç æ¨é€åˆ°ç‰ˆæœ¬æ§åˆ¶å­˜å‚¨åº“ã€‚æ­¤æ“ä½œå°†å¯åŠ¨é»˜è®¤è§¦å‘å™¨ä»¥æ„å»ºå’Œéƒ¨ç½²ï¼Œç„¶åç›‘è§†ç»“æœã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="ruby">Ruby&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="c"># Ruby&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># Package your Ruby project.&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># Add steps that install rails, analyze code, save build artifacts, deploy, and more:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># https://docs.microsoft.com/azure/devops/pipelines/languages/ruby&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">trigger&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">branches&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># åªæœ‰ä»¥ä¸‹åˆ†æ”¯æäº¤æ‰ä¼šè§¦å‘CICD&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">include&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">master&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">sdtttttt&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">CICD&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">depend*&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">paths&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># åªæœ‰ä»¥ä¸‹æ–‡ä»¶æäº¤æ—¶ä¸è§¦å‘CICD&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">exclude&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">README.md&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">appveyor.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">pool&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">vmImage&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;ubuntu-18.04&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">steps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>- &lt;span class="nt">task&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">UseRubyVersion@0&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">inputs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># å¤©æ€çš„ï¼Œå¾®è½¯æä¾›çš„Ubuntu é•œåƒå·²ç»ä¸æ”¯æŒ Ruby2.6.3&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">versionSpec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;&amp;gt;= 2.6.3&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c"># Rails å†…ç½®æ•°æ®åº“ SQLite3 éœ€è¦ä¾èµ–ä»¥ä¸‹å·¥å…·&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>- &lt;span class="nt">script&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">sudo apt-get -yqq install libsqlite3-dev libpq-dev&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">displayName&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">install sqlite3&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>- &lt;span class="nt">script&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;span class="sd"> gem install bundler
&lt;/span>&lt;span class="sd"> bundle install --retry=3 --jobs=4&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">displayName&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;bundle install&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>- &lt;span class="nt">script&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">bundle exec rake&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">displayName&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;bundle exec rake&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Rails Development</title><link>https://sdttttt.github.io/blog/rails_development/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://sdttttt.github.io/blog/rails_development/</guid><description>
&lt;h3 id="webpacker">Webpacker&lt;/h3>
&lt;p>Rails 6ç‰ˆæœ¬å¼€å§‹ä¾èµ–Webpackerï¼Œåœ¨è¿è¡Œä¹‹å‰å¿…é¡»å…ˆå®‰è£…Webpackerè¿™ç©æ„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">rails webpacker:install
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœéœ€è¦å®‰è£…å‰ç«¯æ¡†æ¶ï¼Œè¯·ä½¿ç”¨yarnæ¥å®‰è£…ï¼Œè¿™æ ·éƒ¨ç½²çš„æ—¶å€™èƒ½äº«å—åˆ°webpackeræ‰“åŒ…ä¾¿åˆ©ã€‚&lt;/p>
&lt;h3 id="production">production&lt;/h3>
&lt;p>Rails 6 å¯åŠ¨æ—¶éœ€è¦ä¸€ä¸²Keyä½œä¸ºåŠ å¯†çš„saltï¼Œkeyä¸èƒ½éšæ„ç”Ÿæˆã€‚
ç”Ÿæˆkeyæ—¶ï¼Œè¯·åˆ é™¤configä¸‹çš„credentials.enc.yml å’Œ master.key æ–‡ä»¶ã€‚
ç„¶åè¿è¡Œ&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">rails credentials:edit
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶åRailsè®¿é—®é™æ€èµ„æºï¼Œéœ€è¦ä½¿ç”¨webpackeræ‰“åŒ…ç¼–è¯‘åçš„èµ„äº§ã€‚
è¿è¡Œ&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-shell" data-lang="shell">rails assets:precompile
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Rails 6 åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹è®¤ä¸ºä½ ä½¿ç”¨ Apache å’Œ Nginx ç¼“å­˜ç¼–è¯‘åçš„é™æ€èµ„äº§ã€‚å¦‚æœä½ ä¸ä½¿ç”¨ä»–ä»¬ï¼Œéœ€è¦&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-ruby" data-lang="ruby">&lt;span class="c1"># config/environments/production.rb&lt;/span>
&lt;span class="n">config&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">public_file_server&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">enabled&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kp">true&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è®°ä½ï¼Œæ‰“åŒ…ä¹‹åçš„jsä»¥åŠcssç»Ÿä¸€å«application.js/css åœ¨viewé¡µé¢å¼•ç”¨æ—¶éœ€è¦å¼•ç”¨applicationè¿™ä¸ªåå­—ã€‚å…¶ä»–çš„ä¼šæŠ¥é”™&lt;/p></description></item><item><title>Rails ENV</title><link>https://sdttttt.github.io/blog/ror_environment_config/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://sdttttt.github.io/blog/ror_environment_config/</guid><description>
&lt;h1 id="rails-env">Rails ENV&lt;/h1>
&lt;p>ç¯å¢ƒé…ç½®å‚è€ƒ Ruby China ç¤¾åŒºçš„ Wiki&lt;/p>
&lt;h3 id="windows-10">Windows 10&lt;/h3>
&lt;p>åœ¨ Windowns 10 çš„ç¯å¢ƒä¸‹å’ŒLinuxä¸Šå·®ä¸å¤šï¼Œä¸è¿‡ä¸éœ€è¦RVM&lt;/p>
&lt;ul>
&lt;li>é¦–å…ˆåœ¨Rubyå®˜æ–¹ç½‘ç«™ä¸‹è½½å¥½å®‰è£…åŒ…&lt;/li>
&lt;li>ä¹‹åä½¿ç”¨RubyChinaæä¾›çš„Sourceæ›¿æ¢Gemçš„Source&lt;/li>
&lt;li>ä¹‹åä½¿ç”¨Gemä¸‹è½½ Bundler å’Œ Rails&lt;/li>
&lt;li>åˆ›å»ºRailsé¡¹ç›®è¿è¡Œå³å¯&lt;/li>
&lt;/ul>
&lt;p>æœ‰ä¸€ä¸ªè½¯ä»¶å«åš &lt;code>RailsInstaller&lt;/code> å¯ä»¥ç›´æ¥å¸®ä½ çœä¸‹1å’Œ3æ­¥ä¹Ÿå°±æ˜¯ç›´æ¥å¸®ä½ å®‰è£…å¥½äº†Rubyå’ŒRailsè¿˜æœ‰Gemï¼Œbundlerã€‚
ä½†æ˜¯ğŸ™…æˆ‘ç›®å‰ä½¿ç”¨çš„Railsinstalleræœ‰ç‚¹é—®é¢˜ã€‚ä»–çš„Rubyç‰ˆæœ¬æ˜¯2.3ï¼Œrailsç‰ˆæœ¬æ˜¯5ï¼Œrails5ä¾èµ–çš„æ˜¯ &amp;gt;= 2.4ç‰ˆæœ¬çš„rubyï¼Œè¿™å°±æœ‰é—®é¢˜äº†ã€‚æˆ‘ä¹Ÿæ²¡æ¥ç€ç”¨è¿™ä¸ªè½¯ä»¶äº†ã€‚&lt;/p>
&lt;p>åœ¨rails6ä¸­åŠ å…¥äº†&lt;code>Webpacker&lt;/code>çš„æ‰“åŒ…å·¥å…·ï¼Œè¿è¡Œä¹‹å‰éœ€è¦å…ˆå®‰è£…webpackerä¸ç„¶ä¼šæŠ¥é”™ã€‚ &lt;code>$ rails webpacker:install&lt;/code>&lt;/p>
&lt;p>æ³¨æ„åœ¨ä¸Šé¢å¯èƒ½ä¼šæœ‰ç‚¹é—®é¢˜ï¼ŒGemåˆ›å»ºRailsé¡¹ç›®çš„æ—¶å€™ä¼šä¸‹è½½å„ç§ä¾èµ–ï¼Œè¿™äº›ä¾èµ–æœ‰å¯èƒ½ä¼šåœ¨Windowsçš„ç¯å¢ƒä¸Šå‡ºç°é—®é¢˜ï¼Œæ¯”å¦‚æˆ‘é‡åˆ°çš„ SQLite3,æ‰€ä»¥Rubyæœ€å¥½è¿˜æ˜¯ä¸è¦åœ¨Windownsä¸Šè¿è¡Œã€‚&lt;/p>
&lt;p>è¿˜æœ‰Rails æ˜¯è¦ä¾èµ– Yarnå’Œ nodejs æœ€å¥½æ˜¯10ç‰ˆæœ¬ä»¥ä¸Š&lt;/p>
&lt;h2 id="development-note">Development Note&lt;/h2>
&lt;p>èŠ±äº†å¾ˆé•¿æ—¶é—´å»å§Railså’Œä¸€äº›å¤§å‰ç«¯çš„æ¡†æ¶åˆäºŒä¸ºä¸€ï¼Œæœ€åä»¥å¤±è´¥è€Œå‘Šç»ˆã€‚
Railsç»ˆç©¶æ˜¯ä¸ªå…¨æ ˆå¼çš„Webæ¡†æ¶ï¼Œè€è€å®å®ç”¨ç®€å•çš„å°±è¡Œã€‚&lt;/p>
&lt;ul>
&lt;li>Bootstrap Configuration&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-ruby" data-lang="ruby">&lt;span class="c1"># =&amp;gt; é¦–å…ˆåœ¨ Gemfile ä¸­åŠ å…¥&lt;/span>
&lt;span class="n">gem&lt;/span> &lt;span class="s1">&amp;#39;bootstrap&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;~&amp;gt; 4.3.1&amp;#39;&lt;/span>
&lt;span class="n">gem&lt;/span> &lt;span class="s1">&amp;#39;jquery-rails&amp;#39;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¹‹åå°†&lt;code>app\assets\stylesheets\application.css&lt;/code> æ”¹ä¸º scss&lt;/p>
&lt;p>åˆ æ‰æ‰€æœ‰çš„ä¸œè¥¿åŒ…æ‹¬æ³¨é‡Š&lt;/p>
&lt;p>åŠ å…¥&lt;code>@import &amp;ldquo;bootstrap&amp;rdquo;;&lt;/code>&lt;/p>
&lt;hr>
&lt;h2 id="ruby-note-todo">Ruby Note Todo&lt;/h2>
&lt;pre>&lt;code>Error running 'requirements_debian_libs_install g++ gcc autoconf automake bison libc6-dev libffi-dev libgdbm-dev libncurses5-dev libsqlite3-dev libtool libyaml-dev make pkg-config sqlite3 zlib1g-dev libgmp-dev libreadline-dev libssl-dev',
please read /home/sdttttt/.rvm/log/1573869340/package_install_g++_gcc_autoconf_automake_bison_libc6-dev_libffi-dev_libgdbm-dev_libncurses5-dev_libsqlite3-dev_libtool_libyaml-dev_make_pkg-config_sqlite3_zlib1g-dev_libgmp-dev_libreadline-dev_libssl-dev.log
Requirements installation failed with status: 100.
&lt;/code>&lt;/pre>&lt;p>ç¢°åˆ°è¿™ç§é”™è¯¯ä¸éœ€è¦ç´§å¼ ï¼Œ&lt;code>rvm requirements&lt;/code> command çš„åŸç†å°±æ˜¯ä¼šä½¿ç”¨ä½ ç³»ç»Ÿçš„åŒ…ç®¡ç†å·¥å…·å»ä¸‹è½½è¿™äº›ä¾èµ–ï¼Œæ‰€ä»¥åŸå› å¾ˆç®€å•ï¼Œä½ çš„æºé‡Œæ‰¾ä¸åˆ°è¿™äº›ä¾èµ–å°±ä¼šæŠ¥å‡º100çš„é”™è¯¯ã€‚
æ˜¯Ubuntuçš„è¯ä¸‹é¢æˆ‘æä¾›äº†æº&lt;/p>
&lt;pre>&lt;code>#æ·»åŠ é˜¿é‡Œæº
deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse
&lt;/code>&lt;/pre></description></item><item><title>Socks5</title><link>https://sdttttt.github.io/blog/socks5/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://sdttttt.github.io/blog/socks5/</guid><description>
&lt;p>SOCKS æ˜¯ä¸€ç§ç½‘ç»œä¼ è¾“åè®®ï¼Œä¸»è¦ç”¨äºå®¢æˆ·ç«¯ä¸å¤–ç½‘æœåŠ¡å™¨ä¹‹é—´é€šè®¯çš„ä¸­é—´ä¼ é€’ï¼ŒSOCKS æ˜¯&amp;quot;SOCKetS&amp;quot;çš„ç¼©å†™ã€‚
SOCKS5 æ˜¯ SOCKS4 çš„å‡çº§ç‰ˆï¼Œå…¶ä¸»è¦å¤šäº†é‰´å®šã€IPv6ã€UDP æ”¯æŒã€‚&lt;/p>
&lt;p>SOCKS5 åè®®å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š&lt;/p>
&lt;ul>
&lt;li>(1) åè®®ç‰ˆæœ¬åŠè®¤è¯æ–¹å¼&lt;/li>
&lt;li>(2) æ ¹æ®è®¤è¯æ–¹å¼æ‰§è¡Œå¯¹åº”çš„è®¤è¯&lt;/li>
&lt;li>(3) è¯·æ±‚ä¿¡æ¯&lt;/li>
&lt;/ul>
&lt;h4 id="1åè®®ç‰ˆæœ¬åŠè®¤è¯æ–¹å¼">ï¼ˆ1ï¼‰åè®®ç‰ˆæœ¬åŠè®¤è¯æ–¹å¼&lt;/h4>
&lt;p>åˆ›å»ºä¸ SOCKS5 æœåŠ¡å™¨çš„ TCP è¿æ¥å&lt;strong>å®¢æˆ·ç«¯&lt;/strong>éœ€è¦å…ˆå‘é€è¯·æ±‚æ¥åè®®ç‰ˆæœ¬åŠè®¤è¯æ–¹å¼ï¼Œ&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>VER&lt;/th>
&lt;th>NMETHODS&lt;/th>
&lt;th>METHODS&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>1&lt;/td>
&lt;td>1&lt;/td>
&lt;td>1-255&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;ul>
&lt;li>
&lt;p>VER æ˜¯ SOCKS ç‰ˆæœ¬ï¼Œè¿™é‡Œåº”è¯¥æ˜¯ 0x05ï¼›&lt;/p>
&lt;/li>
&lt;li>
&lt;p>NMETHODS æ˜¯ METHODS éƒ¨åˆ†çš„é•¿åº¦ï¼›&lt;/p>
&lt;/li>
&lt;li>
&lt;p>METHODS æ˜¯å®¢æˆ·ç«¯æ”¯æŒçš„è®¤è¯æ–¹å¼åˆ—è¡¨ï¼Œæ¯ä¸ªæ–¹æ³•å  1 å­—èŠ‚ã€‚å½“å‰çš„å®šä¹‰æ˜¯ï¼š&lt;/p>
&lt;ul>
&lt;li>0x00 ä¸éœ€è¦è®¤è¯&lt;/li>
&lt;li>0x01 GSSAPI&lt;/li>
&lt;li>0x02 ç”¨æˆ·åã€å¯†ç è®¤è¯&lt;/li>
&lt;li>0x03 - 0x7F ç”± IANA åˆ†é…ï¼ˆä¿ç•™ï¼‰&lt;/li>
&lt;li>0x80 - 0xFE ä¸ºç§äººæ–¹æ³•ä¿ç•™&lt;/li>
&lt;li>0xFF æ— å¯æ¥å—çš„æ–¹æ³•&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>æœåŠ¡å™¨&lt;/strong>å›å¤å®¢æˆ·ç«¯å¯ç”¨æ–¹æ³•ï¼š&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>VER&lt;/th>
&lt;th>METHOD&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>1&lt;/td>
&lt;td>1&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;ul>
&lt;li>VER æ˜¯ SOCKS ç‰ˆæœ¬ï¼Œè¿™é‡Œåº”è¯¥æ˜¯ 0x05ï¼›&lt;/li>
&lt;li>METHOD æ˜¯æœåŠ¡ç«¯é€‰ä¸­çš„æ–¹æ³•ã€‚å¦‚æœè¿”å› 0xFF è¡¨ç¤ºæ²¡æœ‰ä¸€ä¸ªè®¤è¯æ–¹æ³•è¢«é€‰ä¸­ï¼Œå®¢æˆ·ç«¯éœ€è¦å…³é—­è¿æ¥ã€‚&lt;/li>
&lt;/ul>
&lt;p>ä»£ç å®ç°ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="kd">type&lt;/span> &lt;span class="nx">ProtocolVersion&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">VER&lt;/span> &lt;span class="kt">uint8&lt;/span>
&lt;span class="nx">NMETHODS&lt;/span> &lt;span class="kt">uint8&lt;/span>
&lt;span class="nx">METHODS&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">uint8&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">ProtocolVersion&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">handshake&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">conn&lt;/span> &lt;span class="nx">net&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Conn&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">error&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">b&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nb">make&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="kt">byte&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">255&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nx">n&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">conn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Read&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">err&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">VER&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="c1">//ReadByte reads and returns a single byteï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºsocksçš„ç‰ˆæœ¬å·
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">NMETHODS&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="c1">//nmethodsæ˜¯è®°å½•methodsçš„é•¿åº¦çš„ã€‚nmethodsçš„é•¿åº¦æ˜¯1ä¸ªå­—èŠ‚
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="nx">n&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">NMETHODS&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;åè®®é”™è¯¯, sNMETHODSä¸å¯¹&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">METHODS&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">NMETHODS&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="c1">//è¯»å–æŒ‡å®šé•¿åº¦ä¿¡æ¯ï¼Œè¯»å–æ­£å¥½len(buf)é•¿åº¦çš„å­—èŠ‚ã€‚å¦‚æœå­—èŠ‚æ•°ä¸æ˜¯æŒ‡å®šé•¿åº¦ï¼Œåˆ™è¿”å›é”™è¯¯ä¿¡æ¯å’Œæ­£ç¡®çš„å­—èŠ‚æ•°
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">VER&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">5&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;è¯¥åè®®ä¸æ˜¯socks5åè®®&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="c1">//æœåŠ¡å™¨å›åº”å®¢æˆ·ç«¯æ¶ˆæ¯:
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">//ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºç‰ˆæœ¬å·ä¸º5ï¼Œå³socks5åè®®ï¼Œ
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="c1">// ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºæœåŠ¡ç«¯é€‰ä¸­çš„è®¤è¯æ–¹æ³•ï¼Œ0å³æ— éœ€å¯†ç è®¿é—®, 2è¡¨ç¤ºéœ€è¦ç”¨æˆ·åå’Œå¯†ç è¿›è¡ŒéªŒè¯ã€‚
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">resp&lt;/span> &lt;span class="o">:=&lt;/span>&lt;span class="p">[]&lt;/span>&lt;span class="kt">byte&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">}&lt;/span>
&lt;span class="nx">conn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">resp&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="2æ ¹æ®è®¤è¯æ–¹å¼æ‰§è¡Œå¯¹åº”çš„è®¤è¯">ï¼ˆ2ï¼‰æ ¹æ®è®¤è¯æ–¹å¼æ‰§è¡Œå¯¹åº”çš„è®¤è¯&lt;/h4>
&lt;p>SOCKS5 åè®®æä¾› 5 ç§è®¤è¯æ–¹å¼ï¼š&lt;/p>
&lt;ul>
&lt;li>0x00 ä¸éœ€è¦è®¤è¯&lt;/li>
&lt;li>0x01 GSSAPI&lt;/li>
&lt;li>0x02 ç”¨æˆ·åã€å¯†ç è®¤è¯&lt;/li>
&lt;li>0x03 - 0x7F ç”± IANA åˆ†é…ï¼ˆä¿ç•™ï¼‰&lt;/li>
&lt;li>0x80 - 0xFE ä¸ºç§äººæ–¹æ³•ä¿ç•™&lt;/li>
&lt;/ul>
&lt;p>è¿™é‡Œå°±ä¸»è¦ä»‹ç»ç”¨æˆ·åã€å¯†ç è®¤è¯ã€‚
åœ¨å®¢æˆ·ç«¯ã€æœåŠ¡ç«¯åå•†ä½¿ç”¨ç”¨æˆ·åå¯†ç è®¤è¯åï¼Œå®¢æˆ·ç«¯å‘å‡ºç”¨æˆ·åå¯†ç ï¼š&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>é‰´å®šåè®®ç‰ˆæœ¬&lt;/th>
&lt;th>ç”¨æˆ·åé•¿åº¦&lt;/th>
&lt;th>ç”¨æˆ·å&lt;/th>
&lt;th>å¯†ç é•¿åº¦&lt;/th>
&lt;th>å¯†ç &lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>1&lt;/td>
&lt;td>1&lt;/td>
&lt;td>åŠ¨æ€&lt;/td>
&lt;td>1&lt;/td>
&lt;td>åŠ¨æ€&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>æœåŠ¡å™¨é‰´å®šåå‘å‡ºå¦‚ä¸‹å›åº”ï¼š&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>é‰´å®šåè®®ç‰ˆæœ¬&lt;/th>
&lt;th>é‰´å®šçŠ¶æ€&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>1&lt;/td>
&lt;td>1&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>å…¶ä¸­é‰´å®šçŠ¶æ€ 0x00 è¡¨ç¤ºæˆåŠŸï¼Œ0x01 è¡¨ç¤ºå¤±è´¥ã€‚&lt;/p>
&lt;p>ä»£ç å®ç°ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Socks5Auth&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">VER&lt;/span> &lt;span class="kt">uint8&lt;/span>
&lt;span class="nx">ULEN&lt;/span> &lt;span class="kt">uint8&lt;/span>
&lt;span class="nx">UNAME&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;span class="nx">PLEN&lt;/span> &lt;span class="kt">uint8&lt;/span>
&lt;span class="nx">PASSWD&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Socks5Auth&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">authenticate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">conn&lt;/span> &lt;span class="nx">net&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Conn&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">error&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">b&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nb">make&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="kt">byte&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">128&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nx">n&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">conn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Read&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">{&lt;/span>
&lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">err&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">VER&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">VER&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">5&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;è¯¥åè®®ä¸æ˜¯socks5åè®®&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ULEN&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">UNAME&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">string&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ULEN&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">PLEN&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ULEN&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">PASSWD&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">string&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">n&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">PLEN&lt;/span>&lt;span class="p">):&lt;/span>&lt;span class="nx">n&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">UNAME&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">PASSWD&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="nx">username&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">UNAME&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="nx">passwd&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">PASSWD&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;è´¦å·å¯†ç é”™è¯¯&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> å›åº”å®¢æˆ·ç«¯,å“åº”å®¢æˆ·ç«¯è¿æ¥æˆåŠŸ
&lt;/span>&lt;span class="cm"> The server verifies the supplied UNAME and PASSWD, and sends the
&lt;/span>&lt;span class="cm"> following response:
&lt;/span>&lt;span class="cm"> +----+--------+
&lt;/span>&lt;span class="cm"> |VER | STATUS |
&lt;/span>&lt;span class="cm"> +----+--------+
&lt;/span>&lt;span class="cm"> | 1 | 1 |
&lt;/span>&lt;span class="cm"> +----+--------+
&lt;/span>&lt;span class="cm"> A STATUS field of X&amp;#39;00&amp;#39; indicates success. If the server returns a
&lt;/span>&lt;span class="cm"> `failure&amp;#39; (STATUS value other than X&amp;#39;00&amp;#39;) status, it MUST close the
&lt;/span>&lt;span class="cm"> connection.
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="nx">resp&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">byte&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="mh">0x05&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0x00&lt;/span>&lt;span class="p">}&lt;/span>
&lt;span class="nx">conn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">resp&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½†å…¶å®ï¼Œç°åœ¨å¤§å®¶éƒ½ä¹ æƒ¯è‡ªå·±é‡‡ç”¨åŠ å¯†æµçš„æ–¹å¼è¿›è¡ŒåŠ å¯†ï¼Œå¾ˆå°‘é‡‡ç”¨ç”¨æˆ·åå¯†ç çš„å½¢å¼è¿›è¡ŒåŠ å¯†ï¼Œåé¢ç« èŠ‚ä¼šä»‹ç»ä¸€ç§å¯¹ SOCKS çš„æ··æ·†åŠ å¯†æ–¹å¼ã€‚&lt;/p>
&lt;h4 id="3è¯·æ±‚ä¿¡æ¯">ï¼ˆ3ï¼‰è¯·æ±‚ä¿¡æ¯&lt;/h4>
&lt;p>è®¤è¯ç»“æŸåå®¢æˆ·ç«¯å°±å¯ä»¥å‘é€è¯·æ±‚ä¿¡æ¯ã€‚å¦‚æœè®¤è¯æ–¹æ³•æœ‰ç‰¹æ®Šå°è£…è¦æ±‚ï¼Œè¯·æ±‚å¿…é¡»æŒ‰ç…§æ–¹æ³•æ‰€å®šä¹‰çš„æ–¹å¼è¿›è¡Œå°è£…è§£å¯†ï¼Œå…¶åŸå§‹æ ¼å¼å¦‚ä¸‹ï¼š&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>VER&lt;/th>
&lt;th>CMD&lt;/th>
&lt;th>RSV&lt;/th>
&lt;th>ATYP&lt;/th>
&lt;th>DST.ADDR&lt;/th>
&lt;th>DST.PORT&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>1&lt;/td>
&lt;td>1&lt;/td>
&lt;td>0x00&lt;/td>
&lt;td>1&lt;/td>
&lt;td>åŠ¨æ€&lt;/td>
&lt;td>2&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;ul>
&lt;li>VER æ˜¯ SOCKS ç‰ˆæœ¬ï¼Œè¿™é‡Œåº”è¯¥æ˜¯ 0x05ï¼›&lt;/li>
&lt;li>CMD æ˜¯ SOCK çš„å‘½ä»¤ç 
&lt;ul>
&lt;li>0x01 è¡¨ç¤º CONNECT è¯·æ±‚&lt;/li>
&lt;li>0x02 è¡¨ç¤º BIND è¯·æ±‚&lt;/li>
&lt;li>0x03 è¡¨ç¤º UDP è½¬å‘&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>RSV 0x00ï¼Œä¿ç•™&lt;/li>
&lt;li>ATYP DST.ADDR ç±»å‹&lt;/li>
&lt;li>DST.ADDR ç›®çš„åœ°å€
&lt;ul>
&lt;li>0x01 IPv4 åœ°å€ï¼ŒDST.ADDR éƒ¨åˆ† 4 å­—èŠ‚é•¿åº¦&lt;/li>
&lt;li>0x03 åŸŸåï¼ŒDST.ADDR éƒ¨åˆ†ç¬¬ä¸€ä¸ªå­—èŠ‚ä¸ºåŸŸåé•¿åº¦ï¼ŒDST.ADDR å‰©ä½™çš„å†…å®¹ä¸ºåŸŸåï¼Œæ²¡æœ‰\0 ç»“å°¾ã€‚&lt;/li>
&lt;li>0x04 IPv6 åœ°å€ï¼Œ16 ä¸ªå­—èŠ‚é•¿åº¦ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>DST.PORT ç½‘ç»œå­—èŠ‚åºè¡¨ç¤ºçš„ç›®çš„ç«¯å£&lt;/li>
&lt;/ul>
&lt;p>ä»£ç å®ç°ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Socks5Resolution&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">VER&lt;/span> &lt;span class="kt">uint8&lt;/span>
&lt;span class="nx">CMD&lt;/span> &lt;span class="kt">uint8&lt;/span>
&lt;span class="nx">RSV&lt;/span> &lt;span class="kt">uint8&lt;/span>
&lt;span class="nx">ATYP&lt;/span> &lt;span class="kt">uint8&lt;/span>
&lt;span class="nx">DSTADDR&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">byte&lt;/span>
&lt;span class="nx">DSTPORT&lt;/span> &lt;span class="kt">uint16&lt;/span>
&lt;span class="nx">DSTDOMAIN&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;span class="nx">RAWADDR&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">net&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">TCPAddr&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="kd">func&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Socks5Resolution&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">lstRequest&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">conn&lt;/span> &lt;span class="nx">net&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Conn&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">error&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">b&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nb">make&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="kt">byte&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">128&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nx">n&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">conn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Read&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="nx">n&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="mi">7&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;è¯·æ±‚åè®®é”™è¯¯&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">VER&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">VER&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">5&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;è¯¥åè®®ä¸æ˜¯socks5åè®®&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">CMD&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">CMD&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;å®¢æˆ·ç«¯è¯·æ±‚ç±»å‹ä¸ä¸ºä»£ç†è¿æ¥, å…¶ä»–åŠŸèƒ½æš‚æ—¶ä¸æ”¯æŒ.&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">RSV&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="c1">//RSVä¿ç•™å­—ç«¯ï¼Œå€¼é•¿åº¦ä¸º1ä¸ªå­—èŠ‚
&lt;/span>&lt;span class="c1">&lt;/span>
&lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ATYP&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="k">switch&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ATYP&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">case&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>
&lt;span class="c1">// IP V4 address: X&amp;#39;01&amp;#39;
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DSTADDR&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">4&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="nx">net&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">IPv4len&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="k">case&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">:&lt;/span>
&lt;span class="c1">// DOMAINNAME: X&amp;#39;03&amp;#39;
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DSTDOMAIN&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">string&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nx">n&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="nx">ipAddr&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">net&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ResolveIPAddr&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ip&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DSTDOMAIN&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">err&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DSTADDR&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">ipAddr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">IP&lt;/span>
&lt;span class="k">case&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">:&lt;/span>
&lt;span class="c1">// IP V6 address: X&amp;#39;04&amp;#39;
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DSTADDR&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">4&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="nx">net&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">IPv6len&lt;/span>&lt;span class="p">]&lt;/span>
&lt;span class="k">default&lt;/span>&lt;span class="p">:&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="nx">errors&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;IPåœ°å€é”™è¯¯&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DSTPORT&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">binary&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">BigEndian&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Uint16&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">n&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nx">n&lt;/span>&lt;span class="p">])&lt;/span>
&lt;span class="c1">// DSTADDRå…¨éƒ¨æ¢æˆIPåœ°å€ï¼Œå¯ä»¥é˜²æ­¢DNSæ±¡æŸ“å’Œå°æ€
&lt;/span>&lt;span class="c1">&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">RAWADDR&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">net&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">TCPAddr&lt;/span>&lt;span class="p">{&lt;/span>
&lt;span class="nx">IP&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DSTADDR&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nx">Port&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">DSTPORT&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="cm">/**
&lt;/span>&lt;span class="cm"> å›åº”å®¢æˆ·ç«¯,å“åº”å®¢æˆ·ç«¯è¿æ¥æˆåŠŸ
&lt;/span>&lt;span class="cm"> +----+-----+-------+------+----------+----------+
&lt;/span>&lt;span class="cm"> |VER | REP | RSV | ATYP | BND.ADDR | BND.PORT |
&lt;/span>&lt;span class="cm"> +----+-----+-------+------+----------+----------+
&lt;/span>&lt;span class="cm"> | 1 | 1 | X&amp;#39;00&amp;#39; | 1 | Variable | 2 |
&lt;/span>&lt;span class="cm"> +----+-----+-------+------+----------+----------+
&lt;/span>&lt;span class="cm"> */&lt;/span>
&lt;span class="nx">resp&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">byte&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="mh">0x05&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0x00&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0x00&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0x01&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0x00&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0x00&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0x00&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0x00&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0x00&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0x00&lt;/span>&lt;span class="p">}&lt;/span>
&lt;span class="nx">conn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">resp&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="4æœ€åå°†ä¿¡æ¯è¿›è¡Œè½¬å‘å³å¯">ï¼ˆ4ï¼‰æœ€åå°†ä¿¡æ¯è¿›è¡Œè½¬å‘å³å¯&lt;/h4>
&lt;p>ä»£ç å®ç°:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre class="chroma">&lt;code class="language-golang" data-lang="golang"> &lt;span class="nx">wg&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nb">new&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">sync&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">WaitGroup&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nx">wg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="k">go&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">defer&lt;/span> &lt;span class="nx">wg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Done&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="k">defer&lt;/span> &lt;span class="nx">dstServer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Close&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="nx">io&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Copy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">dstServer&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">client&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">}()&lt;/span>
&lt;span class="k">go&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="k">defer&lt;/span> &lt;span class="nx">wg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Done&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="k">defer&lt;/span> &lt;span class="nx">client&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Close&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="nx">io&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Copy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">client&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">dstServer&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">}()&lt;/span>
&lt;span class="nx">wg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Wait&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>å›ºå®šæ­é…</title><link>https://sdttttt.github.io/blog/gudingdapei/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://sdttttt.github.io/blog/gudingdapei/</guid><description>
&lt;h2 id="æ¥ä¸å®šå¼è€Œä¸æ¥åŠ¨åè¯ä½œå®¾è¯­çš„24ä¸ªå¸¸ç”¨åŠ¨è¯">æ¥ä¸å®šå¼ï¼ˆè€Œä¸æ¥åŠ¨åè¯ï¼‰ä½œå®¾è¯­çš„24ä¸ªå¸¸ç”¨åŠ¨è¯&lt;/h2>
&lt;p>afford to do sth. è´Ÿæ‹…å¾—èµ·åšæŸäº‹&lt;/p>
&lt;p>agree to do sth. åŒæ„åšæŸäº‹&lt;/p>
&lt;p>arrange to do sth.å®‰æ’åšæŸäº‹&lt;/p>
&lt;p>ask to do sth. è¦æ±‚åšæŸäº‹&lt;/p>
&lt;p>beg to do sth. è¯·æ±‚åšæŸäº‹&lt;/p>
&lt;p>care to do sth. æƒ³è¦åšæŸäº‹&lt;/p>
&lt;p>choose to do sth. å†³å®šåšæŸäº‹&lt;/p>
&lt;p>decide to do sth. å†³å®šåšæŸäº‹&lt;/p>
&lt;p>demand to do sth. è¦æ±‚åšæŸäº‹&lt;/p>
&lt;p>determine to do sth. å†³å¿ƒåšæŸäº‹&lt;/p>
&lt;p>expect to do sth. æœŸå¾…åšæŸäº‹&lt;/p>
&lt;p>fear to do sth. å®³æ€•åšæŸäº‹&lt;/p>
&lt;p>help to do sth. å¸®åŠ©åšæŸäº‹&lt;/p>
&lt;p>hope to do sth. å¸Œæœ›åšæŸäº‹&lt;/p>
&lt;p>learn to do sth. å­¦ä¹ åšæŸäº‹&lt;/p>
&lt;p>manage to do sth. è®¾æ³•åšæŸäº‹&lt;/p>
&lt;p>offer to do sth. ä¸»åŠ¨æå‡ºåšæŸäº‹&lt;/p>
&lt;p>plan to do sth. è®¡åˆ’åšæŸäº‹&lt;/p>
&lt;p>prepare to do sth. å‡†å¤‡åšæŸäº‹&lt;/p>
&lt;p>pretend to do sth. å‡è£…åšæŸäº‹&lt;/p>
&lt;p>promise to do sth. ç­”åº”åšæŸäº‹&lt;/p>
&lt;p>refuse to do sth. æ‹’ç»åšæŸäº‹&lt;/p>
&lt;p>want to do sth. æƒ³è¦åšæŸäº‹&lt;/p>
&lt;p>wish to do sth. å¸Œæœ›åšæŸäº‹&lt;/p>
&lt;p>æ³¨ï¼šæœ‰äº›ä¸åŠç‰©åŠ¨è¯åä¹ æƒ¯ä¸Šä¹Ÿæ¥ä¸å®šå¼ï¼Œä¸æ¥åŠ¨åè¯ï¼š&lt;/p>
&lt;p>aim to do sth. æ‰“ç®—åšæŸäº‹&lt;/p>
&lt;p>fail to do sth. æœªèƒ½åšæŸäº‹&lt;/p>
&lt;p>long to do sth. æ¸´æœ›åšæŸäº‹&lt;/p>
&lt;p>happen to do sth. ç¢°å·§åšæŸäº‹&lt;/p>
&lt;p>hesitate to do sth. çŠ¹è±«åšæŸäº‹&lt;/p>
&lt;p>struggle to do sth. åŠªåŠ›åšæŸäº‹&lt;/p>
&lt;h2 id="æ¥ä¸å®šå¼ä½œå®¾è¡¥çš„36ä¸ªå¸¸ç”¨åŠ¨è¯">æ¥ä¸å®šå¼ä½œå®¾è¡¥çš„36ä¸ªå¸¸ç”¨åŠ¨è¯&lt;/h2>
&lt;p>advise sb. to do sth. å»ºè®®æŸäººåšæŸäº‹&lt;/p>
&lt;p>allow sb. to do sth. å…è®¸æŸäººåšæŸäº‹&lt;/p>
&lt;p>ask sb. to do sth.è¯·ï¼ˆå«ï¼‰æŸäººåšæŸäº‹&lt;/p>
&lt;p>bear sb. to do sth.å¿å—æŸäººåšæŸäº‹&lt;/p>
&lt;p>beg sb. to do sth. è¯·æ±‚æŸäººåšæŸäº‹&lt;/p>
&lt;p>cause sb. to do sth. å¯¼è‡´æŸäººåšæŸäº‹&lt;/p>
&lt;p>command sb. to do sth. å‘½ä»¤æŸäººåšæŸäº‹&lt;/p>
&lt;p>drive sb. to do sth .é©±ä½¿æŸäººåšæŸäº‹&lt;/p>
&lt;p>elect sb. to do sth. é€‰ä¸¾æŸäººåšæŸäº‹&lt;/p>
&lt;p>encourage sb. to do sth. é¼“åŠ±æŸäººåšæŸäº‹&lt;/p>
&lt;p>expect sb. to do sth. æœŸæœ›æŸäººåšæŸäº‹&lt;/p>
&lt;p>forbid sb. to do sth. ç¦æ­¢æŸäººåšæŸäº‹&lt;/p>
&lt;p>force sb. to do sth. å¼ºè¿«æŸäººåšæŸäº‹&lt;/p>
&lt;p>get sb. to do sth. ä½¿ï¼ˆè¦ï¼‰æŸäººåšæŸäº‹&lt;/p>
&lt;p>hate sb. to do sth. è®¨åŒæŸäººåšæŸäº‹&lt;/p>
&lt;p>help sb. to do sth. å¸®åŠ©æŸäººåšæŸäº‹&lt;/p>
&lt;p>intend sb. to do sth. æ‰“ç®—è¦æŸäººåšæŸäº‹&lt;/p>
&lt;p>invite sb. to do sth. é‚€è¯·æŸäººåšæŸäº‹&lt;/p>
&lt;p>leave sb. to do sth. ç•™ä¸‹æŸäººåšæŸäº‹&lt;/p>
&lt;p>like sb. to do sth. å–œæ¬¢æŸäººåšæŸäº‹&lt;/p>
&lt;p>mean sb. to do sth. æ‰“ç®—è¦æŸäººåšæŸäº‹&lt;/p>
&lt;p>need sb. to do sth. éœ€è¦æŸäººåšæŸäº‹&lt;/p>
&lt;p>oblige sb. to do sth. è¿«ä½¿æŸäººåšæŸäº‹&lt;/p>
&lt;p>order sb. to do sth. å‘½ä»¤æŸäººåšæŸäº‹&lt;/p>
&lt;p>permit sb. to do sth. å…è®¸æŸäººåšæŸäº‹&lt;/p>
&lt;p>persuade sb. to do sth. è¯´æœæŸäººåšæŸäº‹&lt;/p>
&lt;p>prefer sb. to do sth. å®æ„¿æŸäººåšæŸäº‹&lt;/p>
&lt;p>request sb. to do sth. è¦æ±‚æŸäººåšæŸäº‹&lt;/p>
&lt;p>remind sb. to do sth. æé†’æŸäººåšæŸäº‹&lt;/p>
&lt;p>teach sb. to do sth .æ•™æŸäººåšæŸäº‹&lt;/p>
&lt;p>tell sb. to do sth. å‘Šè¯‰æŸäººåšæŸäº‹&lt;/p>
&lt;p>train sb. to do sth. è®­ç»ƒæŸäººåšæŸäº‹&lt;/p>
&lt;p>trouble sb. to do sth. éº»çƒ¦æŸäººåšæŸäº‹&lt;/p>
&lt;p>want sb. to do sth. æƒ³è¦æŸäººåšæŸäº‹&lt;/p>
&lt;p>warn sb. to do sth. è­¦å‘ŠæŸäººåšæŸäº‹&lt;/p>
&lt;p>wish sb. to do sth. å¸Œæœ›æŸäººåšæŸäº‹&lt;/p>
&lt;p>æ³¨ï¼šä¸è¦å—æ±‰è¯­æ„æ€çš„å½±å“è€Œè¯¯ç”¨ä»¥ä¸‹åŠ¨è¯å¥å‹ï¼š&lt;/p>
&lt;p>æ±‰è¯­è¯´ï¼šâ€œå®³æ€•æŸäººåšæŸäº‹â€ï¼Œä½†è‹±è¯­ä¸è¯´fear sb. to do sth.ã€‚&lt;/p>
&lt;p>æ±‰è¯­è¯´ï¼šâ€œåŸè°…æŸäººåšæŸäº‹â€ï¼Œä½†è‹±è¯­ä¸è¯´excuse [forgive] sb. to do sth.ã€‚&lt;/p>
&lt;p>æ±‰è¯­è¯´ï¼šâ€œæ‹’ç»æŸäººåšæŸäº‹â€ï¼Œä½†è‹±è¯­ä¸è¯´refuse sb. to do sth.ã€‚&lt;/p>
&lt;p>æ±‰è¯­è¯´ï¼šâ€œæƒ©ç½šæŸäººåšæŸäº‹â€ï¼Œä½†è‹±è¯­ä¸è¯´punish sb. to do sth.ã€‚&lt;/p>
&lt;p>æ±‰è¯­è¯´ï¼šâ€œå»ºè®®æŸäººåšæŸäº‹â€ï¼Œä½†è‹±è¯­ä¸è¯´suggest [propose] sb. to do sth.ã€‚&lt;/p>
&lt;p>æ±‰è¯­è¯´ï¼šâ€œèµæˆæŸäººåšæŸäº‹â€ï¼Œä½†è‹±è¯­ä¸è¯´approve sb. to do sth.ã€‚&lt;/p>
&lt;p>æ±‰è¯­è¯´ï¼šâ€œé€šçŸ¥æŸäººåšæŸäº‹â€ï¼Œä½†è‹±è¯­ä¸è¯´inform sb. to do sth.ã€‚&lt;/p>
&lt;p>æ±‰è¯­è¯´ï¼šâ€œæ¬¢è¿æŸäººåšæŸäº‹â€ï¼Œä½†è‹±è¯­ä¸è¯´welcome sb. to do sth.ã€‚&lt;/p>
&lt;p>æ±‰è¯­è¯´ï¼šâ€œåšæŒæŸäººåšæŸäº‹â€ï¼Œä½†è‹±è¯­ä¸è¯´insist [persist] sb. to do sth.ã€‚&lt;/p>
&lt;p>æ±‰è¯­è¯´ï¼šâ€œå¸Œæœ›æŸäººåšæŸäº‹â€ï¼Œä½†è‹±è¯­ä¸è¯´hope sb. to do sth.ã€‚&lt;/p>
&lt;p>æ±‰è¯­è¯´ï¼šâ€œå®‰æ’æŸäººåšæŸäº‹â€ï¼Œä½†è‹±è¯­ä¸è¯´arrange sb. to do sth.ã€‚&lt;/p>
&lt;p>æ±‰è¯­è¯´ï¼šâ€œè¦æ±‚æŸäººåšæŸäº‹â€ï¼Œä½†è‹±è¯­ä¸è¯´demand sb. to do sth.ã€‚&lt;/p>
&lt;p>æ±‰è¯­è¯´ï¼šâ€œæ„Ÿè°¢æŸäººåšæŸäº‹â€ï¼Œä½†è‹±è¯­ä¸è¯´thank sb. to do sth.ã€‚&lt;/p>
&lt;p>æ±‰è¯­è¯´ï¼šâ€œç¥è´ºæŸäººåšæŸäº‹â€ï¼Œä½†è‹±è¯­ä¸è¯´congratulate sb. to do sth.ã€‚&lt;/p>
&lt;p>æ±‰è¯­è¯´ï¼šâ€œé˜»æ­¢æŸäººåšæŸäº‹â€ï¼Œä½†è‹±è¯­ä¸è¯´prevent sb. to do sth.ã€‚&lt;/p>
&lt;p>è¦è¡¨ç¤ºä»¥ä¸Šæ„æ€ï¼Œå¯æ¢ç”¨å…¶ä»–è¡¨è¾¾ï¼š&lt;/p>
&lt;p>æ±‰è¯­çš„â€œåŸè°…æŸäººåšæŸäº‹â€ï¼Œè‹±è¯­å¯è¯´æˆexcuse [forgive] sb. for doing sth.ã€‚&lt;/p>
&lt;p>æ±‰è¯­çš„â€œå¸Œæœ›æŸäººåšæŸäº‹â€ï¼Œè‹±è¯­å¯è¯´æˆwish sb. to do sth.ã€‚&lt;/p>
&lt;p>æ±‰è¯­çš„â€œå»ºè®®æŸäººåšæŸäº‹â€ï¼Œè‹±è¯­å¯è¯´æˆadvise sb. to do sth.ã€‚&lt;/p>
&lt;p>æ±‰è¯­çš„â€œå®‰æ’æŸäººåšæŸäº‹â€ï¼Œè‹±è¯­å¯è¯´æˆarrange for sb. to do sth.ã€‚&lt;/p>
&lt;p>æ±‰è¯­çš„â€œè¦æ±‚æŸäººåšæŸäº‹â€ï¼Œè‹±è¯­å¯è¯´æˆdemand of sb. to do sth.ã€‚&lt;/p>
&lt;p>æ±‰è¯­çš„â€œæ„Ÿè°¢æŸäººåšæŸäº‹â€ï¼Œè‹±è¯­å¯è¯´æˆthank sb. for doing sth.ã€‚&lt;/p>
&lt;p>æ±‰è¯­çš„â€œç¥è´ºæŸäººåšæŸäº‹â€ï¼Œè‹±è¯­å¯è¯´æˆcongratulate sb. on doing sth.ã€‚&lt;/p>
&lt;p>æ±‰è¯­çš„â€œé˜»æ­¢æŸäººåšæŸäº‹â€ï¼Œè‹±è¯­å¯è¯´æˆprevent sb. from doing sth.ã€‚&lt;/p>
&lt;h2 id="æ¥åŠ¨åè¯ä¸æ¥ä¸å®šå¼ä½œå®¾è¯­çš„34ä¸ªå¸¸ç”¨åŠ¨è¯">æ¥åŠ¨åè¯ï¼ˆä¸æ¥ä¸å®šå¼ï¼‰ä½œå®¾è¯­çš„34ä¸ªå¸¸ç”¨åŠ¨è¯&lt;/h2>
&lt;p>admit doing sth. æ‰¿è®¤åšæŸäº‹ advise doing sth. å»ºè®®åšæŸäº‹&lt;/p>
&lt;p>allow doing sth. å…è®¸åšæŸäº‹ appreciate doing sth. æ„Ÿæ¿€åšæŸäº‹&lt;/p>
&lt;p>avoid doing sth. é¿å…åšæŸäº‹ consider doing sth. è€ƒè™‘åšæŸäº‹&lt;/p>
&lt;p>delay doing sth. æ¨è¿ŸåšæŸäº‹ deny doing sth. å¦è®¤åšæŸäº‹&lt;/p>
&lt;p>discuss doing sth. è®¨è®ºåšæŸäº‹ dislike doing sth. ä¸å–œæ¬¢åšæŸäº‹&lt;/p>
&lt;p>enjoy doing sth. å–œçˆ±åšæŸäº‹ escape doing sth. é€ƒè„±åšæŸäº‹&lt;/p>
&lt;p>excuse doing sth. åŸè°…åšæŸäº‹ fancy doing sth. è®¾æƒ³åšæŸäº‹&lt;/p>
&lt;p>finish doing sth. å®ŒæˆåšæŸäº‹ forbid doing sth. ç¦æ­¢åšæŸäº‹&lt;/p>
&lt;p>forgive doing sth. åŸè°…åšæŸäº‹ give up doing sth. æ”¾å¼ƒåšæŸäº‹&lt;/p>
&lt;p>imagine doing sth. æƒ³è±¡åšæŸäº‹ keep doing sth. ä¿æŒåšæŸäº‹&lt;/p>
&lt;p>mention doing sth. æåŠåšæŸäº‹ mind doing sth. ä»‹æ„åšæŸäº‹&lt;/p>
&lt;p>miss doing sth. é”™è¿‡åšæŸäº‹ pardon doing sth. åŸè°…åšæŸäº‹&lt;/p>
&lt;p>permit doing sth. å…è®¸åšæŸäº‹ practice doing sth. ç»ƒä¹ åšæŸäº‹&lt;/p>
&lt;p>prevent doing sth. é˜»æ­¢åšæŸäº‹ prohibit doing sth. ç¦æ­¢åšæŸäº‹&lt;/p>
&lt;p>put off doing sth. æ¨è¿ŸåšæŸäº‹ report doing sth. æŠ¥å‘ŠåšæŸäº‹&lt;/p>
&lt;p>risk doing sth. å†’é™©åšæŸäº‹ stop doing sth. åœæ­¢åšæŸäº‹&lt;/p>
&lt;p>suggest doing sth. å»ºè®®åšæŸäº‹ understand doing sth. ç†è§£åšæŸäº‹&lt;/p>
&lt;h2 id="æ¥ç°åœ¨åˆ†è¯ä½œå®¾è¡¥çš„20ä¸ªå¸¸ç”¨åŠ¨è¯">æ¥ç°åœ¨åˆ†è¯ä½œå®¾è¡¥çš„20ä¸ªå¸¸ç”¨åŠ¨è¯&lt;/h2>
&lt;p>bring sb. doing sth.å¼•èµ·æŸäººåšæŸäº‹ catch sb. doing sth. ç¢°ä¸Šï¼ˆæ’ä¸Šï¼‰æŸäººåšæŸäº‹&lt;/p>
&lt;p>discover sb. doing sth. å‘ç°æŸäººåšæŸäº‹ feel sb. doing sth. æ„Ÿè§‰æŸäººåšæŸäº‹&lt;/p>
&lt;p>find sb. doing sth. ç¢°ä¸Šï¼ˆæ’ä¸Šï¼‰æŸäººåšæŸäº‹ get sb. doing sth. ä½¿æŸäººåšæŸäº‹&lt;/p>
&lt;p>have sb. doing sth. ä½¿æŸäººåšæŸäº‹ hear sb. doing sth. å¬è§æŸäººåšæŸäº‹&lt;/p>
&lt;p>keep sb. doing sth. ä½¿æŸäººä¸åœåœ°åšæŸäº‹ listen to sb. doing sth. å¬æŸäººåšæŸäº‹&lt;/p>
&lt;p>look at sb. doing sth. çœ‹ç€æŸäººåšæŸäº‹ notice sb. doing sth. æ³¨æ„åˆ°æŸäººåšæŸäº‹&lt;/p>
&lt;p>observe sb. doing sth. è§‚å¯ŸæŸäººåšæŸäº‹ prevent sb. doing sth. é˜»æ­¢æŸäººåšæŸäº‹&lt;/p>
&lt;p>see sb. doing sth. çœ‹è§æŸäººåšæŸäº‹ send sb. doing sth.ä½¿æŸäººï¼ˆçªç„¶ï¼‰åšæŸäº‹&lt;/p>
&lt;p>set sb. doing sth. ä½¿ï¼ˆå¼•èµ·ï¼‰æŸäººåšæŸäº‹ start sb. doing sth. ä½¿æŸäººå¼€å§‹åšæŸäº‹&lt;/p>
&lt;p>stop sb. doing sth. é˜»æ­¢æŸäººåšæŸäº‹ watch sb. doing sth. è§‚äº”ã€æ¥åŠ¨è¯åŸå½¢ä½œå®¾è¡¥çš„11ä¸ªå¸¸ç”¨åŠ¨è¯&lt;/p>
&lt;p>feel sb. do sth. æ„Ÿè§‰æŸäººåšæŸäº‹ have sb. do sth. ä½¿æŸäººåšæŸäº‹&lt;/p>
&lt;p>hear sb. do sth. å¬è§æŸäººåšæŸäº‹ let sb. do sth.è®©æŸäººåšæŸäº‹&lt;/p>
&lt;p>listen to sb. do sth. å¬ç€æŸäººåšæŸäº‹ look at sb. do sth. çœ‹ç€æŸäººåšæŸäº‹&lt;/p>
&lt;p>make sb. do sth. ä½¿æŸäººåšæŸäº‹ notice sb. do sth. æ³¨æ„æŸäººåšæŸäº‹&lt;/p>
&lt;p>observe sb. do sth. è§‚å¯ŸæŸäººåšæŸäº‹ see sb. do sth. çœ‹è§æŸäººåšæŸäº‹&lt;/p>
&lt;p>watch sb. do sth. è§‚å¯ŸæŸäººåšæŸäº‹&lt;/p>
&lt;p>å¯ŸæŸäººåšæŸäº‹&lt;/p>
&lt;h2 id="æ¥ä¸å®šå¼æˆ–åŠ¨åè¯ä½œå®¾è¯­æ„æ€ç›¸åŒçš„12ä¸ªåŠ¨è¯">æ¥ä¸å®šå¼æˆ–åŠ¨åè¯ä½œå®¾è¯­æ„æ€ç›¸åŒçš„12ä¸ªåŠ¨è¯&lt;/h2>
&lt;p>like to do sth / like doing sth. å–œæ¬¢åšæŸäº‹&lt;/p>
&lt;p>love to do sth / love doing sth. å–œæ¬¢åšæŸäº‹&lt;/p>
&lt;p>hate to do sth / hate doing sth. æ†æ¨åšæŸäº‹&lt;/p>
&lt;p>prefer to do sth / prefer doing sth. å®å¯åšæŸäº‹&lt;/p>
&lt;p>begin to do sth / begin doing sth. å¼€å§‹åšæŸäº‹&lt;/p>
&lt;p>start to do sth / start doing sth. å¼€å§‹åšæŸäº‹&lt;/p>
&lt;p>continue to do sth / continue doing sth. ç»§ç»­åšæŸäº‹&lt;/p>
&lt;p>canâ€™t bear to do sth / canâ€™t bear doing sth. ä¸èƒ½å¿å—åšæŸäº‹&lt;/p>
&lt;p>bother to do sth / bother doing sth. éº»çƒ¦åšæŸäº‹&lt;/p>
&lt;p>intend to do sth / intend doing sth.æƒ³è¦åšæŸäº‹&lt;/p>
&lt;p>attempt to do sth / attempt doing sth. è¯•å›¾åšæŸäº‹&lt;/p>
&lt;p>cease to do sth / cease doing sth. åœæ­¢åšæŸäº‹&lt;/p>
&lt;h2 id="æ¥ä¸å®šå¼æˆ–åŠ¨åè¯ä½œå®¾è¯­æ„æ€ä¸åŒçš„7ä¸ªåŠ¨è¯">æ¥ä¸å®šå¼æˆ–åŠ¨åè¯ä½œå®¾è¯­æ„æ€ä¸åŒçš„7ä¸ªåŠ¨è¯&lt;/h2>
&lt;p>(1) remember to do sth. è®°ä½è¦åšæŸäº‹ remember doing sth. è®°ä½æ›¾åšè¿‡æŸäº‹&lt;/p>
&lt;p>(2) forget to do sth. å¿˜è®°è¦åšæŸäº‹ forget doing sth. å¿˜è®°æ›¾åšè¿‡æŸäº‹&lt;/p>
&lt;p>(3) regret to do sth. åæ‚”ï¼ˆé—æ†¾ï¼‰è¦åšæŸäº‹ regret doing sth. åæ‚”ï¼ˆé—æ†¾ï¼‰æ›¾åšè¿‡æŸäº‹&lt;/p>
&lt;p>(4) try to do sth. è®¾æ³•è¦åšæŸäº‹ try doing sth. åšæŸäº‹è¯•è¯•çœ‹æœ‰ä½•æ•ˆæœ&lt;/p>
&lt;p>(5) mean to do sth. æ‰“ç®—åšæŸäº‹ mean doing sth. æ„å‘³ç€åšæŸäº‹&lt;/p>
&lt;p>(6) canâ€™t help to do sth. ä¸èƒ½å¸®åŠ©åšæŸäº‹ canâ€™t help doing sth. ç¦ä¸ä½åšæŸäº‹&lt;/p>
&lt;p>(7) go on to do sth. åšå®ŒæŸäº‹åæ¥ç€åšå¦ä¸€äº‹ go on doing sth. ç»§ç»­åšä¸€ç›´åœ¨åšçš„äº‹&lt;/p>
&lt;p>æ³¨ï¼šstop to do sth. ä¸stop doing sth.ä¹Ÿä¸åŒï¼Œå‰è€…æŒ‡åœä¸‹æ¥å»åšæŸäº‹ï¼Œåè€…æŒ‡åœæ­¢æ­£åœ¨åšçš„äº‹ï¼Œä½†stop to do sth. ä¸­çš„ä¸å®šå¼ä¸æ˜¯å®¾è¯­ï¼Œæ˜¯ç›®çš„çŠ¶è¯­ã€‚&lt;/p>
&lt;h2 id="å¯æ¥åŒå®¾è¯­çš„38ä¸ªå¸¸ç”¨åŠ¨è¯">å¯æ¥åŒå®¾è¯­çš„38ä¸ªå¸¸ç”¨åŠ¨è¯&lt;/h2>
&lt;p>(1) åŒå®¾è¯­æ˜“ä½æ—¶éœ€å€ŸåŠ©ä»‹è¯toçš„å¸¸ç”¨åŠ¨è¯&lt;/p>
&lt;p>award sb. sth. = award sth. to sb. é¢å¥–ç»™æŸäºº&lt;/p>
&lt;p>bring sb. sth. = bring sth. to sb. æŠŠæŸç‰©å¸¦ç»™æŸäºº&lt;/p>
&lt;p>hand sb. sth. =hand sth. to sb. æŠŠæŸç‰©é€’ç»™æŸäºº&lt;/p>
&lt;p>lend sb. sth. = lend sth. to sb. æŠŠæŸç‰©å€Ÿç»™æŸäºº&lt;/p>
&lt;p>mail sb. sth. = mail sth. to sb. æŠŠæŸç‰©å¯„ç»™æŸäºº&lt;/p>
&lt;p>offer sb. sth. = offer sth. to sb. å°†æŸç‰©ç»™æŸäºº&lt;/p>
&lt;p>owe sb. sth. = owe sth. to sb. æ¬ æŸäººæŸç‰©&lt;/p>
&lt;p>pass sb. sth. = pass sth. to sb. æŠŠæŸç‰©é€’ç»™æŸäºº&lt;/p>
&lt;p>pay sb. sth. = pay sth. to sb. ä»˜ç»™æŸäººæŸç‰©ï¼ˆé’±ï¼‰&lt;/p>
&lt;p>post sb. sth. = post sth. to sb. æŠŠæŸç‰©å¯„ç»™æŸäºº&lt;/p>
&lt;p>read sb. sth. = read sth. to sb. æŠŠæŸç‰©è¯»ç»™æŸäººå¬&lt;/p>
&lt;p>return sb. sth. = return sth. to sb. æŠŠæŸç‰©è¿˜ç»™æŸäºº&lt;/p>
&lt;p>send sb. sth. = send sth. to sb. æŠŠæŸç‰©é€ç»™æŸäºº&lt;/p>
&lt;p>sell sb. sth. = sell sth. to sb. æŠŠæŸç‰©å–ç»™æŸäºº&lt;/p>
&lt;p>serve sb. sth. = serve sth. to sb. æ‹¿æŸç‰©æ‹›å¾…æŸäºº&lt;/p>
&lt;p>show sb. sth. = show sth. to sb. æ‹¿æŸç‰©ç»™æŸäººçœ‹&lt;/p>
&lt;p>take sb. sth. = take sth. to sb. æŠŠæŸç‰©æ‹¿ç»™æŸäºº&lt;/p>
&lt;p>teach sb. sth. = teach sth. to sb. æ•™æŸäººæŸç‰©&lt;/p>
&lt;p>tell sb. sth. = tell sth. to sb. å‘Šè¯‰æŸäººæŸæƒ…å†µ&lt;/p>
&lt;p>throw sb. sth. = throw sth. to sb. æŠŠæŸç‰©æ‰”ç»™æŸäºº&lt;/p>
&lt;p>write sb. sth. = write sth. to sb. ç»™æŸäººå†™ä¿¡&lt;/p>
&lt;p>(2) åŒå®¾è¯­æ˜“ä½æ—¶éœ€å€ŸåŠ©ä»‹è¯forçš„å¸¸ç”¨åŠ¨è¯&lt;/p>
&lt;p>book sb. sth. = book sth. for sb. ä¸ºæŸäººé¢„å®šæŸç‰©&lt;/p>
&lt;p>buy sb. sth. = buy sth. for sb. ä¸ºæŸäººä¹°æŸç‰©&lt;/p>
&lt;p>choose sb. sth. = choose sth. for sb. ä¸ºæŸäººé€‰æŸç‰©&lt;/p>
&lt;p>cook sb. sth. = cook sth. for sb. ä¸ºæŸäººç…®æŸç‰©&lt;/p>
&lt;p>draw sb. sth. = draw sth. for sb. ä¸ºæŸäººç”»æŸç‰©&lt;/p>
&lt;p>fetch sb. sth. = fetch sth. for sb. ä¸ºæŸäººå»å–æŸç‰©&lt;/p>
&lt;p>find sb. sth. = find sth. for sb. ä¸ºæŸäººæ‰¾åˆ°æŸç‰©&lt;/p>
&lt;p>fix sb. sth. = fix sth. for sb. ä¸ºæŸäººå‡†å¤‡æŸç‰©&lt;/p>
&lt;p>get sb. sth. = get sth. for sb. ä¸ºæŸäººæ‹¿æ¥æŸç‰©&lt;/p>
&lt;p>make sb. sth. = make sth. for sb. ä¸ºæŸäººåšæŸç‰©&lt;/p>
&lt;p>order sb. sth. = order sth. for sb. ä¸ºæŸäººè®¢è´­æŸç‰©&lt;/p>
&lt;p>pick sb. sth. = pick sth. for sb. ä¸ºæŸäººé‡‡æ‘˜æŸç‰©&lt;/p>
&lt;p>prepare sb. sth. = prepare sth. for sb. ä¸ºæŸäººå‡†å¤‡æŸç‰©&lt;/p>
&lt;p>save sb. sth. = save sth. for sb. ä¸ºæŸäººç•™æŸç‰©&lt;/p>
&lt;p>sing sb. sth. = sing sth. for sb. ä¸ºæŸäººå”±æŸç‰©ï¼ˆæ­Œï¼‰&lt;/p>
&lt;p>spare sb. sth. = spare sth. for sb. ä¸ºæŸäººè®©å‡ºæŸç‰©&lt;/p>
&lt;p>steal sb. sth. = steal sth. for sb. ä¸ºæŸäººå·æŸç‰©&lt;/p>
&lt;p>æ³¨ï¼šæœ‰çš„åŠ¨è¯åæ¥çš„åŒå®¾è¯­æ˜“ä½æ—¶ï¼Œæ—¢å¯ç”¨ä»‹è¯toå¼•å‡ºé—´æ¥å®¾è¯­ï¼Œä¹Ÿå¯ç”¨ä»‹è¯forå¼•å‡ºé—´æ¥å®¾è¯­ï¼Œå«ä¹‰ç›¸åŒï¼Œå¦‚bringï¼Œplayç­‰ï¼š&lt;/p>
&lt;p>Bring me todayâ€™s paper. = Bring todayâ€™s paper to [for] me. æŠŠä»Šå¤©çš„æŠ¥çº¸æ‹¿ç»™æˆ‘ã€‚&lt;/p>
&lt;p>He played us the record he had just bought. = He played the record he had just bought for [to] us. ä»–æ”¾äº†ä»–
åˆšä¹°çš„å”±ç‰‡ç»™æˆ‘ä»¬å¬ã€‚&lt;/p>
&lt;p>æœ‰çš„åŠ¨è¯åæ¥çš„åŒå®¾è¯­æ˜“ä½æ—¶ï¼Œå³å¯ç”¨ä»‹è¯toå¼•å‡ºé—´æ¥å®¾è¯­ï¼Œä¹Ÿå¯ç”¨ä»‹è¯forå¼•å‡ºé—´æ¥å®¾è¯­ï¼Œå«ä¹‰ä¸åŒï¼Œå¦‚leaveç­‰ï¼š&lt;/p>
&lt;p>They left me no food. = They left no food for me. ä»–ä»¬æ²¡ç»™æˆ‘ç•™ä¸€ç‚¹é£Ÿç‰©ã€‚&lt;/p>
&lt;p>My uncle left me a large fortune. = My uncle left a large fortune to me.&lt;/p>
&lt;p>æˆ‘å”å”æ­»åç•™ä¸‹ä¸€å¤§ç¬”è´¢äº§ç»™æˆ‘ã€‚&lt;/p>
&lt;p>è€Œæœ‰çš„åŠ¨è¯åæ¥åŒå®¾è¯­æ—¶ï¼Œæ—¢ä¸èƒ½ç”¨ä»‹è¯toå¼•å‡ºé—´æ¥å®¾è¯­ï¼Œä¹Ÿä¸èƒ½ç”¨ä»‹è¯forå¼•å‡ºé—´æ¥å®¾è¯­ï¼Œå¦‚allow, ask, cause, charge, cost,
forgive, refuseç­‰ï¼š&lt;/p>
&lt;p>He allows his son too much money. ä»–ç»™ä»–å„¿å­çš„é’±å¤ªå¤šã€‚&lt;/p>
&lt;p>He asked me some questions. ä»–é—®äº†æˆ‘ä¸€äº›é—®é¢˜ã€‚&lt;/p>
&lt;p>This caused me much trouble. ç€ç»™æˆ‘å¸¦æ¥äº†è®¸å¤šéº»çƒ¦ã€‚&lt;/p>
&lt;p>He charged me five dollars for a cup of tea. ä»–ä¸€æ¯èŒ¶å‘æˆ‘è¦äº†5ç¾å…ƒã€‚&lt;/p>
&lt;p>His mistake cost him his job. ä»–çš„é”™è¯¯è®©ä»–ä¸¢äº†å·¥ä½œã€‚&lt;/p>
&lt;p>I envy you your good luck. æˆ‘ç¾¡æ…•ä½ çš„å¥½è¿ã€‚&lt;/p>
&lt;p>They forgave him his rudeness. ä»–ä»¬åŸè°…äº†ä»–çš„é²è½ã€‚&lt;/p>
&lt;p>He refused her nothing. å¥¹è¦ä»€ä¹ˆå°±ç»™ä»€ä¹ˆã€‚&lt;/p>
&lt;h2 id="å¯ç”¨äºåŠ¨è¯sbof-sthçš„8ä¸ªå¸¸è§åŠ¨è¯">å¯ç”¨äºâ€œåŠ¨è¯+sb+of sthâ€çš„8ä¸ªå¸¸è§åŠ¨è¯&lt;/h2>
&lt;p>accuse sb. of sth. æ§å‘ŠæŸäººçŠ¯æŸäº‹ï¼ˆç½ªï¼‰ï¼ŒæŒ‡è´£æŸäººåšæŸäº‹&lt;/p>
&lt;p>cheat sb. fo sth. éª—å–æŸäººæŸç‰©&lt;/p>
&lt;p>cure sb. of sth. æ²»å¥½æŸäººçš„ç—…ï¼Œæ”¹æ‰æŸäººçš„åä¹ æƒ¯&lt;/p>
&lt;p>inform sb. of sth. é€šçŸ¥æŸäººæŸæƒ…å†µï¼ˆäº‹ï¼‰&lt;/p>
&lt;p>remind sb. of sth. ä½¿æŸäººæƒ³èµ·æŸæƒ…å†µï¼ˆäº‹ï¼‰&lt;/p>
&lt;p>rid sb. of sth. ä½¿æŸäººæ‘†è„±æŸç‰©&lt;/p>
&lt;p>rob sb. of sth. æŠ¢åŠ«æŸäººçš„æŸä¸œè¥¿&lt;/p>
&lt;p>warn sb. of sth. è­¦å‘ŠæŸäººæœ‰æŸæƒ…å†µ&lt;/p>
&lt;h2 id="å¯ç”¨äºåŠ¨è¯sbfor-doing-sthçš„8ä¸ªå¸¸è§åŠ¨è¯">å¯ç”¨äºâ€œåŠ¨è¯+sb+for doing sthâ€çš„8ä¸ªå¸¸è§åŠ¨è¯&lt;/h2>
&lt;p>blame sb. for doing sth. æŒ‡è´£æŸäººåšæŸäº‹&lt;/p>
&lt;p>criticize sb. for doing sth. æ‰¹è¯„æŸäººåšæŸäº‹&lt;/p>
&lt;p>forgive sb. for doing sth. åŸè°…æŸäººåšæŸäº‹&lt;/p>
&lt;p>excuse sb. for doing sth. åŸè°…æŸäººåšæŸäº‹&lt;/p>
&lt;p>pardon sb. for doing sth. åŸè°…æŸäººåšæŸäº‹&lt;/p>
&lt;p>punish sb. for doing sth. æƒ©ç½šæŸäººåšæŸäº‹&lt;/p>
&lt;p>scold sb. for doing sth. æŒ‡è´£ï¼ˆè´£å¤‡ï¼‰æŸäººåšæŸäº‹&lt;/p>
&lt;p>thank sb. for doing sth. æ„Ÿè°¢æŸäººåšæŸäº‹&lt;/p>
&lt;h2 id="å¯ç”¨äºåŠ¨è¯sbinto-doing-sthçš„9ä¸ªå¸¸è§åŠ¨è¯">å¯ç”¨äºâ€œåŠ¨è¯+sb+into doing sthâ€çš„9ä¸ªå¸¸è§åŠ¨è¯&lt;/h2>
&lt;p>cheat sb. into doing sth. æ¬ºéª—æŸäººåšæŸäº‹ trick sb. into doing sth. æ¬ºéª—æŸäººåšæŸäº‹&lt;/p>
&lt;p>food sb. into doing sth. æ¬ºéª—æŸäººåšæŸäº‹ force sb. into doing sth. è¿«ä½¿æŸäººåšæŸäº‹&lt;/p>
&lt;p>argue sb. into doing sth. è¯´æœæŸäººåšæŸäº‹ talk sb. into doing sth. è¯´æœæŸäººåšæŸäº‹&lt;/p>
&lt;p>terrify sb. into doing sth. å¨èƒæŸäººåšæŸäº‹ frighten sb. into doing sth. å“å”¬æŸäººåšæŸäº‹&lt;/p>
&lt;p>persuade sb. into doing sth. è¯´æœæŸäººåšæŸäº‹&lt;/p>
&lt;h2 id="å®¹æ˜“è¯¯ç”¨ä½œåŠç‰©åŠ¨è¯çš„9ä¸ªä¸åŠç‰©åŠ¨è¯">å®¹æ˜“è¯¯ç”¨ä½œåŠç‰©åŠ¨è¯çš„9ä¸ªä¸åŠç‰©åŠ¨è¯&lt;/h2>
&lt;p>è¯¯ï¼šdeal a problem æ­£ï¼šdeal with a problem å¤„ç†é—®é¢˜&lt;/p>
&lt;p>è¯¯ï¼šdepend sb. æ­£ï¼šdepend on sb. ä¾é ï¼ˆä¾èµ–ï¼‰æŸäºº&lt;/p>
&lt;p>è¯¯ï¼šinsist doing sth. æ­£ï¼šinsist on doing sth. åšæŒè¦åšæŸäº‹&lt;/p>
&lt;p>è¯¯ï¼šknock the door æ­£ï¼šknock on [at] the door æ•²é—¨&lt;/p>
&lt;p>è¯¯ï¼šoperate sb. æ­£ï¼šoperate on sb. ä¸ºæŸäººåšæ‰‹æœ¯&lt;/p>
&lt;p>è¯¯ï¼šparticipate sth. æ­£ï¼šparticipate in sth. å‚åŠ æŸäº‹&lt;/p>
&lt;p>è¯¯ï¼šrefer sth. æ­£ï¼šrefer to sth. æŸ¥é˜…ï¼ˆå‚è€ƒ)æŸç‰©&lt;/p>
&lt;p>è¯¯ï¼šrely sb. / sth. æ­£ï¼šrely on sb. / sth. ä¾é ï¼ˆä¾èµ–ï¼‰æŸäººï¼ˆæŸç‰©&lt;/p>
&lt;p>è¯¯ï¼šreply a letter æ­£ï¼šreply to a letter å›ä¿¡&lt;/p>
&lt;p>æ³¨ï¼šåœ¨æŸäº›å…¶ä»–ç”¨æ³•ä¸­ï¼Œä»¥ä¸Šæœ‰çš„åŠ¨è¯ä¹Ÿå¯èƒ½åŠç‰©ï¼Œå¦‚insist, replyç­‰åŠ¨è¯åå¯æ¥å®¾è¯­ä»å¥ï¼Œoperateè¡¨ç¤ºâ€œæ“ä½œâ€ã€â€œç®¡ç†â€ç­‰æ—¶åˆ™åŠç‰©ã€‚&lt;/p>
&lt;h2 id="å®¹æ˜“è¯¯ç”¨ä½œä¸åŠç‰©åŠ¨è¯çš„8ä¸ªåŠç‰©åŠ¨è¯">å®¹æ˜“è¯¯ç”¨ä½œä¸åŠç‰©åŠ¨è¯çš„8ä¸ªåŠç‰©åŠ¨è¯&lt;/h2>
&lt;p>è¯¯ï¼šserve for sb. æ­£ï¼šserve sb. ä¸ºæŸäººæœåŠ¡&lt;/p>
&lt;p>è¯¯ï¼šmarry with sb. æ­£ï¼šmarry sb. ä¸æŸäººç»“å©š&lt;/p>
&lt;p>è¯¯ï¼šdiscuss about sth. æ­£ï¼šdiscuss sth. è®¨è®ºæŸäº‹&lt;/p>
&lt;p>è¯¯ï¼šmention about sth. æ­£ï¼šmention sth. æåˆ°æŸäº‹&lt;/p>
&lt;p>è¯¯ï¼šenter into a room æ­£ï¼šenter a room è¿›å…¥æˆ¿é—´&lt;/p>
&lt;p>è¯¯ï¼šcontact with sb. æ­£ï¼šcontact sb. ä¸æŸäººè”ç³»&lt;/p>
&lt;p>è¯¯ï¼šequal to sth. æ­£ï¼š equal sth. ç­‰äºæŸç‰©&lt;/p>
&lt;p>è¯¯ï¼šring to sb. æ­£ï¼šring sb. ç»™æŸäººæ‰“ç”µè¯&lt;/p>
&lt;p>æ³¨ï¼šæœ‰ä¸ªåˆ«è¯åœ¨ç”¨äºå…¶ä»–æ„ä¹‰æ—¶ï¼Œå¯ä»¥æ˜¯ä¸åŠç‰©çš„ï¼Œå¦‚enter intoå¯ä»¥è¡¨ç¤ºå¼€å§‹è¿›å…¥æˆ–ä»äº‹æŸä¸€çŠ¶æ€æˆ–æ´»åŠ¨ï¼Œæˆ–ç”¨äºè¾ƒæŠ½è±¡çš„æ¦‚å¿µã€‚å¦‚ï¼š&lt;/p>
&lt;p>The country entered into a state of war. è¿™ä¸ªå›½å®¶è¿›å…¥æˆ˜äº‰çŠ¶æ€ã€‚&lt;/p>
&lt;p>I can enter into your feelings at the loss of your father. æˆ‘ç†è§£ä½ å¤±å»çˆ¶äº²åçš„å¿ƒæƒ…ã€‚&lt;/p>
&lt;p>The two old men entered into a long conversation. ä¸¤ä½è€äººå¼€å§‹é•¿è°ˆèµ·æ¥ã€‚&lt;/p>
&lt;h2 id="17ä¸ªå¸¸ç”¨beå½¢å®¹è¯aboutç»“æ„">17ä¸ªå¸¸ç”¨â€œbe+å½¢å®¹è¯+aboutâ€ç»“æ„&lt;/h2>
&lt;p>be angry about ä¸ºâ€¦â€¦ç”Ÿæ°” be anxious about ä¸ºâ€¦â€¦æ‹…å¿§&lt;/p>
&lt;p>be careful about å½“å¿ƒâ€¦â€¦ be certain about ç¡®ä¿¡â€¦â€¦&lt;/p>
&lt;p>be curious about å¯¹â€¦â€¦å¥½å¥‡ be disappointed about å¯¹â€¦â€¦å¤±æœ›&lt;/p>
&lt;p>be excited about å¯¹â€¦â€¦æ„Ÿåˆ°å…´å¥‹ be glad about å¯¹â€¦â€¦æ„Ÿåˆ°é«˜å…´&lt;/p>
&lt;p>be happy about ä¸ºâ€¦â€¦æ„Ÿåˆ°é«˜å…´ be hopeful about å¯¹â€¦â€¦æŠ±æœ‰å¸Œæœ›&lt;/p>
&lt;p>be mad about å¯¹â€¦â€¦å…¥è¿· be nervous about ä¸ºâ€¦â€¦æ„Ÿåˆ°ä¸å®‰&lt;/p>
&lt;p>be particular about å¯¹â€¦â€¦è®²ç©¶ be sad about ä¸ºâ€¦â€¦è€Œéš¾è¿‡&lt;/p>
&lt;p>be serious about å¯¹â€¦â€¦è®¤çœŸ be sure about å¯¹â€¦â€¦æœ‰æŠŠæ¡&lt;/p>
&lt;p>be worried about ä¸ºâ€¦â€¦æ‹…å¿§&lt;/p>
&lt;h2 id="10ä¸ªå¸¸ç”¨beå½¢å®¹è¯atç»“æ„">10ä¸ªå¸¸ç”¨â€œbe+å½¢å®¹è¯+atâ€ç»“æ„&lt;/h2>
&lt;p>be angry at ä¸ºâ€¦â€¦ç”Ÿæ°” be bad at ä¸å–„äºâ€¦â€¦&lt;/p>
&lt;p>be clever at æ“…é•¿äºâ€¦â€¦ be disappointed at å¯¹â€¦â€¦å¤±æœ›&lt;/p>
&lt;p>be expert at åœ¨â€¦â€¦æ–¹é¢æ˜¯å†…è¡Œ be good at å–„äºâ€¦â€¦&lt;/p>
&lt;p>be mad at å¯¹â€¦â€¦å‘æ€’ be quick at åœ¨â€¦â€¦æ–¹é¢æ•æ·&lt;/p>
&lt;p>be skilful at åœ¨â€¦â€¦æ–¹é¢ç†Ÿç»ƒ be slow at åœ¨â€¦â€¦æ–¹é¢è¿Ÿé’&lt;/p>
&lt;h2 id="18ä¸ªå¸¸ç”¨beå½¢å®¹è¯forç»“æ„">18ä¸ªå¸¸ç”¨â€œbe+å½¢å®¹è¯+forâ€ç»“æ„&lt;/h2>
&lt;p>be anxious for æ¸´æœ› be bad for å¯¹â€¦â€¦æœ‰å®³ï¼Œå¯¹â€¦â€¦ä¸åˆ©&lt;/p>
&lt;p>be bound for å‰å¾€ be celebrated for ä»¥â€¦â€¦å‡ºå&lt;/p>
&lt;p>be convenient for å¯¹â€¦â€¦æ–¹ä¾¿ï¼Œåœ¨â€¦â€¦é™„è¿‘ be eager foræ¸´æœ›&lt;/p>
&lt;p>be famous for å› â€¦â€¦é—»å be fit for åˆé€‚ï¼Œé€‚åˆ&lt;/p>
&lt;p>be good for å¯¹â€¦â€¦æœ‰ç›Šï¼ˆæ–¹ä¾¿ï¼‰ be grateful for æ„Ÿè°¢&lt;/p>
&lt;p>be hungry for æ¸´æœ›å¾—åˆ° be late for è¿Ÿåˆ°&lt;/p>
&lt;p>be necessary for å¯¹â€¦â€¦æœ‰å¿…è¦ be ready for ä¸ºâ€¦â€¦å‡†å¤‡å¥½&lt;/p>
&lt;p>be sorry for å› â€¦â€¦æŠ±æ­‰ be suitable for å¯¹â€¦â€¦åˆé€‚ï¼ˆé€‚å®œï¼‰&lt;/p>
&lt;p>be thankful for å› â€¦â€¦è€Œæ„Ÿæ¿€ be well-known forä»¥â€¦â€¦å‡ºå&lt;/p>
&lt;h2 id="6ä¸ªå¸¸ç”¨beå½¢å®¹è¯fromç»“æ„">6ä¸ªå¸¸ç”¨â€œbe+å½¢å®¹è¯+fromâ€ç»“æ„&lt;/h2>
&lt;p>be absent from ç¼ºå¸­ï¼Œä¸åœ¨ be different from ä¸â€¦â€¦ä¸åŒ&lt;/p>
&lt;p>be far from ç¦»â€¦â€¦è¿œï¼Œè¿œè¿œä¸ be free from æ²¡æœ‰ï¼Œå…å—&lt;/p>
&lt;p>be safe from æ²¡æœ‰â€¦â€¦çš„å±é™© be tired from å› â€¦â€¦è€Œç–²åŠ³&lt;/p>
&lt;h2 id="13ä¸ªå¸¸ç”¨beå½¢å®¹è¯inç»“æ„">13ä¸ªå¸¸ç”¨â€œbe+å½¢å®¹è¯+inâ€ç»“æ„&lt;/h2>
&lt;p>be concerned in ä¸â€¦â€¦æœ‰å…³ be disappointed in å¯¹ï¼ˆæŸäººï¼‰æ„Ÿåˆ°å¤±æœ›&lt;/p>
&lt;p>be engaged in ä»äº‹äºï¼Œå¿™äº be experienced in åœ¨â€¦â€¦æ–¹é¢æœ‰ç»éªŒ&lt;/p>
&lt;p>be expert in åœ¨â€¦â€¦æ–¹é¢æ˜¯è¡Œå®¶ be fortunate in åœ¨â€¦â€¦æ–¹é¢å¹¸è¿&lt;/p>
&lt;p>be honest in åœ¨â€¦â€¦æ–¹é¢è¯šå® be interested in å¯¹â€¦â€¦æ„Ÿå…´è¶£&lt;/p>
&lt;p>be lack in ç¼ºä¹ be rich in å¯Œäºï¼Œåœ¨â€¦â€¦æ–¹é¢å¯Œæœ‰&lt;/p>
&lt;p>be skilful in æ“…é•¿äº be successful in åœ¨â€¦â€¦æ–¹é¢æˆåŠŸ&lt;/p>
&lt;p>be weak in åœ¨â€¦â€¦æ–¹é¢ä¸è¡Œ&lt;/p>
&lt;h2 id="18ä¸ªå¸¸ç”¨beå½¢å®¹è¯ofç»“æ„">18ä¸ªå¸¸ç”¨â€œbe+å½¢å®¹è¯+ofâ€ç»“æ„&lt;/h2>
&lt;p>be afraid of å®³æ€• be ashamed of ä¸ºâ€¦â€¦æ„Ÿåˆ°ç¾æ„§&lt;/p>
&lt;p>be aware of æ„è¯†åˆ°ï¼ŒçŸ¥é“ be capable of èƒ½å¤Ÿï¼Œå¯ä»¥&lt;/p>
&lt;p>be careful of å°å¿ƒï¼Œç•™å¿ƒ be certain of ç¡®ä¿¡ï¼Œå¯¹â€¦â€¦æœ‰æŠŠæ¡&lt;/p>
&lt;p>be fond of å–œæ¬¢ be free of æ²¡æœ‰ï¼Œæ‘†è„±&lt;/p>
&lt;p>be full of å……æ»¡ be glad of ä¸ºâ€¦â€¦è€Œé«˜å…´&lt;/p>
&lt;p>be nervous of å®³æ€• be proud of ä¸ºâ€¦â€¦è‡ªè±ª&lt;/p>
&lt;p>be short of ç¼ºä¹ be shy of ä¸å¥½æ„æ€&lt;/p>
&lt;p>be sick of å¯¹â€¦â€¦åŒå€¦ be sure of è‚¯å®šï¼Œæœ‰æŠŠæ¡&lt;/p>
&lt;p>be tired of å¯¹â€¦â€¦åŒçƒ¦ be worthy of åªå¾—ï¼Œé…å¾—ä¸Š&lt;/p>
&lt;h2 id="20ä¸ªå¸¸ç”¨beå½¢å®¹è¯toç»“æ„">20ä¸ªå¸¸ç”¨â€œbe+å½¢å®¹è¯+toâ€ç»“æ„&lt;/h2>
&lt;p>be accustomed to ä¹ æƒ¯äº be blind to å¯¹â€¦â€¦è§†è€Œä¸è§&lt;/p>
&lt;p>be close to é è¿‘ï¼Œæ¥è¿‘ be cruel to å¯¹â€¦â€¦æ®‹é…·ï¼Œå¯¹â€¦â€¦æ— æƒ…&lt;/p>
&lt;p>be devoted to çŒ®èº«ï¼Œä¸“å¿ƒäº be equal to ç­‰äºï¼Œèƒ½èƒœä»»&lt;/p>
&lt;p>be familiar to ä¸ºï¼ˆæŸäººï¼‰æ‰€ç†Ÿæ‚‰ be harmful to å¯¹â€¦â€¦æœ‰å±å®³&lt;/p>
&lt;p>be important to å¯¹â€¦â€¦é‡è¦p; be open to å¯¹â€¦â€¦å¼€æ”¾ï¼Œæ˜“å—åˆ°&lt;/p>
&lt;p>be opposed to åå¯¹ï¼Œä¸èµæˆ be opposite to åœ¨â€¦â€¦å¯¹é¢ï¼Œå’Œâ€¦â€¦ç›¸å&lt;/p>
&lt;p>be polite to å¯¹â€¦â€¦æœ‰ç¤¼è²Œ be related to ä¸â€¦â€¦æœ‰å…³ï¼ˆæ˜¯äº²æˆšï¼‰&lt;/p>
&lt;p>be respectful to å°Šæ•¬ be rude to å¯¹â€¦â€¦æ— ç¤¼&lt;/p>
&lt;p>be similar to ä¸â€¦â€¦ç›¸ä¼¼ be true to å¿ å®äºï¼Œä¿¡å®ˆ&lt;/p>
&lt;p>be used to ä¹ æƒ¯äº be useful to å¯¹â€¦â€¦æœ‰ç”¨&lt;/p>
&lt;h2 id="16ä¸ªå¸¸ç”¨beå½¢å®¹è¯withç»“æ„">16ä¸ªå¸¸ç”¨â€œbe+å½¢å®¹è¯+withâ€ç»“æ„&lt;/h2>
&lt;p>be angry with å¯¹ï¼ˆæŸäººï¼‰ç”Ÿæ°” be bored with å¯¹â€¦â€¦åŒçƒ¦&lt;/p>
&lt;p>be busy with å¿™äº be careful with å°å¿ƒ&lt;/p>
&lt;p>be concerned with å…³äºï¼Œä¸â€¦â€¦æœ‰å…³ be content with ä»¥â€¦â€¦ä¸ºæ»¡è¶³&lt;/p>
&lt;p>be delighted with å¯¹â€¦â€¦æ„Ÿåˆ°é«˜å…´ be disappointed with å¯¹ï¼ˆæŸäººï¼‰å¤±æœ›&lt;/p>
&lt;p>be familiar with ç†Ÿæ‚‰ï¼Œç²¾é€š be honest with å¯¹ï¼ˆæŸäººï¼‰çœŸè¯š&lt;/p>
&lt;p>be ill with æ‚£â€¦â€¦ç—… be patient with å¯¹ï¼ˆæŸäººï¼‰æœ‰è€å¿ƒ&lt;/p>
&lt;p>be pleased with å¯¹â€¦â€¦æ»¡æ„ï¼ˆé«˜å…´ï¼‰ be popular with å—â€¦â€¦æ¬¢è¿&lt;/p>
&lt;p>be satisfied with å¯¹â€¦â€¦æ»¡æ„ be strict with å¯¹ï¼ˆæŸäººï¼‰ä¸¥æ ¼&lt;/p>
&lt;h2 id="24ä¸ªå¸¸ç”¨inå…¶ä»–è¯ofç»“æ„">24ä¸ªå¸¸ç”¨â€œin+å…¶ä»–è¯+ofâ€ç»“æ„&lt;/h2>
&lt;p>in advance of åœ¨â€¦â€¦å‰é¢ in aid of å¸®åŠ©&lt;/p>
&lt;p>in behalf of ä¸ºäº†ï¼Œä¸ºäº†â€¦â€¦çš„åˆ©ç›Š in case of å¦‚æœï¼Œä¸‡ä¸€ï¼Œä»¥é˜²&lt;/p>
&lt;p>in celebration of åº†ç¥ in charge of è´Ÿè´£ï¼Œç®¡ç†&lt;/p>
&lt;p>in commemoration of çºªå¿µï¼Œåº†ç¥ in defence of ä¿å«&lt;/p>
&lt;p>in explanation of è§£é‡Š in face of é¢å¯¹&lt;/p>
&lt;p>in favour of èµæˆï¼Œä¸»å¼  in front of åœ¨â€¦â€¦å‰é¢&lt;/p>
&lt;p>in honor of çºªå¿µï¼Œç¥è´ºï¼Œæ¬¢è¿ in memory of çºªå¿µ&lt;/p>
&lt;p>in need of éœ€è¦ in place of ä»£æ›¿&lt;/p>
&lt;p>in possession of æ‹¥æœ‰ in praise of ç§°èµ&lt;/p>
&lt;p>in respect of å…³äºï¼Œå°±â€¦â€¦è€Œè¨€ in search of å¯»æ‰¾ï¼Œæœæ‰¾&lt;/p>
&lt;p>in sight of çœ‹å¾—è§ï¼Œåœ¨çœ‹è§â€¦â€¦çš„åœ°æ–¹ in spite of è™½ç„¶ï¼Œå°½ç®¡&lt;/p>
&lt;p>in support of ä¸ºäº†æ”¯æŒï¼ˆæ‹¥æŠ¤ï¼‰â€¦â€¦ in view of é‰´äºï¼Œè€ƒè™‘åˆ°&lt;/p>
&lt;p>æ³¨ï¼šåŒæ—¶æ³¨æ„ä¸€ä¸‹ç›¸ä¼¼ç»“æ„ï¼š&lt;/p>
&lt;p>in exchange for ä½œä¸ºå¯¹â€¦â€¦çš„äº¤æ¢ in preparation for ä¸ºâ€¦â€¦ä½œå‡†å¤‡&lt;/p>
&lt;p>in return for ä½œä¸ºâ€¦â€¦çš„æŠ¥ç­” in reward for ä½œä¸ºâ€¦â€¦çš„æŠ¥é…¬&lt;/p>
&lt;p>in addition to åŠ ä¹‹ï¼Œé™¤â€¦â€¦ä¹‹å¤– in answer to å›ç­”ï¼Œå“åº”&lt;/p>
&lt;p>in contrast to [with] ä¸â€¦â€¦å½¢æˆå¯¹æ¯” in opposition to ä¸â€¦â€¦ç›¸åï¼Œåå¯¹&lt;/p>
&lt;p>in reply to ä½œä¸ºå¯¹â€¦â€¦çš„å›ç­”ï¼ˆç­”å¤ï¼‰ in response to å›ç­”ï¼Œå“åº”&lt;/p>
&lt;p>in [with] reference to å…³äº in [with] regard to å…³äº&lt;/p>
&lt;h2 id="27ä¸ªå¸¦to-doing-sthçš„å¸¸ç”¨ç»“æ„">27ä¸ªå¸¦to doing sth.çš„å¸¸ç”¨ç»“æ„&lt;/h2>
&lt;p>1ï¼åŠ¨è¯+ä»‹è¯to+åŠ¨åè¯&lt;/p>
&lt;p>(1) admit to doing sth. æ‰¿è®¤åšäº†æŸäº‹&lt;/p>
&lt;p>(2) apply to doing sth. é€‚ç”¨äºåšæŸäº‹&lt;/p>
&lt;p>(3) object to doing sth. åå¯¹åšæŸäº‹&lt;/p>
&lt;p>(4) see to doing sth. è´Ÿè´£åšæŸäº‹&lt;/p>
&lt;p>(5) stick to doing sth. åšæŒåšæŸäº‹&lt;/p>
&lt;p>(6) take to doing sth. å–œæ¬¢ä¸ŠåšæŸäº‹ï¼Œé€æ¸ä¹ æƒ¯åšæŸäº‹&lt;/p>
&lt;p>2ï¼åŠ¨è¯+å®¾è¯­+ä»‹è¯to+åŠ¨åè¯&lt;/p>
&lt;p>(1) apply oneself to doing sth. ä¸“å¿ƒè‡´åŠ›äºåšæŸäº‹&lt;/p>
&lt;p>(2) devote sth. to doing sth. æŠŠâ€¦â€¦çŒ®ç»™åšæŸäº‹&lt;/p>
&lt;p>(3) devote oneself to doing sth. çŒ®èº«äºåšæŸäº‹&lt;/p>
&lt;p>(4) limit sth. to doing sth. æŠŠâ€¦â€¦é™åˆ¶åœ¨åšæŸäº‹çš„èŒƒå›´å†…&lt;/p>
&lt;p>(5) reduce sb. to doing sth. ä½¿æŸäººæ²¦ä¸ºåšæŸäº‹&lt;/p>
&lt;p>3ï¼åŠ¨è¯+åè¯+ä»‹è¯to+åŠ¨åè¯&lt;/p>
&lt;p>(1) give oneâ€™s life to doing sth. çŒ®èº«äºåšæŸäº‹&lt;/p>
&lt;p>(2) give oneâ€™s mind to doing sth. ä¸“å¿ƒåšæŸäº‹&lt;/p>
&lt;p>(3) have a dislike to doing sth. åŒæ¶åšæŸäº‹&lt;/p>
&lt;p>(4) have an eye to doing sth. æ³¨æ„åšæŸäº‹&lt;/p>
&lt;p>(5) have an objection to doing sth. åå¯¹ï¼ˆåæ„Ÿï¼‰åšæŸäº‹&lt;/p>
&lt;p>(6) pay attention to doing sth. æ³¨æ„åšæŸäº‹&lt;/p>
&lt;p>(7) set oneâ€™s mind to doing sth. å†³å¿ƒåšæŸäº‹&lt;/p>
&lt;p>4ï¼be+å½¢å®¹è¯+ä»‹è¯to+åŠ¨åè¯&lt;/p>
&lt;p>(1) be equal to doing sth. ç­‰äºåšæŸäº‹ï¼Œèƒ½èƒœä»»åšæŸäº‹&lt;/p>
&lt;p>(2) be used to doing sth. ä¹ æƒ¯äºåšæŸäº‹&lt;/p>
&lt;p>(3) be opposed to doing sth. åå¯¹åšæŸäº‹&lt;/p>
&lt;p>(4) be reduced to doing sth. ä½¿æŸäººæ²¦ä¸ºåšæŸäº‹&lt;/p>
&lt;p>(5) be devoted to doing sth. æŠŠæ—¶é—´ï¼ˆé’±ï¼Œç²¾åŠ›ç­‰ï¼‰çŒ®ç»™åšæŸäº‹&lt;/p>
&lt;p>(6) be limited to doing sth. æŠŠâ€¦â€¦é™åˆ¶åœ¨åšæŸäº‹çš„èŒƒå›´å†…&lt;/p>
&lt;p>5ï¼å…¶ä»–ç»“æ„+ä»‹è¯to+åŠ¨åè¯&lt;/p>
&lt;p>(1) get down to doing sth. å¼€å§‹åšæŸäº‹ï¼Œè®¤çœŸå¤„ç†æŸäº‹&lt;/p>
&lt;p>(2) look forward to doing sth. ç›¼æœ›åšæŸäº‹&lt;/p>
&lt;p>(3) What do you say to doing sth? ä½ è®¤ä¸ºåšæŸäº‹å¦‚ä½•ï¼Ÿ&lt;/p></description></item></channel></rss>