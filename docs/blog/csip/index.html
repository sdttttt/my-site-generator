<!doctype html><html lang=zh-cn><title>CSIP鸡你太美存器 | SDTTTTT's Log</title><meta charset=utf-8><meta name=generator content="Hugo 0.76.5"><meta name=description content="Hugo ---sdttttt"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=https://sdttttt.github.io/css/index.css><link rel=canonical href=https://sdttttt.github.io/blog/csip/><link rel=alternate type=application/rss+xml href title="SDTTTTT's Log"><header><a href=https://sdttttt.github.io/ class=title>SDTTTTT's Log</a><nav><a href=/about/>About</a></nav></header><article><header><h1>CSIP鸡你太美存器</h1><time datetime=2020-04-06T15:35:44+08:00>April 06, 2020</time></header><p>之前刚学的时候对这个玩意音响没那么深刻，现在再学，感觉很不一样了。</p><p>CS为代码段寄存器，IP为指令指针寄存器。
设CS = M, IP = N, 8086CPU将从 <code>M × 16 + N</code> 处读取指令并进行。</p><p>也可以这样表述： <strong>8086CPU中，任意时刻，CPU都会将CS:IP指向的内容做为执行指令.</strong></p><p>执行流程:</p><ul><li>初始状态: CS = 2000H, IP = 0000H</li><li>CS:IP 内容送入地址加法器，2000H × 16 + 0000H = 20000H</li><li>地址加法器计算出物理地址20000H后将结果送入输入输出电路.</li><li>输入输出电路将物理地址20000H送到地址总线。</li><li>内存将物理地址20000H上存放的机器指令X通过数据总线送入CPU.</li><li>输入输出电路将机器指令X送入指令缓冲器。</li><li>寄存器IP的值自动增加。</li><li>以此类推&mldr;</li></ul><hr><p>当8086CPU加点或者复位后，CS = FFFFH, IP = 0000H,也就是CPU清晨起床做的第一件事就是去执行FFFF0H内存单元中存放的机器指令。</p><h2 id=修改csip>修改CS:IP</h2><p><code>mov</code>指令能帮我们将值送入寄存器。但是，它不能用于修改CS:IP，原因很简单8086出于设计考量不允许。
能修改CS:IP的指令统称为<code>转移指令</code>（以后我们深入研究）,现在我学习第一个可以修改CS:IP寄存器的指令，<code>jmp</code>.</p><p>若想同时修改CS:IP寄存器,可以用<code>jmp 段地址, 偏移地址</code>的指令来完成。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-asm data-lang=asm><span style=color:#a6e22e>jmp</span> <span style=color:#ae81ff>2</span><span style=color:#66d9ef>AE3</span>:<span style=color:#ae81ff>3</span> <span style=color:#75715e>;执行后: CS = 2AE3H IP = 0003H, CPU 将从这2AE33H 处读取指令
</span></code></pre></div><p>如果只想修改IP寄存器, 可以用<code>jmp 寄存器</code>的指令来完成.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-asm data-lang=asm><span style=color:#a6e22e>jmp</span> <span style=color:#66d9ef>ax</span>
</code></pre></div><p>类似, <code>mov IP, ax</code></p></article><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/gitalk@1.7.0/dist/gitalk.css><script src=https://cdn.jsdelivr.net/npm/gitalk@1.7.0/dist/gitalk.min.js></script><div id=gitalk-container style=margin:auto></div><script>var gitalk=new Gitalk({clientID:'747ab8530477531c3d25',clientSecret:'af2cc18e4c27998636a6a3c82af0064f38574170',repo:'sdttttt.github.io',owner:'sdttttt',admin:['sdttttt'],id:location.pathname,distractionFreeMode:true})
gitalk.render('gitalk-container')</script></html>