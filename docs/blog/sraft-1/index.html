<!doctype html><html lang=zh-cn><title>Sraft (一) | SDTTTTT's Log</title><meta charset=utf-8><meta name=generator content="Hugo 0.76.5"><meta name=description content="算是开发日志吧."><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=https://sdttttt.github.io/css/index.css><link rel=canonical href=https://sdttttt.github.io/blog/sraft-1/><link rel=alternate type=application/rss+xml href title="SDTTTTT's Log"><header><a href=https://sdttttt.github.io/ class=title>SDTTTTT's Log</a><nav><a href=/about/>About</a></nav></header><article><header><h1>Sraft (一)</h1><time datetime=2020-09-21T11:29:51+08:00>September 21, 2020</time></header><p>今天开始算是正式编写Sraft这个库, 开发的原因有两个:</p><ul><li>我需要通过这次开发来熟悉Raft这个协议.<del>(以后面试或者和人攀谈也更有底气)</del></li><li>我的微服务框架的服务中心需要一个能达成分布式一致性的功能.</li></ul><p>语言采用的是Go, 目前的编程模型大概也完成了, 下面我来介绍:</p><blockquote><p>本人喜欢简单并且高效的设计, 对于设计复杂难以实现的东西会感到不适(脑子不够用),</p></blockquote><h3 id=raft-kernel>Raft Kernel</h3><p>整个编程模型会有比较多的模块, 整体采用的是微核架构, <code>Raft Kernel</code>会协调各个模块之间的工作.</p><p>模块之间的通信由<code>Raft Kernel</code>来完成. 通信方式采用<code>Channel</code>异步非阻塞的形式.</p><h3 id=exchange-network>Exchange Network</h3><p>外部通信从这里进入, 由<code>Exchange Network</code>将通信内容封装为事件, 发送给<code>Raft Kernel</code>.</p><p>或者<code>Raft Kernel</code>传递事件给<code>Exchange Network</code>, 再由<code>Exchange Network</code>执行外部通信.</p><h3 id=state-machine>State Machine</h3><p>Raft协议的核心实现, 状态机会在<code>Leader</code>, <code>Follower</code>, <code>Candidate</code>三种角色之间自动切换,
每一角色处理的事件都是一样的, 但是具体过程是不一样的. (这个部分的密度会比较大)</p><h3 id=data-log-synchronizer>Data Log Synchronizer</h3><p>负责同步数据的模块, 采用的是日志提交形式.</p><hr><p>以上的我目前已经构思出的编程模型, 但是为暂定. 实际的编写模型肯定会有少许修改.</p><p>PROJECT: github.com/sdttttt/sraft</p></article><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/gitalk@1.7.0/dist/gitalk.css><script src=https://cdn.jsdelivr.net/npm/gitalk@1.7.0/dist/gitalk.min.js></script><div id=gitalk-container style=margin:auto></div><script>var gitalk=new Gitalk({clientID:'747ab8530477531c3d25',clientSecret:'af2cc18e4c27998636a6a3c82af0064f38574170',repo:'sdttttt.github.io',owner:'sdttttt',admin:['sdttttt'],id:location.pathname,distractionFreeMode:true})
gitalk.render('gitalk-container')</script></html>