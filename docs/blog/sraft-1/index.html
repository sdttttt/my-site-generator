<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=theme-color content="dark"><title>Sraft (一) | SDTTTTT</title><link rel=stylesheet href=/sass/main.min.12754930aaca2409561861a9f13c52153f073ef96d63061a9a330c250f392fcb.css></head><body class=dark><nav class=navbar><div class=container><div class=flex><div><a class=brand href=/>SDTTTTT</a></div><div class=flex><button id=dark-mode-button></button></div></div></div></nav><main><div class=container><article><header class=article-header><div class=thumb><div><h1>Sraft (一)</h1><div class=post-meta><div>By sdttttt on <time>September 21, 2020</time></div><div class=tags><a href=/tags/log/>log</a></div></div></div></div></header></article><div class=article-post><p>今天开始算是正式编写Sraft这个库, 开发的原因有两个:</p><ul><li>我需要通过这次开发来熟悉Raft这个协议.<del>(以后面试或者和人攀谈也更有底气)</del></li><li>我的微服务框架的服务中心需要一个能达成分布式一致性的功能.</li></ul><p>语言采用的是Go, 目前的编程模型大概也完成了, 下面我来介绍:</p><blockquote><p>本人喜欢简单并且高效的设计, 对于设计复杂难以实现的东西会感到不适(脑子不够用),</p></blockquote><h3 id=raft-kernel>Raft Kernel</h3><p>整个编程模型会有比较多的模块, 整体采用的是微核架构, <code>Raft Kernel</code>会协调各个模块之间的工作.</p><p>模块之间的通信由<code>Raft Kernel</code>来完成. 通信方式采用<code>Channel</code>异步非阻塞的形式.</p><h3 id=exchange-network>Exchange Network</h3><p>外部通信从这里进入, 由<code>Exchange Network</code>将通信内容封装为事件, 发送给<code>Raft Kernel</code>.</p><p>或者<code>Raft Kernel</code>传递事件给<code>Exchange Network</code>, 再由<code>Exchange Network</code>执行外部通信.</p><h3 id=state-machine>State Machine</h3><p>Raft协议的核心实现, 状态机会在<code>Leader</code>, <code>Follower</code>, <code>Candidate</code>三种角色之间自动切换,
每一角色处理的事件都是一样的, 但是具体过程是不一样的. (这个部分的密度会比较大)</p><h3 id=data-log-synchronizer>Data Log Synchronizer</h3><p>负责同步数据的模块, 采用的是日志提交形式.</p><hr><p>以上的我目前已经构思出的编程模型, 但是为暂定. 实际的编写模型肯定会有少许修改.</p><p>PROJECT: github.com/sdttttt/sraft</p></div></div><div class=container><nav class="flex container suggested"><a rel=prev href=/blog/about-gcr/ title="Previous post (older)"><span>Previous</span>
About Gcr</a>
<a rel=next href=/blog/sraft-2/ title="Next post (newer)"><span>Next</span>
sraft (二)</a></nav></div></main></main><footer class="footer flex"><section class=container><nav class=footer-links></nav></section><script async src=/js/features.min.f77830aff4bfb7a756b9ef68388f40d2187cb0046d41790785074eb8cd054cc3.js data-enable-footnotes=true></script></footer></body></html>