<!doctype html><html lang=zh-cn><head><meta http-equiv=x-clacks-overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://sdttttt.github.io/favicon.ico><title>MyBatis æºç åˆ†æ | SDTTTTT's Smelly fish Rotten shrimp ğŸ““</title><meta name=title content="MyBatis æºç åˆ†æ"><meta name=description content="æœ¬æ–‡è®©ä½ çŸ¥é“iBatisæ˜¯æ€ä¹ˆå·¥ä½œçš„, ä»¥åŠä¸€äº›ä½ å¯èƒ½ä¸çŸ¥é“çš„æ‰§è¡Œç»†èŠ‚."><meta name=keywords content="Java,"><meta property="og:title" content="MyBatis æºç åˆ†æ"><meta property="og:description" content="æœ¬æ–‡è®©ä½ çŸ¥é“iBatisæ˜¯æ€ä¹ˆå·¥ä½œçš„, ä»¥åŠä¸€äº›ä½ å¯èƒ½ä¸çŸ¥é“çš„æ‰§è¡Œç»†èŠ‚."><meta property="og:type" content="article"><meta property="og:url" content="https://sdttttt.github.io/blog/mybatissourcecode/"><meta property="og:image" content="https://sdttttt.github.io/static/me.jpg"><meta property="article:published_time" content="2020-09-10T22:15:42+08:00"><meta property="article:modified_time" content="2020-10-12T16:55:52+08:00"><meta property="og:site_name" content="SDTTTTT"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://sdttttt.github.io/static/me.jpg"><meta name=twitter:title content="MyBatis æºç åˆ†æ"><meta name=twitter:description content="æœ¬æ–‡è®©ä½ çŸ¥é“iBatisæ˜¯æ€ä¹ˆå·¥ä½œçš„, ä»¥åŠä¸€äº›ä½ å¯èƒ½ä¸çŸ¥é“çš„æ‰§è¡Œç»†èŠ‚."><meta itemprop=name content="MyBatis æºç åˆ†æ"><meta itemprop=description content="æœ¬æ–‡è®©ä½ çŸ¥é“iBatisæ˜¯æ€ä¹ˆå·¥ä½œçš„, ä»¥åŠä¸€äº›ä½ å¯èƒ½ä¸çŸ¥é“çš„æ‰§è¡Œç»†èŠ‚."><meta itemprop=datePublished content="2020-09-10T22:15:42+08:00"><meta itemprop=dateModified content="2020-10-12T16:55:52+08:00"><meta itemprop=wordCount content="1059"><meta itemprop=image content="https://sdttttt.github.io/static/me.jpg"><meta itemprop=keywords content="Java,"><meta name=referrer content="no-referrer-when-downgrade"><style>body{font-family:Verdana,sans-serif;margin:auto;padding:20px;max-width:720px;text-align:left;background-color:#fff;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:#444}h1,h2,h3,h4,h5,h6,strong,b{color:#222}a{color:#3273dc}.title{text-decoration:none;border:0}.title span{font-weight:400}nav a{margin-right:10px}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.6}table{width:100%}img{max-width:100%}code{padding:2px 5px;background-color:#f2f2f2}pre code{color:#222;display:block;padding:20px;white-space:pre-wrap;font-size:14px}blockquote{border-left:1px solid #999;color:#222;padding-left:20px;font-style:italic}footer{padding:25px;text-align:center}.helptext{color:#777;font-size:small}.errorlist{color:#eba613;font-size:small}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:#8b6fcb}@media(prefers-color-scheme:dark){body{background-color:#333;color:#ddd}h1,h2,h3,h4,h5,h6,strong,b{color:#eee}a{color:#8cc2dd}code{background-color:#777}pre code{color:#ddd}blockquote{color:#ccc}textarea,input{background-color:#252525;color:#ddd}.helptext{color:#aaa}}</style></head><body><header><a href=/ class=title><h2>SDTTTTT's Smelly fish Rotten shrimp ğŸ““</h2></a><nav><a href=/>Home</a>
<a href=/blog>Blog</a></nav></header><main><h1>MyBatis æºç åˆ†æ</h1><p><i><time datetime=2020-09-10 pubdate>10 Sep, 2020</time></i></p><content><p>å…¶å®å¾ˆæ—©å°±æƒ³å†™ä¸€ç¯‡ iBatis çš„æºç åˆ†æäº†, ä¸è¿‡æœ‰æ®µæ—¶é—´å»å­¦ä¹  Go äº†, Java å°±æ”¾ä¸‹äº†, æœ€è¿‘
é‡æ–°æ¡èµ· Java å°±æŠŠä»¥å‰æ²¡å¡«çš„å‘,å¡«ä¸€ä¸‹.</p><h1 id=init>Init</h1><p>ç°åœ¨å¼€å§‹æ­£ç‰‡.</p><p>é¦–å…ˆæ˜¯ iBatis çš„åˆå§‹åŒ–å·¥ä½œ.æˆ‘ä»¬çœ‹ä¸‹é¢çš„ä»£ç :</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=color:#75715e>// `BlogDataSourceFactory`çš„ä¸»è¦ä½œç”¨: é€šè¿‡ä½ çš„é…ç½®æ–‡ä»¶, åˆå§‹åŒ–ä¸€ä¸ªDataSource
</span><span style=color:#75715e></span>DataSource dataSource <span style=color:#f92672>=</span> BlogDataSourceFactory<span style=color:#f92672>.</span><span style=color:#a6e22e>getBlogDataSource</span><span style=color:#f92672>();</span>
<span style=color:#75715e>// JdbcTransactionFactoryä¸€ä¸ªNewå°±èƒ½å¾—åˆ°, æ²¡ä»€ä¹ˆä¾èµ–æ¡ä»¶
</span><span style=color:#75715e></span>TransactionFactory transactionFactory <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> JdbcTransactionFactory<span style=color:#f92672>();</span>
<span style=color:#75715e>// Environmentè¦ä½ äº¤å‡ºæ•°æ®æºå’Œäº‹åŠ¡å·¥å‚è¿˜æœ‰ä½ çš„ç¯å¢ƒæ˜¯å¼€å‘è¿˜æ˜¯ç”Ÿäº§
</span><span style=color:#75715e></span>Environment environment <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Environment<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;development&#34;</span><span style=color:#f92672>,</span> transactionFactory<span style=color:#f92672>,</span> dataSource<span style=color:#f92672>);</span>
<span style=color:#75715e>// Configurationæœ‰åŸºæœ¬ä¸Šä½ æ‰€æœ‰çš„é…ç½®
</span><span style=color:#75715e></span>Configuration configuration <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Configuration<span style=color:#f92672>(</span>environment<span style=color:#f92672>);</span>
<span style=color:#75715e>// æ·»åŠ ä½ çš„mapperåˆ°é…ç½®åˆ—è¡¨ä¸­, ç­‰ä¼šæˆ‘ä»¬å»åˆ†æå®ƒ
</span><span style=color:#75715e></span>configuration<span style=color:#f92672>.</span><span style=color:#a6e22e>addMapper</span><span style=color:#f92672>(</span>BlogMapper<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
<span style=color:#75715e>// é€šè¿‡ä½ çš„é…ç½®ç±»,è®©æˆ‘ä»¬åˆå§‹åŒ–ä¸€ä¸ªSqlSessionFactory! æˆ‘ä»¬ç»ˆäºè¿›å…¥æ­£é¢˜äº†!!
</span><span style=color:#75715e>// å¯èƒ½ä½ è§‰å¾—å¾ˆå¿«... å…¶å®æœ¬äººåœ¨è¿™é‡Œé¢åˆ†æè¿˜æ˜¯èŠ±äº†å¾ˆé•¿æ—¶é—´
</span><span style=color:#75715e></span>SqlSessionFactory sqlSessionFactory <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> SqlSessionFactoryBuilder<span style=color:#f92672>().</span><span style=color:#a6e22e>build</span><span style=color:#f92672>(</span>configuration<span style=color:#f92672>);</span>
</code></pre></div><p>å¥½, ä¸Šæ–‡æœ‰è¯´<code>configuration.addMapper(BlogMapper.class)</code>è¿™ä¸ªæ–¹æ³•, ç°åœ¨æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹å®ƒ.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java>
    <span style=color:#75715e>// è¿™ä¸ªæ˜¯Configurationä¸­çš„æ–¹æ³•, å®ƒå®é™…ä¸Šæ˜¯å§”æ‰˜mapperRegistryå»æ‰§è¡Œ
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>public</span> <span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>addMapper</span><span style=color:#f92672>(</span>Class<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> type<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        mapperRegistry<span style=color:#f92672>.</span><span style=color:#a6e22e>addMapper</span><span style=color:#f92672>(</span>type<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>addMapper</span><span style=color:#f92672>(</span>Class<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> type<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#75715e>//mapperå¿…é¡»æ˜¯æ¥å£
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>type<span style=color:#f92672>.</span><span style=color:#a6e22e>isInterface</span><span style=color:#f92672>())</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>hasMapper<span style=color:#f92672>(</span>type<span style=color:#f92672>))</span> <span style=color:#f92672>{</span>
            <span style=color:#75715e>//å¦‚æœé‡å¤æ·»åŠ äº†ï¼ŒæŠ¥é”™
</span><span style=color:#75715e></span>            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> BindingException<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Type &#34;</span> <span style=color:#f92672>+</span> type <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; is already known to the MapperRegistry.&#34;</span><span style=color:#f92672>);</span>
        <span style=color:#f92672>}</span>
        <span style=color:#66d9ef>boolean</span> loadCompleted <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>;</span>
        <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
            <span style=color:#75715e>// åŠ å…¥ä¸€ä¸ªMapperçš„ä»£ç†ç”Ÿäº§å·¥å‚
</span><span style=color:#75715e></span>            knownMappers<span style=color:#f92672>.</span><span style=color:#a6e22e>put</span><span style=color:#f92672>(</span>type<span style=color:#f92672>,</span> <span style=color:#66d9ef>new</span> MapperProxyFactory<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;(</span>type<span style=color:#f92672>));</span>
            <span style=color:#75715e>// It&#39;s important that the type is added before the parser is run
</span><span style=color:#75715e></span>            <span style=color:#75715e>// otherwise the binding may automatically be attempted by the
</span><span style=color:#75715e></span>            <span style=color:#75715e>// mapper parser. If the type is already known, it won&#39;t try.
</span><span style=color:#75715e></span>            <span style=color:#75715e>// è¿™ä¸ªæ˜¯é€šè¿‡æ³¨è§£æ¥æ„å»ºMapper, æš‚æ—¶ä¸çœ‹
</span><span style=color:#75715e></span>            MapperAnnotationBuilder parser <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> MapperAnnotationBuilder<span style=color:#f92672>(</span>config<span style=color:#f92672>,</span> type<span style=color:#f92672>);</span>
            parser<span style=color:#f92672>.</span><span style=color:#a6e22e>parse</span><span style=color:#f92672>();</span>
            loadCompleted <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span>
        <span style=color:#f92672>}</span> <span style=color:#66d9ef>finally</span> <span style=color:#f92672>{</span>
            <span style=color:#75715e>//å¦‚æœåŠ è½½è¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸éœ€è¦å†å°†è¿™ä¸ªmapperä»mybatisä¸­åˆ é™¤
</span><span style=color:#75715e></span>            <span style=color:#66d9ef>if</span> <span style=color:#f92672>(!</span>loadCompleted<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            knownMappers<span style=color:#f92672>.</span><span style=color:#a6e22e>remove</span><span style=color:#f92672>(</span>type<span style=color:#f92672>);</span>
            <span style=color:#f92672>}</span>
        <span style=color:#f92672>}</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
</code></pre></div><h1 id=sqlsessionfactory>SqlSessionFactory</h1><p>æ—¢ç„¶æœ‰äº† SqlSessionFactoryï¼Œé¡¾åæ€ä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸­è·å¾— SqlSession çš„å®ä¾‹ã€‚
SqlSession æä¾›äº†åœ¨æ•°æ®åº“æ‰§è¡Œ SQL å‘½ä»¤æ‰€éœ€çš„æ‰€æœ‰æ–¹æ³•ã€‚
ä½ å¯ä»¥é€šè¿‡ SqlSession å®ä¾‹æ¥ç›´æ¥æ‰§è¡Œå·²æ˜ å°„çš„ SQL è¯­å¥ã€‚</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>SqlSession session <span style=color:#f92672>=</span> sqlSessionFactory<span style=color:#f92672>.</span><span style=color:#a6e22e>openSession</span><span style=color:#f92672>())</span> <span style=color:#f92672>{</span>
  BlogMapper mapper <span style=color:#f92672>=</span> session<span style=color:#f92672>.</span><span style=color:#a6e22e>getMapper</span><span style=color:#f92672>(</span>BlogMapper<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
  Blog blog <span style=color:#f92672>=</span> mapper<span style=color:#f92672>.</span><span style=color:#a6e22e>selectBlog</span><span style=color:#f92672>(</span>101<span style=color:#f92672>);</span>
<span style=color:#f92672>}</span>
</code></pre></div><p>å¥½! æˆ‘ä»¬å¿«è¿›åˆ°<del>æ›¹ä¸•</del>sqlSessionFactory.openSession()</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java>    <span style=color:#66d9ef>public</span> SqlSession <span style=color:#a6e22e>openSession</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>return</span> openSessionFromDataSource<span style=color:#f92672>(</span>configuration<span style=color:#f92672>.</span><span style=color:#a6e22e>getDefaultExecutorType</span><span style=color:#f92672>(),</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>private</span> SqlSession <span style=color:#a6e22e>openSessionFromDataSource</span><span style=color:#f92672>(</span>ExecutorType execType<span style=color:#f92672>,</span> TransactionIsolationLevel level<span style=color:#f92672>,</span> <span style=color:#66d9ef>boolean</span> autoCommit<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#75715e>// Transactionäº‹åŠ¡ï¼ŒåŒ…è£…äº†ä¸€ä¸ªConnection, åŒ…å«commit,rollback,closeæ–¹æ³•
</span><span style=color:#75715e></span>    Transaction tx <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
    <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
      <span style=color:#75715e>// è¿˜è®°å¾—ä¹ˆ, environmenté‡Œå°è£…äº†æˆ‘ä»¬çš„æ•°æ®æº;äº‹åŠ¡å·¥å‚;è¿˜æœ‰ç¯å¢ƒ
</span><span style=color:#75715e></span>      <span style=color:#66d9ef>final</span> Environment environment <span style=color:#f92672>=</span> configuration<span style=color:#f92672>.</span><span style=color:#a6e22e>getEnvironment</span><span style=color:#f92672>();</span>
      <span style=color:#75715e>// å¾—åˆ°ä¸€ä¸ªäº‹åŠ¡å·¥å‚, å¦‚æœenvæˆ–è€…envé‡Œçš„äº‹åŠ¡å·¥å‚æ˜¯ç©ºçš„å°±è¿”å›ä¸€ä¸ªæ‰˜ç®¡äº‹åŠ¡å·¥å‚
</span><span style=color:#75715e></span>      <span style=color:#75715e>// æ‰˜ç®¡äº‹åŠ¡å·¥å‚çš„ç‰¹ç‚¹å°±æ˜¯æ¯æ¬¡æ‰§è¡Œå®ŒæˆSQLéƒ½ä¼šå…³é—­è¿æ¥, å¦‚æœä½ ä¸å¸Œæœ›å…³é—­è¿æ¥è¦åœ¨é…ç½®æ–‡ä»¶é‡Œè®¾ç½®å®ƒ
</span><span style=color:#75715e></span>      <span style=color:#66d9ef>final</span> TransactionFactory transactionFactory <span style=color:#f92672>=</span> getTransactionFactoryFromEnvironment<span style=color:#f92672>(</span>environment<span style=color:#f92672>);</span>
      <span style=color:#75715e>//é€šè¿‡äº‹åŠ¡å·¥å‚æ¥äº§ç”Ÿä¸€ä¸ªäº‹åŠ¡
</span><span style=color:#75715e></span>      tx <span style=color:#f92672>=</span> transactionFactory<span style=color:#f92672>.</span><span style=color:#a6e22e>newTransaction</span><span style=color:#f92672>(</span>environment<span style=color:#f92672>.</span><span style=color:#a6e22e>getDataSource</span><span style=color:#f92672>(),</span> level<span style=color:#f92672>,</span> autoCommit<span style=color:#f92672>);</span>
      <span style=color:#75715e>//ç”Ÿæˆä¸€ä¸ªæ‰§è¡Œå™¨(äº‹åŠ¡åŒ…å«åœ¨æ‰§è¡Œå™¨é‡Œ)
</span><span style=color:#75715e></span>      <span style=color:#66d9ef>final</span> Executor executor <span style=color:#f92672>=</span> configuration<span style=color:#f92672>.</span><span style=color:#a6e22e>newExecutor</span><span style=color:#f92672>(</span>tx<span style=color:#f92672>,</span> execType<span style=color:#f92672>);</span>
      <span style=color:#75715e>//ç„¶åäº§ç”Ÿä¸€ä¸ªDefaultSqlSession
</span><span style=color:#75715e></span>      <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> DefaultSqlSession<span style=color:#f92672>(</span>configuration<span style=color:#f92672>,</span> executor<span style=color:#f92672>,</span> autoCommit<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>Exception e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
      <span style=color:#75715e>//å¦‚æœæ‰“å¼€äº‹åŠ¡å‡ºé”™ï¼Œåˆ™å…³é—­å®ƒ
</span><span style=color:#75715e></span>      closeTransaction<span style=color:#f92672>(</span>tx<span style=color:#f92672>);</span> <span style=color:#75715e>// may have fetched a connection so lets call close()
</span><span style=color:#75715e></span>      <span style=color:#66d9ef>throw</span> ExceptionFactory<span style=color:#f92672>.</span><span style=color:#a6e22e>wrapException</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Error opening session.  Cause: &#34;</span> <span style=color:#f92672>+</span> e<span style=color:#f92672>,</span> e<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span> <span style=color:#66d9ef>finally</span> <span style=color:#f92672>{</span>
      <span style=color:#75715e>//æœ€åæ¸…ç©ºé”™è¯¯ä¸Šä¸‹æ–‡
</span><span style=color:#75715e></span>      ErrorContext<span style=color:#f92672>.</span><span style=color:#a6e22e>instance</span><span style=color:#f92672>().</span><span style=color:#a6e22e>reset</span><span style=color:#f92672>();</span>
    <span style=color:#f92672>}</span>
  <span style=color:#f92672>}</span>
</code></pre></div><p>è¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€ä¸ª<code>SqlSession</code>.</p><blockquote><p>2020.10.12 ç»§ç»­æ›´æ–°</p></blockquote><p>æœ‰äº†<code>SqlSession</code>ä¹‹åæˆ‘ä»¬å°±å¯ä»¥æ“ä½œæ•°æ®åº“äº†ã€‚</p><p>æˆ‘ä»¬æ¥çœ‹çœ‹MyBatisæ˜¯æ€ä¹ˆå®ç°<code>session.selectOne("org.mybatis.example.BlogMapper.selectBlog", 101);</code>çš„ã€‚</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java>  <span style=color:#66d9ef>public</span> <span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> T <span style=color:#a6e22e>selectOne</span><span style=color:#f92672>(</span>String statement<span style=color:#f92672>,</span> Object parameter<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
    <span style=color:#75715e>// Popular vote was to return null on 0 results and throw exception on too many.
</span><span style=color:#75715e></span>    <span style=color:#75715e>//è½¬è€Œå»è°ƒç”¨selectList,å¾ˆç®€å•çš„ï¼Œå¦‚æœå¾—åˆ°0æ¡åˆ™è¿”å›nullï¼Œå¾—åˆ°1æ¡åˆ™è¿”å›1æ¡ï¼Œå¾—åˆ°å¤šæ¡æŠ¥TooManyResultsExceptioné”™
</span><span style=color:#75715e></span>    <span style=color:#75715e>// ç‰¹åˆ«éœ€è¦ä¸»è¦çš„æ˜¯å½“æ²¡æœ‰æŸ¥è¯¢åˆ°ç»“æœçš„æ—¶å€™å°±ä¼šè¿”å›nullã€‚å› æ­¤ä¸€èˆ¬å»ºè®®åœ¨mapperä¸­ç¼–å†™resultTypeçš„æ—¶å€™ä½¿ç”¨åŒ…è£…ç±»å‹
</span><span style=color:#75715e></span>    <span style=color:#75715e>//è€Œä¸æ˜¯åŸºæœ¬ç±»å‹ï¼Œæ¯”å¦‚æ¨èä½¿ç”¨Integerè€Œä¸æ˜¯intã€‚è¿™æ ·å°±å¯ä»¥é¿å…NPE
</span><span style=color:#75715e></span>    List<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> list <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span><span style=color:#f92672>.&lt;</span>T<span style=color:#f92672>&gt;</span>selectList<span style=color:#f92672>(</span>statement<span style=color:#f92672>,</span> parameter<span style=color:#f92672>);</span>
    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>list<span style=color:#f92672>.</span><span style=color:#a6e22e>size</span><span style=color:#f92672>()</span> <span style=color:#f92672>==</span> 1<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
      <span style=color:#66d9ef>return</span> list<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>0<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>list<span style=color:#f92672>.</span><span style=color:#a6e22e>size</span><span style=color:#f92672>()</span> <span style=color:#f92672>&gt;</span> 1<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
      <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> TooManyResultsException<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Expected one result (or null) to be returned by selectOne(), but found: &#34;</span> <span style=color:#f92672>+</span> list<span style=color:#f92672>.</span><span style=color:#a6e22e>size</span><span style=color:#f92672>());</span>
    <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#f92672>{</span>
      <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>
  <span style=color:#f92672>}</span>

  <span style=color:#75715e>// emmï¼Œè¿™é‡Œå…¶å®å•¥éƒ½æ²¡æœ‰ï¼Œæˆ‘ä»¬å»SelectListçœ‹çœ‹ã€‚
</span><span style=color:#75715e></span>
  <span style=color:#75715e>// åœ¨ä¸‹æ¥è§£é‡Šä¸€ä¸‹è¿™ä¸‰ä¸ªå‚æ•°ï¼š
</span><span style=color:#75715e></span>  <span style=color:#75715e>// statement æ˜ å°„è¯­å¥çš„ä½ç½®ï¼Œæ¯”å¦‚&#34;org.mybatis.example.BlogMapper.selectBlog&#34;
</span><span style=color:#75715e></span>  <span style=color:#75715e>// parameter SQLè¯­å¥ä¸­çš„å‚æ•°
</span><span style=color:#75715e></span>  <span style=color:#75715e>// RowBounds åˆ†é¡µé™åˆ¶ï¼Œç›¸å½“äºSQLä¸­çš„limit. 
</span><span style=color:#75715e></span>  <span style=color:#66d9ef>public</span> <span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> List<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>selectList</span><span style=color:#f92672>(</span>String statement<span style=color:#f92672>,</span> Object parameter<span style=color:#f92672>,</span> RowBounds rowBounds<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
      <span style=color:#75715e>//æ ¹æ®statement idæ‰¾åˆ°å¯¹åº”çš„MappedStatement
</span><span style=color:#75715e></span>      MappedStatement ms <span style=color:#f92672>=</span> configuration<span style=color:#f92672>.</span><span style=color:#a6e22e>getMappedStatement</span><span style=color:#f92672>(</span>statement<span style=color:#f92672>);</span>
      <span style=color:#75715e>//è½¬è€Œç”¨æ‰§è¡Œå™¨æ¥æŸ¥è¯¢ç»“æœ,æ³¨æ„è¿™é‡Œä¼ å…¥çš„ResultHandleræ˜¯null
</span><span style=color:#75715e></span>      <span style=color:#75715e>// wrapCollectionï¼šå¦‚æœå‚æ•°æ˜¯Collectionç±»å‹ï¼Œè½¬æ¢æˆMapï¼Œkeyä¸ºparameterçš„type.
</span><span style=color:#75715e></span>      <span style=color:#66d9ef>return</span> executor<span style=color:#f92672>.</span><span style=color:#a6e22e>query</span><span style=color:#f92672>(</span>ms<span style=color:#f92672>,</span> wrapCollection<span style=color:#f92672>(</span>parameter<span style=color:#f92672>),</span> rowBounds<span style=color:#f92672>,</span> Executor<span style=color:#f92672>.</span><span style=color:#a6e22e>NO_RESULT_HANDLER</span><span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>Exception e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        
      <span style=color:#66d9ef>throw</span> ExceptionFactory<span style=color:#f92672>.</span><span style=color:#a6e22e>wrapException</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Error querying database.  Cause: &#34;</span> <span style=color:#f92672>+</span> e<span style=color:#f92672>,</span> e<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span> <span style=color:#66d9ef>finally</span> <span style=color:#f92672>{</span>
      ErrorContext<span style=color:#f92672>.</span><span style=color:#a6e22e>instance</span><span style=color:#f92672>().</span><span style=color:#a6e22e>reset</span><span style=color:#f92672>();</span>
    <span style=color:#f92672>}</span>
  <span style=color:#f92672>}</span>


  <span style=color:#75715e>// æ¥ä¸‹æ¥æ˜¯æ‰§è¡Œå™¨çš„éƒ¨åˆ†
</span><span style=color:#75715e></span>  <span style=color:#66d9ef>public</span> <span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> List<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>query</span><span style=color:#f92672>(</span>MappedStatement ms<span style=color:#f92672>,</span> Object parameter<span style=color:#f92672>,</span> RowBounds rowBounds<span style=color:#f92672>,</span> ResultHandler resultHandler<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> SQLException <span style=color:#f92672>{</span>
    <span style=color:#75715e>//å¾—åˆ°ç»‘å®šsqlï¼Œå°±æ˜¯å°†å‚æ•°æ’å…¥æ˜ å°„è¯­å¥é‡Œï¼Œè·å¾—å®Œæ•´çš„SQL
</span><span style=color:#75715e></span>    BoundSql boundSql <span style=color:#f92672>=</span> ms<span style=color:#f92672>.</span><span style=color:#a6e22e>getBoundSql</span><span style=color:#f92672>(</span>parameter<span style=color:#f92672>);</span>
    <span style=color:#75715e>//åˆ›å»ºç¼“å­˜Key
</span><span style=color:#75715e></span>    CacheKey key <span style=color:#f92672>=</span> createCacheKey<span style=color:#f92672>(</span>ms<span style=color:#f92672>,</span> parameter<span style=color:#f92672>,</span> rowBounds<span style=color:#f92672>,</span> boundSql<span style=color:#f92672>);</span>
    <span style=color:#75715e>//æŸ¥è¯¢
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>return</span> query<span style=color:#f92672>(</span>ms<span style=color:#f92672>,</span> parameter<span style=color:#f92672>,</span> rowBounds<span style=color:#f92672>,</span> resultHandler<span style=color:#f92672>,</span> key<span style=color:#f92672>,</span> boundSql<span style=color:#f92672>);</span>
 <span style=color:#f92672>}</span>

 <span style=color:#75715e>// æ‰§è¡ŒæŸ¥è¯¢
</span><span style=color:#75715e></span>  <span style=color:#66d9ef>public</span> <span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> List<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>query</span><span style=color:#f92672>(</span>MappedStatement ms<span style=color:#f92672>,</span> Object parameter<span style=color:#f92672>,</span> RowBounds rowBounds<span style=color:#f92672>,</span> ResultHandler resultHandler<span style=color:#f92672>,</span> CacheKey key<span style=color:#f92672>,</span> BoundSql boundSql<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> SQLException <span style=color:#f92672>{</span>
    <span style=color:#75715e>// ErrorContext æ˜¯æ¯ä¸ªçº¿ç¨‹å•ç‹¬ä½¿ç”¨çš„é”™è¯¯ä¸Šä¸‹æ–‡ï¼Œå®ƒæ˜¯ç”¨ThreadLocalåˆ¶ä½œçš„.
</span><span style=color:#75715e></span>    ErrorContext<span style=color:#f92672>.</span><span style=color:#a6e22e>instance</span><span style=color:#f92672>().</span><span style=color:#a6e22e>resource</span><span style=color:#f92672>(</span>ms<span style=color:#f92672>.</span><span style=color:#a6e22e>getResource</span><span style=color:#f92672>()).</span><span style=color:#a6e22e>activity</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;executing a query&#34;</span><span style=color:#f92672>).</span><span style=color:#a6e22e>object</span><span style=color:#f92672>(</span>ms<span style=color:#f92672>.</span><span style=color:#a6e22e>getId</span><span style=color:#f92672>());</span>
    <span style=color:#75715e>//å¦‚æœå·²ç»å…³é—­ï¼ŒæŠ¥é”™
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>closed<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
      <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> ExecutorException<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Executor was closed.&#34;</span><span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
    <span style=color:#75715e>//å…ˆæ¸…å±€éƒ¨ç¼“å­˜ï¼Œå†æŸ¥è¯¢.ä½†ä»…æŸ¥è¯¢å †æ ˆä¸º0ï¼Œæ‰æ¸…ã€‚ä¸ºäº†å¤„ç†é€’å½’è°ƒç”¨
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>queryStack <span style=color:#f92672>==</span> 0 <span style=color:#f92672>&amp;&amp;</span> ms<span style=color:#f92672>.</span><span style=color:#a6e22e>isFlushCacheRequired</span><span style=color:#f92672>())</span> <span style=color:#f92672>{</span>
      clearLocalCache<span style=color:#f92672>();</span>
    <span style=color:#f92672>}</span>
    List<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> list<span style=color:#f92672>;</span>
    <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
      <span style=color:#75715e>//åŠ ä¸€,è¿™æ ·é€’å½’è°ƒç”¨åˆ°ä¸Šé¢çš„æ—¶å€™å°±ä¸ä¼šå†æ¸…å±€éƒ¨ç¼“å­˜äº†
</span><span style=color:#75715e></span>      queryStack<span style=color:#f92672>++;</span>
      <span style=color:#75715e>//å…ˆæ ¹æ®cachekeyä»localCacheå»æŸ¥
</span><span style=color:#75715e></span>      list <span style=color:#f92672>=</span> resultHandler <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>?</span> <span style=color:#f92672>(</span>List<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;)</span> localCache<span style=color:#f92672>.</span><span style=color:#a6e22e>getObject</span><span style=color:#f92672>(</span>key<span style=color:#f92672>)</span> <span style=color:#f92672>:</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
      <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>list <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#75715e>//è‹¥æŸ¥åˆ°localCacheç¼“å­˜ï¼Œå¤„ç†localOutputParameterCache
</span><span style=color:#75715e></span>        handleLocallyCachedOutputParameters<span style=color:#f92672>(</span>ms<span style=color:#f92672>,</span> key<span style=color:#f92672>,</span> parameter<span style=color:#f92672>,</span> boundSql<span style=color:#f92672>);</span>
      <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#f92672>{</span>
        <span style=color:#75715e>//ä»æ•°æ®åº“æŸ¥
</span><span style=color:#75715e></span>        list <span style=color:#f92672>=</span> queryFromDatabase<span style=color:#f92672>(</span>ms<span style=color:#f92672>,</span> parameter<span style=color:#f92672>,</span> rowBounds<span style=color:#f92672>,</span> resultHandler<span style=color:#f92672>,</span> key<span style=color:#f92672>,</span> boundSql<span style=color:#f92672>);</span>
      <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span> <span style=color:#66d9ef>finally</span> <span style=color:#f92672>{</span>
      <span style=color:#75715e>//æ¸…ç©ºå †æ ˆ
</span><span style=color:#75715e></span>      queryStack<span style=color:#f92672>--;</span>
    <span style=color:#f92672>}</span>
    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>queryStack <span style=color:#f92672>==</span> 0<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
      <span style=color:#75715e>//å»¶è¿ŸåŠ è½½é˜Ÿåˆ—ä¸­æ‰€æœ‰å…ƒç´ 
</span><span style=color:#75715e></span>      <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>DeferredLoad deferredLoad <span style=color:#f92672>:</span> deferredLoads<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        deferredLoad<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>();</span>
      <span style=color:#f92672>}</span>

      <span style=color:#75715e>// issue #601
</span><span style=color:#75715e></span>      <span style=color:#75715e>//æ¸…ç©ºå»¶è¿ŸåŠ è½½é˜Ÿåˆ—
</span><span style=color:#75715e></span>      deferredLoads<span style=color:#f92672>.</span><span style=color:#a6e22e>clear</span><span style=color:#f92672>();</span>
      <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>configuration<span style=color:#f92672>.</span><span style=color:#a6e22e>getLocalCacheScope</span><span style=color:#f92672>()</span> <span style=color:#f92672>==</span> LocalCacheScope<span style=color:#f92672>.</span><span style=color:#a6e22e>STATEMENT</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#75715e>// issue #482
</span><span style=color:#75715e></span>    	<span style=color:#75715e>//å¦‚æœæ˜¯STATEMENTï¼Œæ¸…æœ¬åœ°ç¼“å­˜
</span><span style=color:#75715e></span>        clearLocalCache<span style=color:#f92672>();</span>
      <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
    <span style=color:#66d9ef>return</span> list<span style=color:#f92672>;</span>
  <span style=color:#f92672>}</span>
</code></pre></div><p>ä»¥ä¸Šæ˜¯<code>SqlSession.selectOne</code>çš„æµç¨‹ã€‚ç„¶è€Œå®é™…ä¸­æˆ‘ä»¬ç›´æ¥ä½¿ç”¨SqlSessionæ¥æ‰§è¡Œæ•°æ®åº“æ“ä½œçš„æƒ…å†µå¾ˆå°‘ã€‚</p><p>å¤§å¤šæ•°æƒ…å†µæˆ‘ä»¬ä¼šè¿™æ ·ä½¿ç”¨MyBatis:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>SqlSession session <span style=color:#f92672>=</span> sqlSessionFactory<span style=color:#f92672>.</span><span style=color:#a6e22e>openSession</span><span style=color:#f92672>())</span> <span style=color:#f92672>{</span>
  BlogMapper mapper <span style=color:#f92672>=</span> session<span style=color:#f92672>.</span><span style=color:#a6e22e>getMapper</span><span style=color:#f92672>(</span>BlogMapper<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
  Blog blog <span style=color:#f92672>=</span> mapper<span style=color:#f92672>.</span><span style=color:#a6e22e>selectBlog</span><span style=color:#f92672>(</span>101<span style=color:#f92672>);</span>
<span style=color:#f92672>}</span>
</code></pre></div><p>è¿™ä¸ªæ–¹æ³•çš„è¯¦ç»†è¿‡ç¨‹æˆ‘ä»¬ä½¿ç”¨MyBatisçš„å•å…ƒæµ‹è¯•æ¥æ¢ç´¢ã€‚</p><p>å•å…ƒæµ‹è¯•ä»£ç ï¼š</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java>  <span style=color:#a6e22e>@Test</span>
  <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>shouldSelectBlogWithPostsUsingSubSelect</span><span style=color:#f92672>()</span> <span style=color:#66d9ef>throws</span> Exception <span style=color:#f92672>{</span>
    SqlSession session <span style=color:#f92672>=</span> sqlSessionFactory<span style=color:#f92672>.</span><span style=color:#a6e22e>openSession</span><span style=color:#f92672>();</span>
    <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
      BoundBlogMapper mapper <span style=color:#f92672>=</span> session<span style=color:#f92672>.</span><span style=color:#a6e22e>getMapper</span><span style=color:#f92672>(</span>BoundBlogMapper<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
      Blog b <span style=color:#f92672>=</span> mapper<span style=color:#f92672>.</span><span style=color:#a6e22e>selectBlogWithPostsUsingSubSelect</span><span style=color:#f92672>(</span>1<span style=color:#f92672>);</span>
      assertEquals<span style=color:#f92672>(</span>1<span style=color:#f92672>,</span> b<span style=color:#f92672>.</span><span style=color:#a6e22e>getId</span><span style=color:#f92672>());</span>
      session<span style=color:#f92672>.</span><span style=color:#a6e22e>close</span><span style=color:#f92672>();</span>
      assertNotNull<span style=color:#f92672>(</span>b<span style=color:#f92672>.</span><span style=color:#a6e22e>getAuthor</span><span style=color:#f92672>());</span>
      assertEquals<span style=color:#f92672>(</span>101<span style=color:#f92672>,</span> b<span style=color:#f92672>.</span><span style=color:#a6e22e>getAuthor</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getId</span><span style=color:#f92672>());</span>
      assertEquals<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;jim&#34;</span><span style=color:#f92672>,</span> b<span style=color:#f92672>.</span><span style=color:#a6e22e>getAuthor</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getUsername</span><span style=color:#f92672>());</span>
      assertEquals<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;********&#34;</span><span style=color:#f92672>,</span> b<span style=color:#f92672>.</span><span style=color:#a6e22e>getAuthor</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getPassword</span><span style=color:#f92672>());</span>
      assertEquals<span style=color:#f92672>(</span>2<span style=color:#f92672>,</span> b<span style=color:#f92672>.</span><span style=color:#a6e22e>getPosts</span><span style=color:#f92672>().</span><span style=color:#a6e22e>size</span><span style=color:#f92672>());</span>
    <span style=color:#f92672>}</span> <span style=color:#66d9ef>finally</span> <span style=color:#f92672>{</span>
      session<span style=color:#f92672>.</span><span style=color:#a6e22e>close</span><span style=color:#f92672>();</span>
    <span style=color:#f92672>}</span>
  <span style=color:#f92672>}</span>
</code></pre></div><p>å¿«è¿›åˆ°<code>session.getMapper</code></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java>  <span style=color:#75715e>//è¿”å›ä»£ç†ç±»
</span><span style=color:#75715e></span>  <span style=color:#66d9ef>public</span> <span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> T <span style=color:#a6e22e>getMapper</span><span style=color:#f92672>(</span>Class<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> type<span style=color:#f92672>,</span> SqlSession sqlSession<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
    <span style=color:#75715e>// ç›´æ¥å¾—åˆ°è¯¥ç±»å‹Mapperä»£ç†å·¥å‚
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>final</span> MapperProxyFactory<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> mapperProxyFactory <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>MapperProxyFactory<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;)</span> knownMappers<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>type<span style=color:#f92672>);</span>
    <span style=color:#75715e>// æ²¡æœ‰å°±ç¦»è°±
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>mapperProxyFactory <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
      <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> BindingException<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Type &#34;</span> <span style=color:#f92672>+</span> type <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; is not known to the MapperRegistry.&#34;</span><span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
    <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
      <span style=color:#75715e>// é€šè¿‡å½“å‰Sessionç”Ÿäº§ä¸€ä¸ªä»£ç†
</span><span style=color:#75715e></span>      <span style=color:#66d9ef>return</span> mapperProxyFactory<span style=color:#f92672>.</span><span style=color:#a6e22e>newInstance</span><span style=color:#f92672>(</span>sqlSession<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>Exception e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
      <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> BindingException<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Error getting mapper instance. Cause: &#34;</span> <span style=color:#f92672>+</span> e<span style=color:#f92672>,</span> e<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
  <span style=color:#f92672>}</span>
</code></pre></div><p>å®é™…ä¸Šç”Ÿäº§Mapperçš„é€»è¾‘å¹¶ä¸å¤šã€‚</p><p>ä¸»è¦æ˜¯æ‰§è¡Œä»£ç†æ–¹æ³•æ—¶çš„åŠ¨ä½œã€‚</p><p>æ‰§è¡Œ<code>mapper.selectBlogWithPostsUsingSubSelect(1);</code>çš„é€»è¾‘å¦‚ä¸‹ï¼š</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java>  <span style=color:#75715e>// ç”±äºæ˜¯ä»£ç†ç”Ÿæˆçš„ï¼Œæ‰€ä»¥è°ƒç”¨æ–¹æ³•åä¼šè¿›å…¥ä¸€ä¸‹é€»è¾‘ï¼š
</span><span style=color:#75715e></span>  <span style=color:#a6e22e>@Override</span>
  <span style=color:#66d9ef>public</span> Object <span style=color:#a6e22e>invoke</span><span style=color:#f92672>(</span>Object proxy<span style=color:#f92672>,</span> Method method<span style=color:#f92672>,</span> Object<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> Throwable <span style=color:#f92672>{</span>
    <span style=color:#75715e>// å¦‚æœè¿™ä¸ªæ–¹æ³•æ˜¯æ¥è‡ªObjectï¼Œå°±ç›´æ¥æ‰§è¡Œï¼Œç›´æ¥è¿”å›
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>Object<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span>method<span style=color:#f92672>.</span><span style=color:#a6e22e>getDeclaringClass</span><span style=color:#f92672>()))</span> <span style=color:#f92672>{</span>
      <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>return</span> method<span style=color:#f92672>.</span><span style=color:#a6e22e>invoke</span><span style=color:#f92672>(</span><span style=color:#66d9ef>this</span><span style=color:#f92672>,</span> args<span style=color:#f92672>);</span>
      <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>Throwable t<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>throw</span> ExceptionUtil<span style=color:#f92672>.</span><span style=color:#a6e22e>unwrapThrowable</span><span style=color:#f92672>(</span>t<span style=color:#f92672>);</span>
      <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
    
    <span style=color:#75715e>// å»ç¼“å­˜ä¸­æ‰¾MapperMethodï¼Œç¬¬ä¸€æ¬¡çš„è¯ä¼šnewä¸€ä¸ª
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>final</span> MapperMethod mapperMethod <span style=color:#f92672>=</span> cachedMapperMethod<span style=color:#f92672>(</span>method<span style=color:#f92672>);</span>
    <span style=color:#75715e>//æ‰§è¡Œæœ¬ä½“
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>return</span> mapperMethod<span style=color:#f92672>.</span><span style=color:#a6e22e>execute</span><span style=color:#f92672>(</span>sqlSession<span style=color:#f92672>,</span> args<span style=color:#f92672>);</span>
  <span style=color:#f92672>}</span>

</code></pre></div><p>ä¸‹é¢å°±æ˜¯æ•´ä¸ªä»£ç†çš„æ‰§è¡Œæ•°æ®åº“æ“ä½œçš„é€»è¾‘ï¼Œæ¯”è¾ƒé•¿ï¼š</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java>  <span style=color:#66d9ef>public</span> Object <span style=color:#a6e22e>execute</span><span style=color:#f92672>(</span>SqlSession sqlSession<span style=color:#f92672>,</span> Object<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
    Object result<span style=color:#f92672>;</span>
    <span style=color:#75715e>//å¯ä»¥çœ‹åˆ°æ‰§è¡Œæ—¶å°±æ˜¯4ç§æƒ…å†µï¼Œinsert|update|delete|selectï¼Œåˆ†åˆ«è°ƒç”¨SqlSessionçš„4å¤§ç±»æ–¹æ³•
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>SqlCommandType<span style=color:#f92672>.</span><span style=color:#a6e22e>INSERT</span> <span style=color:#f92672>==</span> command<span style=color:#f92672>.</span><span style=color:#a6e22e>getType</span><span style=color:#f92672>())</span> <span style=color:#f92672>{</span>
      Object param <span style=color:#f92672>=</span> method<span style=color:#f92672>.</span><span style=color:#a6e22e>convertArgsToSqlCommandParam</span><span style=color:#f92672>(</span>args<span style=color:#f92672>);</span>
      result <span style=color:#f92672>=</span> rowCountResult<span style=color:#f92672>(</span>sqlSession<span style=color:#f92672>.</span><span style=color:#a6e22e>insert</span><span style=color:#f92672>(</span>command<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>(),</span> param<span style=color:#f92672>));</span>
    <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>SqlCommandType<span style=color:#f92672>.</span><span style=color:#a6e22e>UPDATE</span> <span style=color:#f92672>==</span> command<span style=color:#f92672>.</span><span style=color:#a6e22e>getType</span><span style=color:#f92672>())</span> <span style=color:#f92672>{</span>
      Object param <span style=color:#f92672>=</span> method<span style=color:#f92672>.</span><span style=color:#a6e22e>convertArgsToSqlCommandParam</span><span style=color:#f92672>(</span>args<span style=color:#f92672>);</span>
      result <span style=color:#f92672>=</span> rowCountResult<span style=color:#f92672>(</span>sqlSession<span style=color:#f92672>.</span><span style=color:#a6e22e>update</span><span style=color:#f92672>(</span>command<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>(),</span> param<span style=color:#f92672>));</span>
    <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>SqlCommandType<span style=color:#f92672>.</span><span style=color:#a6e22e>DELETE</span> <span style=color:#f92672>==</span> command<span style=color:#f92672>.</span><span style=color:#a6e22e>getType</span><span style=color:#f92672>())</span> <span style=color:#f92672>{</span>
      Object param <span style=color:#f92672>=</span> method<span style=color:#f92672>.</span><span style=color:#a6e22e>convertArgsToSqlCommandParam</span><span style=color:#f92672>(</span>args<span style=color:#f92672>);</span>
      result <span style=color:#f92672>=</span> rowCountResult<span style=color:#f92672>(</span>sqlSession<span style=color:#f92672>.</span><span style=color:#a6e22e>delete</span><span style=color:#f92672>(</span>command<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>(),</span> param<span style=color:#f92672>));</span>
    <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>SqlCommandType<span style=color:#f92672>.</span><span style=color:#a6e22e>SELECT</span> <span style=color:#f92672>==</span> command<span style=color:#f92672>.</span><span style=color:#a6e22e>getType</span><span style=color:#f92672>())</span> <span style=color:#f92672>{</span>
      <span style=color:#75715e>// æˆ‘ä»¬æ‰§è¡Œçš„æ˜¯æŸ¥è¯¢ï¼Œç›´æ¥è·³åˆ°è¿™é‡Œ
</span><span style=color:#75715e></span>      <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>method<span style=color:#f92672>.</span><span style=color:#a6e22e>returnsVoid</span><span style=color:#f92672>()</span> <span style=color:#f92672>&amp;&amp;</span> method<span style=color:#f92672>.</span><span style=color:#a6e22e>hasResultHandler</span><span style=color:#f92672>())</span> <span style=color:#f92672>{</span>
        <span style=color:#75715e>// æ£€æŸ¥æ˜¯ä¸æ˜¯æ²¡æœ‰è¿”å›å€¼ä»¥åŠç»“æœå¤„ç†å™¨: æˆ‘ä»¬æ‰§è¡Œçš„æ˜¯æŸ¥è¯¢ï¼Œæ˜¯æœ‰è¿”å›å€¼çš„
</span><span style=color:#75715e></span>        executeWithResultHandler<span style=color:#f92672>(</span>sqlSession<span style=color:#f92672>,</span> args<span style=color:#f92672>);</span>
        result <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
      <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>method<span style=color:#f92672>.</span><span style=color:#a6e22e>returnsMany</span><span style=color:#f92672>())</span> <span style=color:#f92672>{</span>
        <span style=color:#75715e>//å¦‚æœç»“æœæœ‰å¤šæ¡è®°å½•ï¼šæˆ‘ä»¬åªæŸ¥ä¸€æ¡
</span><span style=color:#75715e></span>        result <span style=color:#f92672>=</span> executeForMany<span style=color:#f92672>(</span>sqlSession<span style=color:#f92672>,</span> args<span style=color:#f92672>);</span>
      <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>method<span style=color:#f92672>.</span><span style=color:#a6e22e>returnsMap</span><span style=color:#f92672>())</span> <span style=color:#f92672>{</span>
        <span style=color:#75715e>//å¦‚æœç»“æœæ˜¯mapï¼šæˆ‘ä»¬æŸ¥çš„åªæ˜¯ä¸ªå¯¹è±¡
</span><span style=color:#75715e></span>        result <span style=color:#f92672>=</span> executeForMap<span style=color:#f92672>(</span>sqlSession<span style=color:#f92672>,</span> args<span style=color:#f92672>);</span>
      <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#f92672>{</span>
        <span style=color:#75715e>//å¦åˆ™å°±æ˜¯ä¸€æ¡è®°å½•
</span><span style=color:#75715e></span>        <span style=color:#75715e>// æˆ‘ä»¬ä»”ç»†åˆ†æè¿™ä¸ªconvertArgsToSqlCommandParamæ–¹æ³•
</span><span style=color:#75715e></span>        Object param <span style=color:#f92672>=</span> method<span style=color:#f92672>.</span><span style=color:#a6e22e>convertArgsToSqlCommandParam</span><span style=color:#f92672>(</span>args<span style=color:#f92672>);</span>
        <span style=color:#75715e>// ä¹‹åæˆ‘ä»¬åˆå›åˆ°äº†SelectOneè¿™ä¸ªæ–¹æ³•ã€‚
</span><span style=color:#75715e></span>        result <span style=color:#f92672>=</span> sqlSession<span style=color:#f92672>.</span><span style=color:#a6e22e>selectOne</span><span style=color:#f92672>(</span>command<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>(),</span> param<span style=color:#f92672>);</span>
      <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#f92672>{</span>
      <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> BindingException<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Unknown execution method for: &#34;</span> <span style=color:#f92672>+</span> command<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>());</span>
    <span style=color:#f92672>}</span>
    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>result <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>&amp;&amp;</span> method<span style=color:#f92672>.</span><span style=color:#a6e22e>getReturnType</span><span style=color:#f92672>().</span><span style=color:#a6e22e>isPrimitive</span><span style=color:#f92672>()</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>!</span>method<span style=color:#f92672>.</span><span style=color:#a6e22e>returnsVoid</span><span style=color:#f92672>())</span> <span style=color:#f92672>{</span>
      <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> BindingException<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Mapper method &#39;&#34;</span> <span style=color:#f92672>+</span> command<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>()</span>
          <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; attempted to return null from a method with a primitive return type (&#34;</span> <span style=color:#f92672>+</span> method<span style=color:#f92672>.</span><span style=color:#a6e22e>getReturnType</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;).&#34;</span><span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
    <span style=color:#66d9ef>return</span> result<span style=color:#f92672>;</span>
  <span style=color:#f92672>}</span>


  <span style=color:#75715e>// å°†å‚æ•°è½¬æ¢ä¸ºSQLå‘½ä»¤å‚æ•°
</span><span style=color:#75715e></span>  <span style=color:#66d9ef>public</span> Object <span style=color:#a6e22e>convertArgsToSqlCommandParam</span><span style=color:#f92672>(</span>Object<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
      <span style=color:#75715e>// è¿™é‡Œæœ‰ä¸€ä¸ªå‘ï¼š
</span><span style=color:#75715e></span>      <span style=color:#75715e>// args æ˜¯Mapperæ–¹æ³•æ‰§è¡Œçš„å‚æ•°
</span><span style=color:#75715e></span>      <span style=color:#75715e>// param æ˜¯ç¼–å†™çš„SQLè¯­å¥æ‰€éœ€è¦çš„å‘½ä»¤å‚æ•°
</span><span style=color:#75715e></span>      <span style=color:#75715e>// å®ƒä»¬æœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼š
</span><span style=color:#75715e></span>      <span style=color:#75715e>// åœ¨MyBatisä¸­ä½ éœ€è¦ä½¿ç”¨åˆ†é¡µæ—¶å¯ä»¥ä¸æ˜¾å¼åœ¨SQLè¯­å¥ä¸­ä½¿ç”¨limitå‘½ä»¤
</span><span style=color:#75715e></span>      <span style=color:#75715e>// ä½¿ç”¨RowBoundså¯¹è±¡ä½œä¸ºMapperçš„é¢å¤–å‚æ•°æ¥åšåˆ°æ•°æ®åˆ†é¡µ
</span><span style=color:#75715e></span>      <span style=color:#75715e>// è¯¥å‚æ•°ä¸ç”¨åœ¨SQLè¯­å¥ä¸­æ˜¾å¼ä½¿ç”¨.
</span><span style=color:#75715e></span>      <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>int</span> paramCount <span style=color:#f92672>=</span> params<span style=color:#f92672>.</span><span style=color:#a6e22e>size</span><span style=color:#f92672>();</span>
      <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>args <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>||</span> paramCount <span style=color:#f92672>==</span> 0<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#75715e>//å¦‚æœæ²¡å‚æ•°
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
      <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> <span style=color:#f92672>(!</span>hasNamedParameters <span style=color:#f92672>&amp;&amp;</span> paramCount <span style=color:#f92672>==</span> 1<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#75715e>//å¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>return</span> args<span style=color:#f92672>[</span>params<span style=color:#f92672>.</span><span style=color:#a6e22e>keySet</span><span style=color:#f92672>().</span><span style=color:#a6e22e>iterator</span><span style=color:#f92672>().</span><span style=color:#a6e22e>next</span><span style=color:#f92672>().</span><span style=color:#a6e22e>intValue</span><span style=color:#f92672>()];</span>
      <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#f92672>{</span>
        <span style=color:#75715e>//å¦åˆ™ï¼Œè¿”å›ä¸€ä¸ªParamMapï¼Œä¿®æ”¹å‚æ•°åï¼Œå‚æ•°åå°±æ˜¯å…¶ä½ç½®
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>final</span> Map<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>,</span> Object<span style=color:#f92672>&gt;</span> param <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ParamMap<span style=color:#f92672>&lt;</span>Object<span style=color:#f92672>&gt;();</span>
        <span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span>
        <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>Map<span style=color:#f92672>.</span><span style=color:#a6e22e>Entry</span><span style=color:#f92672>&lt;</span>Integer<span style=color:#f92672>,</span> String<span style=color:#f92672>&gt;</span> entry <span style=color:#f92672>:</span> params<span style=color:#f92672>.</span><span style=color:#a6e22e>entrySet</span><span style=color:#f92672>())</span> <span style=color:#f92672>{</span>
          <span style=color:#75715e>//1.å…ˆåŠ ä¸€ä¸ª#{0},#{1},#{2}...å‚æ•°
</span><span style=color:#75715e></span>          param<span style=color:#f92672>.</span><span style=color:#a6e22e>put</span><span style=color:#f92672>(</span>entry<span style=color:#f92672>.</span><span style=color:#a6e22e>getValue</span><span style=color:#f92672>(),</span> args<span style=color:#f92672>[</span>entry<span style=color:#f92672>.</span><span style=color:#a6e22e>getKey</span><span style=color:#f92672>().</span><span style=color:#a6e22e>intValue</span><span style=color:#f92672>()]);</span>
          <span style=color:#75715e>// issue #71, add param names as param1, param2...but ensure backward compatibility
</span><span style=color:#75715e></span>          <span style=color:#66d9ef>final</span> String genericParamName <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;param&#34;</span> <span style=color:#f92672>+</span> String<span style=color:#f92672>.</span><span style=color:#a6e22e>valueOf</span><span style=color:#f92672>(</span>i <span style=color:#f92672>+</span> 1<span style=color:#f92672>);</span>
          <span style=color:#66d9ef>if</span> <span style=color:#f92672>(!</span>param<span style=color:#f92672>.</span><span style=color:#a6e22e>containsKey</span><span style=color:#f92672>(</span>genericParamName<span style=color:#f92672>))</span> <span style=color:#f92672>{</span>
            <span style=color:#75715e>//2.å†åŠ ä¸€ä¸ª#{param1},#{param2}...å‚æ•°
</span><span style=color:#75715e></span>            <span style=color:#75715e>//ä½ å¯ä»¥ä¼ é€’å¤šä¸ªå‚æ•°ç»™ä¸€ä¸ªæ˜ å°„å™¨æ–¹æ³•ã€‚å¦‚æœä½ è¿™æ ·åšäº†,
</span><span style=color:#75715e></span>            <span style=color:#75715e>//é»˜è®¤æƒ…å†µä¸‹å®ƒä»¬å°†ä¼šä»¥å®ƒä»¬åœ¨å‚æ•°åˆ—è¡¨ä¸­çš„ä½ç½®æ¥å‘½å,æ¯”å¦‚:#{param1},#{param2}ç­‰ã€‚
</span><span style=color:#75715e></span>            <span style=color:#75715e>//å¦‚æœä½ æƒ³æ”¹å˜å‚æ•°çš„åç§°(åªåœ¨å¤šå‚æ•°æƒ…å†µä¸‹) ,é‚£ä¹ˆä½ å¯ä»¥åœ¨å‚æ•°ä¸Šä½¿ç”¨@Param(â€œparamNameâ€)æ³¨è§£ã€‚
</span><span style=color:#75715e></span>            param<span style=color:#f92672>.</span><span style=color:#a6e22e>put</span><span style=color:#f92672>(</span>genericParamName<span style=color:#f92672>,</span> args<span style=color:#f92672>[</span>entry<span style=color:#f92672>.</span><span style=color:#a6e22e>getKey</span><span style=color:#f92672>()]);</span>
          <span style=color:#f92672>}</span>
          i<span style=color:#f92672>++;</span>
        <span style=color:#f92672>}</span>
        <span style=color:#66d9ef>return</span> param<span style=color:#f92672>;</span>
      <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>

</code></pre></div><p>OK, æˆ‘åŸºæœ¬æƒ³è¯´çš„éƒ½è¯´å®Œäº†ã€‚åç»­å¯èƒ½ä¼šé¢å¤–è¡¥å……ä¸€äº›å†…å®¹ï¼Œä½†æ˜¯ä¸ä¼šåœ¨æœ¬æ–‡ä¸­ï¼Œä¼šå†™æ–°æ–‡ç« ã€‚</p></content><p><a href=https://sdttttt.github.io/tags/java/>#Java</a></p></main><footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css><script src=https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js></script><div id=gitalk-container></div><script>var gitalk=new Gitalk({clientID:'747ab8530477531c3d25',clientSecret:'af2cc18e4c27998636a6a3c82af0064f38574170',repo:'sdttttt.github.io',owner:'sdttttt',admin:['sdttttt'],id:location.pathname,distractionFreeMode:true})
gitalk.render('gitalk-container')</script><a href=https://github.com/janraasch/hugo-bearblog/>Hugo Ê•â€¢á´¥â€¢Ê”</a></footer></body></html>