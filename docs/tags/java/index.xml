<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>java on SDTTTTT's Smelly fish Rotten shrimp ğŸ““</title><link>https://sdttttt.github.io/tags/java/</link><description>Recent content in java on SDTTTTT's Smelly fish Rotten shrimp ğŸ““</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><copyright>Copyright Â© 2020, SDTTTTT.</copyright><lastBuildDate>Fri, 05 Feb 2021 10:57:31 +0800</lastBuildDate><atom:link href="https://sdttttt.github.io/tags/java/index.xml" rel="self" type="application/rss+xml"/><item><title>è®°å½•ä¸€æ¬¡Gradleæ„å»ºçš„å›°éš¾</title><link>https://sdttttt.github.io/blog/gradle-build-for-idiotc4t/</link><pubDate>Fri, 05 Feb 2021 10:57:31 +0800</pubDate><guid>https://sdttttt.github.io/blog/gradle-build-for-idiotc4t/</guid><description>å—@idiotc4tæ‰€æ‰˜, æˆ‘æ‹¿åˆ°äº†ä¸€ä¸ªJavaé¡¹ç›®, ç›®çš„æ˜¯è¦æŠŠè¿™ç©æ„ç¼–è¯‘å‡ºæ¥, æœ€åˆæˆ‘è¿˜ä»¥ä¸ºå’Œä»¥å‰çš„Javaé¡¹ç›®ç±»ä¼¼, åªè¦mvn build å°±èƒ½ä¸€äº†ç™¾äº†, æ²¡æƒ³åˆ°è¿™æ¬¡æ‹¿åˆ°çš„æ˜¯ä¸€ä¸ªä½¿ç”¨gradleæ„å»ºçš„é¡¹ç›®.
gradleçš„å‡ºç°æ¯”mavenæ™š, å®ƒä»¬éƒ½æ˜¯ç”¨æ¥æ„å»ºè¿è¡Œåœ¨JVMä¸Šçš„åº”ç”¨ä½¿ç”¨çš„, gradleå¯ä»¥ä½¿ç”¨ç¼–ç¨‹è¯­è¨€æ¥è‡ªå®šä¹‰ä½ çš„æ„å»ºæµç¨‹, ç±»ä¼¼Cçš„makefile(è¿™ä¸ªæ¯”å–»ä¸å¤ªå¥½å…¶å®), æˆ–è€…æ˜¯JavaScriptçš„gulp. gradleè§£å†³äº†mavençš„ä¸€äº›ç‰¹ç‚¹, æ¯”å¦‚xmlçš„é…ç½®ç¹ç, çœ‹ç€å°±å¤´å¤§, ä»¥åŠæ„å»ºæ­¥éª¤çš„çµæ´»æ§åˆ¶. æ€»ä¹‹å¾ˆç‰›é€¼å°±æ˜¯äº†, ä¹Ÿæ¯”è¾ƒéš¾ä¸Šæ‰‹.
ç”±äºæˆ‘ä»¥å‰ä½¿ç”¨è¿‡ä¸€æ®µæ—¶é—´çš„gradle, æ‰€ä»¥æˆ‘çŸ¥é“ç”¨gradleæ‰“jaråŒ…çš„å›°éš¾. (gradleè¿™ä¸ªå·¥å…·é€šå¸¸éƒ½æ˜¯ç»™Androidå¼€å‘è€…ç”¨çš„, é»˜è®¤æ²¡æœ‰æä¾›æ‰“æˆJaråŒ…çš„é€‰é¡¹, æ‰€ä»¥æ‰“å‡ºæ¥ä»€ä¹ˆåŒ…, å¾—çœ‹ç¼˜åˆ†.)
å½“æˆ‘è¿è¡Œgradle buildå, å…‰é€Ÿæ„å»ºå®Œæˆ, æˆ‘å®šç¥ä¸€çœ‹, æ²¡æœ‰å·¥ç¨‹æ–‡ä»¶ç›®å½•, å€’æ˜¯æœ‰ä¸€ä¸ªjaråŒ… ,è¿™ä¸ªjaråŒ…å°±14KB, å¥½å®¶ä¼™, è‚¯å®šæ²¡æ„å»ºæˆåŠŸ. (æ­£å¸¸çš„javaç¨‹åºç»å¯¹ä¸ä¼šè¿™ä¹ˆå°, ä¸€èˆ¬è‚¯å®šæ˜¯1MBä»¥ä¸Š) è¾“å…¥java -jarä¸€çœ‹, æœç„¶:
...jar: æ²¡æœ‰ä¸»æ¸…å•å±æ€§ æ€»ä¹‹æˆ‘åœ¨ç½‘ä¸ŠæŸ¥äº†åŠå¤©éƒ½æ²¡å‘ç°è§£å†³æ–¹æ³•. æœ€åæŠŠç›®å…‰è½¬å‘ä»£ç , æœ€åå‘ç°åœ¨ä»£ç ä¸­éƒ½æ²¡æœ‰å£°æ˜åŒ…è·¯å¾„&amp;hellip;
(å˜¶&amp;hellip;.è¿™å®åœ¨READMEé‡Œæ˜¯æ€ä¹ˆæ‰“åŒ…çš„???æˆ‘æ€€ç–‘æœ‰è¿™Bç•™äº†ä¸€æ‰‹)
æœ€åç”¨å®‡å®™ç¬¬ä¸€IDE(IDEA)é‡æ„äº†æ•´ä¸ªåŒ…çš„ä»£ç , è¡¥ä¸Šäº†åŒ…è·¯å¾„. å†æ¬¡å°è¯•gradle build,ç»ˆäºçœ‹åˆ°äº†å·¥ç¨‹æ–‡ä»¶.
å†™å®Œäº†, æ‘¸äº†.</description></item><item><title>RocketMQ 3.3.4 Broker</title><link>https://sdttttt.github.io/blog/rocketmq-comments/</link><pubDate>Tue, 13 Oct 2020 16:56:11 +0800</pubDate><guid>https://sdttttt.github.io/blog/rocketmq-comments/</guid><description>å·®ä¸å¤šå¯ä»¥çœ‹æ¶ˆæ¯é˜Ÿåˆ—çš„æºç äº†ã€‚ åœ¨ä¸‹ä»giteeä¸Šæ‰¾åˆ°äº†rocketmqçš„æ—©æœŸç‰ˆæœ¬ï¼ˆ3.2.2ï¼‰ï¼Œ åæ¶ˆæ¯æ˜¯è¿™ä¸ª2014å¹´çš„é¡¹ç›®é‡Œæ²¡æœ‰å•å…ƒæµ‹è¯•æå°‘, è°ƒè¯•ä¼šæ¯”è¾ƒå›°éš¾. å¥½æ¶ˆæ¯æ˜¯è¿™ä¸ªæ—¶å€™çš„RocketMQè¿˜æ²¡å¼€æºå¤šä¹…ï¼Œé‡Œé¢æœ‰å¾ˆå¤šä¸­æ–‡æ³¨é‡Šã€‚çœ‹èµ·æ¥ä¼šå¾ˆèˆ’æœã€‚
æˆ‘ä»¬ä»Brokerå¼€å§‹æ¶‚é¸¦ã€‚å…³äºRocketMQä¸­æ¯ä¸ªè§’è‰²çš„ä½œç”¨è¿™é‡Œä¸å†é™ˆè¿°ï¼š
å…ˆä»åˆå§‹åŒ–å¼€å§‹ï¼š
public static void main(String[] args) { start(createBrokerController(args)); } rocketmqæ˜¯ä»commandlineå¯åŠ¨çš„ï¼ŒcreateBrokerControllerå‡½æ•°æ¯”è¾ƒé•¿ï¼Œ ä¼šæœ‰å¾ˆå¤šé¢å¤–çš„é€»è¾‘å¹²æ‰°ä½ ï¼Œæˆ‘è¿™é‡Œç›´æ¥è¯´é‡ç‚¹ï¼š
è¯»å–ç¯å¢ƒå˜é‡ï¼Œæ²¡æœ‰å°±ç”¨é»˜è®¤å€¼ã€‚ è§£æå‘½ä»¤è¡Œå‚æ•°ã€‚ åˆå§‹åŒ–é…ç½®ç±»ã€‚ æ‰“å°é»˜è®¤é…ç½®å†…å®¹ã€‚ æ£€æŸ¥NameServeråœ°å€è®¾ç½®æ˜¯å¦æ­£ç¡®ã€‚ æ£€æŸ¥brokerçš„ç±»å‹ï¼ˆmasterï¼Œslaveï¼‰ åˆå§‹åŒ–æ—¥å¿—é…ç½®ç±»ã€‚ å†æ¬¡æ‰“å°ã€‚ åˆå§‹åŒ–æœåŠ¡æ§åˆ¶å¯¹è±¡. æœ€åå¢åŠ ä¸€ä¸ªå…³é—­Brokeræ—¶è§¦å‘çš„hook. æœåŠ¡æ§åˆ¶å¯¹è±¡ï¼š Brokerå„ä¸ªæœåŠ¡æ§åˆ¶å™¨ï¼ŒåŒ…æ‹¬å­˜å‚¨å±‚é…ç½®ï¼Œé…ç½®æ–‡ä»¶ç‰ˆæœ¬å·ï¼Œæ¶ˆè´¹è¿›åº¦å­˜å‚¨ï¼ŒConsumerè¿æ¥ã€è®¢é˜…å…³ç³»ç®¡ç†ç­‰ç­‰ã€‚
ä»¥ä¸Šå°±æ˜¯createBrokerControllerçš„å†…å®¹ï¼Œå‡½æ•°è™½ç„¶é•¿ï¼Œä½†æ˜¯å¹¶ä¸å¤æ‚ã€‚
ä¸‹é¢ä¸ºstartå‡½æ•°çš„å†…å®¹, åœ¨mainä¸­çš„startå‡½æ•°å®é™…ä¸Šæ˜¯å»å§”æ‰˜äº†BrokerControllerå»æ‰§è¡Œ.
public void start() throws Exception { // å¯åŠ¨Brokerçš„å„å±‚æœåŠ¡ if (this.messageStore != null) { this.messageStore.start(); } if (this.remotingServer != null) { this.remotingServer.start(); } if (this.brokerOuterAPI != null) { this.brokerOuterAPI.start(); } if (this.pullRequestHoldService != null) { this.</description></item><item><title>MyBatis æºç åˆ†æ</title><link>https://sdttttt.github.io/blog/mybatissourcecode/</link><pubDate>Thu, 10 Sep 2020 22:15:42 +0800</pubDate><guid>https://sdttttt.github.io/blog/mybatissourcecode/</guid><description>å…¶å®å¾ˆæ—©å°±æƒ³å†™ä¸€ç¯‡ iBatis çš„æºç åˆ†æäº†, ä¸è¿‡æœ‰æ®µæ—¶é—´å»å­¦ä¹  Go äº†, Java å°±æ”¾ä¸‹äº†, æœ€è¿‘ é‡æ–°æ¡èµ· Java å°±æŠŠä»¥å‰æ²¡å¡«çš„å‘,å¡«ä¸€ä¸‹.
Init ç°åœ¨å¼€å§‹æ­£ç‰‡.
é¦–å…ˆæ˜¯ iBatis çš„åˆå§‹åŒ–å·¥ä½œ.æˆ‘ä»¬çœ‹ä¸‹é¢çš„ä»£ç :
// `BlogDataSourceFactory`çš„ä¸»è¦ä½œç”¨: é€šè¿‡ä½ çš„é…ç½®æ–‡ä»¶, åˆå§‹åŒ–ä¸€ä¸ªDataSource DataSource dataSource = BlogDataSourceFactory.getBlogDataSource(); // JdbcTransactionFactoryä¸€ä¸ªNewå°±èƒ½å¾—åˆ°, æ²¡ä»€ä¹ˆä¾èµ–æ¡ä»¶ TransactionFactory transactionFactory = new JdbcTransactionFactory(); // Environmentè¦ä½ äº¤å‡ºæ•°æ®æºå’Œäº‹åŠ¡å·¥å‚è¿˜æœ‰ä½ çš„ç¯å¢ƒæ˜¯å¼€å‘è¿˜æ˜¯ç”Ÿäº§ Environment environment = new Environment(&amp;#34;development&amp;#34;, transactionFactory, dataSource); // Configurationæœ‰åŸºæœ¬ä¸Šä½ æ‰€æœ‰çš„é…ç½® Configuration configuration = new Configuration(environment); // æ·»åŠ ä½ çš„mapperåˆ°é…ç½®åˆ—è¡¨ä¸­, ç­‰ä¼šæˆ‘ä»¬å»åˆ†æå®ƒ configuration.addMapper(BlogMapper.class); // é€šè¿‡ä½ çš„é…ç½®ç±»,è®©æˆ‘ä»¬åˆå§‹åŒ–ä¸€ä¸ªSqlSessionFactory! æˆ‘ä»¬ç»ˆäºè¿›å…¥æ­£é¢˜äº†!! // å¯èƒ½ä½ è§‰å¾—å¾ˆå¿«... å…¶å®æœ¬äººåœ¨è¿™é‡Œé¢åˆ†æè¿˜æ˜¯èŠ±äº†å¾ˆé•¿æ—¶é—´ SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(configuration); å¥½, ä¸Šæ–‡æœ‰è¯´configuration.addMapper(BlogMapper.class)è¿™ä¸ªæ–¹æ³•, ç°åœ¨æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹å®ƒ.
// è¿™ä¸ªæ˜¯Configurationä¸­çš„æ–¹æ³•, å®ƒå®é™…ä¸Šæ˜¯å§”æ‰˜mapperRegistryå»æ‰§è¡Œ public &amp;lt;T&amp;gt; void addMapper(Class&amp;lt;T&amp;gt; type) { mapperRegistry.</description></item><item><title>Thread Pool Executor è¿è¡Œç»†èŠ‚</title><link>https://sdttttt.github.io/blog/thread_pool_executor/</link><pubDate>Tue, 25 Aug 2020 17:29:15 +0800</pubDate><guid>https://sdttttt.github.io/blog/thread_pool_executor/</guid><description>å…ˆè¯´è¯´çº¿ç¨‹æ± æœ¬èº«, ç”±äºçº¿ç¨‹èµ„æºæœ¬èº«åœ¨è®¡ç®—æœºä¸­æ¯”è¾ƒæ˜‚è´µ, åˆ›å»ºå’Œé”€æ¯éƒ½æœ‰ç›¸å½“çš„å¼€é”€, æ‰€ä»¥åœ¨ä¸€äº›å¤„ç†ç®€å•ä½†æ˜¯å¹¶å‘é‡å¤§çš„åœºæ™¯ä½¿ç”¨ä¸€ä¸ªè¯·æ±‚å¯¹åº”ä¸€ä¸ªçº¿ç¨‹çš„æ˜¯ä¸æ˜æ™ºçš„é€‰æ‹©.
ThreadPoolExecutoræ˜¯Javaä¸­çº¿ç¨‹æ± çš„ä¸€ç§å®ç°. æ„é€ å‡½æ•°å¦‚ä¸‹:
public ThreadPoolExecutor(int corePoolSize, // æ ¸å¿ƒçº¿ç¨‹æ•°é‡ int maximumPoolSize, // æœ€å¤§çº¿ç¨‹æ•°é‡ long keepAliveTime, // å­˜æ´»æ—¶é—´ TimeUnit unit, // æ—¶é—´å•ä½ BlockingQueue&amp;lt;Runnable&amp;gt; workQueue // æ¥ä¸ªåˆ—é˜Ÿ ) { this(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue, Executors.defaultThreadFactory(), defaultHandler); } æäº¤ä»»åŠ¡æ—¶çš„è¿è¡Œå¦‚ä¸‹:
å¦‚æœæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æ•° &amp;lt; coreSizeï¼Œé©¬ä¸Šåˆ›å»ºçº¿ç¨‹æ‰§è¡Œè¯¥taskï¼Œä¸æ’é˜Ÿç­‰å¾…ï¼› å¦‚æœæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æ•° &amp;gt;= coreSizeï¼ŒæŠŠè¯¥taskæ”¾å…¥é˜»å¡é˜Ÿåˆ—ï¼› å¦‚æœé˜Ÿåˆ—å·²æ»¡ &amp;amp;&amp;amp; æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æ•° &amp;lt; maximumPoolSizeï¼Œåˆ›å»ºæ–°çš„çº¿ç¨‹æ‰§è¡Œè¯¥taskï¼› å¦‚æœé˜Ÿåˆ—å·²æ»¡ &amp;amp;&amp;amp; æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æ•° &amp;gt;= maximumPoolSizeï¼Œçº¿ç¨‹æ± è°ƒç”¨handlerçš„rejectæ–¹æ³•æ‹’ç»æœ¬æ¬¡æäº¤ã€‚ ä»workerçº¿ç¨‹è‡ªå·±çš„è§’åº¦æ¥çœ‹ï¼Œå½“workerçš„taskæ‰§è¡Œç»“æŸä¹‹åï¼Œå¾ªç¯ä»é˜»å¡é˜Ÿåˆ—ä¸­å–å‡ºä»»åŠ¡æ‰§è¡Œã€‚</description></item></channel></rss>