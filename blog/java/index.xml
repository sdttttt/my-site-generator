<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Java on SDTTTTT's Smelly fish Rotten shrimp ğŸ““</title><link>https://sdttttt.github.io/blog/java/</link><description>Recent content in Java on SDTTTTT's Smelly fish Rotten shrimp ğŸ““</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><copyright>Copyright Â© 2020, SDTTTTT.</copyright><lastBuildDate>Thu, 10 Sep 2020 22:15:42 +0800</lastBuildDate><atom:link href="https://sdttttt.github.io/blog/java/index.xml" rel="self" type="application/rss+xml"/><item><title>MyBatis æºç åˆ†æ</title><link>https://sdttttt.github.io/mybatis-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/</link><pubDate>Thu, 10 Sep 2020 22:15:42 +0800</pubDate><guid>https://sdttttt.github.io/mybatis-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/</guid><description>å…¶å®å¾ˆæ—©å°±æƒ³å†™ä¸€ç¯‡ iBatis çš„æºç åˆ†æäº†, ä¸è¿‡æœ‰æ®µæ—¶é—´å»å­¦ä¹  Go äº†, Java å°±æ”¾ä¸‹äº†, æœ€è¿‘ é‡æ–°æ¡èµ· Java å°±æŠŠä»¥å‰æ²¡å¡«çš„å‘,å¡«ä¸€ä¸‹.
Init ç°åœ¨å¼€å§‹æ­£ç‰‡.
é¦–å…ˆæ˜¯ iBatis çš„åˆå§‹åŒ–å·¥ä½œ.æˆ‘ä»¬çœ‹ä¸‹é¢çš„ä»£ç :
// `BlogDataSourceFactory`çš„ä¸»è¦ä½œç”¨: é€šè¿‡ä½ çš„é…ç½®æ–‡ä»¶, åˆå§‹åŒ–ä¸€ä¸ªDataSource DataSource dataSource = BlogDataSourceFactory.getBlogDataSource(); // JdbcTransactionFactoryä¸€ä¸ªNewå°±èƒ½å¾—åˆ°, æ²¡ä»€ä¹ˆä¾èµ–æ¡ä»¶ TransactionFactory transactionFactory = new JdbcTransactionFactory(); // Environmentè¦ä½ äº¤å‡ºæ•°æ®æºå’Œäº‹åŠ¡å·¥å‚è¿˜æœ‰ä½ çš„ç¯å¢ƒæ˜¯å¼€å‘è¿˜æ˜¯ç”Ÿäº§ Environment environment = new Environment(&amp;#34;development&amp;#34;, transactionFactory, dataSource); // Configurationæœ‰åŸºæœ¬ä¸Šä½ æ‰€æœ‰çš„é…ç½® Configuration configuration = new Configuration(environment); // æ·»åŠ ä½ çš„mapperåˆ°é…ç½®åˆ—è¡¨ä¸­, ç­‰ä¼šæˆ‘ä»¬å»åˆ†æå®ƒ configuration.addMapper(BlogMapper.class); // é€šè¿‡ä½ çš„é…ç½®ç±»,è®©æˆ‘ä»¬åˆå§‹åŒ–ä¸€ä¸ªSqlSessionFactory! æˆ‘ä»¬ç»ˆäºè¿›å…¥æ­£é¢˜äº†!! // å¯èƒ½ä½ è§‰å¾—å¾ˆå¿«... å…¶å®æœ¬äººåœ¨è¿™é‡Œé¢åˆ†æè¿˜æ˜¯èŠ±äº†å¾ˆé•¿æ—¶é—´ SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(configuration); å¥½, ä¸Šæ–‡æœ‰è¯´configuration.addMapper(BlogMapper.class)è¿™ä¸ªæ–¹æ³•, ç°åœ¨æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹å®ƒ.
// è¿™ä¸ªæ˜¯Configurationä¸­çš„æ–¹æ³•, å®ƒå®é™…ä¸Šæ˜¯å§”æ‰˜mapperRegistryå»æ‰§è¡Œ public &amp;lt;T&amp;gt; void addMapper(Class&amp;lt;T&amp;gt; type) { mapperRegistry.</description></item><item><title>Thread Pool Executor è¿è¡Œç»†èŠ‚</title><link>https://sdttttt.github.io/thread-pool-executor-%E8%BF%90%E8%A1%8C%E7%BB%86%E8%8A%82/</link><pubDate>Tue, 25 Aug 2020 17:29:15 +0800</pubDate><guid>https://sdttttt.github.io/thread-pool-executor-%E8%BF%90%E8%A1%8C%E7%BB%86%E8%8A%82/</guid><description>å…ˆè¯´è¯´çº¿ç¨‹æ± æœ¬èº«, ç”±äºçº¿ç¨‹èµ„æºæœ¬èº«åœ¨è®¡ç®—æœºä¸­æ¯”è¾ƒæ˜‚è´µ, åˆ›å»ºå’Œé”€æ¯éƒ½æœ‰ç›¸å½“çš„å¼€é”€, æ‰€ä»¥åœ¨ä¸€äº›å¤„ç†ç®€å•ä½†æ˜¯å¹¶å‘é‡å¤§çš„åœºæ™¯ä½¿ç”¨ä¸€ä¸ªè¯·æ±‚å¯¹åº”ä¸€ä¸ªçº¿ç¨‹çš„æ˜¯ä¸æ˜æ™ºçš„é€‰æ‹©.
ThreadPoolExecutoræ˜¯Javaä¸­çº¿ç¨‹æ± çš„ä¸€ç§å®ç°. æ„é€ å‡½æ•°å¦‚ä¸‹:
public ThreadPoolExecutor(int corePoolSize, // æ ¸å¿ƒçº¿ç¨‹æ•°é‡ int maximumPoolSize, // æœ€å¤§çº¿ç¨‹æ•°é‡ long keepAliveTime, // å­˜æ´»æ—¶é—´ TimeUnit unit, // æ—¶é—´å•ä½ BlockingQueue&amp;lt;Runnable&amp;gt; workQueue // æ¥ä¸ªåˆ—é˜Ÿ ) { this(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue, Executors.defaultThreadFactory(), defaultHandler); } æäº¤ä»»åŠ¡æ—¶çš„è¿è¡Œå¦‚ä¸‹:
å¦‚æœæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æ•° &amp;lt; coreSizeï¼Œé©¬ä¸Šåˆ›å»ºçº¿ç¨‹æ‰§è¡Œè¯¥taskï¼Œä¸æ’é˜Ÿç­‰å¾…ï¼› å¦‚æœæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æ•° &amp;gt;= coreSizeï¼ŒæŠŠè¯¥taskæ”¾å…¥é˜»å¡é˜Ÿåˆ—ï¼› å¦‚æœé˜Ÿåˆ—å·²æ»¡ &amp;amp;&amp;amp; æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æ•° &amp;lt; maximumPoolSizeï¼Œåˆ›å»ºæ–°çš„çº¿ç¨‹æ‰§è¡Œè¯¥taskï¼› å¦‚æœé˜Ÿåˆ—å·²æ»¡ &amp;amp;&amp;amp; æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æ•° &amp;gt;= maximumPoolSizeï¼Œçº¿ç¨‹æ± è°ƒç”¨handlerçš„rejectæ–¹æ³•æ‹’ç»æœ¬æ¬¡æäº¤ã€‚ ä»workerçº¿ç¨‹è‡ªå·±çš„è§’åº¦æ¥çœ‹ï¼Œå½“workerçš„taskæ‰§è¡Œç»“æŸä¹‹åï¼Œå¾ªç¯ä»é˜»å¡é˜Ÿåˆ—ä¸­å–å‡ºä»»åŠ¡æ‰§è¡Œã€‚</description></item></channel></rss>