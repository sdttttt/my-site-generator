<!DOCTYPE html>
<html lang="zh-cn">
<title>Rails Development | SDTTTTT&#39;s Log</title>
<meta charset="utf-8">
<meta name="generator" content="Hugo 0.75.0" />
<meta name="description" content="Hugo ---sdttttt">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://sdttttt.github.io/css/index.css">
<link rel="canonical" href="https://sdttttt.github.io/blog/rails_development/">
<link rel="alternate" type="application/rss+xml" href="" title="SDTTTTT&#39;s Log">

<header>
  
    <a href="https://sdttttt.github.io/" class="title">SDTTTTT&#39;s Log</a>
  
  
    <nav>
    
      <a href="/about/">About</a>
    
    </nav>
  
</header>

<article>
  <header>
    <h1>Rails Development</h1>
    
  </header>
  <h3 id="webpacker">Webpacker</h3>
<p>Rails 6版本开始依赖Webpacker，在运行之前必须先安装Webpacker这玩意。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">rails webpacker:install
</code></pre></div><p>如果需要安装前端框架，请使用yarn来安装，这样部署的时候能享受到webpacker打包便利。</p>
<h3 id="production">production</h3>
<p>Rails 6 启动时需要一串Key作为加密的salt，key不能随意生成。
生成key时，请删除config下的credentials.enc.yml 和 master.key 文件。
然后运行</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">rails credentials:edit
</code></pre></div><p>然后Rails访问静态资源，需要使用webpacker打包编译后的资产。
运行</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">rails assets:precompile
</code></pre></div><p>Rails 6 在生产环境下认为你使用 Apache 和 Nginx 缓存编译后的静态资产。如果你不使用他们，需要</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="color:#75715e"># config/environments/production.rb</span>
config<span style="color:#f92672">.</span>public_file_server<span style="color:#f92672">.</span>enabled <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>
</code></pre></div><p>记住，打包之后的js以及css统一叫application.js/css 在view页面引用时需要引用application这个名字。其他的会报错</p>

</article>



<script src="https://utteranc.es/client.js"
        repo="sdttttt/sdttttt.github.io"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>

</html>
