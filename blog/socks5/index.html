<!DOCTYPE html>
<html lang="zh-cn">

<head>
  <meta http-equiv="X-Clacks-Overhead" content="GNU Terry Pratchett" />
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="https://sdttttt.github.io/favicon.ico" />
<title>Socks5 | SDTTTTT&#39;s Smelly fish Rotten shrimp ğŸ““</title>
<meta name="title" content="Socks5" />
<meta name="description" content="SOCKS æ˜¯ä¸€ç§ç½‘ç»œä¼ è¾“åè®®ï¼Œä¸»è¦ç”¨äºå®¢æˆ·ç«¯ä¸å¤–ç½‘æœåŠ¡å™¨ä¹‹é—´é€šè®¯çš„ä¸­é—´ä¼ é€’ï¼ŒSOCKS æ˜¯&quot;SOCKetS&quot;çš„ç¼©å†™ã€‚ SOCKS5 æ˜¯ SOCKS4 çš„å‡çº§ç‰ˆï¼Œå…¶ä¸»è¦å¤šäº†é‰´å®šã€IPv6ã€UDP æ”¯æŒã€‚
SOCKS5 åè®®å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š
 (1) åè®®ç‰ˆæœ¬åŠè®¤è¯æ–¹å¼ (2) æ ¹æ®è®¤è¯æ–¹å¼æ‰§è¡Œå¯¹åº”çš„è®¤è¯ (3) è¯·æ±‚ä¿¡æ¯  ï¼ˆ1ï¼‰åè®®ç‰ˆæœ¬åŠè®¤è¯æ–¹å¼ åˆ›å»ºä¸ SOCKS5 æœåŠ¡å™¨çš„ TCP è¿æ¥åå®¢æˆ·ç«¯éœ€è¦å…ˆå‘é€è¯·æ±‚æ¥åè®®ç‰ˆæœ¬åŠè®¤è¯æ–¹å¼ï¼Œ
   VER NMETHODS METHODS     1 1 1-255      VER æ˜¯ SOCKS ç‰ˆæœ¬ï¼Œè¿™é‡Œåº”è¯¥æ˜¯ 0x05ï¼›
  NMETHODS æ˜¯ METHODS éƒ¨åˆ†çš„é•¿åº¦ï¼›
  METHODS æ˜¯å®¢æˆ·ç«¯æ”¯æŒçš„è®¤è¯æ–¹å¼åˆ—è¡¨ï¼Œæ¯ä¸ªæ–¹æ³•å  1 å­—èŠ‚ã€‚å½“å‰çš„å®šä¹‰æ˜¯ï¼š
 0x00 ä¸éœ€è¦è®¤è¯ 0x01 GSSAPI 0x02 ç”¨æˆ·åã€å¯†ç è®¤è¯ 0x03 - 0x7F ç”± IANA åˆ†é…ï¼ˆä¿ç•™ï¼‰ 0x80 - 0xFE ä¸ºç§äººæ–¹æ³•ä¿ç•™ 0xFF æ— å¯æ¥å—çš„æ–¹æ³•    æœåŠ¡å™¨å›å¤å®¢æˆ·ç«¯å¯ç”¨æ–¹æ³•ï¼š" />
<meta name="keywords" content="network protocol," />


<meta property="og:title" content="Socks5" />
<meta property="og:description" content="SOCKS æ˜¯ä¸€ç§ç½‘ç»œä¼ è¾“åè®®ï¼Œä¸»è¦ç”¨äºå®¢æˆ·ç«¯ä¸å¤–ç½‘æœåŠ¡å™¨ä¹‹é—´é€šè®¯çš„ä¸­é—´ä¼ é€’ï¼ŒSOCKS æ˜¯&quot;SOCKetS&quot;çš„ç¼©å†™ã€‚ SOCKS5 æ˜¯ SOCKS4 çš„å‡çº§ç‰ˆï¼Œå…¶ä¸»è¦å¤šäº†é‰´å®šã€IPv6ã€UDP æ”¯æŒã€‚
SOCKS5 åè®®å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š
 (1) åè®®ç‰ˆæœ¬åŠè®¤è¯æ–¹å¼ (2) æ ¹æ®è®¤è¯æ–¹å¼æ‰§è¡Œå¯¹åº”çš„è®¤è¯ (3) è¯·æ±‚ä¿¡æ¯  ï¼ˆ1ï¼‰åè®®ç‰ˆæœ¬åŠè®¤è¯æ–¹å¼ åˆ›å»ºä¸ SOCKS5 æœåŠ¡å™¨çš„ TCP è¿æ¥åå®¢æˆ·ç«¯éœ€è¦å…ˆå‘é€è¯·æ±‚æ¥åè®®ç‰ˆæœ¬åŠè®¤è¯æ–¹å¼ï¼Œ
   VER NMETHODS METHODS     1 1 1-255      VER æ˜¯ SOCKS ç‰ˆæœ¬ï¼Œè¿™é‡Œåº”è¯¥æ˜¯ 0x05ï¼›
  NMETHODS æ˜¯ METHODS éƒ¨åˆ†çš„é•¿åº¦ï¼›
  METHODS æ˜¯å®¢æˆ·ç«¯æ”¯æŒçš„è®¤è¯æ–¹å¼åˆ—è¡¨ï¼Œæ¯ä¸ªæ–¹æ³•å  1 å­—èŠ‚ã€‚å½“å‰çš„å®šä¹‰æ˜¯ï¼š
 0x00 ä¸éœ€è¦è®¤è¯ 0x01 GSSAPI 0x02 ç”¨æˆ·åã€å¯†ç è®¤è¯ 0x03 - 0x7F ç”± IANA åˆ†é…ï¼ˆä¿ç•™ï¼‰ 0x80 - 0xFE ä¸ºç§äººæ–¹æ³•ä¿ç•™ 0xFF æ— å¯æ¥å—çš„æ–¹æ³•    æœåŠ¡å™¨å›å¤å®¢æˆ·ç«¯å¯ç”¨æ–¹æ³•ï¼š" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://sdttttt.github.io/blog/socks5/" />
<meta property="og:image" content="https://sdttttt.github.io/static/me.jpg"/>
<meta property="og:site_name" content="SDTTTTT" />



<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://sdttttt.github.io/static/me.jpg"/>

<meta name="twitter:title" content="Socks5"/>
<meta name="twitter:description" content="SOCKS æ˜¯ä¸€ç§ç½‘ç»œä¼ è¾“åè®®ï¼Œä¸»è¦ç”¨äºå®¢æˆ·ç«¯ä¸å¤–ç½‘æœåŠ¡å™¨ä¹‹é—´é€šè®¯çš„ä¸­é—´ä¼ é€’ï¼ŒSOCKS æ˜¯&quot;SOCKetS&quot;çš„ç¼©å†™ã€‚ SOCKS5 æ˜¯ SOCKS4 çš„å‡çº§ç‰ˆï¼Œå…¶ä¸»è¦å¤šäº†é‰´å®šã€IPv6ã€UDP æ”¯æŒã€‚
SOCKS5 åè®®å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š
 (1) åè®®ç‰ˆæœ¬åŠè®¤è¯æ–¹å¼ (2) æ ¹æ®è®¤è¯æ–¹å¼æ‰§è¡Œå¯¹åº”çš„è®¤è¯ (3) è¯·æ±‚ä¿¡æ¯  ï¼ˆ1ï¼‰åè®®ç‰ˆæœ¬åŠè®¤è¯æ–¹å¼ åˆ›å»ºä¸ SOCKS5 æœåŠ¡å™¨çš„ TCP è¿æ¥åå®¢æˆ·ç«¯éœ€è¦å…ˆå‘é€è¯·æ±‚æ¥åè®®ç‰ˆæœ¬åŠè®¤è¯æ–¹å¼ï¼Œ
   VER NMETHODS METHODS     1 1 1-255      VER æ˜¯ SOCKS ç‰ˆæœ¬ï¼Œè¿™é‡Œåº”è¯¥æ˜¯ 0x05ï¼›
  NMETHODS æ˜¯ METHODS éƒ¨åˆ†çš„é•¿åº¦ï¼›
  METHODS æ˜¯å®¢æˆ·ç«¯æ”¯æŒçš„è®¤è¯æ–¹å¼åˆ—è¡¨ï¼Œæ¯ä¸ªæ–¹æ³•å  1 å­—èŠ‚ã€‚å½“å‰çš„å®šä¹‰æ˜¯ï¼š
 0x00 ä¸éœ€è¦è®¤è¯ 0x01 GSSAPI 0x02 ç”¨æˆ·åã€å¯†ç è®¤è¯ 0x03 - 0x7F ç”± IANA åˆ†é…ï¼ˆä¿ç•™ï¼‰ 0x80 - 0xFE ä¸ºç§äººæ–¹æ³•ä¿ç•™ 0xFF æ— å¯æ¥å—çš„æ–¹æ³•    æœåŠ¡å™¨å›å¤å®¢æˆ·ç«¯å¯ç”¨æ–¹æ³•ï¼š"/>



<meta itemprop="name" content="Socks5">
<meta itemprop="description" content="SOCKS æ˜¯ä¸€ç§ç½‘ç»œä¼ è¾“åè®®ï¼Œä¸»è¦ç”¨äºå®¢æˆ·ç«¯ä¸å¤–ç½‘æœåŠ¡å™¨ä¹‹é—´é€šè®¯çš„ä¸­é—´ä¼ é€’ï¼ŒSOCKS æ˜¯&quot;SOCKetS&quot;çš„ç¼©å†™ã€‚ SOCKS5 æ˜¯ SOCKS4 çš„å‡çº§ç‰ˆï¼Œå…¶ä¸»è¦å¤šäº†é‰´å®šã€IPv6ã€UDP æ”¯æŒã€‚
SOCKS5 åè®®å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š
 (1) åè®®ç‰ˆæœ¬åŠè®¤è¯æ–¹å¼ (2) æ ¹æ®è®¤è¯æ–¹å¼æ‰§è¡Œå¯¹åº”çš„è®¤è¯ (3) è¯·æ±‚ä¿¡æ¯  ï¼ˆ1ï¼‰åè®®ç‰ˆæœ¬åŠè®¤è¯æ–¹å¼ åˆ›å»ºä¸ SOCKS5 æœåŠ¡å™¨çš„ TCP è¿æ¥åå®¢æˆ·ç«¯éœ€è¦å…ˆå‘é€è¯·æ±‚æ¥åè®®ç‰ˆæœ¬åŠè®¤è¯æ–¹å¼ï¼Œ
   VER NMETHODS METHODS     1 1 1-255      VER æ˜¯ SOCKS ç‰ˆæœ¬ï¼Œè¿™é‡Œåº”è¯¥æ˜¯ 0x05ï¼›
  NMETHODS æ˜¯ METHODS éƒ¨åˆ†çš„é•¿åº¦ï¼›
  METHODS æ˜¯å®¢æˆ·ç«¯æ”¯æŒçš„è®¤è¯æ–¹å¼åˆ—è¡¨ï¼Œæ¯ä¸ªæ–¹æ³•å  1 å­—èŠ‚ã€‚å½“å‰çš„å®šä¹‰æ˜¯ï¼š
 0x00 ä¸éœ€è¦è®¤è¯ 0x01 GSSAPI 0x02 ç”¨æˆ·åã€å¯†ç è®¤è¯ 0x03 - 0x7F ç”± IANA åˆ†é…ï¼ˆä¿ç•™ï¼‰ 0x80 - 0xFE ä¸ºç§äººæ–¹æ³•ä¿ç•™ 0xFF æ— å¯æ¥å—çš„æ–¹æ³•    æœåŠ¡å™¨å›å¤å®¢æˆ·ç«¯å¯ç”¨æ–¹æ³•ï¼š">

<meta itemprop="wordCount" content="618">
<meta itemprop="image" content="https://sdttttt.github.io/static/me.jpg"/>



<meta itemprop="keywords" content="network protocol," />
<meta name="referrer" content="no-referrer-when-downgrade" />

  <style>
  body {
    font-family: Verdana, sans-serif;
    margin: auto;
    padding: 20px;
    max-width: 720px;
    text-align: left;
    background-color: #fff;
    word-wrap: break-word;
    overflow-wrap: break-word;
    line-height: 1.5;
    color: #444;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  strong,
  b {
    color: #222;
  }

  a {
    color: #3273dc;
     
  }

  .title {
    text-decoration: none;
    border: 0;
  }

  .title span {
    font-weight: 400;
  }

  nav a {
    margin-right: 10px;
  }

  textarea {
    width: 100%;
    font-size: 16px;
  }

  input {
    font-size: 16px;
  }

  content {
    line-height: 1.6;
  }

  table {
    width: 100%;
  }

  img {
    max-width: 100%;
  }

  code {
    padding: 2px 5px;
    background-color: #f2f2f2;
  }

  pre code {
    color: #222;
    display: block;
    padding: 20px;
    white-space: pre-wrap;
    font-size: 14px;
  }

  blockquote {
    border-left: 1px solid #999;
    color: #222;
    padding-left: 20px;
    font-style: italic;
  }

  footer {
    padding: 25px;
    text-align: center;
  }

  .helptext {
    color: #777;
    font-size: small;
  }

  .errorlist {
    color: #eba613;
    font-size: small;
  }

   
  ul.blog-posts {
    list-style-type: none;
    padding: unset;
  }

  ul.blog-posts li {
    display: flex;
  }

  ul.blog-posts li span {
    flex: 0 0 130px;
  }

  ul.blog-posts li a:visited {
    color: #8b6fcb;
  }

  @media (prefers-color-scheme: dark) {
    body {
      background-color: #333;
      color: #ddd;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    strong,
    b {
      color: #eee;
    }

    a {
      color: #8cc2dd;
    }

    code {
      background-color: #777;
    }

    pre code {
      color: #ddd;
    }

    blockquote {
      color: #ccc;
    }

    textarea,
    input {
      background-color: #252525;
      color: #ddd;
    }

    .helptext {
      color: #aaa;
    }
  }

</style>

</head>

<body>
  <header><a href="/" class="title">
  <h2>SDTTTTT&#39;s Smelly fish Rotten shrimp ğŸ““</h2>
</a>
<nav><a href="/">Home</a>


<a href="/blog">Blog</a>

</nav>
</header>
  <main>

<h1>Socks5</h1>
<p>
  <i>
    <time datetime='0001-01-01' pubdate>
      01 Jan, 0001
    </time>
  </i>
</p>

<content>
  <p>SOCKS æ˜¯ä¸€ç§ç½‘ç»œä¼ è¾“åè®®ï¼Œä¸»è¦ç”¨äºå®¢æˆ·ç«¯ä¸å¤–ç½‘æœåŠ¡å™¨ä¹‹é—´é€šè®¯çš„ä¸­é—´ä¼ é€’ï¼ŒSOCKS æ˜¯&quot;SOCKetS&quot;çš„ç¼©å†™ã€‚
SOCKS5 æ˜¯ SOCKS4 çš„å‡çº§ç‰ˆï¼Œå…¶ä¸»è¦å¤šäº†é‰´å®šã€IPv6ã€UDP æ”¯æŒã€‚</p>
<p>SOCKS5 åè®®å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š</p>
<ul>
<li>(1) åè®®ç‰ˆæœ¬åŠè®¤è¯æ–¹å¼</li>
<li>(2) æ ¹æ®è®¤è¯æ–¹å¼æ‰§è¡Œå¯¹åº”çš„è®¤è¯</li>
<li>(3) è¯·æ±‚ä¿¡æ¯</li>
</ul>
<h4 id="1åè®®ç‰ˆæœ¬åŠè®¤è¯æ–¹å¼">ï¼ˆ1ï¼‰åè®®ç‰ˆæœ¬åŠè®¤è¯æ–¹å¼</h4>
<p>åˆ›å»ºä¸ SOCKS5 æœåŠ¡å™¨çš„ TCP è¿æ¥å<strong>å®¢æˆ·ç«¯</strong>éœ€è¦å…ˆå‘é€è¯·æ±‚æ¥åè®®ç‰ˆæœ¬åŠè®¤è¯æ–¹å¼ï¼Œ</p>
<table>
<thead>
<tr>
<th>VER</th>
<th>NMETHODS</th>
<th>METHODS</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>1</td>
<td>1-255</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p>VER æ˜¯ SOCKS ç‰ˆæœ¬ï¼Œè¿™é‡Œåº”è¯¥æ˜¯ 0x05ï¼›</p>
</li>
<li>
<p>NMETHODS æ˜¯ METHODS éƒ¨åˆ†çš„é•¿åº¦ï¼›</p>
</li>
<li>
<p>METHODS æ˜¯å®¢æˆ·ç«¯æ”¯æŒçš„è®¤è¯æ–¹å¼åˆ—è¡¨ï¼Œæ¯ä¸ªæ–¹æ³•å  1 å­—èŠ‚ã€‚å½“å‰çš„å®šä¹‰æ˜¯ï¼š</p>
<ul>
<li>0x00 ä¸éœ€è¦è®¤è¯</li>
<li>0x01 GSSAPI</li>
<li>0x02 ç”¨æˆ·åã€å¯†ç è®¤è¯</li>
<li>0x03 - 0x7F ç”± IANA åˆ†é…ï¼ˆä¿ç•™ï¼‰</li>
<li>0x80 - 0xFE ä¸ºç§äººæ–¹æ³•ä¿ç•™</li>
<li>0xFF æ— å¯æ¥å—çš„æ–¹æ³•</li>
</ul>
</li>
</ul>
<p><strong>æœåŠ¡å™¨</strong>å›å¤å®¢æˆ·ç«¯å¯ç”¨æ–¹æ³•ï¼š</p>
<table>
<thead>
<tr>
<th>VER</th>
<th>METHOD</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>1</td>
</tr>
</tbody>
</table>
<ul>
<li>VER æ˜¯ SOCKS ç‰ˆæœ¬ï¼Œè¿™é‡Œåº”è¯¥æ˜¯ 0x05ï¼›</li>
<li>METHOD æ˜¯æœåŠ¡ç«¯é€‰ä¸­çš„æ–¹æ³•ã€‚å¦‚æœè¿”å› 0xFF è¡¨ç¤ºæ²¡æœ‰ä¸€ä¸ªè®¤è¯æ–¹æ³•è¢«é€‰ä¸­ï¼Œå®¢æˆ·ç«¯éœ€è¦å…³é—­è¿æ¥ã€‚</li>
</ul>
<p>ä»£ç å®ç°ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-golang" data-lang="golang"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">ProtocolVersion</span> <span style="color:#66d9ef">struct</span> {
    <span style="color:#a6e22e">VER</span> <span style="color:#66d9ef">uint8</span>
    <span style="color:#a6e22e">NMETHODS</span> <span style="color:#66d9ef">uint8</span>
    <span style="color:#a6e22e">METHODS</span> []<span style="color:#66d9ef">uint8</span>
}


<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">s</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">ProtocolVersion</span>) <span style="color:#a6e22e">handshake</span>(<span style="color:#a6e22e">conn</span> <span style="color:#a6e22e">net</span>.<span style="color:#a6e22e">Conn</span>) <span style="color:#66d9ef">error</span> {
    <span style="color:#a6e22e">b</span> <span style="color:#f92672">:=</span> make([]<span style="color:#66d9ef">byte</span>, <span style="color:#ae81ff">255</span>)
    <span style="color:#a6e22e">n</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">conn</span>.<span style="color:#a6e22e">Read</span>(<span style="color:#a6e22e">b</span>)
    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">err</span>)
        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">err</span>
    }
    <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">VER</span> = <span style="color:#a6e22e">b</span>[<span style="color:#ae81ff">0</span>] <span style="color:#75715e">//ReadByte reads and returns a single byteï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºsocksçš„ç‰ˆæœ¬å·
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">NMETHODS</span> = <span style="color:#a6e22e">b</span>[<span style="color:#ae81ff">1</span>] <span style="color:#75715e">//nmethodsæ˜¯è®°å½•methodsçš„é•¿åº¦çš„ã€‚nmethodsçš„é•¿åº¦æ˜¯1ä¸ªå­—èŠ‚
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">n</span> <span style="color:#f92672">!=</span> int(<span style="color:#ae81ff">2</span><span style="color:#f92672">+</span><span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">NMETHODS</span>) {
        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">errors</span>.<span style="color:#a6e22e">New</span>(<span style="color:#e6db74">&#34;åè®®é”™è¯¯, sNMETHODSä¸å¯¹&#34;</span>)
    }
    <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">METHODS</span> = <span style="color:#a6e22e">b</span>[<span style="color:#ae81ff">2</span>:<span style="color:#ae81ff">2</span><span style="color:#f92672">+</span><span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">NMETHODS</span>] <span style="color:#75715e">//è¯»å–æŒ‡å®šé•¿åº¦ä¿¡æ¯ï¼Œè¯»å–æ­£å¥½len(buf)é•¿åº¦çš„å­—èŠ‚ã€‚å¦‚æœå­—èŠ‚æ•°ä¸æ˜¯æŒ‡å®šé•¿åº¦ï¼Œåˆ™è¿”å›é”™è¯¯ä¿¡æ¯å’Œæ­£ç¡®çš„å­—èŠ‚æ•°
</span><span style="color:#75715e"></span>
    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">VER</span> <span style="color:#f92672">!=</span> <span style="color:#ae81ff">5</span> {
        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">errors</span>.<span style="color:#a6e22e">New</span>(<span style="color:#e6db74">&#34;è¯¥åè®®ä¸æ˜¯socks5åè®®&#34;</span>)
    }

    <span style="color:#75715e">//æœåŠ¡å™¨å›åº”å®¢æˆ·ç«¯æ¶ˆæ¯:
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºç‰ˆæœ¬å·ä¸º5ï¼Œå³socks5åè®®ï¼Œ
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºæœåŠ¡ç«¯é€‰ä¸­çš„è®¤è¯æ–¹æ³•ï¼Œ0å³æ— éœ€å¯†ç è®¿é—®, 2è¡¨ç¤ºéœ€è¦ç”¨æˆ·åå’Œå¯†ç è¿›è¡ŒéªŒè¯ã€‚
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">resp</span> <span style="color:#f92672">:=</span>[]<span style="color:#66d9ef">byte</span>{<span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">0</span>}
    <span style="color:#a6e22e">conn</span>.<span style="color:#a6e22e">Write</span>(<span style="color:#a6e22e">resp</span>)
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
}
</code></pre></div><h4 id="2æ ¹æ®è®¤è¯æ–¹å¼æ‰§è¡Œå¯¹åº”çš„è®¤è¯">ï¼ˆ2ï¼‰æ ¹æ®è®¤è¯æ–¹å¼æ‰§è¡Œå¯¹åº”çš„è®¤è¯</h4>
<p>SOCKS5 åè®®æä¾› 5 ç§è®¤è¯æ–¹å¼ï¼š</p>
<ul>
<li>0x00 ä¸éœ€è¦è®¤è¯</li>
<li>0x01 GSSAPI</li>
<li>0x02 ç”¨æˆ·åã€å¯†ç è®¤è¯</li>
<li>0x03 - 0x7F ç”± IANA åˆ†é…ï¼ˆä¿ç•™ï¼‰</li>
<li>0x80 - 0xFE ä¸ºç§äººæ–¹æ³•ä¿ç•™</li>
</ul>
<p>è¿™é‡Œå°±ä¸»è¦ä»‹ç»ç”¨æˆ·åã€å¯†ç è®¤è¯ã€‚
åœ¨å®¢æˆ·ç«¯ã€æœåŠ¡ç«¯åå•†ä½¿ç”¨ç”¨æˆ·åå¯†ç è®¤è¯åï¼Œå®¢æˆ·ç«¯å‘å‡ºç”¨æˆ·åå¯†ç ï¼š</p>
<table>
<thead>
<tr>
<th>é‰´å®šåè®®ç‰ˆæœ¬</th>
<th>ç”¨æˆ·åé•¿åº¦</th>
<th>ç”¨æˆ·å</th>
<th>å¯†ç é•¿åº¦</th>
<th>å¯†ç </th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>1</td>
<td>åŠ¨æ€</td>
<td>1</td>
<td>åŠ¨æ€</td>
</tr>
</tbody>
</table>
<p>æœåŠ¡å™¨é‰´å®šåå‘å‡ºå¦‚ä¸‹å›åº”ï¼š</p>
<table>
<thead>
<tr>
<th>é‰´å®šåè®®ç‰ˆæœ¬</th>
<th>é‰´å®šçŠ¶æ€</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>å…¶ä¸­é‰´å®šçŠ¶æ€ 0x00 è¡¨ç¤ºæˆåŠŸï¼Œ0x01 è¡¨ç¤ºå¤±è´¥ã€‚</p>
<p>ä»£ç å®ç°ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-golang" data-lang="golang"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Socks5Auth</span> <span style="color:#66d9ef">struct</span> {
    <span style="color:#a6e22e">VER</span> <span style="color:#66d9ef">uint8</span>
    <span style="color:#a6e22e">ULEN</span> <span style="color:#66d9ef">uint8</span>
    <span style="color:#a6e22e">UNAME</span> <span style="color:#66d9ef">string</span>
    <span style="color:#a6e22e">PLEN</span> <span style="color:#66d9ef">uint8</span>
    <span style="color:#a6e22e">PASSWD</span> <span style="color:#66d9ef">string</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">s</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Socks5Auth</span>) <span style="color:#a6e22e">authenticate</span>(<span style="color:#a6e22e">conn</span> <span style="color:#a6e22e">net</span>.<span style="color:#a6e22e">Conn</span>) <span style="color:#66d9ef">error</span> {
    <span style="color:#a6e22e">b</span> <span style="color:#f92672">:=</span> make([]<span style="color:#66d9ef">byte</span>, <span style="color:#ae81ff">128</span>)
    <span style="color:#a6e22e">n</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">conn</span>.<span style="color:#a6e22e">Read</span>(<span style="color:#a6e22e">b</span>)
    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span>{
        <span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">err</span>)
        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">err</span>
    }

    <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">VER</span> = <span style="color:#a6e22e">b</span>[<span style="color:#ae81ff">0</span>]
    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">VER</span> <span style="color:#f92672">!=</span> <span style="color:#ae81ff">5</span> {
        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">errors</span>.<span style="color:#a6e22e">New</span>(<span style="color:#e6db74">&#34;è¯¥åè®®ä¸æ˜¯socks5åè®®&#34;</span>)
    }

    <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">ULEN</span> = <span style="color:#a6e22e">b</span>[<span style="color:#ae81ff">1</span>]
    <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">UNAME</span> = string(<span style="color:#a6e22e">b</span>[<span style="color:#ae81ff">2</span>:<span style="color:#ae81ff">2</span><span style="color:#f92672">+</span><span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">ULEN</span>])
    <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">PLEN</span> = <span style="color:#a6e22e">b</span>[<span style="color:#ae81ff">2</span><span style="color:#f92672">+</span><span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">ULEN</span><span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>]
    <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">PASSWD</span> = string(<span style="color:#a6e22e">b</span>[<span style="color:#a6e22e">n</span><span style="color:#f92672">-</span>int(<span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">PLEN</span>):<span style="color:#a6e22e">n</span>])
    <span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">UNAME</span>, <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">PASSWD</span>)
    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">username</span> <span style="color:#f92672">!=</span> <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">UNAME</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">passwd</span> <span style="color:#f92672">!=</span> <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">PASSWD</span> {
        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">errors</span>.<span style="color:#a6e22e">New</span>(<span style="color:#e6db74">&#34;è´¦å·å¯†ç é”™è¯¯&#34;</span>)
    }

    <span style="color:#75715e">/**
</span><span style="color:#75715e">    å›åº”å®¢æˆ·ç«¯,å“åº”å®¢æˆ·ç«¯è¿æ¥æˆåŠŸ
</span><span style="color:#75715e">    The server verifies the supplied UNAME and PASSWD, and sends the
</span><span style="color:#75715e">    following response:
</span><span style="color:#75715e">                            +----+--------+
</span><span style="color:#75715e">                            |VER | STATUS |
</span><span style="color:#75715e">                            +----+--------+
</span><span style="color:#75715e">                            | 1  |   1    |
</span><span style="color:#75715e">                            +----+--------+
</span><span style="color:#75715e">    A STATUS field of X&#39;00&#39; indicates success. If the server returns a
</span><span style="color:#75715e">    `failure&#39; (STATUS value other than X&#39;00&#39;) status, it MUST close the
</span><span style="color:#75715e">    connection.
</span><span style="color:#75715e">    */</span>
	<span style="color:#a6e22e">resp</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">byte</span>{<span style="color:#ae81ff">0x05</span>, <span style="color:#ae81ff">0x00</span>}
    <span style="color:#a6e22e">conn</span>.<span style="color:#a6e22e">Write</span>(<span style="color:#a6e22e">resp</span>)

    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
}
</code></pre></div><p>ä½†å…¶å®ï¼Œç°åœ¨å¤§å®¶éƒ½ä¹ æƒ¯è‡ªå·±é‡‡ç”¨åŠ å¯†æµçš„æ–¹å¼è¿›è¡ŒåŠ å¯†ï¼Œå¾ˆå°‘é‡‡ç”¨ç”¨æˆ·åå¯†ç çš„å½¢å¼è¿›è¡ŒåŠ å¯†ï¼Œåé¢ç« èŠ‚ä¼šä»‹ç»ä¸€ç§å¯¹ SOCKS çš„æ··æ·†åŠ å¯†æ–¹å¼ã€‚</p>
<h4 id="3è¯·æ±‚ä¿¡æ¯">ï¼ˆ3ï¼‰è¯·æ±‚ä¿¡æ¯</h4>
<p>è®¤è¯ç»“æŸåå®¢æˆ·ç«¯å°±å¯ä»¥å‘é€è¯·æ±‚ä¿¡æ¯ã€‚å¦‚æœè®¤è¯æ–¹æ³•æœ‰ç‰¹æ®Šå°è£…è¦æ±‚ï¼Œè¯·æ±‚å¿…é¡»æŒ‰ç…§æ–¹æ³•æ‰€å®šä¹‰çš„æ–¹å¼è¿›è¡Œå°è£…è§£å¯†ï¼Œå…¶åŸå§‹æ ¼å¼å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>VER</th>
<th>CMD</th>
<th>RSV</th>
<th>ATYP</th>
<th>DST.ADDR</th>
<th>DST.PORT</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>1</td>
<td>0x00</td>
<td>1</td>
<td>åŠ¨æ€</td>
<td>2</td>
</tr>
</tbody>
</table>
<ul>
<li>VER æ˜¯ SOCKS ç‰ˆæœ¬ï¼Œè¿™é‡Œåº”è¯¥æ˜¯ 0x05ï¼›</li>
<li>CMD æ˜¯ SOCK çš„å‘½ä»¤ç 
<ul>
<li>0x01 è¡¨ç¤º CONNECT è¯·æ±‚</li>
<li>0x02 è¡¨ç¤º BIND è¯·æ±‚</li>
<li>0x03 è¡¨ç¤º UDP è½¬å‘</li>
</ul>
</li>
<li>RSV 0x00ï¼Œä¿ç•™</li>
<li>ATYP DST.ADDR ç±»å‹</li>
<li>DST.ADDR ç›®çš„åœ°å€
<ul>
<li>0x01 IPv4 åœ°å€ï¼ŒDST.ADDR éƒ¨åˆ† 4 å­—èŠ‚é•¿åº¦</li>
<li>0x03 åŸŸåï¼ŒDST.ADDR éƒ¨åˆ†ç¬¬ä¸€ä¸ªå­—èŠ‚ä¸ºåŸŸåé•¿åº¦ï¼ŒDST.ADDR å‰©ä½™çš„å†…å®¹ä¸ºåŸŸåï¼Œæ²¡æœ‰\0 ç»“å°¾ã€‚</li>
<li>0x04 IPv6 åœ°å€ï¼Œ16 ä¸ªå­—èŠ‚é•¿åº¦ã€‚</li>
</ul>
</li>
<li>DST.PORT ç½‘ç»œå­—èŠ‚åºè¡¨ç¤ºçš„ç›®çš„ç«¯å£</li>
</ul>
<p>ä»£ç å®ç°ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-golang" data-lang="golang"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Socks5Resolution</span> <span style="color:#66d9ef">struct</span> {
    <span style="color:#a6e22e">VER</span> <span style="color:#66d9ef">uint8</span>
    <span style="color:#a6e22e">CMD</span> <span style="color:#66d9ef">uint8</span>
    <span style="color:#a6e22e">RSV</span> <span style="color:#66d9ef">uint8</span>
    <span style="color:#a6e22e">ATYP</span> <span style="color:#66d9ef">uint8</span>
    <span style="color:#a6e22e">DSTADDR</span> []<span style="color:#66d9ef">byte</span>
    <span style="color:#a6e22e">DSTPORT</span> <span style="color:#66d9ef">uint16</span>
    <span style="color:#a6e22e">DSTDOMAIN</span> <span style="color:#66d9ef">string</span>
    <span style="color:#a6e22e">RAWADDR</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">net</span>.<span style="color:#a6e22e">TCPAddr</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">s</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Socks5Resolution</span>) <span style="color:#a6e22e">lstRequest</span>(<span style="color:#a6e22e">conn</span> <span style="color:#a6e22e">net</span>.<span style="color:#a6e22e">Conn</span>) <span style="color:#66d9ef">error</span> {
    <span style="color:#a6e22e">b</span> <span style="color:#f92672">:=</span> make([]<span style="color:#66d9ef">byte</span>, <span style="color:#ae81ff">128</span>)
    <span style="color:#a6e22e">n</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">conn</span>.<span style="color:#a6e22e">Read</span>(<span style="color:#a6e22e">b</span>)
    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">n</span> &lt; <span style="color:#ae81ff">7</span> {
        <span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">err</span>)
        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">errors</span>.<span style="color:#a6e22e">New</span>(<span style="color:#e6db74">&#34;è¯·æ±‚åè®®é”™è¯¯&#34;</span>)
    }
    <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">VER</span> = <span style="color:#a6e22e">b</span>[<span style="color:#ae81ff">0</span>]
    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">VER</span> <span style="color:#f92672">!=</span> <span style="color:#ae81ff">5</span> {
        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">errors</span>.<span style="color:#a6e22e">New</span>(<span style="color:#e6db74">&#34;è¯¥åè®®ä¸æ˜¯socks5åè®®&#34;</span>)
    }

    <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">CMD</span> = <span style="color:#a6e22e">b</span>[<span style="color:#ae81ff">1</span>]
    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">CMD</span> <span style="color:#f92672">!=</span> <span style="color:#ae81ff">1</span> {
        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">errors</span>.<span style="color:#a6e22e">New</span>(<span style="color:#e6db74">&#34;å®¢æˆ·ç«¯è¯·æ±‚ç±»å‹ä¸ä¸ºä»£ç†è¿æ¥, å…¶ä»–åŠŸèƒ½æš‚æ—¶ä¸æ”¯æŒ.&#34;</span>)
    }
    <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">RSV</span> = <span style="color:#a6e22e">b</span>[<span style="color:#ae81ff">2</span>] <span style="color:#75715e">//RSVä¿ç•™å­—ç«¯ï¼Œå€¼é•¿åº¦ä¸º1ä¸ªå­—èŠ‚
</span><span style="color:#75715e"></span>
    <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">ATYP</span> = <span style="color:#a6e22e">b</span>[<span style="color:#ae81ff">3</span>]

    <span style="color:#66d9ef">switch</span> <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">ATYP</span> {
    <span style="color:#66d9ef">case</span> <span style="color:#ae81ff">1</span>:
        <span style="color:#75715e">//	IP V4 address: X&#39;01&#39;
</span><span style="color:#75715e"></span>        <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">DSTADDR</span> = <span style="color:#a6e22e">b</span>[<span style="color:#ae81ff">4</span> : <span style="color:#ae81ff">4</span><span style="color:#f92672">+</span><span style="color:#a6e22e">net</span>.<span style="color:#a6e22e">IPv4len</span>]
    <span style="color:#66d9ef">case</span> <span style="color:#ae81ff">3</span>:
        <span style="color:#75715e">//	DOMAINNAME: X&#39;03&#39;
</span><span style="color:#75715e"></span>        <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">DSTDOMAIN</span> = string(<span style="color:#a6e22e">b</span>[<span style="color:#ae81ff">5</span>:<span style="color:#a6e22e">n</span><span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>])
        <span style="color:#a6e22e">ipAddr</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">net</span>.<span style="color:#a6e22e">ResolveIPAddr</span>(<span style="color:#e6db74">&#34;ip&#34;</span>, <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">DSTDOMAIN</span>)
		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
			<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">err</span>
		}
        <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">DSTADDR</span> = <span style="color:#a6e22e">ipAddr</span>.<span style="color:#a6e22e">IP</span>
    <span style="color:#66d9ef">case</span> <span style="color:#ae81ff">4</span>:
        <span style="color:#75715e">//	IP V6 address: X&#39;04&#39;
</span><span style="color:#75715e"></span>        <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">DSTADDR</span> = <span style="color:#a6e22e">b</span>[<span style="color:#ae81ff">4</span> : <span style="color:#ae81ff">4</span><span style="color:#f92672">+</span><span style="color:#a6e22e">net</span>.<span style="color:#a6e22e">IPv6len</span>]
	<span style="color:#66d9ef">default</span>:
		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">errors</span>.<span style="color:#a6e22e">New</span>(<span style="color:#e6db74">&#34;IPåœ°å€é”™è¯¯&#34;</span>)
    }

    <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">DSTPORT</span> = <span style="color:#a6e22e">binary</span>.<span style="color:#a6e22e">BigEndian</span>.<span style="color:#a6e22e">Uint16</span>(<span style="color:#a6e22e">b</span>[<span style="color:#a6e22e">n</span><span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>:<span style="color:#a6e22e">n</span>])
    <span style="color:#75715e">// DSTADDRå…¨éƒ¨æ¢æˆIPåœ°å€ï¼Œå¯ä»¥é˜²æ­¢DNSæ±¡æŸ“å’Œå°æ€
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">RAWADDR</span> = <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">net</span>.<span style="color:#a6e22e">TCPAddr</span>{
		<span style="color:#a6e22e">IP</span>:   <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">DSTADDR</span>,
		<span style="color:#a6e22e">Port</span>: int(<span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">DSTPORT</span>),
    }

    <span style="color:#75715e">/**
</span><span style="color:#75715e">    å›åº”å®¢æˆ·ç«¯,å“åº”å®¢æˆ·ç«¯è¿æ¥æˆåŠŸ
</span><span style="color:#75715e">        +----+-----+-------+------+----------+----------+
</span><span style="color:#75715e">        |VER | REP |  RSV  | ATYP | BND.ADDR | BND.PORT |
</span><span style="color:#75715e">        +----+-----+-------+------+----------+----------+
</span><span style="color:#75715e">        | 1  |  1  | X&#39;00&#39; |  1   | Variable |    2     |
</span><span style="color:#75715e">        +----+-----+-------+------+----------+----------+
</span><span style="color:#75715e">    */</span>
	<span style="color:#a6e22e">resp</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">byte</span>{<span style="color:#ae81ff">0x05</span>, <span style="color:#ae81ff">0x00</span>, <span style="color:#ae81ff">0x00</span>, <span style="color:#ae81ff">0x01</span>, <span style="color:#ae81ff">0x00</span>, <span style="color:#ae81ff">0x00</span>, <span style="color:#ae81ff">0x00</span>, <span style="color:#ae81ff">0x00</span>, <span style="color:#ae81ff">0x00</span>, <span style="color:#ae81ff">0x00</span>}
    <span style="color:#a6e22e">conn</span>.<span style="color:#a6e22e">Write</span>(<span style="color:#a6e22e">resp</span>)

    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>


}
</code></pre></div><h4 id="4æœ€åå°†ä¿¡æ¯è¿›è¡Œè½¬å‘å³å¯">ï¼ˆ4ï¼‰æœ€åå°†ä¿¡æ¯è¿›è¡Œè½¬å‘å³å¯</h4>
<p>ä»£ç å®ç°:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-golang" data-lang="golang">    <span style="color:#a6e22e">wg</span> <span style="color:#f92672">:=</span> new(<span style="color:#a6e22e">sync</span>.<span style="color:#a6e22e">WaitGroup</span>)
    <span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Add</span>(<span style="color:#ae81ff">2</span>)

    <span style="color:#66d9ef">go</span> <span style="color:#66d9ef">func</span>() {
		<span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Done</span>()
		<span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">dstServer</span>.<span style="color:#a6e22e">Close</span>()
        <span style="color:#a6e22e">io</span>.<span style="color:#a6e22e">Copy</span>(<span style="color:#a6e22e">dstServer</span>, <span style="color:#a6e22e">client</span>)
    }()

    <span style="color:#66d9ef">go</span> <span style="color:#66d9ef">func</span>() {
		<span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Done</span>()
        <span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">client</span>.<span style="color:#a6e22e">Close</span>()
        <span style="color:#a6e22e">io</span>.<span style="color:#a6e22e">Copy</span>(<span style="color:#a6e22e">client</span>, <span style="color:#a6e22e">dstServer</span>)
    }()

    <span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Wait</span>()
</code></pre></div>
</content>
<p>
  
  <a href="https://sdttttt.github.io/tags/network-protocol/">#network protocol</a>
  
</p>

  </main>
  <footer>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.0/dist/gitalk.css">
  <script src="https://cdn.jsdelivr.net/npm/gitalk@1.7.0/dist/gitalk.min.js"></script>

<div id="gitalk-container"></div>

<script>
    var gitalk = new Gitalk({
  clientID: '747ab8530477531c3d25',
  clientSecret: 'af2cc18e4c27998636a6a3c82af0064f38574170',
  repo: 'sdttttt.github.io',
  owner: 'sdttttt',
  admin: ['sdttttt'],
  id: location.pathname,      
  distractionFreeMode: true  
})

gitalk.render('gitalk-container')
</script>

<a href="https://github.com/janraasch/hugo-bearblog/">Hugo Ê•â€¢á´¥â€¢Ê”</a>


</footer>

    
</body>

</html>
